var uh=Object.defineProperty;var dh=(e,t,n)=>t in e?uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var du=(e,t,n)=>(dh(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var IS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ch(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uf={exports:{}},Js={},df={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=Symbol.for("react.element"),fh=Symbol.for("react.portal"),ph=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),gh=Symbol.for("react.provider"),xh=Symbol.for("react.context"),yh=Symbol.for("react.forward_ref"),vh=Symbol.for("react.suspense"),wh=Symbol.for("react.memo"),kh=Symbol.for("react.lazy"),cu=Symbol.iterator;function Ch(e){return e===null||typeof e!="object"?null:(e=cu&&e[cu]||e["@@iterator"],typeof e=="function"?e:null)}var cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ff=Object.assign,pf={};function Tr(e,t,n){this.props=e,this.context=t,this.refs=pf,this.updater=n||cf}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hf(){}hf.prototype=Tr.prototype;function oa(e,t,n){this.props=e,this.context=t,this.refs=pf,this.updater=n||cf}var sa=oa.prototype=new hf;sa.constructor=oa;ff(sa,Tr.prototype);sa.isPureReactComponent=!0;var fu=Array.isArray,mf=Object.prototype.hasOwnProperty,ia={current:null},gf={key:!0,ref:!0,__self:!0,__source:!0};function xf(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)mf.call(t,r)&&!gf.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var f=Array(u),c=0;c<u;c++)f[c]=arguments[c+2];o.children=f}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:No,type:e,key:s,ref:i,props:o,_owner:ia.current}}function Sh(e,t){return{$$typeof:No,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function la(e){return typeof e=="object"&&e!==null&&e.$$typeof===No}function Eh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pu=/\/+/g;function yi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Eh(""+e.key):t.toString(36)}function Zo(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case No:case fh:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+yi(i,0):r,fu(o)?(n="",e!=null&&(n=e.replace(pu,"$&/")+"/"),Zo(o,t,n,"",function(c){return c})):o!=null&&(la(o)&&(o=Sh(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(pu,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",fu(e))for(var u=0;u<e.length;u++){s=e[u];var f=r+yi(s,u);i+=Zo(s,t,n,f,o)}else if(f=Ch(e),typeof f=="function")for(e=f.call(e),u=0;!(s=e.next()).done;)s=s.value,f=r+yi(s,u++),i+=Zo(s,t,n,f,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Po(e,t,n){if(e==null)return e;var r=[],o=0;return Zo(e,r,"","",function(s){return t.call(n,s,o++)}),r}function Th(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xe={current:null},es={transition:null},Nh={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:es,ReactCurrentOwner:ia};function yf(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Po,forEach:function(e,t,n){Po(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Po(e,function(){t++}),t},toArray:function(e){return Po(e,function(t){return t})||[]},only:function(e){if(!la(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=Tr;pe.Fragment=ph;pe.Profiler=mh;pe.PureComponent=oa;pe.StrictMode=hh;pe.Suspense=vh;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nh;pe.act=yf;pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ff({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=ia.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)mf.call(t,f)&&!gf.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){u=Array(f);for(var c=0;c<f;c++)u[c]=arguments[c+2];r.children=u}return{$$typeof:No,type:e.type,key:o,ref:s,props:r,_owner:i}};pe.createContext=function(e){return e={$$typeof:xh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gh,_context:e},e.Consumer=e};pe.createElement=xf;pe.createFactory=function(e){var t=xf.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:yh,render:e}};pe.isValidElement=la;pe.lazy=function(e){return{$$typeof:kh,_payload:{_status:-1,_result:e},_init:Th}};pe.memo=function(e,t){return{$$typeof:wh,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=es.transition;es.transition={};try{e()}finally{es.transition=t}};pe.unstable_act=yf;pe.useCallback=function(e,t){return Xe.current.useCallback(e,t)};pe.useContext=function(e){return Xe.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return Xe.current.useDeferredValue(e)};pe.useEffect=function(e,t){return Xe.current.useEffect(e,t)};pe.useId=function(){return Xe.current.useId()};pe.useImperativeHandle=function(e,t,n){return Xe.current.useImperativeHandle(e,t,n)};pe.useInsertionEffect=function(e,t){return Xe.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return Xe.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return Xe.current.useMemo(e,t)};pe.useReducer=function(e,t,n){return Xe.current.useReducer(e,t,n)};pe.useRef=function(e){return Xe.current.useRef(e)};pe.useState=function(e){return Xe.current.useState(e)};pe.useSyncExternalStore=function(e,t,n){return Xe.current.useSyncExternalStore(e,t,n)};pe.useTransition=function(){return Xe.current.useTransition()};pe.version="18.3.1";df.exports=pe;var _=df.exports;const hs=ch(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _h=_,bh=Symbol.for("react.element"),Ih=Symbol.for("react.fragment"),Ah=Object.prototype.hasOwnProperty,Rh=_h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mh={key:!0,ref:!0,__self:!0,__source:!0};function vf(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Ah.call(t,r)&&!Mh.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:bh,type:e,key:s,ref:i,props:o,_owner:Rh.current}}Js.Fragment=Ih;Js.jsx=vf;Js.jsxs=vf;uf.exports=Js;var a=uf.exports,Zi={},wf={exports:{}},pt={},kf={exports:{}},Cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,U){var G=M.length;M.push(U);e:for(;0<G;){var se=G-1>>>1,te=M[se];if(0<o(te,U))M[se]=U,M[G]=te,G=se;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],G=M.pop();if(G!==U){M[0]=G;e:for(var se=0,te=M.length,ie=te>>>1;se<ie;){var oe=2*(se+1)-1,Te=M[oe],Ce=oe+1,fe=M[Ce];if(0>o(Te,G))Ce<te&&0>o(fe,Te)?(M[se]=fe,M[Ce]=G,se=Ce):(M[se]=Te,M[oe]=G,se=oe);else if(Ce<te&&0>o(fe,G))M[se]=fe,M[Ce]=G,se=Ce;else break e}}return U}function o(M,U){var G=M.sortIndex-U.sortIndex;return G!==0?G:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,u=i.now();e.unstable_now=function(){return i.now()-u}}var f=[],c=[],p=1,m=null,h=3,y=!1,w=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(M){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=M)r(c),U.sortIndex=U.expirationTime,t(f,U);else break;U=n(c)}}function T(M){if(E=!1,g(M),!w)if(n(f)!==null)w=!0,B(N);else{var U=n(c);U!==null&&q(T,U.startTime-M)}}function N(M,U){w=!1,E&&(E=!1,x(A),A=-1),y=!0;var G=h;try{for(g(U),m=n(f);m!==null&&(!(m.expirationTime>U)||M&&!P());){var se=m.callback;if(typeof se=="function"){m.callback=null,h=m.priorityLevel;var te=se(m.expirationTime<=U);U=e.unstable_now(),typeof te=="function"?m.callback=te:m===n(f)&&r(f),g(U)}else r(f);m=n(f)}if(m!==null)var ie=!0;else{var oe=n(c);oe!==null&&q(T,oe.startTime-U),ie=!1}return ie}finally{m=null,h=G,y=!1}}var S=!1,k=null,A=-1,R=5,C=-1;function P(){return!(e.unstable_now()-C<R)}function $(){if(k!==null){var M=e.unstable_now();C=M;var U=!0;try{U=k(!0,M)}finally{U?j():(S=!1,k=null)}}else S=!1}var j;if(typeof v=="function")j=function(){v($)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,V=I.port2;I.port1.onmessage=$,j=function(){V.postMessage(null)}}else j=function(){b($,0)};function B(M){k=M,S||(S=!0,j())}function q(M,U){A=b(function(){M(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,B(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var G=h;h=U;try{return M()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=h;h=M;try{return U()}finally{h=G}},e.unstable_scheduleCallback=function(M,U,G){var se=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?se+G:se):G=se,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=G+te,M={id:p++,callback:U,priorityLevel:M,startTime:G,expirationTime:te,sortIndex:-1},G>se?(M.sortIndex=G,t(c,M),n(f)===null&&M===n(c)&&(E?(x(A),A=-1):E=!0,q(T,G-se))):(M.sortIndex=te,t(f,M),w||y||(w=!0,B(N))),M},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(M){var U=h;return function(){var G=h;h=U;try{return M.apply(this,arguments)}finally{h=G}}}})(Cf);kf.exports=Cf;var Ph=kf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=_,ft=Ph;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sf=new Set,lo={};function Bn(e,t){xr(e,t),xr(e+"Capture",t)}function xr(e,t){for(lo[e]=t,e=0;e<t.length;e++)Sf.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),el=Object.prototype.hasOwnProperty,Dh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hu={},mu={};function Uh(e){return el.call(mu,e)?!0:el.call(hu,e)?!1:Dh.test(e)?mu[e]=!0:(hu[e]=!0,!1)}function Fh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vh(e,t,n,r){if(t===null||typeof t>"u"||Fh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var aa=/[\-:]([a-z])/g;function ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aa,ua);He[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aa,ua);He[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aa,ua);He[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function da(e,t,n,r){var o=He.hasOwnProperty(t)?He[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vh(t,n,o,r)&&(n=null),r||o===null?Uh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yt=Lh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lo=Symbol.for("react.element"),On=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),ca=Symbol.for("react.strict_mode"),tl=Symbol.for("react.profiler"),Ef=Symbol.for("react.provider"),Tf=Symbol.for("react.context"),fa=Symbol.for("react.forward_ref"),nl=Symbol.for("react.suspense"),rl=Symbol.for("react.suspense_list"),pa=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),Nf=Symbol.for("react.offscreen"),gu=Symbol.iterator;function Dr(e){return e===null||typeof e!="object"?null:(e=gu&&e[gu]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,vi;function zr(e){if(vi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vi=t&&t[1]||""}return`
`+vi+e}var wi=!1;function ki(e,t){if(!e||wi)return"";wi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,u=s.length-1;1<=i&&0<=u&&o[i]!==s[u];)u--;for(;1<=i&&0<=u;i--,u--)if(o[i]!==s[u]){if(i!==1||u!==1)do if(i--,u--,0>u||o[i]!==s[u]){var f=`
`+o[i].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=i&&0<=u);break}}}finally{wi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zr(e):""}function jh(e){switch(e.tag){case 5:return zr(e.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 2:case 15:return e=ki(e.type,!1),e;case 11:return e=ki(e.type.render,!1),e;case 1:return e=ki(e.type,!0),e;default:return""}}function ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case On:return"Portal";case tl:return"Profiler";case ca:return"StrictMode";case nl:return"Suspense";case rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Tf:return(e.displayName||"Context")+".Consumer";case Ef:return(e._context.displayName||"Context")+".Provider";case fa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pa:return t=e.displayName||null,t!==null?t:ol(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return ol(e(t))}catch{}}return null}function $h(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(t);case 8:return t===ca?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _f(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gh(e){var t=_f(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Do(e){e._valueTracker||(e._valueTracker=Gh(e))}function bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_f(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sl(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function xu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function If(e,t){t=t.checked,t!=null&&da(e,"checked",t,!1)}function il(e,t){If(e,t);var n=xn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ll(e,t.type,n):t.hasOwnProperty("defaultValue")&&ll(e,t.type,xn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ll(e,t,n){(t!=="number"||ms(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Jr=Array.isArray;function lr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function al(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(Jr(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xn(n)}}function Af(e,t){var n=xn(t.value),r=xn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function wu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Uo,Mf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Uo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ao(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bh=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(e){Bh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kr[t]=Kr[e]})});function Pf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kr.hasOwnProperty(e)&&Kr[e]?(""+t).trim():t+"px"}function Lf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Pf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Hh=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(Hh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function ha(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,ar=null,ur=null;function ku(e){if(e=Io(e)){if(typeof pl!="function")throw Error(H(280));var t=e.stateNode;t&&(t=Qs(t),pl(e.stateNode,e.type,t))}}function Df(e){ar?ur?ur.push(e):ur=[e]:ar=e}function Uf(){if(ar){var e=ar,t=ur;if(ur=ar=null,ku(e),t)for(e=0;e<t.length;e++)ku(t[e])}}function Ff(e,t){return e(t)}function Vf(){}var Ci=!1;function jf(e,t,n){if(Ci)return e(t,n);Ci=!0;try{return Ff(e,t,n)}finally{Ci=!1,(ar!==null||ur!==null)&&(Vf(),Uf())}}function uo(e,t){var n=e.stateNode;if(n===null)return null;var r=Qs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var hl=!1;if(qt)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){hl=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{hl=!1}function qh(e,t,n,r,o,s,i,u,f){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(p){this.onError(p)}}var Yr=!1,gs=null,xs=!1,ml=null,zh={onError:function(e){Yr=!0,gs=e}};function Jh(e,t,n,r,o,s,i,u,f){Yr=!1,gs=null,qh.apply(zh,arguments)}function Oh(e,t,n,r,o,s,i,u,f){if(Jh.apply(this,arguments),Yr){if(Yr){var c=gs;Yr=!1,gs=null}else throw Error(H(198));xs||(xs=!0,ml=c)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cu(e){if(Hn(e)!==e)throw Error(H(188))}function Wh(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Cu(o),e;if(s===r)return Cu(o),t;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,u=o.child;u;){if(u===n){i=!0,n=o,r=s;break}if(u===r){i=!0,r=o,n=s;break}u=u.sibling}if(!i){for(u=s.child;u;){if(u===n){i=!0,n=s,r=o;break}if(u===r){i=!0,r=s,n=o;break}u=u.sibling}if(!i)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function Gf(e){return e=Wh(e),e!==null?Bf(e):null}function Bf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bf(e);if(t!==null)return t;e=e.sibling}return null}var Hf=ft.unstable_scheduleCallback,Su=ft.unstable_cancelCallback,Kh=ft.unstable_shouldYield,Yh=ft.unstable_requestPaint,Re=ft.unstable_now,Qh=ft.unstable_getCurrentPriorityLevel,ma=ft.unstable_ImmediatePriority,qf=ft.unstable_UserBlockingPriority,ys=ft.unstable_NormalPriority,Xh=ft.unstable_LowPriority,zf=ft.unstable_IdlePriority,Os=null,Dt=null;function Zh(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Os,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:nm,em=Math.log,tm=Math.LN2;function nm(e){return e>>>=0,e===0?32:31-(em(e)/tm|0)|0}var Fo=64,Vo=4194304;function Or(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var u=i&~o;u!==0?r=Or(u):(s&=i,s!==0&&(r=Or(s)))}else i=n&~o,i!==0?r=Or(i):s!==0&&(r=Or(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nt(t),o=1<<n,r|=e[n],t&=~o;return r}function rm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function om(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Nt(s),u=1<<i,f=o[i];f===-1?(!(u&n)||u&r)&&(o[i]=rm(u,t)):f<=t&&(e.expiredLanes|=u),s&=~u}}function gl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jf(){var e=Fo;return Fo<<=1,!(Fo&4194240)&&(Fo=64),e}function Si(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _o(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function sm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Nt(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function ga(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var xe=0;function Of(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wf,xa,Kf,Yf,Qf,xl=!1,jo=[],un=null,dn=null,cn=null,co=new Map,fo=new Map,rn=[],im="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eu(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":co.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(t.pointerId)}}function Fr(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Io(t),t!==null&&xa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function lm(e,t,n,r,o){switch(t){case"focusin":return un=Fr(un,e,t,n,r,o),!0;case"dragenter":return dn=Fr(dn,e,t,n,r,o),!0;case"mouseover":return cn=Fr(cn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return co.set(s,Fr(co.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,fo.set(s,Fr(fo.get(s)||null,e,t,n,r,o)),!0}return!1}function Xf(e){var t=In(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=$f(n),t!==null){e.blockedOn=t,Qf(e.priority,function(){Kf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ts(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fl=r,n.target.dispatchEvent(r),fl=null}else return t=Io(n),t!==null&&xa(t),e.blockedOn=n,!1;t.shift()}return!0}function Tu(e,t,n){ts(e)&&n.delete(t)}function am(){xl=!1,un!==null&&ts(un)&&(un=null),dn!==null&&ts(dn)&&(dn=null),cn!==null&&ts(cn)&&(cn=null),co.forEach(Tu),fo.forEach(Tu)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,xl||(xl=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,am)))}function po(e){function t(o){return Vr(o,e)}if(0<jo.length){Vr(jo[0],e);for(var n=1;n<jo.length;n++){var r=jo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Vr(un,e),dn!==null&&Vr(dn,e),cn!==null&&Vr(cn,e),co.forEach(t),fo.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Xf(n),n.blockedOn===null&&rn.shift()}var dr=Yt.ReactCurrentBatchConfig,ws=!0;function um(e,t,n,r){var o=xe,s=dr.transition;dr.transition=null;try{xe=1,ya(e,t,n,r)}finally{xe=o,dr.transition=s}}function dm(e,t,n,r){var o=xe,s=dr.transition;dr.transition=null;try{xe=4,ya(e,t,n,r)}finally{xe=o,dr.transition=s}}function ya(e,t,n,r){if(ws){var o=yl(e,t,n,r);if(o===null)Pi(e,t,r,ks,n),Eu(e,r);else if(lm(o,e,t,n,r))r.stopPropagation();else if(Eu(e,r),t&4&&-1<im.indexOf(e)){for(;o!==null;){var s=Io(o);if(s!==null&&Wf(s),s=yl(e,t,n,r),s===null&&Pi(e,t,r,ks,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Pi(e,t,r,null,n)}}var ks=null;function yl(e,t,n,r){if(ks=null,e=ha(r),e=In(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$f(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ks=e,null}function Zf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qh()){case ma:return 1;case qf:return 4;case ys:case Xh:return 16;case zf:return 536870912;default:return 16}default:return 16}}var sn=null,va=null,ns=null;function ep(){if(ns)return ns;var e,t=va,n=t.length,r,o="value"in sn?sn.value:sn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return ns=o.slice(e,1<r?1-r:void 0)}function rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $o(){return!0}function Nu(){return!1}function ht(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$o:Nu,this.isPropagationStopped=Nu,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),t}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=ht(Nr),bo=Ie({},Nr,{view:0,detail:0}),cm=ht(bo),Ei,Ti,jr,Ws=Ie({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Ei=e.screenX-jr.screenX,Ti=e.screenY-jr.screenY):Ti=Ei=0,jr=e),Ei)},movementY:function(e){return"movementY"in e?e.movementY:Ti}}),_u=ht(Ws),fm=Ie({},Ws,{dataTransfer:0}),pm=ht(fm),hm=Ie({},bo,{relatedTarget:0}),Ni=ht(hm),mm=Ie({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),gm=ht(mm),xm=Ie({},Nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ym=ht(xm),vm=Ie({},Nr,{data:0}),bu=ht(vm),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cm[e])?!!t[e]:!1}function ka(){return Sm}var Em=Ie({},bo,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?km[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ka,charCode:function(e){return e.type==="keypress"?rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tm=ht(Em),Nm=Ie({},Ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iu=ht(Nm),_m=Ie({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ka}),bm=ht(_m),Im=Ie({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Am=ht(Im),Rm=Ie({},Ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mm=ht(Rm),Pm=[9,13,27,32],Ca=qt&&"CompositionEvent"in window,Qr=null;qt&&"documentMode"in document&&(Qr=document.documentMode);var Lm=qt&&"TextEvent"in window&&!Qr,tp=qt&&(!Ca||Qr&&8<Qr&&11>=Qr),Au=String.fromCharCode(32),Ru=!1;function np(e,t){switch(e){case"keyup":return Pm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Dm(e,t){switch(e){case"compositionend":return rp(t);case"keypress":return t.which!==32?null:(Ru=!0,Au);case"textInput":return e=t.data,e===Au&&Ru?null:e;default:return null}}function Um(e,t){if(Kn)return e==="compositionend"||!Ca&&np(e,t)?(e=ep(),ns=va=sn=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tp&&t.locale!=="ko"?null:t.data;default:return null}}var Fm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fm[e.type]:t==="textarea"}function op(e,t,n,r){Df(r),t=Cs(t,"onChange"),0<t.length&&(n=new wa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xr=null,ho=null;function Vm(e){mp(e,0)}function Ks(e){var t=Xn(e);if(bf(t))return e}function jm(e,t){if(e==="change")return t}var sp=!1;if(qt){var _i;if(qt){var bi="oninput"in document;if(!bi){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),bi=typeof Pu.oninput=="function"}_i=bi}else _i=!1;sp=_i&&(!document.documentMode||9<document.documentMode)}function Lu(){Xr&&(Xr.detachEvent("onpropertychange",ip),ho=Xr=null)}function ip(e){if(e.propertyName==="value"&&Ks(ho)){var t=[];op(t,ho,e,ha(e)),jf(Vm,t)}}function $m(e,t,n){e==="focusin"?(Lu(),Xr=t,ho=n,Xr.attachEvent("onpropertychange",ip)):e==="focusout"&&Lu()}function Gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(ho)}function Bm(e,t){if(e==="click")return Ks(t)}function Hm(e,t){if(e==="input"||e==="change")return Ks(t)}function qm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:qm;function mo(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!el.call(t,o)||!bt(e[o],t[o]))return!1}return!0}function Du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uu(e,t){var n=Du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Du(n)}}function lp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ap(){for(var e=window,t=ms();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ms(e.document)}return t}function Sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zm(e){var t=ap(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lp(n.ownerDocument.documentElement,n)){if(r!==null&&Sa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Uu(n,s);var i=Uu(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jm=qt&&"documentMode"in document&&11>=document.documentMode,Yn=null,vl=null,Zr=null,wl=!1;function Fu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wl||Yn==null||Yn!==ms(r)||(r=Yn,"selectionStart"in r&&Sa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zr&&mo(Zr,r)||(Zr=r,r=Cs(vl,"onSelect"),0<r.length&&(t=new wa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yn)))}function Go(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qn={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},Ii={},up={};qt&&(up=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function Ys(e){if(Ii[e])return Ii[e];if(!Qn[e])return e;var t=Qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in up)return Ii[e]=t[n];return e}var dp=Ys("animationend"),cp=Ys("animationiteration"),fp=Ys("animationstart"),pp=Ys("transitionend"),hp=new Map,Vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,t){hp.set(e,t),Bn(t,[e])}for(var Ai=0;Ai<Vu.length;Ai++){var Ri=Vu[Ai],Om=Ri.toLowerCase(),Wm=Ri[0].toUpperCase()+Ri.slice(1);vn(Om,"on"+Wm)}vn(dp,"onAnimationEnd");vn(cp,"onAnimationIteration");vn(fp,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(pp,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Km=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function ju(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Oh(r,t,void 0,e),e.currentTarget=null}function mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var u=r[i],f=u.instance,c=u.currentTarget;if(u=u.listener,f!==s&&o.isPropagationStopped())break e;ju(o,u,c),s=f}else for(i=0;i<r.length;i++){if(u=r[i],f=u.instance,c=u.currentTarget,u=u.listener,f!==s&&o.isPropagationStopped())break e;ju(o,u,c),s=f}}}if(xs)throw e=ml,xs=!1,ml=null,e}function ve(e,t){var n=t[Tl];n===void 0&&(n=t[Tl]=new Set);var r=e+"__bubble";n.has(r)||(gp(t,e,2,!1),n.add(r))}function Mi(e,t,n){var r=0;t&&(r|=4),gp(n,e,r,t)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function go(e){if(!e[Bo]){e[Bo]=!0,Sf.forEach(function(n){n!=="selectionchange"&&(Km.has(n)||Mi(n,!1,e),Mi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bo]||(t[Bo]=!0,Mi("selectionchange",!1,t))}}function gp(e,t,n,r){switch(Zf(t)){case 1:var o=um;break;case 4:o=dm;break;default:o=ya}n=o.bind(null,t,n,e),o=void 0,!hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Pi(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var f=i.tag;if((f===3||f===4)&&(f=i.stateNode.containerInfo,f===o||f.nodeType===8&&f.parentNode===o))return;i=i.return}for(;u!==null;){if(i=In(u),i===null)return;if(f=i.tag,f===5||f===6){r=s=i;continue e}u=u.parentNode}}r=r.return}jf(function(){var c=s,p=ha(n),m=[];e:{var h=hp.get(e);if(h!==void 0){var y=wa,w=e;switch(e){case"keypress":if(rs(n)===0)break e;case"keydown":case"keyup":y=Tm;break;case"focusin":w="focus",y=Ni;break;case"focusout":w="blur",y=Ni;break;case"beforeblur":case"afterblur":y=Ni;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=bm;break;case dp:case cp:case fp:y=gm;break;case pp:y=Am;break;case"scroll":y=cm;break;case"wheel":y=Mm;break;case"copy":case"cut":case"paste":y=ym;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Iu}var E=(t&4)!==0,b=!E&&e==="scroll",x=E?h!==null?h+"Capture":null:h;E=[];for(var v=c,g;v!==null;){g=v;var T=g.stateNode;if(g.tag===5&&T!==null&&(g=T,x!==null&&(T=uo(v,x),T!=null&&E.push(xo(v,T,g)))),b)break;v=v.return}0<E.length&&(h=new y(h,w,null,n,p),m.push({event:h,listeners:E}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==fl&&(w=n.relatedTarget||n.fromElement)&&(In(w)||w[zt]))break e;if((y||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?In(w):null,w!==null&&(b=Hn(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(E=_u,T="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(E=Iu,T="onPointerLeave",x="onPointerEnter",v="pointer"),b=y==null?h:Xn(y),g=w==null?h:Xn(w),h=new E(T,v+"leave",y,n,p),h.target=b,h.relatedTarget=g,T=null,In(p)===c&&(E=new E(x,v+"enter",w,n,p),E.target=g,E.relatedTarget=b,T=E),b=T,y&&w)t:{for(E=y,x=w,v=0,g=E;g;g=zn(g))v++;for(g=0,T=x;T;T=zn(T))g++;for(;0<v-g;)E=zn(E),v--;for(;0<g-v;)x=zn(x),g--;for(;v--;){if(E===x||x!==null&&E===x.alternate)break t;E=zn(E),x=zn(x)}E=null}else E=null;y!==null&&$u(m,h,y,E,!1),w!==null&&b!==null&&$u(m,b,w,E,!0)}}e:{if(h=c?Xn(c):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var N=jm;else if(Mu(h))if(sp)N=Hm;else{N=Gm;var S=$m}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Bm);if(N&&(N=N(e,c))){op(m,N,n,p);break e}S&&S(e,h,c),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&ll(h,"number",h.value)}switch(S=c?Xn(c):window,e){case"focusin":(Mu(S)||S.contentEditable==="true")&&(Yn=S,vl=c,Zr=null);break;case"focusout":Zr=vl=Yn=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,Fu(m,n,p);break;case"selectionchange":if(Jm)break;case"keydown":case"keyup":Fu(m,n,p)}var k;if(Ca)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Kn?np(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(tp&&n.locale!=="ko"&&(Kn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Kn&&(k=ep()):(sn=p,va="value"in sn?sn.value:sn.textContent,Kn=!0)),S=Cs(c,A),0<S.length&&(A=new bu(A,e,null,n,p),m.push({event:A,listeners:S}),k?A.data=k:(k=rp(n),k!==null&&(A.data=k)))),(k=Lm?Dm(e,n):Um(e,n))&&(c=Cs(c,"onBeforeInput"),0<c.length&&(p=new bu("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:c}),p.data=k))}mp(m,t)})}function xo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cs(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=uo(e,n),s!=null&&r.unshift(xo(e,s,o)),s=uo(e,t),s!=null&&r.push(xo(e,s,o))),e=e.return}return r}function zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $u(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var u=n,f=u.alternate,c=u.stateNode;if(f!==null&&f===r)break;u.tag===5&&c!==null&&(u=c,o?(f=uo(n,s),f!=null&&i.unshift(xo(n,f,u))):o||(f=uo(n,s),f!=null&&i.push(xo(n,f,u)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Ym=/\r\n?/g,Qm=/\u0000|\uFFFD/g;function Gu(e){return(typeof e=="string"?e:""+e).replace(Ym,`
`).replace(Qm,"")}function Ho(e,t,n){if(t=Gu(t),Gu(e)!==t&&n)throw Error(H(425))}function Ss(){}var kl=null,Cl=null;function Sl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var El=typeof setTimeout=="function"?setTimeout:void 0,Xm=typeof clearTimeout=="function"?clearTimeout:void 0,Bu=typeof Promise=="function"?Promise:void 0,Zm=typeof queueMicrotask=="function"?queueMicrotask:typeof Bu<"u"?function(e){return Bu.resolve(null).then(e).catch(eg)}:El;function eg(e){setTimeout(function(){throw e})}function Li(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),po(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);po(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _r=Math.random().toString(36).slice(2),Pt="__reactFiber$"+_r,yo="__reactProps$"+_r,zt="__reactContainer$"+_r,Tl="__reactEvents$"+_r,tg="__reactListeners$"+_r,ng="__reactHandles$"+_r;function In(e){var t=e[Pt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[Pt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hu(e);e!==null;){if(n=e[Pt])return n;e=Hu(e)}return t}e=n,n=e.parentNode}return null}function Io(e){return e=e[Pt]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function Qs(e){return e[yo]||null}var Nl=[],Zn=-1;function wn(e){return{current:e}}function ke(e){0>Zn||(e.current=Nl[Zn],Nl[Zn]=null,Zn--)}function ye(e,t){Zn++,Nl[Zn]=e.current,e.current=t}var yn={},We=wn(yn),it=wn(!1),Fn=yn;function yr(e,t){var n=e.type.contextTypes;if(!n)return yn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function lt(e){return e=e.childContextTypes,e!=null}function Es(){ke(it),ke(We)}function qu(e,t,n){if(We.current!==yn)throw Error(H(168));ye(We,t),ye(it,n)}function xp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(H(108,$h(e)||"Unknown",o));return Ie({},n,r)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yn,Fn=We.current,ye(We,e),ye(it,it.current),!0}function zu(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=xp(e,t,Fn),r.__reactInternalMemoizedMergedChildContext=e,ke(it),ke(We),ye(We,e)):ke(it),ye(it,n)}var jt=null,Xs=!1,Di=!1;function yp(e){jt===null?jt=[e]:jt.push(e)}function rg(e){Xs=!0,yp(e)}function kn(){if(!Di&&jt!==null){Di=!0;var e=0,t=xe;try{var n=jt;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jt=null,Xs=!1}catch(o){throw jt!==null&&(jt=jt.slice(e+1)),Hf(ma,kn),o}finally{xe=t,Di=!1}}return null}var er=[],tr=0,Ns=null,_s=0,mt=[],gt=0,Vn=null,Gt=1,Bt="";function _n(e,t){er[tr++]=_s,er[tr++]=Ns,Ns=e,_s=t}function vp(e,t,n){mt[gt++]=Gt,mt[gt++]=Bt,mt[gt++]=Vn,Vn=e;var r=Gt;e=Bt;var o=32-Nt(r)-1;r&=~(1<<o),n+=1;var s=32-Nt(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Gt=1<<32-Nt(t)+o|n<<o|r,Bt=s+e}else Gt=1<<s|n<<o|r,Bt=e}function Ea(e){e.return!==null&&(_n(e,1),vp(e,1,0))}function Ta(e){for(;e===Ns;)Ns=er[--tr],er[tr]=null,_s=er[--tr],er[tr]=null;for(;e===Vn;)Vn=mt[--gt],mt[gt]=null,Bt=mt[--gt],mt[gt]=null,Gt=mt[--gt],mt[gt]=null}var ct=null,dt=null,Ee=!1,Tt=null;function wp(e,t){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ct=e,dt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ct=e,dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:Gt,overflow:Bt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ct=e,dt=null,!0):!1;default:return!1}}function _l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(Ee){var t=dt;if(t){var n=t;if(!Ju(e,t)){if(_l(e))throw Error(H(418));t=fn(n.nextSibling);var r=ct;t&&Ju(e,t)?wp(r,n):(e.flags=e.flags&-4097|2,Ee=!1,ct=e)}}else{if(_l(e))throw Error(H(418));e.flags=e.flags&-4097|2,Ee=!1,ct=e}}}function Ou(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ct=e}function qo(e){if(e!==ct)return!1;if(!Ee)return Ou(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sl(e.type,e.memoizedProps)),t&&(t=dt)){if(_l(e))throw kp(),Error(H(418));for(;t;)wp(e,t),t=fn(t.nextSibling)}if(Ou(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){dt=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}dt=null}}else dt=ct?fn(e.stateNode.nextSibling):null;return!0}function kp(){for(var e=dt;e;)e=fn(e.nextSibling)}function vr(){dt=ct=null,Ee=!1}function Na(e){Tt===null?Tt=[e]:Tt.push(e)}var og=Yt.ReactCurrentBatchConfig;function $r(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var u=o.refs;i===null?delete u[s]:u[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function zo(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wu(e){var t=e._init;return t(e._payload)}function Cp(e){function t(x,v){if(e){var g=x.deletions;g===null?(x.deletions=[v],x.flags|=16):g.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function o(x,v){return x=gn(x,v),x.index=0,x.sibling=null,x}function s(x,v,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<v?(x.flags|=2,v):g):(x.flags|=2,v)):(x.flags|=1048576,v)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function u(x,v,g,T){return v===null||v.tag!==6?(v=Bi(g,x.mode,T),v.return=x,v):(v=o(v,g),v.return=x,v)}function f(x,v,g,T){var N=g.type;return N===Wn?p(x,v,g.props.children,T,g.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===tn&&Wu(N)===v.type)?(T=o(v,g.props),T.ref=$r(x,v,g),T.return=x,T):(T=ds(g.type,g.key,g.props,null,x.mode,T),T.ref=$r(x,v,g),T.return=x,T)}function c(x,v,g,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==g.containerInfo||v.stateNode.implementation!==g.implementation?(v=Hi(g,x.mode,T),v.return=x,v):(v=o(v,g.children||[]),v.return=x,v)}function p(x,v,g,T,N){return v===null||v.tag!==7?(v=Pn(g,x.mode,T,N),v.return=x,v):(v=o(v,g),v.return=x,v)}function m(x,v,g){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Bi(""+v,x.mode,g),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lo:return g=ds(v.type,v.key,v.props,null,x.mode,g),g.ref=$r(x,null,v),g.return=x,g;case On:return v=Hi(v,x.mode,g),v.return=x,v;case tn:var T=v._init;return m(x,T(v._payload),g)}if(Jr(v)||Dr(v))return v=Pn(v,x.mode,g,null),v.return=x,v;zo(x,v)}return null}function h(x,v,g,T){var N=v!==null?v.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:u(x,v,""+g,T);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Lo:return g.key===N?f(x,v,g,T):null;case On:return g.key===N?c(x,v,g,T):null;case tn:return N=g._init,h(x,v,N(g._payload),T)}if(Jr(g)||Dr(g))return N!==null?null:p(x,v,g,T,null);zo(x,g)}return null}function y(x,v,g,T,N){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(g)||null,u(v,x,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Lo:return x=x.get(T.key===null?g:T.key)||null,f(v,x,T,N);case On:return x=x.get(T.key===null?g:T.key)||null,c(v,x,T,N);case tn:var S=T._init;return y(x,v,g,S(T._payload),N)}if(Jr(T)||Dr(T))return x=x.get(g)||null,p(v,x,T,N,null);zo(v,T)}return null}function w(x,v,g,T){for(var N=null,S=null,k=v,A=v=0,R=null;k!==null&&A<g.length;A++){k.index>A?(R=k,k=null):R=k.sibling;var C=h(x,k,g[A],T);if(C===null){k===null&&(k=R);break}e&&k&&C.alternate===null&&t(x,k),v=s(C,v,A),S===null?N=C:S.sibling=C,S=C,k=R}if(A===g.length)return n(x,k),Ee&&_n(x,A),N;if(k===null){for(;A<g.length;A++)k=m(x,g[A],T),k!==null&&(v=s(k,v,A),S===null?N=k:S.sibling=k,S=k);return Ee&&_n(x,A),N}for(k=r(x,k);A<g.length;A++)R=y(k,x,A,g[A],T),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?A:R.key),v=s(R,v,A),S===null?N=R:S.sibling=R,S=R);return e&&k.forEach(function(P){return t(x,P)}),Ee&&_n(x,A),N}function E(x,v,g,T){var N=Dr(g);if(typeof N!="function")throw Error(H(150));if(g=N.call(g),g==null)throw Error(H(151));for(var S=N=null,k=v,A=v=0,R=null,C=g.next();k!==null&&!C.done;A++,C=g.next()){k.index>A?(R=k,k=null):R=k.sibling;var P=h(x,k,C.value,T);if(P===null){k===null&&(k=R);break}e&&k&&P.alternate===null&&t(x,k),v=s(P,v,A),S===null?N=P:S.sibling=P,S=P,k=R}if(C.done)return n(x,k),Ee&&_n(x,A),N;if(k===null){for(;!C.done;A++,C=g.next())C=m(x,C.value,T),C!==null&&(v=s(C,v,A),S===null?N=C:S.sibling=C,S=C);return Ee&&_n(x,A),N}for(k=r(x,k);!C.done;A++,C=g.next())C=y(k,x,A,C.value,T),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?A:C.key),v=s(C,v,A),S===null?N=C:S.sibling=C,S=C);return e&&k.forEach(function($){return t(x,$)}),Ee&&_n(x,A),N}function b(x,v,g,T){if(typeof g=="object"&&g!==null&&g.type===Wn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Lo:e:{for(var N=g.key,S=v;S!==null;){if(S.key===N){if(N=g.type,N===Wn){if(S.tag===7){n(x,S.sibling),v=o(S,g.props.children),v.return=x,x=v;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===tn&&Wu(N)===S.type){n(x,S.sibling),v=o(S,g.props),v.ref=$r(x,S,g),v.return=x,x=v;break e}n(x,S);break}else t(x,S);S=S.sibling}g.type===Wn?(v=Pn(g.props.children,x.mode,T,g.key),v.return=x,x=v):(T=ds(g.type,g.key,g.props,null,x.mode,T),T.ref=$r(x,v,g),T.return=x,x=T)}return i(x);case On:e:{for(S=g.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===g.containerInfo&&v.stateNode.implementation===g.implementation){n(x,v.sibling),v=o(v,g.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Hi(g,x.mode,T),v.return=x,x=v}return i(x);case tn:return S=g._init,b(x,v,S(g._payload),T)}if(Jr(g))return w(x,v,g,T);if(Dr(g))return E(x,v,g,T);zo(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,v!==null&&v.tag===6?(n(x,v.sibling),v=o(v,g),v.return=x,x=v):(n(x,v),v=Bi(g,x.mode,T),v.return=x,x=v),i(x)):n(x,v)}return b}var wr=Cp(!0),Sp=Cp(!1),bs=wn(null),Is=null,nr=null,_a=null;function ba(){_a=nr=Is=null}function Ia(e){var t=bs.current;ke(bs),e._currentValue=t}function Il(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cr(e,t){Is=e,_a=nr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(st=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},nr===null){if(Is===null)throw Error(H(308));nr=e,Is.dependencies={lanes:0,firstContext:e}}else nr=nr.next=e;return t}var An=null;function Aa(e){An===null?An=[e]:An.push(e)}function Ep(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Aa(t)):(n.next=o.next,o.next=n),t.interleaved=n,Jt(e,r)}function Jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nn=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Jt(e,n)}return o=r.interleaved,o===null?(t.next=t,Aa(r)):(t.next=o.next,o.next=t),r.interleaved=t,Jt(e,n)}function os(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ga(e,n)}}function Ku(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function As(e,t,n,r){var o=e.updateQueue;nn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var f=u,c=f.next;f.next=null,i===null?s=c:i.next=c,i=f;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==i&&(u===null?p.firstBaseUpdate=c:u.next=c,p.lastBaseUpdate=f))}if(s!==null){var m=o.baseState;i=0,p=c=f=null,u=s;do{var h=u.lane,y=u.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,E=u;switch(h=t,y=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){m=w.call(y,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,h=typeof w=="function"?w.call(y,m,h):w,h==null)break e;m=Ie({},m,h);break e;case 2:nn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[u]:h.push(u))}else y={eventTime:y,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(c=p=y,f=m):p=p.next=y,i|=h;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;h=u,u=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(p===null&&(f=m),o.baseState=f,o.firstBaseUpdate=c,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);$n|=i,e.lanes=i,e.memoizedState=m}}function Yu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(H(191,o));o.call(r)}}}var Ao={},Ut=wn(Ao),vo=wn(Ao),wo=wn(Ao);function Rn(e){if(e===Ao)throw Error(H(174));return e}function Ma(e,t){switch(ye(wo,t),ye(vo,e),ye(Ut,Ao),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}ke(Ut),ye(Ut,t)}function kr(){ke(Ut),ke(vo),ke(wo)}function Np(e){Rn(wo.current);var t=Rn(Ut.current),n=ul(t,e.type);t!==n&&(ye(vo,e),ye(Ut,n))}function Pa(e){vo.current===e&&(ke(Ut),ke(vo))}var _e=wn(0);function Rs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ui=[];function La(){for(var e=0;e<Ui.length;e++)Ui[e]._workInProgressVersionPrimary=null;Ui.length=0}var ss=Yt.ReactCurrentDispatcher,Fi=Yt.ReactCurrentBatchConfig,jn=0,be=null,Le=null,Fe=null,Ms=!1,eo=!1,ko=0,sg=0;function qe(){throw Error(H(321))}function Da(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function Ua(e,t,n,r,o,s){if(jn=s,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ss.current=e===null||e.memoizedState===null?ug:dg,e=n(r,o),eo){s=0;do{if(eo=!1,ko=0,25<=s)throw Error(H(301));s+=1,Fe=Le=null,t.updateQueue=null,ss.current=cg,e=n(r,o)}while(eo)}if(ss.current=Ps,t=Le!==null&&Le.next!==null,jn=0,Fe=Le=be=null,Ms=!1,t)throw Error(H(300));return e}function Fa(){var e=ko!==0;return ko=0,e}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?be.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function kt(){if(Le===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=Fe===null?be.memoizedState:Fe.next;if(t!==null)Fe=t,Le=e;else{if(e===null)throw Error(H(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Fe===null?be.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Co(e,t){return typeof t=="function"?t(e):t}function Vi(e){var t=kt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=Le,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var u=i=null,f=null,c=s;do{var p=c.lane;if((jn&p)===p)f!==null&&(f=f.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var m={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};f===null?(u=f=m,i=r):f=f.next=m,be.lanes|=p,$n|=p}c=c.next}while(c!==null&&c!==s);f===null?i=r:f.next=u,bt(r,t.memoizedState)||(st=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,be.lanes|=s,$n|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ji(e){var t=kt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);bt(s,t.memoizedState)||(st=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _p(){}function bp(e,t){var n=be,r=kt(),o=t(),s=!bt(r.memoizedState,o);if(s&&(r.memoizedState=o,st=!0),r=r.queue,Va(Rp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,So(9,Ap.bind(null,n,r,o,t),void 0,null),Ve===null)throw Error(H(349));jn&30||Ip(n,t,o)}return o}function Ip(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ap(e,t,n,r){t.value=n,t.getSnapshot=r,Mp(t)&&Pp(e)}function Rp(e,t,n){return n(function(){Mp(t)&&Pp(e)})}function Mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function Pp(e){var t=Jt(e,1);t!==null&&_t(t,e,1,-1)}function Qu(e){var t=Mt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ag.bind(null,be,e),[t.memoizedState,e]}function So(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Lp(){return kt().memoizedState}function is(e,t,n,r){var o=Mt();be.flags|=e,o.memoizedState=So(1|t,n,void 0,r===void 0?null:r)}function Zs(e,t,n,r){var o=kt();r=r===void 0?null:r;var s=void 0;if(Le!==null){var i=Le.memoizedState;if(s=i.destroy,r!==null&&Da(r,i.deps)){o.memoizedState=So(t,n,s,r);return}}be.flags|=e,o.memoizedState=So(1|t,n,s,r)}function Xu(e,t){return is(8390656,8,e,t)}function Va(e,t){return Zs(2048,8,e,t)}function Dp(e,t){return Zs(4,2,e,t)}function Up(e,t){return Zs(4,4,e,t)}function Fp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vp(e,t,n){return n=n!=null?n.concat([e]):null,Zs(4,4,Fp.bind(null,t,e),n)}function ja(){}function jp(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $p(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Da(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Gp(e,t,n){return jn&21?(bt(n,t)||(n=Jf(),be.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,st=!0),e.memoizedState=n)}function ig(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=Fi.transition;Fi.transition={};try{e(!1),t()}finally{xe=n,Fi.transition=r}}function Bp(){return kt().memoizedState}function lg(e,t,n){var r=mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hp(e))qp(t,n);else if(n=Ep(e,t,n,r),n!==null){var o=Ye();_t(n,e,r,o),zp(n,t,r)}}function ag(e,t,n){var r=mn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hp(e))qp(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,u=s(i,n);if(o.hasEagerState=!0,o.eagerState=u,bt(u,i)){var f=t.interleaved;f===null?(o.next=o,Aa(t)):(o.next=f.next,f.next=o),t.interleaved=o;return}}catch{}finally{}n=Ep(e,t,o,r),n!==null&&(o=Ye(),_t(n,e,r,o),zp(n,t,r))}}function Hp(e){var t=e.alternate;return e===be||t!==null&&t===be}function qp(e,t){eo=Ms=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ga(e,n)}}var Ps={readContext:wt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},ug={readContext:wt,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Xu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,is(4194308,4,Fp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return is(4194308,4,e,t)},useInsertionEffect:function(e,t){return is(4,2,e,t)},useMemo:function(e,t){var n=Mt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=lg.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:Qu,useDebugValue:ja,useDeferredValue:function(e){return Mt().memoizedState=e},useTransition:function(){var e=Qu(!1),t=e[0];return e=ig.bind(null,e[1]),Mt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=be,o=Mt();if(Ee){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),Ve===null)throw Error(H(349));jn&30||Ip(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Xu(Rp.bind(null,r,s,e),[e]),r.flags|=2048,So(9,Ap.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Mt(),t=Ve.identifierPrefix;if(Ee){var n=Bt,r=Gt;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ko++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dg={readContext:wt,useCallback:jp,useContext:wt,useEffect:Va,useImperativeHandle:Vp,useInsertionEffect:Dp,useLayoutEffect:Up,useMemo:$p,useReducer:Vi,useRef:Lp,useState:function(){return Vi(Co)},useDebugValue:ja,useDeferredValue:function(e){var t=kt();return Gp(t,Le.memoizedState,e)},useTransition:function(){var e=Vi(Co)[0],t=kt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:bp,useId:Bp,unstable_isNewReconciler:!1},cg={readContext:wt,useCallback:jp,useContext:wt,useEffect:Va,useImperativeHandle:Vp,useInsertionEffect:Dp,useLayoutEffect:Up,useMemo:$p,useReducer:ji,useRef:Lp,useState:function(){return ji(Co)},useDebugValue:ja,useDeferredValue:function(e){var t=kt();return Le===null?t.memoizedState=e:Gp(t,Le.memoizedState,e)},useTransition:function(){var e=ji(Co)[0],t=kt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:bp,useId:Bp,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Al(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ei={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ye(),o=mn(e),s=Ht(r,o);s.payload=t,n!=null&&(s.callback=n),t=pn(e,s,o),t!==null&&(_t(t,e,o,r),os(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ye(),o=mn(e),s=Ht(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=pn(e,s,o),t!==null&&(_t(t,e,o,r),os(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ye(),r=mn(e),o=Ht(n,r);o.tag=2,t!=null&&(o.callback=t),t=pn(e,o,r),t!==null&&(_t(t,e,r,n),os(t,e,r))}};function Zu(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!mo(n,r)||!mo(o,s):!0}function Jp(e,t,n){var r=!1,o=yn,s=t.contextType;return typeof s=="object"&&s!==null?s=wt(s):(o=lt(t)?Fn:We.current,r=t.contextTypes,s=(r=r!=null)?yr(e,o):yn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ei,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function ed(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ei.enqueueReplaceState(t,t.state,null)}function Rl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ra(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=wt(s):(s=lt(t)?Fn:We.current,o.context=yr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Al(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ei.enqueueReplaceState(o,o.state,null),As(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Cr(e,t){try{var n="",r=t;do n+=jh(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function $i(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function Op(e,t,n){n=Ht(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ds||(Ds=!0,Bl=r),Ml(e,t)},n}function Wp(e,t,n){n=Ht(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ml(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ml(e,t),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function td(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fg;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Ng.bind(null,e,t,n),t.then(e,e))}function nd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ht(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var pg=Yt.ReactCurrentOwner,st=!1;function Ke(e,t,n,r){t.child=e===null?Sp(t,null,n,r):wr(t,e.child,n,r)}function od(e,t,n,r,o){n=n.render;var s=t.ref;return cr(t,o),r=Ua(e,t,n,r,s,o),n=Fa(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ot(e,t,o)):(Ee&&n&&Ea(t),t.flags|=1,Ke(e,t,r,o),t.child)}function sd(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Oa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Kp(e,t,s,r,o)):(e=ds(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(i,r)&&e.ref===t.ref)return Ot(e,t,o)}return t.flags|=1,e=gn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Kp(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(mo(s,r)&&e.ref===t.ref)if(st=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(st=!0);else return t.lanes=e.lanes,Ot(e,t,o)}return Pl(e,t,n,r,o)}function Yp(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(or,ut),ut|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(or,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(or,ut),ut|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ye(or,ut),ut|=r;return Ke(e,t,o,n),t.child}function Qp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,n,r,o){var s=lt(n)?Fn:We.current;return s=yr(t,s),cr(t,o),n=Ua(e,t,n,r,s,o),r=Fa(),e!==null&&!st?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ot(e,t,o)):(Ee&&r&&Ea(t),t.flags|=1,Ke(e,t,n,o),t.child)}function id(e,t,n,r,o){if(lt(n)){var s=!0;Ts(t)}else s=!1;if(cr(t,o),t.stateNode===null)ls(e,t),Jp(t,n,r),Rl(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var f=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=wt(c):(c=lt(n)?Fn:We.current,c=yr(t,c));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==r||f!==c)&&ed(t,i,r,c),nn=!1;var h=t.memoizedState;i.state=h,As(t,r,i,o),f=t.memoizedState,u!==r||h!==f||it.current||nn?(typeof p=="function"&&(Al(t,n,p,r),f=t.memoizedState),(u=nn||Zu(t,n,u,r,h,f,c))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=c,r=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Tp(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:St(t.type,u),i.props=c,m=t.pendingProps,h=i.context,f=n.contextType,typeof f=="object"&&f!==null?f=wt(f):(f=lt(n)?Fn:We.current,f=yr(t,f));var y=n.getDerivedStateFromProps;(p=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==m||h!==f)&&ed(t,i,r,f),nn=!1,h=t.memoizedState,i.state=h,As(t,r,i,o);var w=t.memoizedState;u!==m||h!==w||it.current||nn?(typeof y=="function"&&(Al(t,n,y,r),w=t.memoizedState),(c=nn||Zu(t,n,c,r,h,w,f)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,f),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,f)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=f,r=c):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ll(e,t,n,r,s,o)}function Ll(e,t,n,r,o,s){Qp(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&zu(t,n,!1),Ot(e,t,s);r=t.stateNode,pg.current=t;var u=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=wr(t,e.child,null,s),t.child=wr(t,null,u,s)):Ke(e,t,u,s),t.memoizedState=r.state,o&&zu(t,n,!0),t.child}function Xp(e){var t=e.stateNode;t.pendingContext?qu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qu(e,t.context,!1),Ma(e,t.containerInfo)}function ld(e,t,n,r,o){return vr(),Na(o),t.flags|=256,Ke(e,t,n,r),t.child}var Dl={dehydrated:null,treeContext:null,retryLane:0};function Ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zp(e,t,n){var r=t.pendingProps,o=_e.current,s=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ye(_e,o&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ri(i,r,0,null),e=Pn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ul(n),t.memoizedState=Dl,e):$a(t,i));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return hg(e,t,i,r,u,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,u=o.sibling;var f={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=gn(o,f),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?s=gn(u,s):(s=Pn(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Ul(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Dl,r}return s=e.child,e=s.sibling,r=gn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $a(e,t){return t=ri({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jo(e,t,n,r){return r!==null&&Na(r),wr(t,e.child,null,n),e=$a(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hg(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=$i(Error(H(422))),Jo(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ri({mode:"visible",children:r.children},o,0,null),s=Pn(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&wr(t,e.child,null,i),t.child.memoizedState=Ul(i),t.memoizedState=Dl,s);if(!(t.mode&1))return Jo(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(H(419)),r=$i(s,r,void 0),Jo(e,t,i,r)}if(u=(i&e.childLanes)!==0,st||u){if(r=Ve,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Jt(e,o),_t(r,e,o,-1))}return Ja(),r=$i(Error(H(421))),Jo(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=_g.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,dt=fn(o.nextSibling),ct=t,Ee=!0,Tt=null,e!==null&&(mt[gt++]=Gt,mt[gt++]=Bt,mt[gt++]=Vn,Gt=e.id,Bt=e.overflow,Vn=t),t=$a(t,r.children),t.flags|=4096,t)}function ad(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Il(e.return,t,n)}function Gi(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function e0(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(Ke(e,t,r.children,n),r=_e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ad(e,n,t);else if(e.tag===19)ad(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ye(_e,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Rs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Gi(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Rs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Gi(t,!0,n,null,s);break;case"together":Gi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ls(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ot(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mg(e,t,n){switch(t.tag){case 3:Xp(t),vr();break;case 5:Np(t);break;case 1:lt(t.type)&&Ts(t);break;case 4:Ma(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ye(bs,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ye(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?Zp(e,t,n):(ye(_e,_e.current&1),e=Ot(e,t,n),e!==null?e.sibling:null);ye(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return e0(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ye(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,Yp(e,t,n)}return Ot(e,t,n)}var t0,Fl,n0,r0;t0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fl=function(){};n0=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Rn(Ut.current);var s=null;switch(n){case"input":o=sl(e,o),r=sl(e,r),s=[];break;case"select":o=Ie({},o,{value:void 0}),r=Ie({},r,{value:void 0}),s=[];break;case"textarea":o=al(e,o),r=al(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ss)}dl(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var u=o[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var f=r[c];if(u=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&f!==u&&(f!=null||u!=null))if(c==="style")if(u){for(i in u)!u.hasOwnProperty(i)||f&&f.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in f)f.hasOwnProperty(i)&&u[i]!==f[i]&&(n||(n={}),n[i]=f[i])}else n||(s||(s=[]),s.push(c,n)),n=f;else c==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(s=s||[]).push(c,f)):c==="children"?typeof f!="string"&&typeof f!="number"||(s=s||[]).push(c,""+f):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lo.hasOwnProperty(c)?(f!=null&&c==="onScroll"&&ve("scroll",e),s||u===f||(s=[])):(s=s||[]).push(c,f))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};r0=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gr(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gg(e,t,n){var r=t.pendingProps;switch(Ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return lt(t.type)&&Es(),ze(t),null;case 3:return r=t.stateNode,kr(),ke(it),ke(We),La(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(zl(Tt),Tt=null))),Fl(e,t),ze(t),null;case 5:Pa(t);var o=Rn(wo.current);if(n=t.type,e!==null&&t.stateNode!=null)n0(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return ze(t),null}if(e=Rn(Ut.current),qo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Pt]=t,r[yo]=s,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(o=0;o<Wr.length;o++)ve(Wr[o],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":xu(r,s),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ve("invalid",r);break;case"textarea":vu(r,s),ve("invalid",r)}dl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,u,e),o=["children",""+u]):lo.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&ve("scroll",r)}switch(n){case"input":Do(r),yu(r,s,!0);break;case"textarea":Do(r),wu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ss)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Pt]=t,e[yo]=r,t0(e,t,!1,!1),t.stateNode=e;e:{switch(i=cl(n,r),n){case"dialog":ve("cancel",e),ve("close",e),o=r;break;case"iframe":case"object":case"embed":ve("load",e),o=r;break;case"video":case"audio":for(o=0;o<Wr.length;o++)ve(Wr[o],e);o=r;break;case"source":ve("error",e),o=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),o=r;break;case"details":ve("toggle",e),o=r;break;case"input":xu(e,r),o=sl(e,r),ve("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ie({},r,{value:void 0}),ve("invalid",e);break;case"textarea":vu(e,r),o=al(e,r),ve("invalid",e);break;default:o=r}dl(n,o),u=o;for(s in u)if(u.hasOwnProperty(s)){var f=u[s];s==="style"?Lf(e,f):s==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Mf(e,f)):s==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&ao(e,f):typeof f=="number"&&ao(e,""+f):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lo.hasOwnProperty(s)?f!=null&&s==="onScroll"&&ve("scroll",e):f!=null&&da(e,s,f,i))}switch(n){case"input":Do(e),yu(e,r,!1);break;case"textarea":Do(e),wu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lr(e,!!r.multiple,s,!1):r.defaultValue!=null&&lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ss)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)r0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=Rn(wo.current),Rn(Ut.current),qo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Pt]=t,(s=r.nodeValue!==n)&&(e=ct,e!==null))switch(e.tag){case 3:Ho(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ho(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pt]=t,t.stateNode=r}return ze(t),null;case 13:if(ke(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&dt!==null&&t.mode&1&&!(t.flags&128))kp(),vr(),t.flags|=98560,s=!1;else if(s=qo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(H(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Pt]=t}else vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),s=!1}else Tt!==null&&(zl(Tt),Tt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?De===0&&(De=3):Ja())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return kr(),Fl(e,t),e===null&&go(t.stateNode.containerInfo),ze(t),null;case 10:return Ia(t.type._context),ze(t),null;case 17:return lt(t.type)&&Es(),ze(t),null;case 19:if(ke(_e),s=t.memoizedState,s===null)return ze(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Gr(s,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Rs(e),i!==null){for(t.flags|=128,Gr(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ye(_e,_e.current&1|2),t.child}e=e.sibling}s.tail!==null&&Re()>Sr&&(t.flags|=128,r=!0,Gr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Rs(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ee)return ze(t),null}else 2*Re()-s.renderingStartTime>Sr&&n!==1073741824&&(t.flags|=128,r=!0,Gr(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Re(),t.sibling=null,n=_e.current,ye(_e,r?n&1|2:n&1),t):(ze(t),null);case 22:case 23:return za(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ut&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function xg(e,t){switch(Ta(t),t.tag){case 1:return lt(t.type)&&Es(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kr(),ke(it),ke(We),La(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pa(t),null;case 13:if(ke(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(_e),null;case 4:return kr(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return za(),null;case 24:return null;default:return null}}var Oo=!1,Je=!1,yg=typeof WeakSet=="function"?WeakSet:Set,X=null;function rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Vl(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var ud=!1;function vg(e,t){if(kl=ws,e=ap(),Sa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,u=-1,f=-1,c=0,p=0,m=e,h=null;t:for(;;){for(var y;m!==n||o!==0&&m.nodeType!==3||(u=i+o),m!==s||r!==0&&m.nodeType!==3||(f=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===n&&++c===o&&(u=i),h===s&&++p===r&&(f=i),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}n=u===-1||f===-1?null:{start:u,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cl={focusedElem:e,selectionRange:n},ws=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,b=w.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?E:St(t.type,E),b);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(T){Ae(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return w=ud,ud=!1,w}function to(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Vl(t,n,s)}o=o.next}while(o!==r)}}function ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function o0(e){var t=e.alternate;t!==null&&(e.alternate=null,o0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pt],delete t[yo],delete t[Tl],delete t[tg],delete t[ng])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function s0(e){return e.tag===5||e.tag===3||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $l(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ss));else if(r!==4&&(e=e.child,e!==null))for($l(e,t,n),e=e.sibling;e!==null;)$l(e,t,n),e=e.sibling}function Gl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Gl(e,t,n),e=e.sibling;e!==null;)Gl(e,t,n),e=e.sibling}var Ge=null,Et=!1;function Zt(e,t,n){for(n=n.child;n!==null;)i0(e,t,n),n=n.sibling}function i0(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Os,n)}catch{}switch(n.tag){case 5:Je||rr(n,t);case 6:var r=Ge,o=Et;Ge=null,Zt(e,t,n),Ge=r,Et=o,Ge!==null&&(Et?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Et?(e=Ge,n=n.stateNode,e.nodeType===8?Li(e.parentNode,n):e.nodeType===1&&Li(e,n),po(e)):Li(Ge,n.stateNode));break;case 4:r=Ge,o=Et,Ge=n.stateNode.containerInfo,Et=!0,Zt(e,t,n),Ge=r,Et=o;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Vl(n,t,i),o=o.next}while(o!==r)}Zt(e,t,n);break;case 1:if(!Je&&(rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ae(n,t,u)}Zt(e,t,n);break;case 21:Zt(e,t,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,Zt(e,t,n),Je=r):Zt(e,t,n);break;default:Zt(e,t,n)}}function cd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yg),t.forEach(function(r){var o=bg.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:Ge=u.stateNode,Et=!1;break e;case 3:Ge=u.stateNode.containerInfo,Et=!0;break e;case 4:Ge=u.stateNode.containerInfo,Et=!0;break e}u=u.return}if(Ge===null)throw Error(H(160));i0(s,i,o),Ge=null,Et=!1;var f=o.alternate;f!==null&&(f.return=null),o.return=null}catch(c){Ae(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)l0(t,e),t=t.sibling}function l0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Rt(e),r&4){try{to(3,e,e.return),ti(3,e)}catch(E){Ae(e,e.return,E)}try{to(5,e,e.return)}catch(E){Ae(e,e.return,E)}}break;case 1:Ct(t,e),Rt(e),r&512&&n!==null&&rr(n,n.return);break;case 5:if(Ct(t,e),Rt(e),r&512&&n!==null&&rr(n,n.return),e.flags&32){var o=e.stateNode;try{ao(o,"")}catch(E){Ae(e,e.return,E)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&If(o,s),cl(u,i);var c=cl(u,s);for(i=0;i<f.length;i+=2){var p=f[i],m=f[i+1];p==="style"?Lf(o,m):p==="dangerouslySetInnerHTML"?Mf(o,m):p==="children"?ao(o,m):da(o,p,m,c)}switch(u){case"input":il(o,s);break;case"textarea":Af(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?lr(o,!!s.multiple,y,!1):h!==!!s.multiple&&(s.defaultValue!=null?lr(o,!!s.multiple,s.defaultValue,!0):lr(o,!!s.multiple,s.multiple?[]:"",!1))}o[yo]=s}catch(E){Ae(e,e.return,E)}}break;case 6:if(Ct(t,e),Rt(e),r&4){if(e.stateNode===null)throw Error(H(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(E){Ae(e,e.return,E)}}break;case 3:if(Ct(t,e),Rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{po(t.containerInfo)}catch(E){Ae(e,e.return,E)}break;case 4:Ct(t,e),Rt(e);break;case 13:Ct(t,e),Rt(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Ha=Re())),r&4&&cd(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Je=(c=Je)||p,Ct(t,e),Je=c):Ct(t,e),Rt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&e.mode&1)for(X=e,p=e.child;p!==null;){for(m=X=p;X!==null;){switch(h=X,y=h.child,h.tag){case 0:case 11:case 14:case 15:to(4,h,h.return);break;case 1:rr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(E){Ae(r,n,E)}}break;case 5:rr(h,h.return);break;case 22:if(h.memoizedState!==null){pd(m);continue}}y!==null?(y.return=h,X=y):pd(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{o=m.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,f=m.memoizedProps.style,i=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=Pf("display",i))}catch(E){Ae(e,e.return,E)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(E){Ae(e,e.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ct(t,e),Rt(e),r&4&&cd(e);break;case 21:break;default:Ct(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(s0(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ao(o,""),r.flags&=-33);var s=dd(e);Gl(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,u=dd(e);$l(e,u,i);break;default:throw Error(H(161))}}catch(f){Ae(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wg(e,t,n){X=e,a0(e)}function a0(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var o=X,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Oo;if(!i){var u=o.alternate,f=u!==null&&u.memoizedState!==null||Je;u=Oo;var c=Je;if(Oo=i,(Je=f)&&!c)for(X=o;X!==null;)i=X,f=i.child,i.tag===22&&i.memoizedState!==null?hd(o):f!==null?(f.return=i,X=f):hd(o);for(;s!==null;)X=s,a0(s),s=s.sibling;X=o,Oo=u,Je=c}fd(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,X=s):fd(e)}}function fd(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||ti(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Je)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Yu(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yu(t,i,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&po(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Je||t.flags&512&&jl(t)}catch(h){Ae(t,t.return,h)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function pd(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function hd(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ti(4,t)}catch(f){Ae(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(f){Ae(t,o,f)}}var s=t.return;try{jl(t)}catch(f){Ae(t,s,f)}break;case 5:var i=t.return;try{jl(t)}catch(f){Ae(t,i,f)}}}catch(f){Ae(t,t.return,f)}if(t===e){X=null;break}var u=t.sibling;if(u!==null){u.return=t.return,X=u;break}X=t.return}}var kg=Math.ceil,Ls=Yt.ReactCurrentDispatcher,Ga=Yt.ReactCurrentOwner,yt=Yt.ReactCurrentBatchConfig,he=0,Ve=null,Me=null,Be=0,ut=0,or=wn(0),De=0,Eo=null,$n=0,ni=0,Ba=0,no=null,ot=null,Ha=0,Sr=1/0,Vt=null,Ds=!1,Bl=null,hn=null,Wo=!1,ln=null,Us=0,ro=0,Hl=null,as=-1,us=0;function Ye(){return he&6?Re():as!==-1?as:as=Re()}function mn(e){return e.mode&1?he&2&&Be!==0?Be&-Be:og.transition!==null?(us===0&&(us=Jf()),us):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Zf(e.type)),e):1}function _t(e,t,n,r){if(50<ro)throw ro=0,Hl=null,Error(H(185));_o(e,n,r),(!(he&2)||e!==Ve)&&(e===Ve&&(!(he&2)&&(ni|=n),De===4&&on(e,Be)),at(e,r),n===1&&he===0&&!(t.mode&1)&&(Sr=Re()+500,Xs&&kn()))}function at(e,t){var n=e.callbackNode;om(e,t);var r=vs(e,e===Ve?Be:0);if(r===0)n!==null&&Su(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Su(n),t===1)e.tag===0?rg(md.bind(null,e)):yp(md.bind(null,e)),Zm(function(){!(he&6)&&kn()}),n=null;else{switch(Of(r)){case 1:n=ma;break;case 4:n=qf;break;case 16:n=ys;break;case 536870912:n=zf;break;default:n=ys}n=g0(n,u0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function u0(e,t){if(as=-1,us=0,he&6)throw Error(H(327));var n=e.callbackNode;if(fr()&&e.callbackNode!==n)return null;var r=vs(e,e===Ve?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fs(e,r);else{t=r;var o=he;he|=2;var s=c0();(Ve!==e||Be!==t)&&(Vt=null,Sr=Re()+500,Mn(e,t));do try{Eg();break}catch(u){d0(e,u)}while(1);ba(),Ls.current=s,he=o,Me!==null?t=0:(Ve=null,Be=0,t=De)}if(t!==0){if(t===2&&(o=gl(e),o!==0&&(r=o,t=ql(e,o))),t===1)throw n=Eo,Mn(e,0),on(e,r),at(e,Re()),n;if(t===6)on(e,r);else{if(o=e.current.alternate,!(r&30)&&!Cg(o)&&(t=Fs(e,r),t===2&&(s=gl(e),s!==0&&(r=s,t=ql(e,s))),t===1))throw n=Eo,Mn(e,0),on(e,r),at(e,Re()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:bn(e,ot,Vt);break;case 3:if(on(e,r),(r&130023424)===r&&(t=Ha+500-Re(),10<t)){if(vs(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ye(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=El(bn.bind(null,e,ot,Vt),t);break}bn(e,ot,Vt);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Nt(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kg(r/1960))-r,10<r){e.timeoutHandle=El(bn.bind(null,e,ot,Vt),r);break}bn(e,ot,Vt);break;case 5:bn(e,ot,Vt);break;default:throw Error(H(329))}}}return at(e,Re()),e.callbackNode===n?u0.bind(null,e):null}function ql(e,t){var n=no;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=Fs(e,t),e!==2&&(t=ot,ot=n,t!==null&&zl(t)),e}function zl(e){ot===null?ot=e:ot.push.apply(ot,e)}function Cg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!bt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~Ba,t&=~ni,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function md(e){if(he&6)throw Error(H(327));fr();var t=vs(e,0);if(!(t&1))return at(e,Re()),null;var n=Fs(e,t);if(e.tag!==0&&n===2){var r=gl(e);r!==0&&(t=r,n=ql(e,r))}if(n===1)throw n=Eo,Mn(e,0),on(e,t),at(e,Re()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,ot,Vt),at(e,Re()),null}function qa(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(Sr=Re()+500,Xs&&kn())}}function Gn(e){ln!==null&&ln.tag===0&&!(he&6)&&fr();var t=he;he|=1;var n=yt.transition,r=xe;try{if(yt.transition=null,xe=1,e)return e()}finally{xe=r,yt.transition=n,he=t,!(he&6)&&kn()}}function za(){ut=or.current,ke(or)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Xm(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Ta(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Es();break;case 3:kr(),ke(it),ke(We),La();break;case 5:Pa(r);break;case 4:kr();break;case 13:ke(_e);break;case 19:ke(_e);break;case 10:Ia(r.type._context);break;case 22:case 23:za()}n=n.return}if(Ve=e,Me=e=gn(e.current,null),Be=ut=t,De=0,Eo=null,Ba=ni=$n=0,ot=no=null,An!==null){for(t=0;t<An.length;t++)if(n=An[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}An=null}return e}function d0(e,t){do{var n=Me;try{if(ba(),ss.current=Ps,Ms){for(var r=be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ms=!1}if(jn=0,Fe=Le=be=null,eo=!1,ko=0,Ga.current=null,n===null||n.return===null){De=1,Eo=t,Me=null;break}e:{var s=e,i=n.return,u=n,f=t;if(t=Be,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var c=f,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=nd(i);if(y!==null){y.flags&=-257,rd(y,i,u,s,t),y.mode&1&&td(s,c,t),t=y,f=c;var w=t.updateQueue;if(w===null){var E=new Set;E.add(f),t.updateQueue=E}else w.add(f);break e}else{if(!(t&1)){td(s,c,t),Ja();break e}f=Error(H(426))}}else if(Ee&&u.mode&1){var b=nd(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),rd(b,i,u,s,t),Na(Cr(f,u));break e}}s=f=Cr(f,u),De!==4&&(De=2),no===null?no=[s]:no.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=Op(s,f,t);Ku(s,x);break e;case 1:u=f;var v=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(hn===null||!hn.has(g)))){s.flags|=65536,t&=-t,s.lanes|=t;var T=Wp(s,u,t);Ku(s,T);break e}}s=s.return}while(s!==null)}p0(n)}catch(N){t=N,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function c0(){var e=Ls.current;return Ls.current=Ps,e===null?Ps:e}function Ja(){(De===0||De===3||De===2)&&(De=4),Ve===null||!($n&268435455)&&!(ni&268435455)||on(Ve,Be)}function Fs(e,t){var n=he;he|=2;var r=c0();(Ve!==e||Be!==t)&&(Vt=null,Mn(e,t));do try{Sg();break}catch(o){d0(e,o)}while(1);if(ba(),he=n,Ls.current=r,Me!==null)throw Error(H(261));return Ve=null,Be=0,De}function Sg(){for(;Me!==null;)f0(Me)}function Eg(){for(;Me!==null&&!Kh();)f0(Me)}function f0(e){var t=m0(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?p0(e):Me=t,Ga.current=null}function p0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xg(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{De=6,Me=null;return}}else if(n=gg(n,t,ut),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);De===0&&(De=5)}function bn(e,t,n){var r=xe,o=yt.transition;try{yt.transition=null,xe=1,Tg(e,t,n,r)}finally{yt.transition=o,xe=r}return null}function Tg(e,t,n,r){do fr();while(ln!==null);if(he&6)throw Error(H(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(sm(e,s),e===Ve&&(Me=Ve=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wo||(Wo=!0,g0(ys,function(){return fr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yt.transition,yt.transition=null;var i=xe;xe=1;var u=he;he|=4,Ga.current=null,vg(e,n),l0(n,e),zm(Cl),ws=!!kl,Cl=kl=null,e.current=n,wg(n),Yh(),he=u,xe=i,yt.transition=s}else e.current=n;if(Wo&&(Wo=!1,ln=e,Us=o),s=e.pendingLanes,s===0&&(hn=null),Zh(n.stateNode),at(e,Re()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ds)throw Ds=!1,e=Bl,Bl=null,e;return Us&1&&e.tag!==0&&fr(),s=e.pendingLanes,s&1?e===Hl?ro++:(ro=0,Hl=e):ro=0,kn(),null}function fr(){if(ln!==null){var e=Of(Us),t=yt.transition,n=xe;try{if(yt.transition=null,xe=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,Us=0,he&6)throw Error(H(331));var o=he;for(he|=4,X=e.current;X!==null;){var s=X,i=s.child;if(X.flags&16){var u=s.deletions;if(u!==null){for(var f=0;f<u.length;f++){var c=u[f];for(X=c;X!==null;){var p=X;switch(p.tag){case 0:case 11:case 15:to(8,p,s)}var m=p.child;if(m!==null)m.return=p,X=m;else for(;X!==null;){p=X;var h=p.sibling,y=p.return;if(o0(p),p===c){X=null;break}if(h!==null){h.return=y,X=h;break}X=y}}}var w=s.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}X=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,X=i;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:to(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,X=x;break e}X=s.return}}var v=e.current;for(X=v;X!==null;){i=X;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,X=g;else e:for(i=v;X!==null;){if(u=X,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ti(9,u)}}catch(N){Ae(u,u.return,N)}if(u===i){X=null;break e}var T=u.sibling;if(T!==null){T.return=u.return,X=T;break e}X=u.return}}if(he=o,kn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Os,e)}catch{}r=!0}return r}finally{xe=n,yt.transition=t}}return!1}function gd(e,t,n){t=Cr(n,t),t=Op(e,t,1),e=pn(e,t,1),t=Ye(),e!==null&&(_o(e,1,t),at(e,t))}function Ae(e,t,n){if(e.tag===3)gd(e,e,n);else for(;t!==null;){if(t.tag===3){gd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){e=Cr(n,e),e=Wp(t,e,1),t=pn(t,e,1),e=Ye(),t!==null&&(_o(t,1,e),at(t,e));break}}t=t.return}}function Ng(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ye(),e.pingedLanes|=e.suspendedLanes&n,Ve===e&&(Be&n)===n&&(De===4||De===3&&(Be&130023424)===Be&&500>Re()-Ha?Mn(e,0):Ba|=n),at(e,t)}function h0(e,t){t===0&&(e.mode&1?(t=Vo,Vo<<=1,!(Vo&130023424)&&(Vo=4194304)):t=1);var n=Ye();e=Jt(e,t),e!==null&&(_o(e,t,n),at(e,n))}function _g(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),h0(e,n)}function bg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),h0(e,n)}var m0;m0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)st=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return st=!1,mg(e,t,n);st=!!(e.flags&131072)}else st=!1,Ee&&t.flags&1048576&&vp(t,_s,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ls(e,t),e=t.pendingProps;var o=yr(t,We.current);cr(t,n),o=Ua(null,t,r,e,o,n);var s=Fa();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(r)?(s=!0,Ts(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ra(t),o.updater=ei,t.stateNode=o,o._reactInternals=t,Rl(t,r,e,n),t=Ll(null,t,r,!0,s,n)):(t.tag=0,Ee&&s&&Ea(t),Ke(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ls(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Ag(r),e=St(r,e),o){case 0:t=Pl(null,t,r,e,n);break e;case 1:t=id(null,t,r,e,n);break e;case 11:t=od(null,t,r,e,n);break e;case 14:t=sd(null,t,r,St(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),Pl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),id(e,t,r,o,n);case 3:e:{if(Xp(t),e===null)throw Error(H(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Tp(e,t),As(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Cr(Error(H(423)),t),t=ld(e,t,r,n,o);break e}else if(r!==o){o=Cr(Error(H(424)),t),t=ld(e,t,r,n,o);break e}else for(dt=fn(t.stateNode.containerInfo.firstChild),ct=t,Ee=!0,Tt=null,n=Sp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vr(),r===o){t=Ot(e,t,n);break e}Ke(e,t,r,n)}t=t.child}return t;case 5:return Np(t),e===null&&bl(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Sl(r,o)?i=null:s!==null&&Sl(r,s)&&(t.flags|=32),Qp(e,t),Ke(e,t,i,n),t.child;case 6:return e===null&&bl(t),null;case 13:return Zp(e,t,n);case 4:return Ma(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wr(t,null,r,n):Ke(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),od(e,t,r,o,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,ye(bs,r._currentValue),r._currentValue=i,s!==null)if(bt(s.value,i)){if(s.children===o.children&&!it.current){t=Ot(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){i=s.child;for(var f=u.firstContext;f!==null;){if(f.context===r){if(s.tag===1){f=Ht(-1,n&-n),f.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?f.next=f:(f.next=p.next,p.next=f),c.pending=f}}s.lanes|=n,f=s.alternate,f!==null&&(f.lanes|=n),Il(s.return,n,t),u.lanes|=n;break}f=f.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(H(341));i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Il(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Ke(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,cr(t,n),o=wt(o),r=r(o),t.flags|=1,Ke(e,t,r,n),t.child;case 14:return r=t.type,o=St(r,t.pendingProps),o=St(r.type,o),sd(e,t,r,o,n);case 15:return Kp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),ls(e,t),t.tag=1,lt(r)?(e=!0,Ts(t)):e=!1,cr(t,n),Jp(t,r,o),Rl(t,r,o,n),Ll(null,t,r,!0,e,n);case 19:return e0(e,t,n);case 22:return Yp(e,t,n)}throw Error(H(156,t.tag))};function g0(e,t){return Hf(e,t)}function Ig(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,n,r){return new Ig(e,t,n,r)}function Oa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ag(e){if(typeof e=="function")return Oa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fa)return 11;if(e===pa)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ds(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")Oa(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Wn:return Pn(n.children,o,s,t);case ca:i=8,o|=8;break;case tl:return e=xt(12,n,t,o|2),e.elementType=tl,e.lanes=s,e;case nl:return e=xt(13,n,t,o),e.elementType=nl,e.lanes=s,e;case rl:return e=xt(19,n,t,o),e.elementType=rl,e.lanes=s,e;case Nf:return ri(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ef:i=10;break e;case Tf:i=9;break e;case fa:i=11;break e;case pa:i=14;break e;case tn:i=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=xt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Pn(e,t,n,r){return e=xt(7,e,r,t),e.lanes=n,e}function ri(e,t,n,r){return e=xt(22,e,r,t),e.elementType=Nf,e.lanes=n,e.stateNode={isHidden:!1},e}function Bi(e,t,n){return e=xt(6,e,null,t),e.lanes=n,e}function Hi(e,t,n){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Wa(e,t,n,r,o,s,i,u,f){return e=new Rg(e,t,n,u,f),t===1?(t=1,s===!0&&(t|=8)):t=0,s=xt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(s),e}function Mg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function x0(e){if(!e)return yn;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(lt(n))return xp(e,n,t)}return t}function y0(e,t,n,r,o,s,i,u,f){return e=Wa(n,r,!0,e,o,s,i,u,f),e.context=x0(null),n=e.current,r=Ye(),o=mn(n),s=Ht(r,o),s.callback=t??null,pn(n,s,o),e.current.lanes=o,_o(e,o,r),at(e,r),e}function oi(e,t,n,r){var o=t.current,s=Ye(),i=mn(o);return n=x0(n),t.context===null?t.context=n:t.pendingContext=n,t=Ht(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(o,t,i),e!==null&&(_t(e,o,i,s),os(e,o,i)),i}function Vs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ka(e,t){xd(e,t),(e=e.alternate)&&xd(e,t)}function Pg(){return null}var v0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ya(e){this._internalRoot=e}si.prototype.render=Ya.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));oi(e,t,null,null)};si.prototype.unmount=Ya.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){oi(null,e,null,null)}),t[zt]=null}};function si(e){this._internalRoot=e}si.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&Xf(e)}};function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yd(){}function Lg(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Vs(i);s.call(c)}}var i=y0(t,r,e,0,null,!1,!1,"",yd);return e._reactRootContainer=i,e[zt]=i.current,go(e.nodeType===8?e.parentNode:e),Gn(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var c=Vs(f);u.call(c)}}var f=Wa(e,0,!1,null,null,!1,!1,"",yd);return e._reactRootContainer=f,e[zt]=f.current,go(e.nodeType===8?e.parentNode:e),Gn(function(){oi(t,f,n,r)}),f}function li(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var u=o;o=function(){var f=Vs(i);u.call(f)}}oi(t,i,e,o)}else i=Lg(n,t,e,o,r);return Vs(i)}Wf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Or(t.pendingLanes);n!==0&&(ga(t,n|1),at(t,Re()),!(he&6)&&(Sr=Re()+500,kn()))}break;case 13:Gn(function(){var r=Jt(e,1);if(r!==null){var o=Ye();_t(r,e,1,o)}}),Ka(e,1)}};xa=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var n=Ye();_t(t,e,134217728,n)}Ka(e,134217728)}};Kf=function(e){if(e.tag===13){var t=mn(e),n=Jt(e,t);if(n!==null){var r=Ye();_t(n,e,t,r)}Ka(e,t)}};Yf=function(){return xe};Qf=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};pl=function(e,t,n){switch(t){case"input":if(il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Qs(r);if(!o)throw Error(H(90));bf(r),il(r,o)}}}break;case"textarea":Af(e,n);break;case"select":t=n.value,t!=null&&lr(e,!!n.multiple,t,!1)}};Ff=qa;Vf=Gn;var Dg={usingClientEntryPoint:!1,Events:[Io,Xn,Qs,Df,Uf,qa]},Br={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:Br.bundleType,version:Br.version,rendererPackageName:Br.rendererPackageName,rendererConfig:Br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gf(e),e===null?null:e.stateNode},findFiberByHostInstance:Br.findFiberByHostInstance||Pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Os=Ko.inject(Ug),Dt=Ko}catch{}}pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dg;pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(t))throw Error(H(200));return Mg(e,t,null,n)};pt.createRoot=function(e,t){if(!Qa(e))throw Error(H(299));var n=!1,r="",o=v0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Wa(e,1,!1,null,null,n,!1,r,o),e[zt]=t.current,go(e.nodeType===8?e.parentNode:e),new Ya(t)};pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=Gf(t),e=e===null?null:e.stateNode,e};pt.flushSync=function(e){return Gn(e)};pt.hydrate=function(e,t,n){if(!ii(t))throw Error(H(200));return li(null,e,t,!0,n)};pt.hydrateRoot=function(e,t,n){if(!Qa(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=v0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=y0(t,null,e,1,n??null,o,!1,s,i),e[zt]=t.current,go(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new si(t)};pt.render=function(e,t,n){if(!ii(t))throw Error(H(200));return li(null,e,t,!1,n)};pt.unmountComponentAtNode=function(e){if(!ii(e))throw Error(H(40));return e._reactRootContainer?(Gn(function(){li(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};pt.unstable_batchedUpdates=qa;pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ii(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return li(e,t,n,!1,r)};pt.version="18.3.1-next-f1338f8080-20240426";function w0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w0)}catch(e){console.error(e)}}w0(),wf.exports=pt;var Fg=wf.exports,vd=Fg;Zi.createRoot=vd.createRoot,Zi.hydrateRoot=vd.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vg,jg;function $g(){return{geminiUrl:Vg,vertexUrl:jg}}function Gg(e,t,n,r){var o,s;if(!(e!=null&&e.baseUrl)){const i=$g();return t?(o=i.vertexUrl)!==null&&o!==void 0?o:n:(s=i.geminiUrl)!==null&&s!==void 0?s:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qt{}function W(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(e,t,n){for(let s=0;s<t.length-1;s++){const i=t[s];if(i.endsWith("[]")){const u=i.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[u])){const f=e[u];if(Array.isArray(n))for(let c=0;c<f.length;c++){const p=f[c];d(p,t.slice(s+1),n[c])}else for(const c of f)d(c,t.slice(s+1),n)}return}else if(i.endsWith("[0]")){const u=i.slice(0,-3);u in e||(e[u]=[{}]);const f=e[u];d(f[0],t.slice(s+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const r=t[t.length-1],o=e[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const o=t[r];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const i=e[s];return Array.isArray(i)?i.map(u=>l(u,t.slice(r+1),n)):n}else return n}else e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function Bg(e,t){for(const[n,r]of Object.entries(t)){const o=n.split("."),s=r.split("."),i=new Set;let u=-1;for(let f=0;f<o.length;f++)if(o[f]==="*"){u=f;break}if(u!==-1&&s.length>u)for(let f=u;f<s.length;f++){const c=s[f];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&i.add(c)}Jl(e,o,s,0,i)}}function Jl(e,t,n,r,o){if(r>=t.length||typeof e!="object"||e===null)return;const s=t[r];if(s.endsWith("[]")){const i=s.slice(0,-2),u=e;if(i in u&&Array.isArray(u[i]))for(const f of u[i])Jl(f,t,n,r+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,u=Object.keys(i).filter(c=>!c.startsWith("_")&&!o.has(c)),f={};for(const c of u)f[c]=i[c];for(const[c,p]of Object.entries(f)){const m=[];for(const h of n.slice(r))h==="*"?m.push(c):m.push(h);d(i,m,p)}for(const c of u)delete i[c]}}else{const i=e;s in i&&Jl(i[s],t,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xa(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hg(e){const t={},n=l(e,["operationName"]);n!=null&&d(t,["operationName"],n);const r=l(e,["resourceName"]);return r!=null&&d(t,["_url","resourceName"],r),t}function qg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],Jg(i)),t}function zg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Og(i)),t}function Jg(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Wg(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Og(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Kg(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Wg(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],tx(n)),t}function Kg(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],nx(n)),t}function Yg(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function Qg(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function Xg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Zg(i)),t}function Zg(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function k0(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],ex(i)),t}function ex(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function tx(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],Xa(r));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function nx(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],Xa(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wd;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wd||(wd={}));var kd;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(kd||(kd={}));var Cd;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Cd||(Cd={}));var an;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(an||(an={}));var Sd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Sd||(Sd={}));var Ed;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ed||(Ed={}));var Td;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Td||(Td={}));var Nd;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Nd||(Nd={}));var _d;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(_d||(_d={}));var bd;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(bd||(bd={}));var Id;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Id||(Id={}));var Ad;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Ad||(Ad={}));var Rd;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Rd||(Rd={}));var Md;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Md||(Md={}));var Pd;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Pd||(Pd={}));var Ld;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ld||(Ld={}));var Dd;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Dd||(Dd={}));var Ud;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Ud||(Ud={}));var Fd;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Fd||(Fd={}));var js;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(js||(js={}));var Vd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Vd||(Vd={}));var jd;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jd||(jd={}));var $d;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($d||($d={}));var Ol;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ol||(Ol={}));var Gd;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Gd||(Gd={}));var Bd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Bd||(Bd={}));var Hd;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Hd||(Hd={}));var qd;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(qd||(qd={}));var zd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(zd||(zd={}));var Jd;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Jd||(Jd={}));var Od;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Od||(Od={}));var Wd;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Wd||(Wd={}));var Kd;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Kd||(Kd={}));var Yd;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Yd||(Yd={}));var Qd;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Qd||(Qd={}));var Xd;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Xd||(Xd={}));var Zd;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Zd||(Zd={}));var ec;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ec||(ec={}));var tc;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(tc||(tc={}));var nc;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(nc||(nc={}));var rc;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(rc||(rc={}));var oc;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(oc||(oc={}));var sc;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(sc||(sc={}));var ic;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(ic||(ic={}));var lc;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(lc||(lc={}));var ac;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(ac||(ac={}));var uc;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(uc||(uc={}));var dc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(dc||(dc={}));var cc;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cc||(cc={}));var fc;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(fc||(fc={}));var pc;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(pc||(pc={}));var hc;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hc||(hc={}));var mc;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(mc||(mc={}));var gc;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(gc||(gc={}));var sr;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(sr||(sr={}));class Wl{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Hr{get text(){var t,n,r,o,s,i,u,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",p=!1;const m=[];for(const h of(f=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[y,w]of Object.entries(h))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,c+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?c:void 0}get data(){var t,n,r,o,s,i,u,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const p=[];for(const m of(f=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,y]of Object.entries(m))h!=="inlineData"&&(y!==null||y!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,r,o,s,i,u,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,r,o,s,i,u,f,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,r,o,s,i,u,f,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(c=p==null?void 0:p[0])===null||c===void 0?void 0:c.output}}class xc{}class yc{}class rx{}class ox{}class sx{}class ix{}class vc{}class wc{}class kc{}class lx{}class $s{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new $s;let o;const s=t;return n?o=zg(s):o=qg(s),Object.assign(r,o),r}}class Cc{}class Sc{}class Ec{}class Tc{}class ax{}class ux{}class dx{}class Za{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Za,s=Xg(t);return Object.assign(r,s),r}}class cx{}class fx{}class px{}class Nc{}class hx{get text(){var t,n,r;let o="",s=!1;const i=[];for(const u of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,c]of Object.entries(u))f!=="text"&&f!=="thought"&&c!==null&&i.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,o+=u.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,r;let o="";const s=[];for(const i of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(i))u!=="inlineData"&&f!==null&&s.push(u);i.inlineData&&typeof i.inlineData.data=="string"&&(o+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class mx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class eu{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new eu,s=k0(t);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ge(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function C0(e,t){const n=ge(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function S0(e){return Array.isArray(e)?e.map(t=>Gs(t)):[Gs(e)]}function Gs(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function E0(e){const t=Gs(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function T0(e){const t=Gs(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function _c(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function N0(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>_c(t)):[_c(e)]}function Kl(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function bc(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Ic(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Oe(e){if(e==null)throw new Error("ContentUnion is required");return Kl(e)?e:{role:"user",parts:N0(e)}}function tu(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=Oe(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=Oe(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Oe(n)):[Oe(t)]}function vt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bc(e)||Ic(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Oe(e)]}const t=[],n=[],r=Kl(e[0]);for(const o of e){const s=Kl(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(bc(o)||Ic(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:N0(n)}),t}function gx(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(an).includes(n[0].toUpperCase())?n[0].toUpperCase():an.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(an).includes(r.toUpperCase())?r.toUpperCase():an.TYPE_UNSPECIFIED})}}function pr(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&gx(e.type,t);for(const[i,u]of Object.entries(e))if(u!=null)if(i=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(an).includes(u.toUpperCase())?u.toUpperCase():an.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=pr(u);else if(r.includes(i)){const f=[];for(const c of u){if(c.type=="null"){t.nullable=!0;continue}f.push(pr(c))}t[i]=f}else if(o.includes(i)){const f={};for(const[c,p]of Object.entries(u))f[c]=pr(p);t[i]=f}else{if(i==="additionalProperties")continue;t[i]=u}return t}function nu(e){return pr(e)}function ru(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ou(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function br(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=pr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=pr(t.response));return e}function Ir(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function xx(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Xt(e,t){if(typeof t!="string")throw new Error("name must be a string");return xx(e,t,"cachedContents")}function _0(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Cn(e){return Xa(e)}function yx(e){return e!=null&&typeof e=="object"&&"name"in e}function vx(e){return e!=null&&typeof e=="object"&&"video"in e}function wx(e){return e!=null&&typeof e=="object"&&"uri"in e}function b0(e){var t;let n;if(yx(e)&&(n=e.name),!(wx(e)&&(n=e.uri,n===void 0))&&!(vx(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function I0(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function A0(e){for(const t of["models","tunedModels","publisherModels"])if(kx(e,t))return e[t];return[]}function kx(e,t){return e!==null&&typeof e=="object"&&t in e}function Cx(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function Sx(e,t={}){const n=[],r=new Set;for(const o of e){const s=o.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const i=Cx(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function R0(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Ex(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function M0(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const i of o){if(typeof i!="object"||i===null)continue;const f=i.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ar(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function P0(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tx(e){const t={},n=l(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const r=l(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>sy(i))),d(t,["inlinedResponses"],s)}const o=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["inlinedEmbedContentResponses"],s)}return t}function Nx(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const r=l(e,["gcsDestination","outputUriPrefix"]);r!=null&&d(t,["gcsUri"],r);const o=l(e,["bigqueryDestination","outputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function _x(e){const t={},n=l(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const r=l(e,["gcsUri"]);r!=null&&d(t,["gcsDestination","outputUriPrefix"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigqueryDestination","outputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function cs(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata","displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["metadata","state"]);o!=null&&d(t,["state"],P0(o));const s=l(e,["metadata","createTime"]);s!=null&&d(t,["createTime"],s);const i=l(e,["metadata","endTime"]);i!=null&&d(t,["endTime"],i);const u=l(e,["metadata","updateTime"]);u!=null&&d(t,["updateTime"],u);const f=l(e,["metadata","model"]);f!=null&&d(t,["model"],f);const c=l(e,["metadata","output"]);return c!=null&&d(t,["dest"],Tx(M0(c))),t}function Yl(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["state"]);o!=null&&d(t,["state"],P0(o));const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["createTime"]);i!=null&&d(t,["createTime"],i);const u=l(e,["startTime"]);u!=null&&d(t,["startTime"],u);const f=l(e,["endTime"]);f!=null&&d(t,["endTime"],f);const c=l(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);const p=l(e,["model"]);p!=null&&d(t,["model"],p);const m=l(e,["inputConfig"]);m!=null&&d(t,["src"],bx(m));const h=l(e,["outputConfig"]);h!=null&&d(t,["dest"],Nx(M0(h)));const y=l(e,["completionStats"]);return y!=null&&d(t,["completionStats"],y),t}function bx(e){const t={},n=l(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const r=l(e,["gcsSource","uris"]);r!=null&&d(t,["gcsUri"],r);const o=l(e,["bigquerySource","inputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function Ix(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(t,["fileName"]);r!=null&&d(n,["fileName"],r);const o=l(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>oy(e,i))),d(n,["requests","requests"],s)}return n}function Ax(e){const t={},n=l(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const r=l(e,["gcsUri"]);r!=null&&d(t,["gcsSource","uris"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigquerySource","inputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Rx(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Mx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Ar(e,r)),n}function Px(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Ar(e,r)),n}function Lx(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],Dx(r));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=l(e,["avgLogprobs"]);i!=null&&d(t,["avgLogprobs"],i);const u=l(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const f=l(e,["index"]);f!=null&&d(t,["index"],f);const c=l(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const p=l(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>y)),d(t,["safetyRatings"],h)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function Dx(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function L0(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>fy(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function Ux(e,t){const n={},r=l(e,["displayName"]);if(t!==void 0&&r!=null&&d(t,["batch","displayName"],r),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Fx(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["dest"]);return t!==void 0&&o!=null&&d(t,["outputConfig"],_x(Ex(o))),n}function Ac(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],Ix(e,R0(e,o)));const s=l(t,["config"]);return s!=null&&Ux(s,n),n}function Vx(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],ge(e,r));const o=l(t,["src"]);o!=null&&d(n,["inputConfig"],Ax(R0(e,o)));const s=l(t,["config"]);return s!=null&&Fx(s,n),n}function jx(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["batch","displayName"],r),n}function $x(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],Ox(e,o));const s=l(t,["config"]);return s!=null&&jx(s,n),n}function Gx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Ar(e,r)),n}function Bx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Ar(e,r)),n}function Hx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function qx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function zx(e,t){const n={},r=l(t,["contents"]);if(r!=null){let s=tu(e,r);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["requests[]","request","content"],s)}const o=l(t,["config"]);return o!=null&&(d(n,["_self"],Jx(o,n)),Bg(n,{"requests[].*":"requests[].request.*"})),n}function Jx(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ox(e,t){const n={},r=l(t,["fileName"]);r!=null&&d(n,["file_name"],r);const o=l(t,["inlinedRequests"]);return o!=null&&d(n,["requests"],zx(e,o)),n}function Wx(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Kx(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Yx(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Qx(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],L0(Oe(o)));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const f=l(t,["candidateCount"]);f!=null&&d(r,["candidateCount"],f);const c=l(t,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const y=l(t,["presencePenalty"]);y!=null&&d(r,["presencePenalty"],y);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const E=l(t,["seed"]);E!=null&&d(r,["seed"],E);const b=l(t,["responseMimeType"]);b!=null&&d(r,["responseMimeType"],b);const x=l(t,["responseSchema"]);x!=null&&d(r,["responseSchema"],nu(x));const v=l(t,["responseJsonSchema"]);if(v!=null&&d(r,["responseJsonSchema"],v),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=l(t,["safetySettings"]);if(n!==void 0&&g!=null){let j=g;Array.isArray(j)&&(j=j.map(I=>py(I))),d(n,["safetySettings"],j)}const T=l(t,["tools"]);if(n!==void 0&&T!=null){let j=Ir(T);Array.isArray(j)&&(j=j.map(I=>my(br(I)))),d(n,["tools"],j)}const N=l(t,["toolConfig"]);if(n!==void 0&&N!=null&&d(n,["toolConfig"],hy(N)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=l(t,["cachedContent"]);n!==void 0&&S!=null&&d(n,["cachedContent"],Xt(e,S));const k=l(t,["responseModalities"]);k!=null&&d(r,["responseModalities"],k);const A=l(t,["mediaResolution"]);A!=null&&d(r,["mediaResolution"],A);const R=l(t,["speechConfig"]);if(R!=null&&d(r,["speechConfig"],ru(R)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=l(t,["thinkingConfig"]);C!=null&&d(r,["thinkingConfig"],C);const P=l(t,["imageConfig"]);P!=null&&d(r,["imageConfig"],ry(P));const $=l(t,["enableEnhancedCivicAnswers"]);return $!=null&&d(r,["enableEnhancedCivicAnswers"],$),r}function Xx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(c=>Lx(c))),d(t,["candidates"],f)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=l(e,["responseId"]);i!=null&&d(t,["responseId"],i);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function Zx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Ar(e,r)),n}function ey(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Ar(e,r)),n}function ty(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function ny(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function ry(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function oy(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["request","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let u=vt(o);Array.isArray(u)&&(u=u.map(f=>L0(f))),d(n,["request","contents"],u)}const s=l(t,["metadata"]);s!=null&&d(n,["metadata"],s);const i=l(t,["config"]);return i!=null&&d(n,["request","generationConfig"],Qx(e,i,l(n,["request"],{}))),n}function sy(e){const t={},n=l(e,["response"]);n!=null&&d(t,["response"],Xx(n));const r=l(e,["error"]);return r!=null&&d(t,["error"],r),t}function iy(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);if(t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ly(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);t!==void 0&&o!=null&&d(t,["_query","pageToken"],o);const s=l(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function ay(e){const t={},n=l(e,["config"]);return n!=null&&iy(n,t),t}function uy(e){const t={},n=l(e,["config"]);return n!=null&&ly(n,t),t}function dy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>cs(i))),d(t,["batchJobs"],s)}return t}function cy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Yl(i))),d(t,["batchJobs"],s)}return t}function fy(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Wx(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],Kx(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const f=l(e,["inlineData"]);f!=null&&d(t,["inlineData"],Rx(f));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function py(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function hy(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],Yx(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function my(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],ty(u));const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],ny(f));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Wt||(Wt={}));class qn{constructor(t,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,o)}init(t,n,r){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(o=i.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gy extends Qt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Ac(this.apiClient,t),r=n._url,o=W("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,f=u.requests,c=[];for(const p of f){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=h,m.request=y}c.push(m)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const s=this.getGcsUri(t),i=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${o}`;else if(i)r.dest=`${i}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Vx(this.apiClient,t);return u=W("batchPredictionJobs",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Yl(p))}else{const c=Ac(this.apiClient,t);return u=W("{model}:batchGenerateContent",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>cs(p))}}async createEmbeddingsInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$x(this.apiClient,t);return s=W("{model}:asyncBatchEmbedContent",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>cs(f))}}async get(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=ey(this.apiClient,t);return u=W("batchPredictionJobs/{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Yl(p))}else{const c=Zx(this.apiClient,t);return u=W("batches/{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>cs(p))}}async cancel(t){var n,r,o,s;let i="",u={};if(this.apiClient.isVertexAI()){const f=Px(this.apiClient,t);i=W("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:i,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=Mx(this.apiClient,t);i=W("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:i,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=uy(t);return u=W("batchPredictionJobs",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=cy(p),h=new Nc;return Object.assign(h,m),h})}else{const c=ay(t);return u=W("batches",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=dy(p),h=new Nc;return Object.assign(h,m),h})}}async delete(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Bx(this.apiClient,t);return u=W("batchPredictionJobs/{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>qx(p))}else{const c=Gx(this.apiClient,t);return u=W("batches/{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>Hx(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xy(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Rc(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>$y(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function yy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=l(e,["contents"]);if(t!==void 0&&i!=null){let p=vt(i);Array.isArray(p)&&(p=p.map(m=>Rc(m))),d(t,["contents"],p)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&d(t,["systemInstruction"],Rc(Oe(u)));const f=l(e,["tools"]);if(t!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>By(m))),d(t,["tools"],p)}const c=l(e,["toolConfig"]);if(t!==void 0&&c!=null&&d(t,["toolConfig"],Gy(c)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function vy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=l(e,["contents"]);if(t!==void 0&&i!=null){let m=vt(i);Array.isArray(m)&&(m=m.map(h=>h)),d(t,["contents"],m)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&d(t,["systemInstruction"],Oe(u));const f=l(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>Hy(h))),d(t,["tools"],m)}const c=l(e,["toolConfig"]);t!==void 0&&c!=null&&d(t,["toolConfig"],c);const p=l(e,["kmsKeyName"]);return t!==void 0&&p!=null&&d(t,["encryption_spec","kmsKeyName"],p),n}function wy(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],C0(e,r));const o=l(t,["config"]);return o!=null&&yy(o,n),n}function ky(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],C0(e,r));const o=l(t,["config"]);return o!=null&&vy(o,n),n}function Cy(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Xt(e,r)),n}function Sy(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Xt(e,r)),n}function Ey(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Ty(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Ny(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function _y(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function by(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Iy(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function Ay(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Xt(e,r)),n}function Ry(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Xt(e,r)),n}function My(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Py(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Ly(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Dy(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Uy(e){const t={},n=l(e,["config"]);return n!=null&&Ly(n,t),t}function Fy(e){const t={},n=l(e,["config"]);return n!=null&&Dy(n,t),t}function Vy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function jy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function $y(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Ny(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],_y(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const f=l(e,["inlineData"]);f!=null&&d(t,["inlineData"],xy(f));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function Gy(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],by(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function By(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],My(u));const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],Py(f));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function Hy(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Iy(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const f=l(e,["googleMaps"]);f!=null&&d(t,["googleMaps"],f);const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function qy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function zy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function Jy(e,t){const n={},r=l(t,["name"]);r!=null&&d(n,["_url","name"],Xt(e,r));const o=l(t,["config"]);return o!=null&&qy(o,n),n}function Oy(e,t){const n={},r=l(t,["name"]);r!=null&&d(n,["_url","name"],Xt(e,r));const o=l(t,["config"]);return o!=null&&zy(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wy extends Qt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=ky(this.apiClient,t);return u=W("cachedContents",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const c=wy(this.apiClient,t);return u=W("cachedContents",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async get(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Ry(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const c=Ay(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Sy(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Ty(p),h=new Ec;return Object.assign(h,m),h})}else{const c=Cy(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Ey(p),h=new Ec;return Object.assign(h,m),h})}}async update(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Oy(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const c=Jy(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async listInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Fy(t);return u=W("cachedContents",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=jy(p),h=new Tc;return Object.assign(h,m),h})}else{const c=Uy(t);return u=W("cachedContents",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Vy(p),h=new Tc;return Object.assign(h,m),h})}}}function Mc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(e){return this instanceof we?(this.v=e,this):new we(e)}function hr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(y){return function(w){return Promise.resolve(w).then(y,m)}}function u(y,w){r[y]&&(o[y]=function(E){return new Promise(function(b,x){s.push([y,E,b,x])>1||f(y,E)})},w&&(o[y]=w(o[y])))}function f(y,w){try{c(r[y](w))}catch(E){h(s[0][3],E)}}function c(y){y.value instanceof we?Promise.resolve(y.value.v).then(p,m):h(s[0][2],y)}function p(y){f("next",y)}function m(y){f("throw",y)}function h(y,w){y(w),s.shift(),s.length&&f(s[0][0],s[0][1])}}function oo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Mc=="function"?Mc(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(i){return new Promise(function(u,f){i=e[s](i),o(u,f,i.done,i.value)})}}function o(s,i,u,f){Promise.resolve(f).then(function(c){s({value:c,done:u})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ky(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:D0(n)}function D0(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Yy(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Pc(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const o=[];let s=!0;for(;r<n&&e[r].role==="model";)o.push(e[r]),s&&!D0(e[r])&&(s=!1),r++;s?t.push(...o):t.pop()}return t}class Qy{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Xy(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Xy{constructor(t,n,r,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),Yy(s)}async sendMessage(t){var n;await this.sendPromise;const r=Oe(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,u;const f=await o,c=(i=(s=f.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,p=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(u=p.slice(m))!==null&&u!==void 0?u:[]);const y=c?[c]:[];this.recordHistory(r,y,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const r=Oe(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,r)}getHistory(t=!1){const n=t?Pc(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return hr(this,arguments,function*(){var o,s,i,u,f,c;const p=[];try{for(var m=!0,h=oo(t),y;y=yield we(h.next()),o=y.done,!o;m=!0){u=y.value,m=!1;const w=u;if(Ky(w)){const E=(c=(f=w.candidates)===null||f===void 0?void 0:f[0])===null||c===void 0?void 0:c.content;E!==void 0&&p.push(E)}yield yield we(w)}}catch(w){s={error:w}}finally{try{!m&&!o&&(i=h.return)&&(yield we(i.call(h)))}finally{if(s)throw s.error}}this.recordHistory(n,p)})}recordHistory(t,n,r){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Pc(r)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ai extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,ai.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zy(e){const t={},n=l(e,["file"]);return n!=null&&d(t,["file"],n),t}function ev(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function tv(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],b0(n)),t}function nv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function rv(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],b0(n)),t}function ov(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function sv(e){const t={},n=l(e,["config"]);return n!=null&&ov(n,t),t}function iv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lv extends Qt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sv(t);return s=W("files",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const c=iv(f),p=new cx;return Object.assign(p,c),p})}}async createInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zy(t);return s=W("upload/v1beta/files",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=ev(f),p=new fx;return Object.assign(p,c),p})}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rv(t);return s=W("files/{file}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tv(t);return s=W("files/{file}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const c=nv(f),p=new px;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fs(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function av(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ev(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function uv(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function dv(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function cv(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function fv(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const i=l(e,["enableAffectiveDialog"]);i!=null&&d(t,["enableAffectiveDialog"],i);const u=l(e,["frequencyPenalty"]);u!=null&&d(t,["frequencyPenalty"],u);const f=l(e,["logprobs"]);f!=null&&d(t,["logprobs"],f);const c=l(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const p=l(e,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const h=l(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const y=l(e,["responseMimeType"]);y!=null&&d(t,["responseMimeType"],y);const w=l(e,["responseModalities"]);w!=null&&d(t,["responseModalities"],w);const E=l(e,["responseSchema"]);E!=null&&d(t,["responseSchema"],E);const b=l(e,["routingConfig"]);b!=null&&d(t,["routingConfig"],b);const x=l(e,["seed"]);x!=null&&d(t,["seed"],x);const v=l(e,["speechConfig"]);v!=null&&d(t,["speechConfig"],U0(v));const g=l(e,["stopSequences"]);g!=null&&d(t,["stopSequences"],g);const T=l(e,["temperature"]);T!=null&&d(t,["temperature"],T);const N=l(e,["thinkingConfig"]);N!=null&&d(t,["thinkingConfig"],N);const S=l(e,["topK"]);S!=null&&d(t,["topK"],S);const k=l(e,["topP"]);if(k!=null&&d(t,["topP"],k),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function pv(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function hv(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function mv(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const f=l(e,["maxOutputTokens"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","maxOutputTokens"],f);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],ou(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const y=l(e,["enableAffectiveDialog"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],y);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],av(Oe(w)));const E=l(e,["tools"]);if(t!==void 0&&E!=null){let S=Ir(E);Array.isArray(S)&&(S=S.map(k=>Nv(br(k)))),d(t,["setup","tools"],S)}const b=l(e,["sessionResumption"]);t!==void 0&&b!=null&&d(t,["setup","sessionResumption"],Tv(b));const x=l(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","inputAudioTranscription"],x);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","outputAudioTranscription"],v);const g=l(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&d(t,["setup","realtimeInputConfig"],g);const T=l(e,["contextWindowCompression"]);t!==void 0&&T!=null&&d(t,["setup","contextWindowCompression"],T);const N=l(e,["proactivity"]);return t!==void 0&&N!=null&&d(t,["setup","proactivity"],N),n}function gv(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],fv(r));const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const f=l(e,["maxOutputTokens"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","maxOutputTokens"],f);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],U0(ou(m)));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const y=l(e,["enableAffectiveDialog"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],y);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],Oe(w));const E=l(e,["tools"]);if(t!==void 0&&E!=null){let S=Ir(E);Array.isArray(S)&&(S=S.map(k=>_v(br(k)))),d(t,["setup","tools"],S)}const b=l(e,["sessionResumption"]);t!==void 0&&b!=null&&d(t,["setup","sessionResumption"],b);const x=l(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","inputAudioTranscription"],x);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","outputAudioTranscription"],v);const g=l(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&d(t,["setup","realtimeInputConfig"],g);const T=l(e,["contextWindowCompression"]);t!==void 0&&T!=null&&d(t,["setup","contextWindowCompression"],T);const N=l(e,["proactivity"]);return t!==void 0&&N!=null&&d(t,["setup","proactivity"],N),n}function xv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],ge(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],mv(o,n)),n}function yv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],ge(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],gv(o,n)),n}function vv(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function wv(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["weightedPrompts"],r)}return t}function kv(e){const t={},n=l(e,["media"]);if(n!=null){let c=S0(n);Array.isArray(c)&&(c=c.map(p=>fs(p))),d(t,["mediaChunks"],c)}const r=l(e,["audio"]);r!=null&&d(t,["audio"],fs(T0(r)));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],fs(E0(s)));const i=l(e,["text"]);i!=null&&d(t,["text"],i);const u=l(e,["activityStart"]);u!=null&&d(t,["activityStart"],u);const f=l(e,["activityEnd"]);return f!=null&&d(t,["activityEnd"],f),t}function Cv(e){const t={},n=l(e,["media"]);if(n!=null){let c=S0(n);Array.isArray(c)&&(c=c.map(p=>p)),d(t,["mediaChunks"],c)}const r=l(e,["audio"]);r!=null&&d(t,["audio"],T0(r));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],E0(s));const i=l(e,["text"]);i!=null&&d(t,["text"],i);const u=l(e,["activityStart"]);u!=null&&d(t,["activityStart"],u);const f=l(e,["activityEnd"]);return f!=null&&d(t,["activityEnd"],f),t}function Sv(e){const t={},n=l(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const r=l(e,["serverContent"]);r!=null&&d(t,["serverContent"],r);const o=l(e,["toolCall"]);o!=null&&d(t,["toolCall"],o);const s=l(e,["toolCallCancellation"]);s!=null&&d(t,["toolCallCancellation"],s);const i=l(e,["usageMetadata"]);i!=null&&d(t,["usageMetadata"],bv(i));const u=l(e,["goAway"]);u!=null&&d(t,["goAway"],u);const f=l(e,["sessionResumptionUpdate"]);return f!=null&&d(t,["sessionResumptionUpdate"],f),t}function Ev(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],uv(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],dv(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const f=l(e,["inlineData"]);f!=null&&d(t,["inlineData"],fs(f));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function Tv(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function U0(e){const t={},n=l(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],n);const r=l(e,["languageCode"]);if(r!=null&&d(t,["languageCode"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Nv(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],pv(u));const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],hv(f));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function _v(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>cv(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const f=l(e,["googleMaps"]);f!=null&&d(t,["googleMaps"],f);const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function bv(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const r=l(e,["cachedContentTokenCount"]);r!=null&&d(t,["cachedContentTokenCount"],r);const o=l(e,["candidatesTokenCount"]);o!=null&&d(t,["responseTokenCount"],o);const s=l(e,["toolUsePromptTokenCount"]);s!=null&&d(t,["toolUsePromptTokenCount"],s);const i=l(e,["thoughtsTokenCount"]);i!=null&&d(t,["thoughtsTokenCount"],i);const u=l(e,["totalTokenCount"]);u!=null&&d(t,["totalTokenCount"],u);const f=l(e,["promptTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>w)),d(t,["promptTokensDetails"],y)}const c=l(e,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),d(t,["cacheTokensDetails"],y)}const p=l(e,["candidatesTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(w=>w)),d(t,["responseTokensDetails"],y)}const m=l(e,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>w)),d(t,["toolUsePromptTokensDetails"],y)}const h=l(e,["trafficType"]);return h!=null&&d(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iv(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Av(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],Rv(r));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=l(e,["avgLogprobs"]);i!=null&&d(t,["avgLogprobs"],i);const u=l(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const f=l(e,["index"]);f!=null&&d(t,["index"],f);const c=l(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const p=l(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>y)),d(t,["safetyRatings"],h)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function Rv(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function Mv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["contents"],s)}return n}function Pv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["tokensInfo"],o)}return t}function Lv(e){const t={},n=l(e,["values"]);n!=null&&d(t,["values"],n);const r=l(e,["statistics"]);return r!=null&&d(t,["statistics"],Dv(r)),t}function Dv(e){const t={},n=l(e,["truncated"]);n!=null&&d(t,["truncated"],n);const r=l(e,["token_count"]);return r!=null&&d(t,["tokenCount"],r),t}function ui(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>qw(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function Uv(e){const t={},n=l(e,["controlType"]);n!=null&&d(t,["controlType"],n);const r=l(e,["enableControlImageComputation"]);return r!=null&&d(t,["computeControl"],r),t}function Fv(e){const t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Vv(e,t){const n={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],Oe(r));const o=l(e,["tools"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(u=>G0(u))),d(t,["tools"],i)}const s=l(e,["generationConfig"]);return t!==void 0&&s!=null&&d(t,["generationConfig"],Iw(s)),n}function jv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>ui(u))),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&Fv(s),n}function $v(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&Vv(s,n),n}function Gv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);r!=null&&d(t,["totalTokens"],r);const o=l(e,["cachedContentTokenCount"]);return o!=null&&d(t,["cachedContentTokenCount"],o),t}function Bv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);return r!=null&&d(t,["totalTokens"],r),t}function Hv(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ge(e,r)),n}function qv(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ge(e,r)),n}function zv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Jv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Ov(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u);const f=l(e,["seed"]);t!==void 0&&f!=null&&d(t,["parameters","seed"],f);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&d(t,["parameters","safetySetting"],c);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const y=l(e,["language"]);t!==void 0&&y!=null&&d(t,["parameters","language"],y);const w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&d(t,["parameters","outputOptions","mimeType"],w);const E=l(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","compressionQuality"],E);const b=l(e,["addWatermark"]);t!==void 0&&b!=null&&d(t,["parameters","addWatermark"],b);const x=l(e,["labels"]);t!==void 0&&x!=null&&d(t,["labels"],x);const v=l(e,["editMode"]);t!==void 0&&v!=null&&d(t,["parameters","editMode"],v);const g=l(e,["baseSteps"]);return t!==void 0&&g!=null&&d(t,["parameters","editConfig","baseSteps"],g),n}function Wv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>Yw(f))),d(n,["instances[0]","referenceImages"],u)}const i=l(t,["config"]);return i!=null&&Ov(i,n),n}function Kv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>di(s))),d(t,["generatedImages"],o)}return t}function Yv(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Qv(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["instances[]","task_type"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["instances[]","title"],o);const s=l(e,["outputDimensionality"]);t!==void 0&&s!=null&&d(t,["parameters","outputDimensionality"],s);const i=l(e,["mimeType"]);t!==void 0&&i!=null&&d(t,["instances[]","mimeType"],i);const u=l(e,["autoTruncate"]);return t!==void 0&&u!=null&&d(t,["parameters","autoTruncate"],u),n}function Xv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let u=tu(e,o);Array.isArray(u)&&(u=u.map(f=>f)),d(n,["requests[]","content"],u)}const s=l(t,["config"]);s!=null&&Yv(s,n);const i=l(t,["model"]);return i!==void 0&&d(n,["requests[]","model"],ge(e,i)),n}function Zv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let i=tu(e,o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["instances[]","content"],i)}const s=l(t,["config"]);return s!=null&&Qv(s,n),n}function ew(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function tw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Lv(i))),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function nw(e){const t={},n=l(e,["endpoint"]);n!=null&&d(t,["name"],n);const r=l(e,["deployedModelId"]);return r!=null&&d(t,["deployedModelId"],r),t}function rw(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ow(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function sw(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function iw(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function lw(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],ui(Oe(o)));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const f=l(t,["candidateCount"]);f!=null&&d(r,["candidateCount"],f);const c=l(t,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const y=l(t,["presencePenalty"]);y!=null&&d(r,["presencePenalty"],y);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const E=l(t,["seed"]);E!=null&&d(r,["seed"],E);const b=l(t,["responseMimeType"]);b!=null&&d(r,["responseMimeType"],b);const x=l(t,["responseSchema"]);x!=null&&d(r,["responseSchema"],nu(x));const v=l(t,["responseJsonSchema"]);if(v!=null&&d(r,["responseJsonSchema"],v),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=l(t,["safetySettings"]);if(n!==void 0&&g!=null){let j=g;Array.isArray(j)&&(j=j.map(I=>Qw(I))),d(n,["safetySettings"],j)}const T=l(t,["tools"]);if(n!==void 0&&T!=null){let j=Ir(T);Array.isArray(j)&&(j=j.map(I=>o1(br(I)))),d(n,["tools"],j)}const N=l(t,["toolConfig"]);if(n!==void 0&&N!=null&&d(n,["toolConfig"],r1(N)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=l(t,["cachedContent"]);n!==void 0&&S!=null&&d(n,["cachedContent"],Xt(e,S));const k=l(t,["responseModalities"]);k!=null&&d(r,["responseModalities"],k);const A=l(t,["mediaResolution"]);A!=null&&d(r,["mediaResolution"],A);const R=l(t,["speechConfig"]);if(R!=null&&d(r,["speechConfig"],ru(R)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=l(t,["thinkingConfig"]);C!=null&&d(r,["thinkingConfig"],C);const P=l(t,["imageConfig"]);P!=null&&d(r,["imageConfig"],Lw(P));const $=l(t,["enableEnhancedCivicAnswers"]);return $!=null&&d(r,["enableEnhancedCivicAnswers"],$),r}function aw(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Oe(o));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const f=l(t,["candidateCount"]);f!=null&&d(r,["candidateCount"],f);const c=l(t,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const y=l(t,["presencePenalty"]);y!=null&&d(r,["presencePenalty"],y);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const E=l(t,["seed"]);E!=null&&d(r,["seed"],E);const b=l(t,["responseMimeType"]);b!=null&&d(r,["responseMimeType"],b);const x=l(t,["responseSchema"]);x!=null&&d(r,["responseSchema"],nu(x));const v=l(t,["responseJsonSchema"]);v!=null&&d(r,["responseJsonSchema"],v);const g=l(t,["routingConfig"]);g!=null&&d(r,["routingConfig"],g);const T=l(t,["modelSelectionConfig"]);T!=null&&d(r,["modelConfig"],T);const N=l(t,["safetySettings"]);if(n!==void 0&&N!=null){let B=N;Array.isArray(B)&&(B=B.map(q=>q)),d(n,["safetySettings"],B)}const S=l(t,["tools"]);if(n!==void 0&&S!=null){let B=Ir(S);Array.isArray(B)&&(B=B.map(q=>G0(br(q)))),d(n,["tools"],B)}const k=l(t,["toolConfig"]);n!==void 0&&k!=null&&d(n,["toolConfig"],k);const A=l(t,["labels"]);n!==void 0&&A!=null&&d(n,["labels"],A);const R=l(t,["cachedContent"]);n!==void 0&&R!=null&&d(n,["cachedContent"],Xt(e,R));const C=l(t,["responseModalities"]);C!=null&&d(r,["responseModalities"],C);const P=l(t,["mediaResolution"]);P!=null&&d(r,["mediaResolution"],P);const $=l(t,["speechConfig"]);$!=null&&d(r,["speechConfig"],$0(ru($)));const j=l(t,["audioTimestamp"]);j!=null&&d(r,["audioTimestamp"],j);const I=l(t,["thinkingConfig"]);I!=null&&d(r,["thinkingConfig"],I);const V=l(t,["imageConfig"]);if(V!=null&&d(r,["imageConfig"],Dw(V)),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Lc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>ui(u))),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],lw(e,s,n)),n}function Dc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],aw(e,s,n)),n}function Uc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(c=>Av(c))),d(t,["candidates"],f)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=l(e,["responseId"]);i!=null&&d(t,["responseId"],i);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function Fc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>p)),d(t,["candidates"],c)}const o=l(e,["createTime"]);o!=null&&d(t,["createTime"],o);const s=l(e,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);const i=l(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);const u=l(e,["responseId"]);u!=null&&d(t,["responseId"],u);const f=l(e,["usageMetadata"]);return f!=null&&d(t,["usageMetadata"],f),t}function uw(e,t){const n={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const s=l(e,["guidanceScale"]);if(t!==void 0&&s!=null&&d(t,["parameters","guidanceScale"],s),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&d(t,["parameters","safetySetting"],i);const u=l(e,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const f=l(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&d(t,["parameters","includeSafetyAttributes"],f);const c=l(e,["includeRaiReason"]);t!==void 0&&c!=null&&d(t,["parameters","includeRaiReason"],c);const p=l(e,["language"]);t!==void 0&&p!=null&&d(t,["parameters","language"],p);const m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const h=l(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&d(t,["parameters","outputOptions","compressionQuality"],h),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=l(e,["imageSize"]);if(t!==void 0&&y!=null&&d(t,["parameters","sampleImageSize"],y),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function dw(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u);const f=l(e,["seed"]);t!==void 0&&f!=null&&d(t,["parameters","seed"],f);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&d(t,["parameters","safetySetting"],c);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const y=l(e,["language"]);t!==void 0&&y!=null&&d(t,["parameters","language"],y);const w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&d(t,["parameters","outputOptions","mimeType"],w);const E=l(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","compressionQuality"],E);const b=l(e,["addWatermark"]);t!==void 0&&b!=null&&d(t,["parameters","addWatermark"],b);const x=l(e,["labels"]);t!==void 0&&x!=null&&d(t,["labels"],x);const v=l(e,["imageSize"]);t!==void 0&&v!=null&&d(t,["parameters","sampleImageSize"],v);const g=l(e,["enhancePrompt"]);return t!==void 0&&g!=null&&d(t,["parameters","enhancePrompt"],g),n}function cw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&uw(s,n),n}function fw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&dw(s,n),n}function pw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Tw(i))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],V0(o)),t}function hw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>di(i))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],j0(o)),t}function mw(e,t){const n={},r=l(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(e,["durationSeconds"]);if(t!==void 0&&o!=null&&d(t,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const i=l(e,["resolution"]);t!==void 0&&i!=null&&d(t,["parameters","resolution"],i);const u=l(e,["personGeneration"]);if(t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=l(e,["negativePrompt"]);t!==void 0&&f!=null&&d(t,["parameters","negativePrompt"],f);const c=l(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&d(t,["parameters","enhancePrompt"],c),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=l(e,["lastFrame"]);t!==void 0&&p!=null&&d(t,["instances[0]","lastFrame"],ci(p));const m=l(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(y=>x1(y))),d(t,["instances[0]","referenceImages"],h)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function gw(e,t){const n={},r=l(e,["numberOfVideos"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const s=l(e,["fps"]);t!==void 0&&s!=null&&d(t,["parameters","fps"],s);const i=l(e,["durationSeconds"]);t!==void 0&&i!=null&&d(t,["parameters","durationSeconds"],i);const u=l(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const f=l(e,["aspectRatio"]);t!==void 0&&f!=null&&d(t,["parameters","aspectRatio"],f);const c=l(e,["resolution"]);t!==void 0&&c!=null&&d(t,["parameters","resolution"],c);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["pubsubTopic"]);t!==void 0&&m!=null&&d(t,["parameters","pubsubTopic"],m);const h=l(e,["negativePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","negativePrompt"],h);const y=l(e,["enhancePrompt"]);t!==void 0&&y!=null&&d(t,["parameters","enhancePrompt"],y);const w=l(e,["generateAudio"]);t!==void 0&&w!=null&&d(t,["parameters","generateAudio"],w);const E=l(e,["lastFrame"]);t!==void 0&&E!=null&&d(t,["instances[0]","lastFrame"],It(E));const b=l(e,["referenceImages"]);if(t!==void 0&&b!=null){let g=b;Array.isArray(g)&&(g=g.map(T=>y1(T))),d(t,["instances[0]","referenceImages"],g)}const x=l(e,["mask"]);t!==void 0&&x!=null&&d(t,["instances[0]","mask"],g1(x));const v=l(e,["compressionQuality"]);return t!==void 0&&v!=null&&d(t,["parameters","compressionQuality"],v),n}function xw(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],kw(i)),t}function yw(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Cw(i)),t}function vw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],ci(s));const i=l(t,["video"]);i!=null&&d(n,["instances[0]","video"],B0(i));const u=l(t,["source"]);u!=null&&Sw(u,n);const f=l(t,["config"]);return f!=null&&mw(f,n),n}function ww(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],It(s));const i=l(t,["video"]);i!=null&&d(n,["instances[0]","video"],H0(i));const u=l(t,["source"]);u!=null&&Ew(u,n);const f=l(t,["config"]);return f!=null&&gw(f,n),n}function kw(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>_w(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Cw(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>bw(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Sw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],ci(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],B0(s)),n}function Ew(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],It(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],H0(s)),n}function Tw(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],Uw(n));const r=l(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const o=l(e,["_self"]);return o!=null&&d(t,["safetyAttributes"],V0(o)),t}function di(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],F0(n));const r=l(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const o=l(e,["_self"]);o!=null&&d(t,["safetyAttributes"],j0(o));const s=l(e,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function Nw(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["mask"],F0(n));const r=l(e,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["labels"],o)}return t}function _w(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],h1(n)),t}function bw(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],m1(n)),t}function Iw(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const i=l(e,["enableAffectiveDialog"]);i!=null&&d(t,["enableAffectiveDialog"],i);const u=l(e,["frequencyPenalty"]);u!=null&&d(t,["frequencyPenalty"],u);const f=l(e,["logprobs"]);f!=null&&d(t,["logprobs"],f);const c=l(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const p=l(e,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const h=l(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const y=l(e,["responseMimeType"]);y!=null&&d(t,["responseMimeType"],y);const w=l(e,["responseModalities"]);w!=null&&d(t,["responseModalities"],w);const E=l(e,["responseSchema"]);E!=null&&d(t,["responseSchema"],E);const b=l(e,["routingConfig"]);b!=null&&d(t,["routingConfig"],b);const x=l(e,["seed"]);x!=null&&d(t,["seed"],x);const v=l(e,["speechConfig"]);v!=null&&d(t,["speechConfig"],$0(v));const g=l(e,["stopSequences"]);g!=null&&d(t,["stopSequences"],g);const T=l(e,["temperature"]);T!=null&&d(t,["temperature"],T);const N=l(e,["thinkingConfig"]);N!=null&&d(t,["thinkingConfig"],N);const S=l(e,["topK"]);S!=null&&d(t,["topK"],S);const k=l(e,["topP"]);if(k!=null&&d(t,["topP"],k),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Aw(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ge(e,r)),n}function Rw(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ge(e,r)),n}function Mw(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Pw(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Lw(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Dw(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);r!=null&&d(t,["imageSize"],r);const o=l(e,["outputMimeType"]);o!=null&&d(t,["imageOutputOptions","mimeType"],o);const s=l(e,["outputCompressionQuality"]);return s!=null&&d(t,["imageOutputOptions","compressionQuality"],s),t}function Uw(e){const t={},n=l(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],Cn(n));const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function F0(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["imageBytes"],Cn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function ci(e){const t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],Cn(n));const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function It(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["imageBytes"]);r!=null&&d(t,["bytesBase64Encoded"],Cn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Fw(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=l(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],I0(e,u)),r}function Vw(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=l(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],I0(e,u)),r}function jw(e,t){const n={},r=l(t,["config"]);return r!=null&&Fw(e,r,n),n}function $w(e,t){const n={},r=l(t,["config"]);return r!=null&&Vw(e,r,n),n}function Gw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let s=A0(o);Array.isArray(s)&&(s=s.map(i=>Ql(i))),d(t,["models"],s)}return t}function Bw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let s=A0(o);Array.isArray(s)&&(s=s.map(i=>Xl(i))),d(t,["models"],s)}return t}function Hw(e){const t={},n=l(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const r=l(e,["segmentationClasses"]);r!=null&&d(t,["maskClasses"],r);const o=l(e,["maskDilation"]);return o!=null&&d(t,["dilation"],o),t}function Ql(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["version"]);s!=null&&d(t,["version"],s);const i=l(e,["_self"]);i!=null&&d(t,["tunedModelInfo"],s1(i));const u=l(e,["inputTokenLimit"]);u!=null&&d(t,["inputTokenLimit"],u);const f=l(e,["outputTokenLimit"]);f!=null&&d(t,["outputTokenLimit"],f);const c=l(e,["supportedGenerationMethods"]);c!=null&&d(t,["supportedActions"],c);const p=l(e,["temperature"]);p!=null&&d(t,["temperature"],p);const m=l(e,["maxTemperature"]);m!=null&&d(t,["maxTemperature"],m);const h=l(e,["topP"]);h!=null&&d(t,["topP"],h);const y=l(e,["topK"]);y!=null&&d(t,["topK"],y);const w=l(e,["thinking"]);return w!=null&&d(t,["thinking"],w),t}function Xl(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["versionId"]);s!=null&&d(t,["version"],s);const i=l(e,["deployedModels"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>nw(h))),d(t,["endpoints"],m)}const u=l(e,["labels"]);u!=null&&d(t,["labels"],u);const f=l(e,["_self"]);f!=null&&d(t,["tunedModelInfo"],i1(f));const c=l(e,["defaultCheckpointId"]);c!=null&&d(t,["defaultCheckpointId"],c);const p=l(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),d(t,["checkpoints"],m)}return t}function qw(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],rw(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],ow(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const f=l(e,["inlineData"]);f!=null&&d(t,["inlineData"],Iv(f));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function zw(e){const t={},n=l(e,["productImage"]);return n!=null&&d(t,["image"],It(n)),t}function Jw(e,t){const n={},r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["baseSteps"]);t!==void 0&&o!=null&&d(t,["parameters","baseSteps"],o);const s=l(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const i=l(e,["seed"]);t!==void 0&&i!=null&&d(t,["parameters","seed"],i);const u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&d(t,["parameters","safetySetting"],u);const f=l(e,["personGeneration"]);t!==void 0&&f!=null&&d(t,["parameters","personGeneration"],f);const c=l(e,["addWatermark"]);t!==void 0&&c!=null&&d(t,["parameters","addWatermark"],c);const p=l(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);const m=l(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","compressionQuality"],m);const h=l(e,["enhancePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","enhancePrompt"],h);const y=l(e,["labels"]);return t!==void 0&&y!=null&&d(t,["labels"],y),n}function Ow(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["source"]);o!=null&&Kw(o,n);const s=l(t,["config"]);return s!=null&&Jw(s,n),n}function Ww(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>di(o))),d(t,["generatedImages"],r)}return t}function Kw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["personImage"]);t!==void 0&&o!=null&&d(t,["instances[0]","personImage","image"],It(o));const s=l(e,["productImages"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>zw(u))),d(t,["instances[0]","productImages"],i)}return n}function Yw(e){const t={},n=l(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],It(n));const r=l(e,["referenceId"]);r!=null&&d(t,["referenceId"],r);const o=l(e,["referenceType"]);o!=null&&d(t,["referenceType"],o);const s=l(e,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],Hw(s));const i=l(e,["controlImageConfig"]);i!=null&&d(t,["controlImageConfig"],Uv(i));const u=l(e,["styleImageConfig"]);u!=null&&d(t,["styleImageConfig"],u);const f=l(e,["subjectImageConfig"]);return f!=null&&d(t,["subjectImageConfig"],f),t}function V0(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function j0(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function Qw(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function Xw(e){const t={},n=l(e,["image"]);return n!=null&&d(t,["image"],It(n)),t}function Zw(e,t){const n={},r=l(e,["mode"]);t!==void 0&&r!=null&&d(t,["parameters","mode"],r);const o=l(e,["maxPredictions"]);t!==void 0&&o!=null&&d(t,["parameters","maxPredictions"],o);const s=l(e,["confidenceThreshold"]);t!==void 0&&s!=null&&d(t,["parameters","confidenceThreshold"],s);const i=l(e,["maskDilation"]);t!==void 0&&i!=null&&d(t,["parameters","maskDilation"],i);const u=l(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&d(t,["parameters","binaryColorThreshold"],u);const f=l(e,["labels"]);return t!==void 0&&f!=null&&d(t,["labels"],f),n}function e1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["source"]);o!=null&&n1(o,n);const s=l(t,["config"]);return s!=null&&Zw(s,n),n}function t1(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Nw(o))),d(t,["generatedMasks"],r)}return t}function n1(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],It(o));const s=l(e,["scribbleImage"]);return t!==void 0&&s!=null&&d(t,["instances[0]","scribble"],Xw(s)),n}function $0(e){const t={},n=l(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],n);const r=l(e,["languageCode"]);if(r!=null&&d(t,["languageCode"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function r1(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],sw(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function o1(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],Mw(u));const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],Pw(f));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function G0(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>iw(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const f=l(e,["googleMaps"]);f!=null&&d(t,["googleMaps"],f);const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function s1(e){const t={},n=l(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function i1(e){const t={},n=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function l1(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function a1(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function u1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","name"],ge(e,r));const o=l(t,["config"]);return o!=null&&l1(o,n),n}function d1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["config"]);return o!=null&&a1(o,n),n}function c1(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&d(t,["parameters","safetySetting"],o);const s=l(e,["personGeneration"]);t!==void 0&&s!=null&&d(t,["parameters","personGeneration"],s);const i=l(e,["includeRaiReason"]);t!==void 0&&i!=null&&d(t,["parameters","includeRaiReason"],i);const u=l(e,["outputMimeType"]);t!==void 0&&u!=null&&d(t,["parameters","outputOptions","mimeType"],u);const f=l(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&d(t,["parameters","outputOptions","compressionQuality"],f);const c=l(e,["enhanceInputImage"]);t!==void 0&&c!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],c);const p=l(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const h=l(e,["numberOfImages"]);t!==void 0&&h!=null&&d(t,["parameters","sampleCount"],h);const y=l(e,["mode"]);return t!==void 0&&y!=null&&d(t,["parameters","mode"],y),n}function f1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ge(e,r));const o=l(t,["image"]);o!=null&&d(n,["instances[0]","image"],It(o));const s=l(t,["upscaleFactor"]);s!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=l(t,["config"]);return i!=null&&c1(i,n),n}function p1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>di(s))),d(t,["generatedImages"],o)}return t}function h1(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],Cn(r));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function m1(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],Cn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function g1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["_self"],It(n));const r=l(e,["maskMode"]);return r!=null&&d(t,["maskMode"],r),t}function x1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],ci(n));const r=l(e,["referenceType"]);return r!=null&&d(t,["referenceType"],r),t}function y1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],It(n));const r=l(e,["referenceType"]);return r!=null&&d(t,["referenceType"],r),t}function B0(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["videoBytes"]);r!=null&&d(t,["encodedVideo"],Cn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["encoding"],o),t}function H0(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["videoBytes"]);r!=null&&d(t,["bytesBase64Encoded"],Cn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v1(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["displayName"],r),n}function w1(e){const t={},n=l(e,["config"]);return n!=null&&v1(n,t),t}function k1(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function C1(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&k1(r,t),t}function S1(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function E1(e,t){const n={},r=l(e,["customMetadata"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["customMetadata"],s)}const o=l(e,["chunkingConfig"]);return t!==void 0&&o!=null&&d(t,["chunkingConfig"],o),n}function T1(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],_1(i)),t}function N1(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const r=l(e,["fileName"]);r!=null&&d(t,["fileName"],r);const o=l(e,["config"]);return o!=null&&E1(o,t),t}function _1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function b1(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function I1(e){const t={},n=l(e,["config"]);return n!=null&&b1(n,t),t}function A1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["fileSearchStores"],s)}return t}function q0(e,t){const n={},r=l(e,["mimeType"]);t!==void 0&&r!=null&&d(t,["mimeType"],r);const o=l(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const s=l(e,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>f)),d(t,["customMetadata"],u)}const i=l(e,["chunkingConfig"]);return t!==void 0&&i!=null&&d(t,["chunkingConfig"],i),n}function R1(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const r=l(e,["config"]);return r!=null&&q0(r,t),t}function M1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P1="Content-Type",L1="X-Server-Timeout",D1="User-Agent",Zl="x-goog-api-client",U1="1.32.0",F1=`google-genai-sdk/${U1}`,V1="v1beta1",j1="v1beta";class $1{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:V1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:j1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[i,u]of Object.entries(t.queryParams))o.searchParams.append(i,String(u));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?r[o]=Object.assign(Object.assign({},r[o]),s):s!==void 0&&(r[o]=s);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,o){if(n&&n.timeout||o){const s=new AbortController,i=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=i}return n&&n.extraBody!==null&&G1(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Vc(o),new Wl(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Vc(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return hr(this,arguments,function*(){var r;const o=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let i="";const u="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:p}=yield we(o.read());if(c){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=s.decode(p,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const E=JSON.parse(JSON.stringify(w.error)),b=E.status,x=E.code,v=`got status: ${b}. ${JSON.stringify(w)}`;if(x>=400&&x<600)throw new ai({message:v,status:x})}}catch(w){if(w.name==="ApiError")throw w}i+=m;let h=-1,y=0;for(;;){h=-1,y=0;for(const b of f){const x=i.indexOf(b);x!==-1&&(h===-1||x<h)&&(h=x,y=b.length)}if(h===-1)break;const w=i.substring(0,h);i=i.substring(h+y);const E=w.trim();if(E.startsWith(u)){const b=E.substring(u.length).trim();try{const x=new Response(b,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield we(new Wl(x))}catch(x){throw new Error(`exception parsing stream chunk ${b}. ${x}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=F1+" "+this.clientOptions.userAgentExtra;return t[D1]=n,t[Zl]=n,t[P1]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))r.append(o,s);t.timeout&&t.timeout>0&&r.append(L1,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,i=await s.stat(t);o.sizeBytes=String(i.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f={file:o},c=this.getFileName(t),p=W("upload/v1beta/files",f._url),m=await this.fetchUploadUrl(p,o.sizeBytes,o.mimeType,c,f,n==null?void 0:n.httpOptions);return s.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,r){var o;const s=this.clientOptions.uploader,i=await s.stat(n),u=String(i.size),f=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:i.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&q0(r,m);const h=await this.fetchUploadUrl(c,u,f,p,m,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,o,s,i){var u;let f={};i?f=i:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:f});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Vc(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new ai({message:o,status:n}):new Error(o)}}function G1(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,i){const u=Object.assign({},s);for(const f in i)if(Object.prototype.hasOwnProperty.call(i,f)){const c=i[f],p=u[f];c&&typeof c=="object"&&!Array.isArray(c)&&p&&typeof p=="object"&&!Array.isArray(p)?u[f]=r(p,c):(p&&c&&typeof p!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof c}. Overwriting.`),u[f]=c)}return u}const o=r(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B1="mcp_used/unknown";let H1=!1;function z0(e){for(const t of e)if(q1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return H1}function J0(e){var t;const n=(t=e[Zl])!==null&&t!==void 0?t:"";e[Zl]=(n+` ${B1}`).trimStart()}function q1(e){return e!==null&&typeof e=="object"&&e instanceof su}function z1(e){return hr(this,arguments,function*(n,r=100){let o,s=0;for(;s<r;){const i=yield we(n.listTools({cursor:o}));for(const u of i.tools)yield yield we(u),s++;if(!i.nextCursor)break;o=i.nextCursor}})}class su{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new su(t,n)}async initialize(){var t,n,r,o;if(this.mcpTools.length>0)return;const s={},i=[];for(const p of this.mcpClients)try{for(var u=!0,f=(n=void 0,oo(z1(p))),c;c=await f.next(),t=c.done,!t;u=!0){o=c.value,u=!1;const m=o;i.push(m);const h=m.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=p}}catch(m){n={error:m}}finally{try{!u&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Sx(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await o.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function J1(e,t,n){const r=new mx;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),t(r)}class O1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=Y1(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const p=new Promise(g=>{c=g}),m=t.callbacks,h=function(){c({})},y=this.apiClient,w={onopen:h,onmessage:g=>{J1(y,m.onmessage,g)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(g){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(g){}},E=this.webSocketFactory.create(f,K1(i),w);E.connect(),await p;const v={setup:{model:ge(this.apiClient,t.model)}};return E.send(JSON.stringify(v)),new W1(E,this.apiClient)}}class W1{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=wv(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=vv(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(sr.PLAY)}pause(){this.sendPlaybackControl(sr.PAUSE)}stop(){this.sendPlaybackControl(sr.STOP)}resetContext(){this.sendPlaybackControl(sr.RESET_CONTEXT)}close(){this.conn.close()}}function K1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Y1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function X1(e,t,n){const r=new hx;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const i=Sv(s);Object.assign(r,i)}else Object.assign(r,s);t(r)}class Z1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new O1(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,o,s,i,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&z0(t.config.tools)&&J0(m);const h=rk(m);if(this.apiClient.isVertexAI())p=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const R=this.apiClient.getApiKey();let C="BidiGenerateContent",P="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),C="BidiGenerateContentConstrained",P="access_token"),p=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${C}?${P}=${R}`}let y=()=>{};const w=new Promise(R=>{y=R}),E=t.callbacks,b=function(){var R;(R=E==null?void 0:E.onopen)===null||R===void 0||R.call(E),y({})},x=this.apiClient,v={onopen:b,onmessage:R=>{X1(x,E.onmessage,R)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(R){}},g=this.webSocketFactory.create(p,nk(h),v);g.connect(),await w;let T=ge(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const R=this.apiClient.getProject(),C=this.apiClient.getLocation();T=`projects/${R}/locations/${C}/`+T}let N={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[js.AUDIO]}:t.config.responseModalities=[js.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&u!==void 0?u:[],k=[];for(const R of S)if(this.isCallableTool(R)){const C=R;k.push(await C.tool())}else k.push(R);k.length>0&&(t.config.tools=k);const A={model:T,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?N=yv(this.apiClient,A):N=xv(this.apiClient,A),delete N.config,g.send(JSON.stringify(N)),new tk(g,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const ek={turnComplete:!0};class tk{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=vt(n.turns),t.isVertexAI()||(r=r.map(o=>ui(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(Q1)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},ek),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Cv(t)}:n={realtimeInput:kv(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function nk(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function rk(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jc=10;function $c(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(mr(i)){o=!0;break}if(!o)return!0;const s=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function mr(e){return"callTool"in e&&typeof e.callTool=="function"}function ok(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>mr(o)))!==null&&r!==void 0?r:!1}function Gc(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,o)=>{if(mr(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Bc(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sk extends Qt{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,o,s,i,u;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ok(n)||$c(n.config))return await this.generateContentInternal(f);const c=Gc(n);if(c.length>0){const E=c.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let p,m;const h=vt(f.contents),y=(s=(o=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:jc;let w=0;for(;w<y&&(p=await this.generateContentInternal(f),!(!p.functionCalls||p.functionCalls.length===0));){const E=p.candidates[0].content,b=[];for(const x of(u=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&u!==void 0?u:[])if(mr(x)){const g=await x.callTool(p.functionCalls);b.push(...g)}w++,m={role:"user",parts:b},f.contents=vt(f.contents),f.contents.push(E),f.contents.push(m),Bc(f.config)&&(h.push(E),h.push(m))}return Bc(f.config)&&(p.automaticFunctionCallingHistory=h),p},this.generateContentStream=async n=>{var r,o,s,i,u;if(this.maybeMoveToResponseJsonSchem(n),$c(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const f=Gc(n);if(f.length>0){const m=f.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,p=(u=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let s;const i=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=f==null?void 0:f.safetyAttributes:i.push(f);let u;return s?u={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new qn(Wt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,s,i,u,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(s=n.source)===null||s===void 0?void 0:s.video)===null||i===void 0)&&i.uri&&(!((f=(u=n.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const i=await Promise.all(s.map(async f=>mr(f)?await f.tool():f)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(u.config.tools=i,t.config&&t.config.tools&&z0(t.config.tools)){const f=(o=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),J0(c),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(t){var n,r,o;const s=new Map;for(const i of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(mr(i)){const u=i,f=await u.tool();for(const c of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,u)}}return s}async processAfcStream(t){var n,r,o;const s=(o=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:jc;let i=!1,u=0;const f=await this.initAfcToolsMap(t);return function(c,p,m){return hr(this,arguments,function*(){for(var h,y,w,E,b,x;u<s;){i&&(u++,i=!1);const N=yield we(c.processParamsMaybeAddMcpUsage(m)),S=yield we(c.generateContentStreamInternal(N)),k=[],A=[];try{for(var v=!0,g=(y=void 0,oo(S)),T;T=yield we(g.next()),h=T.done,!h;v=!0){E=T.value,v=!1;const R=E;if(yield yield we(R),R.candidates&&(!((b=R.candidates[0])===null||b===void 0)&&b.content)){A.push(R.candidates[0].content);for(const C of(x=R.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(u<s&&C.functionCall){if(!C.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(C.functionCall.name)){const P=yield we(p.get(C.functionCall.name).callTool([C.functionCall]));k.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${C.functionCall.name}`)}}}}catch(R){y={error:R}}finally{try{!v&&!h&&(w=g.return)&&(yield we(w.call(g)))}finally{if(y)throw y.error}}if(k.length>0){i=!0;const R=new Hr;R.candidates=[{content:{role:"user",parts:k}}],yield yield we(R);const C=[];C.push(...A),C.push({role:"user",parts:k});const P=vt(m.contents).concat(C);m.contents=P}else break}})}(this,f,t)}async generateContentInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,t);return u=W("{model}:generateContent",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Fc(p),h=new Hr;return Object.assign(h,m),h})}else{const c=Lc(this.apiClient,t);return u=W("{model}:generateContent",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Uc(p),h=new Hr;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,t);return u=W("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(m){return hr(this,arguments,function*(){var h,y,w,E;try{for(var b=!0,x=oo(m),v;v=yield we(x.next()),h=v.done,!h;b=!0){E=v.value,b=!1;const g=E,T=Fc(yield we(g.json()));T.sdkHttpResponse={headers:g.headers};const N=new Hr;Object.assign(N,T),yield yield we(N)}}catch(g){y={error:g}}finally{try{!b&&!h&&(w=x.return)&&(yield we(w.call(x)))}finally{if(y)throw y.error}}})})}else{const c=Lc(this.apiClient,t);return u=W("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(m){return hr(this,arguments,function*(){var h,y,w,E;try{for(var b=!0,x=oo(m),v;v=yield we(x.next()),h=v.done,!h;b=!0){E=v.value,b=!1;const g=E,T=Uc(yield we(g.json()));T.sdkHttpResponse={headers:g.headers};const N=new Hr;Object.assign(N,T),yield yield we(N)}}catch(g){y={error:g}}finally{try{!b&&!h&&(w=x.return)&&(yield we(w.call(x)))}finally{if(y)throw y.error}}})})}}async embedContent(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Zv(this.apiClient,t);return u=W("{model}:predict",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=tw(p),h=new xc;return Object.assign(h,m),h})}else{const c=Xv(this.apiClient,t);return u=W("{model}:batchEmbedContents",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=ew(p),h=new xc;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=fw(this.apiClient,t);return u=W("{model}:predict",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=hw(p),h=new yc;return Object.assign(h,m),h})}else{const c=cw(this.apiClient,t);return u=W("{model}:predict",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=pw(p),h=new yc;return Object.assign(h,m),h})}}async editImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Wv(this.apiClient,t);return s=W("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const c=Kv(f),p=new rx;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=f1(this.apiClient,t);return s=W("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const c=p1(f),p=new ox;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Ow(this.apiClient,t);return s=W("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Ww(f),p=new sx;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=e1(this.apiClient,t);return s=W("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=t1(f),p=new ix;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Rw(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Xl(p))}else{const c=Aw(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Ql(p))}}async listInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=$w(this.apiClient,t);return u=W("{models_url}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Bw(p),h=new vc;return Object.assign(h,m),h})}else{const c=jw(this.apiClient,t);return u=W("{models_url}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Gw(p),h=new vc;return Object.assign(h,m),h})}}async update(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=d1(this.apiClient,t);return u=W("{model}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Xl(p))}else{const c=u1(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Ql(p))}}async delete(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=qv(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Jv(p),h=new wc;return Object.assign(h,m),h})}else{const c=Hv(this.apiClient,t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=zv(p),h=new wc;return Object.assign(h,m),h})}}async countTokens(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=$v(this.apiClient,t);return u=W("{model}:countTokens",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Bv(p),h=new kc;return Object.assign(h,m),h})}else{const c=jv(this.apiClient,t);return u=W("{model}:countTokens",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Gv(p),h=new kc;return Object.assign(h,m),h})}}async computeTokens(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Mv(this.apiClient,t);return s=W("{model}:computeTokens",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>{const c=Pv(f),p=new lx;return Object.assign(p,c),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=ww(this.apiClient,t);return u=W("{model}:predictLongRunning",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=yw(p),h=new $s;return Object.assign(h,m),h})}else{const c=vw(this.apiClient,t);return u=W("{model}:predictLongRunning",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>{const m=xw(p),h=new $s;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ik extends Qt{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Qg(t);return u=W("{operationName}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i}else{const c=Yg(t);return u=W("{operationName}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i}}async fetchPredictVideosOperationInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Hg(t);return s=W("{resourceName}:fetchPredictOperation",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lk(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ak(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xk(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function uk(e,t,n){const r={},o=l(t,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const s=l(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&d(n,["newSessionExpireTime"],s);const i=l(t,["uses"]);n!==void 0&&i!=null&&d(n,["uses"],i);const u=l(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&d(n,["bidiGenerateContentSetup"],gk(e,u));const f=l(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&d(n,["fieldMask"],f),r}function dk(e,t){const n={},r=l(t,["config"]);return r!=null&&d(n,["config"],uk(e,r,n)),n}function ck(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function fk(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function pk(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function hk(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function mk(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const f=l(e,["maxOutputTokens"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","maxOutputTokens"],f);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],ou(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const y=l(e,["enableAffectiveDialog"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],y);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],ak(Oe(w)));const E=l(e,["tools"]);if(t!==void 0&&E!=null){let S=Ir(E);Array.isArray(S)&&(S=S.map(k=>vk(br(k)))),d(t,["setup","tools"],S)}const b=l(e,["sessionResumption"]);t!==void 0&&b!=null&&d(t,["setup","sessionResumption"],yk(b));const x=l(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&d(t,["setup","inputAudioTranscription"],x);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","outputAudioTranscription"],v);const g=l(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&d(t,["setup","realtimeInputConfig"],g);const T=l(e,["contextWindowCompression"]);t!==void 0&&T!=null&&d(t,["setup","contextWindowCompression"],T);const N=l(e,["proactivity"]);return t!==void 0&&N!=null&&d(t,["setup","proactivity"],N),n}function gk(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],ge(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],mk(o,n)),n}function xk(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],ck(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],fk(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const f=l(e,["inlineData"]);f!=null&&d(t,["inlineData"],lk(f));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function yk(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function vk(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],pk(u));const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],hk(f));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wk(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function kk(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=wk(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>i.includes(c)?`generationConfig.${c}`:c));const f=[];s&&f.push(s),u.length>0&&f.push(...u),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Ck extends Qt{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=dk(this.apiClient,t);s=W("auth_tokens",u._url),i=u._query,delete u.config,delete u._url,delete u._query;const f=kk(u,t.config);return o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sk(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function Ek(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&Sk(r,t),t}function Tk(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function Nk(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function _k(e){const t={},n=l(e,["parent"]);n!=null&&d(t,["_url","parent"],n);const r=l(e,["config"]);return r!=null&&Nk(r,t),t}function bk(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ik extends Qt{constructor(t){super(),this.apiClient=t,this.list=async n=>new qn(Wt.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tk(t);return s=W("{name}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Ek(t);o=W("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_k(t);return s=W("{parent}/documents",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=bk(f),p=new ax;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ak extends Qt{constructor(t,n=new Ik(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new qn(Wt.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=w1(t);return s=W("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S1(t);return s=W("{name}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=C1(t);o=W("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=I1(t);return s=W("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=A1(f),p=new ux;return Object.assign(p,c),p})}}async uploadToFileSearchStoreInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=R1(t);return s=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=M1(f),p=new dx;return Object.assign(p,c),p})}}async importFile(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N1(t);return s=W("{file_search_store_name}:importFile",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const c=T1(f),p=new Za;return Object.assign(p,c),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rk(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Mk(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Pk(e,t){const n={},r=l(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function Lk(e,t){const n={},r=l(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function Dk(e,t,n){const r={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&d(t,["displayName"],o),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(e,["epochCount"]);t!==void 0&&s!=null&&d(t,["tuningTask","hyperparameters","epochCount"],s);const i=l(e,["learningRateMultiplier"]);if(i!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(e,["batchSize"]);t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","batchSize"],u);const f=l(e,["learningRate"]);if(t!==void 0&&f!=null&&d(t,["tuningTask","hyperparameters","learningRate"],f),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Uk(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const y=l(e,["validationDataset"]);t!==void 0&&y!=null&&d(t,["supervisedTuningSpec"],Hc(y))}else if(o==="PREFERENCE_TUNING"){const y=l(e,["validationDataset"]);t!==void 0&&y!=null&&d(t,["preferenceOptimizationSpec"],Hc(y))}const s=l(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&d(t,["tunedModelDisplayName"],s);const i=l(e,["description"]);t!==void 0&&i!=null&&d(t,["description"],i);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=l(e,["epochCount"]);t!==void 0&&y!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(u==="PREFERENCE_TUNING"){const y=l(e,["epochCount"]);t!==void 0&&y!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=l(e,["learningRateMultiplier"]);t!==void 0&&y!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(f==="PREFERENCE_TUNING"){const y=l(e,["learningRateMultiplier"]);t!==void 0&&y!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=l(e,["exportLastCheckpointOnly"]);t!==void 0&&y!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=l(e,["exportLastCheckpointOnly"]);t!==void 0&&y!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let p=l(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const y=l(e,["adapterSize"]);t!==void 0&&y!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(p==="PREFERENCE_TUNING"){const y=l(e,["adapterSize"]);t!==void 0&&y!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const h=l(e,["beta"]);return t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function Fk(e,t){const n={},r=l(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&Wk(s);const i=l(e,["config"]);return i!=null&&Dk(i,n),n}function Vk(e,t){const n={},r=l(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&Kk(s,n,t);const i=l(e,["config"]);return i!=null&&Uk(i,n,t),n}function jk(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function $k(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Gk(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const i=l(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),r}function Bk(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const i=l(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),r}function Hk(e,t){const n={},r=l(e,["config"]);return r!=null&&Gk(r,n),n}function qk(e,t){const n={},r=l(e,["config"]);return r!=null&&Bk(r,n),n}function zk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tunedModels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>O0(u))),d(n,["tuningJobs"],i)}return n}function Jk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tuningJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>ea(u))),d(n,["tuningJobs"],i)}return n}function Ok(e,t){const n={},r=l(e,["name"]);r!=null&&d(n,["model"],r);const o=l(e,["name"]);return o!=null&&d(n,["endpoint"],o),n}function Wk(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(e,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["examples","examples"],o)}return n}function Kk(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=l(e,["gcsUri"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=l(e,["gcsUri"]);t!==void 0&&i!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let s=l(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=l(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=l(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function O0(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],_0(s));const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const u=l(e,["tuningTask","startTime"]);u!=null&&d(n,["startTime"],u);const f=l(e,["tuningTask","completeTime"]);f!=null&&d(n,["endTime"],f);const c=l(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const p=l(e,["description"]);p!=null&&d(n,["description"],p);const m=l(e,["baseModel"]);m!=null&&d(n,["baseModel"],m);const h=l(e,["_self"]);return h!=null&&d(n,["tunedModel"],Ok(h)),n}function ea(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],_0(s));const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const u=l(e,["startTime"]);u!=null&&d(n,["startTime"],u);const f=l(e,["endTime"]);f!=null&&d(n,["endTime"],f);const c=l(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const p=l(e,["error"]);p!=null&&d(n,["error"],p);const m=l(e,["description"]);m!=null&&d(n,["description"],m);const h=l(e,["baseModel"]);h!=null&&d(n,["baseModel"],h);const y=l(e,["tunedModel"]);y!=null&&d(n,["tunedModel"],y);const w=l(e,["preTunedModel"]);w!=null&&d(n,["preTunedModel"],w);const E=l(e,["supervisedTuningSpec"]);E!=null&&d(n,["supervisedTuningSpec"],E);const b=l(e,["preferenceOptimizationSpec"]);b!=null&&d(n,["preferenceOptimizationSpec"],b);const x=l(e,["tuningDataStats"]);x!=null&&d(n,["tuningDataStats"],x);const v=l(e,["encryptionSpec"]);v!=null&&d(n,["encryptionSpec"],v);const g=l(e,["partnerModelTuningSpec"]);g!=null&&d(n,["partnerModelTuningSpec"],g);const T=l(e,["customBaseModel"]);T!=null&&d(n,["customBaseModel"],T);const N=l(e,["experiment"]);N!=null&&d(n,["experiment"],N);const S=l(e,["labels"]);S!=null&&d(n,["labels"],S);const k=l(e,["outputUri"]);k!=null&&d(n,["outputUri"],k);const A=l(e,["pipelineJob"]);A!=null&&d(n,["pipelineJob"],A);const R=l(e,["serviceAccount"]);R!=null&&d(n,["serviceAccount"],R);const C=l(e,["tunedModelDisplayName"]);C!=null&&d(n,["tunedModelDisplayName"],C);const P=l(e,["veoTuningSpec"]);return P!=null&&d(n,["veoTuningSpec"],P),n}function Yk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["metadata"]);s!=null&&d(n,["metadata"],s);const i=l(e,["done"]);i!=null&&d(n,["done"],i);const u=l(e,["error"]);return u!=null&&d(n,["error"],u),n}function Hc(e,t){const n={},r=l(e,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const o=l(e,["vertexDatasetResource"]);return o!=null&&d(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qk extends Qt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:Ol.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=$k(t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>ea(p))}else{const c=jk(t);return u=W("{name}",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>O0(p))}}async listInternal(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=qk(t);return u=W("tuningJobs",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Jk(p),h=new Cc;return Object.assign(h,m),h})}else{const c=Hk(t);return u=W("tunedModels",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=zk(p),h=new Cc;return Object.assign(h,m),h})}}async cancel(t){var n,r,o,s;let i,u="",f={};if(this.apiClient.isVertexAI()){const c=Mk(t);return u=W("{name}:cancel",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Lk(p),h=new Sc;return Object.assign(h,m),h})}else{const c=Rk(t);return u=W("{name}:cancel",c._url),f=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Pk(p),h=new Sc;return Object.assign(h,m),h})}}async tuneInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Vk(t,t);return s=W("tuningJobs",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>ea(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fk(t);return s=W("tunedModels",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(c=>{const p=c;return p.sdkHttpResponse={headers:f.headers},p})),o.then(f=>Yk(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xk{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Zk=1024*1024*8,eC=3,tC=1e3,nC=2,Bs="x-goog-upload-status";async function rC(e,t,n){var r;const o=await W0(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function oC(e,t,n){var r;const o=await W0(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=k0(s),u=new eu;return Object.assign(u,i),u}async function W0(e,t,n){var r,o;let s=0,i=0,u=new Wl(new Response),f="upload";for(s=e.size;i<s;){const c=Math.min(Zk,s-i),p=e.slice(i,i+c);i+c>=s&&(f+=", finalize");let m=0,h=tC;for(;m<eC&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(i),"Content-Length":String(c)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[Bs]));)m++,await iC(h),h=h*nC;if(i+=c,((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[Bs])!=="active")break;if(s<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function sC(e){return{size:e.size,type:e.type}}function iC(e){return new Promise(t=>setTimeout(t,e))}class lC{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await rC(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await oC(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await sC(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aC{create(t,n,r){return new uC(t,n,r)}}class uC{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qc="x-goog-api-key";class dC{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(qc)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(qc,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cC="gl-node/";class Er{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=Gg(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new dC(this.apiKey);this.apiClient=new $1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cC+"web",uploader:new lC,downloader:new Xk}),this.models=new sk(this.apiClient),this.live=new Z1(this.apiClient,o,new aC),this.batches=new gy(this.apiClient),this.chats=new Qy(this.models,this.apiClient),this.caches=new Wy(this.apiClient),this.files=new lv(this.apiClient),this.operations=new ik(this.apiClient),this.authTokens=new Ck(this.apiClient),this.tunings=new Qk(this.apiClient),this.fileSearchStores=new Ak(this.apiClient)}}const Qe=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ps=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"})}),fi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),$t=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),Ro=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.036-2.134H8.716c-1.126 0-2.036.954-2.036 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),ta=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-2.695A8.25 8.25 0 005.166 6.166L2 9.348"})}),pi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),Kt=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),je=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Sn=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),fC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.832A1.5 1.5 0 015.25 3.5h13.5a1.5 1.5 0 011.5 1.5v1.168a1.5 1.5 0 01-1.5 1.5h-1.5v1.5a1.5 1.5 0 01-3 0v-1.5H9v1.5a1.5 1.5 0 01-3 0v-1.5H4.5a1.5 1.5 0 01-1.5-1.5V4.832zM21 14.5a.75.75 0 000-1.5h-18a.75.75 0 000 1.5h18z"})}),pC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 4c4.418 0 8 3.358 8 7.5c0 1.901 -.755 3.637 -2 4.96l0 2.54a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1v-2.54c-1.245 -1.322 -2 -3.058 -2 -4.96c0 -4.142 3.582 -7.5 8 -7.5z"}),a.jsx("path",{d:"M10 17v3"}),a.jsx("path",{d:"M14 17v3"}),a.jsx("path",{d:"M9 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),a.jsx("path",{d:"M15 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),hC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.047 8.287 8.287 0 009 9.601a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.468 5.99 5.99 0 00-1.925 3.547 5.975 5.975 0 01-2.133-1.001A3.75 3.75 0 0012 18z"})]}),K0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z"})}),Pe=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),hi=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z"}),a.jsx("path",{d:"M5 13l6 6"}),a.jsx("path",{d:"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365"}),a.jsx("path",{d:"M10 5.5l-2 -2.5h-5v5l3 2.5"})]}),mC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M14.7 13.5c-1.1 -2 -1.441 -2.5 -2.7 -2.5c-1.259 0 -1.736 .755 -2.836 2.747c-.942 1.703 -2.846 1.845 -3.321 3.291c-.097 .265 -.145 .677 -.143 .962c0 1.176 .787 2 1.8 2c1.259 0 3 -1 4.5 -1s3.241 1 4.5 1c1.013 0 1.8 -.823 1.8 -2c0 -.285 -.049 -.697 -.146 -.962c-.475 -1.451 -2.512 -1.835 -3.454 -3.538z"}),a.jsx("path",{d:"M20.188 8.082a1.039 1.039 0 0 0 -.406 -.082h-.015c-.735 .012 -1.56 .75 -1.993 1.866c-.519 1.335 -.28 2.7 .538 3.052c.129 .055 .267 .082 .406 .082c.739 0 1.575 -.742 2.011 -1.866c.516 -1.335 .273 -2.7 -.54 -3.052z"}),a.jsx("path",{d:"M9.474 9c.055 0 .109 0 .163 -.011c.944 -.128 1.533 -1.346 1.32 -2.722c-.203 -1.297 -1.047 -2.267 -1.932 -2.267c-.055 0 -.109 0 -.163 .011c-.944 .128 -1.533 1.346 -1.32 2.722c.204 1.293 1.048 2.267 1.933 2.267z"}),a.jsx("path",{d:"M16.456 6.733c.214 -1.376 -.375 -2.594 -1.32 -2.722a1.164 1.164 0 0 0 -.162 -.011c-.885 0 -1.728 .97 -1.93 2.267c-.214 1.376 .375 2.594 1.32 2.722c.054 .007 .108 .011 .162 .011c.885 0 1.73 -.974 1.93 -2.267z"}),a.jsx("path",{d:"M5.69 12.918c.816 -.352 1.054 -1.719 .536 -3.052c-.436 -1.124 -1.271 -1.866 -2.009 -1.866c-.14 0 -.277 .027 -.407 .082c-.816 .352 -1.054 1.719 -.536 3.052c.436 1.124 1.271 1.866 2.009 1.866c.14 0 .277 -.027 .407 -.082z"})]}),gC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13h4l1-3h8l1-3H8L7 10H3v3zm10 0v5h4v-5h-4z"}),a.jsx("rect",{x:"14",y:"14",width:"2",height:"3",rx:"1",fill:"currentColor",fillOpacity:"0.2"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7h2v2h-2z"})]}),xC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M17 3h4v4"}),a.jsx("path",{d:"M21 3l-15 15"}),a.jsx("path",{d:"M3 18h3v3"}),a.jsx("path",{d:"M16.5 20c1.576 -1.576 2.5 -4.095 2.5 -6.5c0 -4.81 -3.69 -8.5 -8.5 -8.5c-2.415 0 -4.922 .913 -6.5 2.5l12.5 12.5z"})]}),yC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"}),a.jsx("path",{d:"M4 14l8 -3l8 3"})]}),Y0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})}),Rr=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 10.663c0 -4.224 -4.041 -7.663 -9 -7.663s-9 3.439 -9 7.663c0 3.783 3.201 6.958 7.527 7.56c1.053 .239 .932 .644 .696 2.133c-.039 .238 -.184 .932 .777 .512c.96 -.42 5.18 -3.201 7.073 -5.48c1.304 -1.504 1.927 -3.029 1.927 -4.715v-.01z"})]}),vC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 10.663c0 -4.224 -4.041 -7.663 -9 -7.663s-9 3.439 -9 7.663c0 3.783 3.201 6.958 7.527 7.56c1.053 .239 .932 .644 .696 2.133c-.039 .238 -.184 .932 .777 .512c.96 -.42 5.18 -3.201 7.073 -5.48c1.304 -1.504 1.927 -3.029 1.927 -4.715v-.01z"})]}),Hs=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),mi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Q0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Mr=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),To=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),wC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M12 17.25h.008v.008H12v-.008z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),kC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),CC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),iu=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),lu=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),zc=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M12 9.75V15m0 0 3-3m-3 3-3-3m6-6.75-1.5-1.5m-9 0L4.5 9"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v13.5"})]}),SC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M16 9v6a5 5 0 0 1 -10 0v-4l3 3"}),a.jsx("path",{d:"M16 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M16 5v-2"})]}),EC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M4 20l10 -10m0 -5v5h5m-9 -1v5h5m-9 -1v5h5m-5 -5l4 -4l4 -4"}),a.jsx("path",{d:"M19 10c.638 -.636 1 -1.515 1 -2.486a3.515 3.515 0 0 0 -3.517 -3.514c-.97 0 -1.847 .367 -2.483 1m-3 13l4 -4l4 -4"})]}),TC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M10 16v5"}),a.jsx("path",{d:"M14 16v5"}),a.jsx("path",{d:"M9 9h6l-1 7h-4z"}),a.jsx("path",{d:"M5 11c1.333 -1.333 2.667 -2 4 -2"}),a.jsx("path",{d:"M19 11c-1.333 -1.333 -2.667 -2 -4 -2"}),a.jsx("path",{d:"M12 4m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"})]}),X0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})}),Z0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),Jc=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),NC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),_C=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),bC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),gi="https://script.google.com/macros/s/AKfycbzbvAajmyWMO4dLe2OeukVbJ9wtOVi_-W2Zadc4qMLlbgyaQ-yTDKTPnPT57Y7DmcVB/exec";let Yo=null;const Lt={},xi=()=>Yo||(console.log("Fetching AI Database (Icons & Skills)..."),Yo=fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"GET_DATA"})}).then(e=>e.json()).then(e=>{if(e.data&&Array.isArray(e.data)){let t=0,n=0,r=0,o=0;e.data.forEach(s=>{const i=Object.values(s).map(h=>String(h).trim()),u=i.find(h=>h.startsWith("Skill_")),f=i.find(h=>h.startsWith("NPC_ICON_")),c=i.find(h=>h.startsWith("Ability Memo _")),p=i.find(h=>h.startsWith("Item Memo _")),m=h=>{let y=s.aiCode||s.AI_||s.B||s.B||s.b||s.description||s.;if(!y||String(y).trim()===h){const w=i.filter(E=>E!==h&&E.length>2);w.length>0&&(y=w.sort((E,b)=>b.length-E.length)[0])}return y?String(y).trim():null};if(u){const h=u.replace(/^Skill_/,"").trim(),y=m(u);y&&(Lt[h]=y,n++)}if(c){const h=m(c);h&&(Lt[c]=h,r++)}if(p){const h=m(p);h&&(Lt[p]=h,o++)}if(f){let h=s.aiCode||s.AI_||s.B||s.B||s.b;if(!h||String(h).trim()===f){const y=["undead","robot","elemental","insect","beast","scientist","gunner","archer","mage","tank","warrior","citizen","person","fishhook","bigman","feather"];h=i.find(w=>y.includes(w.toLowerCase()))}h&&(localStorage.setItem(f,String(h).trim()),t++)}if(!u&&!f&&!c&&!p){let h=s.author||s.||s.C||s.C||s.c||s.name||s.,y=s.aiCode||s.AI_||s.B||s.B||s.b||s.description||s.;if(h&&y){const w=String(h).trim();!w.startsWith("NPC_ICON_")&&!w.startsWith("Skill_")&&!w.startsWith("Ability Memo")&&!w.startsWith("Item Memo")&&(Lt[w]=String(y).trim(),n++)}}}),console.log(`AI DB Loaded: Icons(${t}), Skills(${n}), Abilities(${r}), Items(${o})`)}}).catch(e=>{console.warn("Failed to load AI Database",e)}),Yo),na=[];let qr=!1;const ra=async()=>{if(qr||na.length===0)return;qr=!0;const e=na.shift();if(!e){qr=!1;return}try{const{npc:t,resolve:n}=e,r=`NPC_ICON_${t.name}`,o=localStorage.getItem(r);if(o){console.log(`[Queue] Icon found in storage for ${t.name}, skipping AI.`),n(o),qr=!1,setTimeout(ra,0);return}console.log(`[Queue] Generating AI Icon for ${t.name}...`);const s=localStorage.getItem("user_gemini_api_key")||"AIzaSyDVnAaIbEPABcQrGRZV_iVh7YgqcB07rhA",i=new Er({apiKey:s}),u=["undead","robot","elemental","insect","beast","scientist","gunner","archer","mage","tank","warrior","citizen","person","fishhook","bigman","feather"],f=`
            Analyze the following RPG Character (NPC) and select the most appropriate icon key from the list.
            
            [Icon Keys]
            ${u.join(", ")}

            [NPC Data]
            Name: ${t.name}
            Description: ${t.description}
            Stats: ${t.stats.map(h=>`${h.label}:${h.value}`).join(", ")}
            Actions: ${t.actions.map(h=>h.category).join(", ")}

            Rule: Return ONLY the selected key as a plain string. If unsure, return 'person'.
        `,p=(await i.models.generateContent({model:"gemini-2.5-flash",contents:f})).text||"person",m=u.find(h=>p.includes(h))||"person";localStorage.setItem(r,m),fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:m,author:r}})}).catch(h=>console.warn("Failed to save icon to DB",h)),n(m)}catch(t){console.error("NPC Icon Analysis Failed:",t),e.resolve("person")}finally{setTimeout(()=>{qr=!1,ra()},500)}},IC=(e,t)=>{na.push({npc:e,resolve:t}),ra()},Oc={:"            .",:"     .     .",:"          .",:" ,            ."," ":"  .     .","  ":"  .       .",:"        .",:"   .     .",:"     . , ,   .",:"        .",:"     .   .",:"        .",:",         .",:"        .",:"        .",:"  . , ,   .",:"       .",:"       ."," ":"      ."," ":"       ."," ":"        ."," ":"  ,   / ."," ":"       .",:" , ,     .",:"  ,      .",:" , ,       ."," ":"       .",:",        .",:"       .",:"         .",:", ,     .",:"      ."," ":"       ."," ":"     .",:"       ."},eh={" ":" .     ."," ":", , ,      .",:"     ,   .",:" , ,  .    0    .      ."," ":"   . (: , ,  )     ."," ":"      .   ."," ":"   , /     ."," ":"   .    .",:",    .   .",:",       .",:"  .    () .",:"  .","  ":"  NPC ,    .",:"     .",:"        ."},Wc=e=>{if(typeof e!="object"||e===null||!e.alignment)return"text-left";switch(e.alignment.toUpperCase()){case"CENTER":return"text-center";case"END":return"text-right";case"JUSTIFY":return"text-justify";case"START":default:return"text-left"}return"text-left"},au=e=>e?typeof e=="string"?e:e.runs?e.runs.map(t=>t.text||"").join(""):e.text||"":"",ne=e=>au(e).replace(/\[npc\]|\[skill\]/gi,"").trim(),ir=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(au).join(" ");return/\[npc\]/i.test(t)},gr=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(au).join(" ");return/\[skill\]/i.test(t)},Ln=e=>e.type!=="table"||!e.rows?!1:e.rows.flat().map(ne).join(" ").includes("[passive]"),Dn=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return/\[obstacle\]|\[object\]/i.test(t)||e.rows.length>0&&ne(e.rows[0][0]).includes("")&&(ne(e.rows[0][1]).includes("")||ne(e.rows[0][1]).includes(""))},Un=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim());return t.some(n=>n.includes(""))&&t.some(n=>n.includes(""))&&t.some(n=>n.includes(""))},qs=e=>{if(ir(e)||gr(e)||Ln(e)||Dn(e)||Un(e)||e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return t.includes("")&&t.includes("")},so=e=>{if(ir(e)||gr(e)||Ln(e)||Dn(e)||Un(e)||e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return t.includes("")?!1:t.includes("")&&t.includes("")},io=e=>{var r;if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=ne((r=e.rows[0])==null?void 0:r[0]).trim(),n=e.rows[1].map(o=>ne(o).trim());return t==="Q & A"&&n[0]===""&&n[1]===""&&n[2]===""},qi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<1||io(e))return!1;const t=e.rows[0].map(n=>ne(n).trim());return t[0]===""&&t[1]===""&&t[2]===""},Qo=e=>e.type!=="table"||!e.rows||qs(e)||so(e)||io(e)||gr(e)||Ln(e)||Dn(e)||Un(e)?!1:e.rows.length===1&&e.rows[0].length===3,zi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim()).join(" ");return t.includes("")&&t.includes("")&&t.includes("")},Ji=e=>{var r;if(e.type!=="table"||!e.rows||e.rows.length<2||ne(((r=e.rows[0])==null?void 0:r[0])||"").trim()!=="")return!1;const n=e.rows.flat().map(o=>ne(o)).join(" ");return n.includes("")||n.includes("")||n.includes("")||n.includes("")},Oi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim()).join(" ");return t.includes(" ")&&t.includes(" ")},Kc=(e,t)=>{if(e.type!=="paragraph"||!e.isBold||!e.text||!e.text.includes(".")||!t||t.type!=="table"||!t.rows||t.rows.length===0)return!1;const n=t.rows.flat().map(ne).join(" ");return(n.includes("")||n.includes(" ")||n.includes(" "))&&e.text.length<150},Wi=e=>{var u,f,c;if(e.type!=="table"||!e.rows||e.rows.length<3)return!1;const t=ne((u=e.rows[0])==null?void 0:u[0]),n=((f=e.rows[1])==null?void 0:f.map(ne).join(" "))||"",r=ne((c=e.rows[2])==null?void 0:c[0]).trim(),o=t.includes("."),s=n.includes("")||n.includes(" ")||n.includes(" "),i=[" "," ",""," "," ."].some(p=>r.startsWith(p));return qs(e)||so(e)||Ln(e)||Dn(e)||Un(e)?!1:o&&s&&i},Yc=e=>{let t=e.text||"";return!t&&e.runs&&(t=e.runs.map(n=>n.text).join("")),t=t.trim(),t.startsWith("M:")||t.startsWith("M :")?"M":t.startsWith("L:")||t.startsWith("L :")?"L":null},th=e=>{switch(e){case"":case"":case" ":return"bg-red-500/10 text-red-600 dark:text-red-300 border-red-500/20";case"":case"":return"bg-blue-500/10 text-blue-600 dark:text-blue-300 border-blue-500/20";case"":case"":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-300 border-emerald-500/20";case"":case"":return"bg-sky-500/10 text-sky-600 dark:text-sky-300 border-sky-500/20";case"":case"":return"bg-violet-500/10 text-violet-600 dark:text-violet-300 border-violet-500/20";case" ":return"bg-teal-500/10 text-teal-600 dark:text-teal-300 border-teal-500/20";case" ":return"bg-orange-500/10 text-orange-600 dark:text-orange-300 border-orange-500/20";case"":return"bg-slate-500/10 text-slate-600 dark:text-slate-300 border-slate-500/20";case"":case"":return"bg-amber-500/10 text-amber-600 dark:text-amber-300 border-amber-500/20";case"":case" ":return"bg-indigo-500/10 text-indigo-600 dark:text-indigo-300 border-indigo-500/20";case"":case"":return"bg-yellow-500/10 text-yellow-600 dark:text-yellow-300 border-yellow-500/20";case"":return"bg-rose-500/10 text-rose-600 dark:text-rose-300 border-rose-500/20";case"":return"bg-fuchsia-500/10 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500/20";case"":return"bg-purple-500/10 text-purple-600 dark:text-purple-300 border-purple-500/20";case"":return"bg-lime-500/10 text-lime-600 dark:text-lime-300 border-lime-500/20";default:return"bg-slate-200 dark:bg-slate-700/30 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600/30"}},AC=(e,t,n,r)=>{var i,u,f,c;const o=new Set,s=(e+" "+t).toLowerCase();if(r==="ability"){s.includes(" ")?o.add(" "):s.includes(" ")?o.add(" "):(s.includes("")||s.includes(""))&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/ |||/)&&o.add(""),s.includes("")&&o.add(""),s.includes("1")||s.includes("")?o.add(""):(s.includes("")||s.includes("")||s.includes(""))&&o.add("");const p=s.match(/(\d+)\s*/);p&&parseInt(p[1],10)>=3&&o.add("");const m=(i=n.find(y=>y.label.includes("")))==null?void 0:i.value;m&&m!=="-"&&m!==""?o.add(""):(m==="-"||m==="")&&o.add("");const h=(u=n.find(y=>y.label.includes("")))==null?void 0:u.value;if(h&&h!=="-"&&String(h).length>2){o.add("");const y=String(h);["","","","","",""].some(E=>y.includes(E))&&o.add("")}}else{s.match(/|||||||||||/)?o.add(" "):s.match(/||||||||||||/)?o.add(" "):s.match(//)&&o.add(""),s.match(/|||/)?o.add(""):s.match(/||||||/)?o.add(""):o.add("");const p=String(((f=n.find(y=>y.label.includes("")))==null?void 0:f.value)||"0"),m=parseInt(p.replace(/[^0-9]/g,"")||"0");m>=5?o.add(""):m<=1&&o.add("");const h=(c=n.find(y=>y.label.includes("")))==null?void 0:c.value;h&&h!=="-"&&o.add("")}return o.has("")&&o.has("")&&o.delete(""),Array.from(o)},Mo=({tableId:e,rowCount:t})=>!e||t<=0?null:a.jsx("div",{className:"absolute top-0 left-0 w-full h-0 overflow-visible pointer-events-none",children:Array.from({length:t}).map((n,r)=>a.jsx("div",{id:`${e}-row-${r}`,className:"absolute top-0"},r))}),RC=({rows:e,id:t})=>{const[n,r]=_.useState(null);if(!e||e.length<2)return null;const o=e[0].map((c,p)=>{var w,E;const m=ne(c).trim(),h=ne(((w=e[1])==null?void 0:w[p])||"").trim(),y=ne(((E=e[2])==null?void 0:E[p])||"").trim();return{title:m,description:h,examples:y}}),s=c=>c.includes("")?{wrapper:"border-orange-500/30 bg-orange-50 dark:bg-orange-900/10 hover:bg-orange-100 dark:hover:bg-orange-900/20 hover:border-orange-500/50",iconBg:"bg-orange-100 dark:bg-orange-500/20",iconColor:"text-orange-600 dark:text-orange-400",titleColor:"text-orange-600 dark:text-orange-400",icon:a.jsx(hi,{className:"w-6 h-6"}),analysisBg:"bg-orange-100 dark:bg-orange-900/40"}:c.includes("")?{wrapper:"border-teal-500/30 bg-teal-50 dark:bg-teal-900/10 hover:bg-teal-100 dark:hover:bg-teal-900/20 hover:border-teal-500/50",iconBg:"bg-teal-100 dark:bg-teal-500/20",iconColor:"text-teal-600 dark:text-teal-400",titleColor:"text-teal-600 dark:text-teal-400",icon:a.jsx(Pe,{className:"w-6 h-6"}),analysisBg:"bg-teal-100 dark:bg-teal-900/40"}:{wrapper:"border-indigo-500/30 bg-indigo-50 dark:bg-indigo-900/10 hover:bg-indigo-100 dark:hover:bg-indigo-900/20 hover:border-indigo-500/50",iconBg:"bg-indigo-100 dark:bg-indigo-500/20",iconColor:"text-indigo-600 dark:text-indigo-400",titleColor:"text-indigo-600 dark:text-indigo-400",icon:a.jsx(Mr,{className:"w-6 h-6"}),analysisBg:"bg-indigo-100 dark:bg-indigo-900/40"},i=c=>c.includes("")?"  (' ', '', ' ' )    ,  ,         .             ** ** .":c.includes("")?"  ('', '' )     ,       .         ** ** .":"  ('', '' )   ''  ,         .      ( )  ** ** .",u=(c,p)=>{r(h=>h===p?null:p);const m=c.currentTarget;m.classList.remove("highlight-animate"),m.offsetWidth,m.classList.add("highlight-animate"),setTimeout(()=>m.classList.remove("highlight-animate"),3e3)},f=c=>c.split(/(\*\*.*?\*\*)/g).map((m,h)=>m.startsWith("**")&&m.endsWith("**")?a.jsx("strong",{className:"text-slate-900 dark:text-white font-bold",children:m.slice(2,-2)},h):a.jsx("span",{children:m},h));return a.jsxs("div",{id:t,"data-highlight-container":"true",className:"not-prose my-8 scroll-mt-24",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((c,p)=>{const m=s(c.title),h=n===p,y=i(c.title);return a.jsxs("div",{onClick:w=>u(w,p),className:`flex flex-col p-6 rounded-2xl border transition-all duration-300 cursor-pointer shadow-lg overflow-hidden min-h-[280px] relative group ${m.wrapper}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-20",children:[a.jsx("h4",{className:`text-xl font-bold ${m.titleColor}`,children:c.title}),a.jsx("div",{className:`p-2 rounded-lg ${m.iconBg} ${m.iconColor} transition-transform duration-300 ${h?"scale-110 rotate-12":""}`,children:m.icon})]}),a.jsxs("div",{className:"relative flex-grow",children:[a.jsxs("div",{className:`
                                        transition-all duration-500 ease-in-out absolute top-0 left-0 w-full h-full flex flex-col
                                        ${h?"opacity-0 -translate-x-full pointer-events-none":"opacity-100 translate-x-0 relative"}
                                    `,children:[a.jsx("div",{className:"flex-grow mb-6",children:a.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap",children:c.description})}),c.examples&&a.jsxs("div",{className:"pt-4 border-t border-slate-300 dark:border-slate-700/50 mt-auto",children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2",children:c.examples.split(",").map((w,E)=>{const b=w.trim();return b?a.jsx("span",{className:"text-xs px-2 py-1 bg-white dark:bg-slate-800 rounded border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:b},E):null})})]}),a.jsx("div",{className:"mt-4 text-center text-xs text-slate-500 dark:text-slate-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:"   "})]}),a.jsxs("div",{className:`
                                        transition-all duration-500 ease-in-out absolute top-0 left-0 w-full h-full flex flex-col
                                        ${h?"opacity-100 translate-x-0 relative":"opacity-0 translate-x-full pointer-events-none"}
                                    `,children:[a.jsxs("div",{className:`p-4 rounded-xl border border-slate-300 dark:border-white/10 ${m.analysisBg} flex-grow flex flex-col`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-300 dark:border-white/10 pb-2",children:[a.jsx(Sn,{className:`w-4 h-4 ${m.iconColor}`}),a.jsx("span",{className:`text-sm font-bold ${m.titleColor}`,children:"  "})]}),a.jsx("p",{className:"text-slate-700 dark:text-slate-200 text-sm leading-relaxed",children:f(y)})]}),a.jsx("div",{className:"mt-4 text-center text-xs text-slate-500 font-medium",children:"   "})]})]})]},p)})})]})},Qc=({rows:e,id:t,itemIds:n})=>{const[r,o]=_.useState(null),s=_.useMemo(()=>!e||e.length<=1?[]:e.slice(1).map(u=>{const c=ne(u[0]).trim().split(/\n+/),p=c.length>1?c.slice(0,-1).join(`
`).trim():c[0].trim(),m=c.length>1?c[c.length-1].trim():"";return{question:p,asker:m,category:ne(u[1]).trim(),answer:ne(u[2]).trim()}}),[e]),i=u=>{o(r===u?null:u)};return a.jsx("div",{id:t,"data-highlight-container":"true",className:"space-y-4 not-prose my-8 p-4 bg-slate-100 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 scroll-mt-24 relative",children:s.map((u,f)=>a.jsxs("div",{id:n?n[f]:t?`${t}-row-${f+1}`:void 0,className:`bg-white dark:bg-slate-800 rounded-lg shadow-md transition-all duration-300 ease-in-out border scroll-mt-24 ${r===f?"border-cyan-500 ring-2 ring-cyan-500/50":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[a.jsx("button",{onClick:()=>i(f),className:"w-full text-left p-4 focus:outline-none","aria-expanded":r===f,children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(pi,{className:"w-7 h-7 text-cyan-600 dark:text-cyan-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight",children:u.question})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 mt-3 pl-10",children:[u.category&&a.jsx("span",{className:"font-semibold bg-slate-200 dark:bg-slate-700 text-cyan-700 dark:text-cyan-400 px-2 py-0.5 rounded",children:u.category}),a.jsx("span",{children:""}),a.jsxs("span",{children:[": ",u.asker]})]})]}),a.jsx("div",{className:"transition-transform duration-300 ease-in-out flex-shrink-0",style:{transform:r===f?"rotate(45deg)":"rotate(0deg)"},children:a.jsx(Qe,{className:"w-6 h-6 text-slate-400"})})]})}),a.jsx("div",{className:`faq-answer-wrapper ${r===f?"open":""}`,children:a.jsx("div",{className:"faq-answer-content",children:a.jsx("div",{className:"px-4 pb-5 pt-3 border-t border-slate-200 dark:border-slate-700/70",children:a.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:u.answer})})})})]},f))})},MC=({rows:e,id:t,type:n})=>{const r=_.useMemo(()=>{const i=[];return e.forEach(u=>{u.forEach(f=>{let c=ne(f).trim();if(c=c.replace(/\[passive\]|\[obstacle\]|\[object\]/gi,"").trim(),!c)return;c.split(/\r?\n/).map(m=>m.trim()).filter(Boolean).forEach(m=>{let h=m,y="";const w=m.indexOf(" - ");if(w!==-1)h=m.substring(0,w).trim(),y=m.substring(w+3).trim();else{const E=m.indexOf("-");E!==-1&&E>0&&(h=m.substring(0,E).trim(),y=m.substring(E+1).trim())}h&&i.push({title:h,description:y})})})}),i},[e]),o=n==="obstacle"?{border:"border-orange-500/50",bg:"bg-orange-500/5",hoverBorder:"hover:border-orange-400",iconColor:"text-orange-600 dark:text-orange-500",titleColor:"text-orange-700 dark:text-orange-400",icon:a.jsx(Q0,{className:"w-8 h-8"})}:{border:"border-indigo-500/50",bg:"bg-indigo-500/5",hoverBorder:"hover:border-indigo-400",iconColor:"text-indigo-600 dark:text-indigo-500",titleColor:"text-indigo-700 dark:text-indigo-400",icon:a.jsx(Mr,{className:"w-8 h-8"})},s=i=>{const u=window.getSelection();if(u&&u.toString().length>0)return;const f=i.currentTarget;f.classList.remove("highlight-animate"),f.offsetWidth,f.classList.add("highlight-animate"),setTimeout(()=>f.classList.remove("highlight-animate"),3e3)};return r.length===0?null:a.jsx("div",{className:"not-prose my-8 relative",children:a.jsxs("div",{id:t,"data-highlight-container":"true",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 scroll-mt-24",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),r.map((i,u)=>a.jsxs("div",{onClick:s,className:`
                            relative overflow-hidden p-5 rounded-xl border transition-all duration-300 group cursor-pointer
                            bg-white dark:bg-slate-900/50 shadow-lg hover:shadow-xl hover:-translate-y-1
                            ${o.border} ${o.hoverBorder}
                        `,children:[a.jsx("div",{className:`absolute inset-0 ${o.bg} opacity-50 group-hover:opacity-100 transition-opacity`}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h4",{className:`text-lg font-bold ${o.titleColor} leading-tight`,children:i.title}),a.jsx("div",{className:`${o.iconColor} opacity-70 group-hover:opacity-100 transition-opacity`,children:o.icon})]}),i.description&&a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:i.description})]})]},u))]})})},PC=({rows:e,id:t})=>{const[n,r]=_.useState(null),[o,s]=_.useState({}),[i,u]=_.useState(!1),[f,c]=_.useState(null);_.useEffect(()=>{(async()=>{await xi(),s({...Lt})})()},[]);const p=_.useMemo(()=>{if(!e)return[];const y=[];return e.forEach(w=>{w.forEach(E=>{const b=ne(E);b&&b.split(/\r?\n/).forEach(v=>{const g=v.trim();g&&y.push(g)})})}),y.sort((w,E)=>w.localeCompare(E))},[e]);_.useEffect(()=>{if(!n)return;if(Oc[n]){c(null);return}if(o[n]){c(null);return}const y=JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}");if(y[n]){c(null),s(b=>({...b,[n]:y[n]})),Lt[n]=y[n];return}let w=!0;return(async()=>{u(!0),c(null);try{const b=localStorage.getItem("user_gemini_api_key")||"AIzaSyDVnAaIbEPABcQrGRZV_iVh7YgqcB07rhA",v=await new Er({apiKey:b}).models.generateContent({model:"gemini-2.5-flash",contents:`TRPG ' '  '${n}' 1~2( 2)    . 
                    /   ,   (~) .
                    **          .`});if(w){const g=v.text;if(g){const T=g.trim();s(S=>({...S,[n]:T})),Lt[n]=T;const N=JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}");N[n]=T,localStorage.setItem("ai_skill_descriptions",JSON.stringify(N)),fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:T,author:`Skill_${n}`}})}).catch(S=>console.error("Failed to save skill to remote DB:",S))}else c("   .")}}catch(b){console.error("AI Description Generation Error:",b),w&&c("AI  .")}finally{w&&u(!1)}})(),()=>{w=!1}},[n,o]);const m=y=>{const w=window.getSelection();if(w&&w.toString().length>0)return;const E=y.currentTarget;E.classList.remove("highlight-animate"),E.offsetWidth,E.classList.add("highlight-animate"),setTimeout(()=>E.classList.remove("highlight-animate"),3e3)},h=n?Oc[n]||o[n]||JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}")[n]:null;return a.jsx("div",{className:"not-prose my-8 relative",children:a.jsxs("div",{id:t,"data-highlight-container":"true",onClick:m,className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg relative overflow-hidden scroll-mt-24 cursor-pointer hover:border-cyan-500/30 hover:shadow-cyan-500/10 transition-all duration-200",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:a.jsx(K0,{className:"w-24 h-24 text-cyan-500"})}),a.jsxs("h4",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400 mb-4 uppercase tracking-wider border-b border-slate-200 dark:border-slate-700 pb-2 flex items-center gap-2",children:[a.jsx("span",{children:"  "}),a.jsx("span",{className:"text-xs text-slate-500 font-normal normal-case ml-auto",children:"   "})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:p.map((y,w)=>a.jsx("button",{onClick:E=>{r(y===n?null:y)},className:`
                                px-3 py-1.5 rounded-md text-sm font-semibold transition-all duration-200 transform border
                                ${n===y?"bg-cyan-600 text-white border-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.5)] scale-105":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-cyan-600 dark:hover:text-cyan-300 hover:border-cyan-500/50 hover:scale-110"}
                            `,children:y},`${y}-${w}`))}),a.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${n?"max-h-64 opacity-100":"max-h-0 opacity-0"}`,children:n&&a.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-lg p-5 border border-cyan-500/30 shadow-inner relative animate-fade-in-fast backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Pe,{className:`w-5 h-5 text-cyan-500 dark:text-cyan-400 ${i&&!h?"animate-spin":""}`}),a.jsx("h5",{className:"text-cyan-700 dark:text-cyan-300 font-bold text-lg",children:n})]}),a.jsx("p",{className:"text-slate-700 dark:text-slate-200 leading-relaxed text-sm min-h-[3rem]",children:h||(i?a.jsx("span",{className:"text-slate-500 dark:text-slate-400 animate-pulse",children:"AI      ..."}):f?a.jsx("span",{className:"text-red-500 dark:text-red-400 text-xs",children:f}):"       .")})]})})]})})},LC=({rows:e,id:t})=>{const[n,r]=_.useState(null),o=[{type:"profile",title:"",subtitle:" ",description:" ?",icon:a.jsx(Rr,{className:"w-8 h-8 text-emerald-500 dark:text-emerald-400"}),color:"emerald",bg:"bg-emerald-100 dark:bg-emerald-500/10",border:"border-emerald-200 dark:border-emerald-500/20"},{type:"ability",title:"",subtitle:" ",description:"   ?",icon:a.jsx(Sn,{className:"w-8 h-8 text-amber-500 dark:text-amber-400"}),color:"amber",bg:"bg-amber-100 dark:bg-amber-500/10",border:"border-amber-200 dark:border-amber-500/20"},{type:"inventory",title:"",subtitle:" ",description:" ?",icon:a.jsx(hi,{className:"w-8 h-8 text-cyan-500 dark:text-cyan-400"}),color:"cyan",bg:"bg-cyan-100 dark:bg-cyan-500/10",border:"border-cyan-200 dark:border-cyan-500/20"},{type:"additional",title:"",subtitle:" ",description:"  ",icon:a.jsx(Qe,{className:"w-8 h-8 text-purple-500 dark:text-purple-400"}),color:"purple",bg:"bg-purple-100 dark:bg-purple-500/10",border:"border-purple-200 dark:border-purple-500/20"}],i=e[0].map(f=>ne(f).trim()).map((f,c)=>{let p=o.find(m=>f.includes(m.title));return p||f===""&&c===3&&(p=o[3]),p?{...p,items:[],originalIndex:c}:null}).filter(f=>f!==null);for(let f=1;f<e.length;f++)i.forEach(c=>{const p=e[f][c.originalIndex];if(p){let m=ne(p).trim();if((m==="-"||m===".")&&(m=""),m){const h=m.split(/\r?\n/).filter(y=>{const w=y.trim();return w!==""&&w!=="-"&&w!=="."});c.items.push(...h)}}});const u=i.length>=4?"grid-cols-1 sm:grid-cols-2 xl:grid-cols-4":i.length===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 sm:grid-cols-2";return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-12 scroll-mt-24",children:a.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/40 rounded-3xl border border-slate-200 dark:border-slate-700/50 shadow-2xl backdrop-blur-sm overflow-hidden",children:a.jsx("div",{className:`grid ${u} divide-y sm:divide-y-0 sm:divide-x divide-slate-200 dark:divide-slate-700/50`,children:i.map((f,c)=>a.jsxs("div",{className:"relative group p-6 xl:p-8 hover:bg-white dark:hover:bg-slate-800/40 transition-colors duration-500",children:[a.jsx("div",{className:`absolute top-0 left-0 w-full h-1 bg-${f.color}-500/50 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500`}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl ${f.bg} border ${f.border} flex items-center justify-center mb-5 shadow-[0_0_15px_rgba(0,0,0,0.1)] dark:shadow-[0_0_15px_rgba(0,0,0,0.3)] group-hover:scale-x-110 transition-transform duration-300`,children:f.icon}),a.jsx("h3",{className:`font-black text-2xl text-${f.color}-600 dark:text-${f.color}-400 mb-1`,children:f.title}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:f.subtitle}),a.jsx("div",{className:"bg-slate-200 dark:bg-slate-800/50 px-4 py-1.5 rounded-full border border-slate-300 dark:border-slate-700/50 mb-6",children:a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 font-medium",children:f.description})}),a.jsx("div",{className:"w-full space-y-2.5",children:f.items.map((p,m)=>{const h=n===p;return a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("button",{onClick:y=>{y.stopPropagation(),r(h?null:p)},className:`
                                                    w-full flex items-center justify-between p-3 transition-all cursor-pointer text-left focus:outline-none focus:ring-2 focus:ring-cyan-500/50
                                                    ${h?`bg-slate-100 dark:bg-slate-800 border border-${f.color}-500/50 rounded-t-xl rounded-b-none border-b-0`:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-cyan-500/30"}
                                                `,children:[a.jsx("span",{className:"text-slate-800 dark:text-slate-200 font-bold text-sm",children:p}),a.jsx("div",{className:`w-2 h-2 rounded-full bg-${f.color}-500 shadow-[0_0_6px_currentColor] ${h?"opacity-100":"opacity-60 group-hover:opacity-100"} flex-shrink-0 ml-2`})]}),h&&a.jsx("div",{className:`bg-slate-50/90 dark:bg-slate-800/80 backdrop-blur-md p-3 rounded-b-xl border border-t-0 border-${f.color}-500/50 animate-fade-in-fast`,children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap text-left",children:eh[p]||"     ."})})]},m)})})]})]},c))})})})},DC=({rows:e,id:t})=>{const[n,r]=_.useState(null),o=e.slice(1).flatMap(s=>{const i=ne(s[0]).trim();return i?i.split(/\r?\n/).map(u=>u.trim()).filter(Boolean):[]});return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-8 scroll-mt-24",children:a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/40 rounded-2xl border border-dashed border-slate-300 dark:border-slate-600/50 p-2 flex flex-col sm:flex-row items-stretch gap-2 hover:border-slate-400 dark:hover:border-slate-500 transition-colors group",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-xl px-6 py-4 flex items-center justify-center sm:justify-start gap-4 border border-slate-200 dark:border-slate-700/50 sm:min-w-[180px]",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-500/20 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform duration-300",children:a.jsx(Qe,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-none",children:" "}),a.jsx("span",{className:"text-xs text-slate-500 mt-1 font-medium",children:" "})]})]}),a.jsx("div",{className:"flex-1 bg-white/50 dark:bg-slate-800/30 rounded-xl border border-slate-200 dark:border-slate-700/30 p-4 flex flex-wrap items-center gap-3",children:o.map((s,i)=>{const u=n===s;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>r(u?null:s),className:`
                                        px-4 py-2 rounded-lg text-sm font-bold border shadow-sm flex items-center gap-2 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500/50
                                        ${u?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white border-purple-500 ring-1 ring-purple-500/50":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:text-white hover:border-purple-500/50"}
                                    `,children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500/50"}),s]}),u&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-72 p-4 bg-white dark:bg-slate-800 border border-purple-500/50 rounded-xl shadow-2xl z-50 animate-fade-in-fast",children:[a.jsx("h5",{className:"font-bold text-purple-600 dark:text-purple-400 mb-2 pb-2 border-b border-slate-200 dark:border-slate-700",children:s}),a.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap text-left",children:eh[s]||"     ."}),a.jsx("div",{className:"absolute -top-1.5 left-4 w-3 h-3 bg-white dark:bg-slate-800 border-t border-l border-purple-500/50 transform rotate-45"})]})]},i)})})]})})},UC=({target:e,difficultyLabel:t,onClose:n,className:r})=>{const[o,s]=_.useState(2),[i,u]=_.useState(0),[f,c]=_.useState(e);_.useEffect(()=>{c(e)},[e]);const[p,m]=_.useState(null),[h,y]=_.useState(!1),w=_.useMemo(()=>{const b=f-i,x=o,v=o*6;if(b<=x)return 100;if(b>v)return 0;let g=new Array(v+1).fill(0);for(let S=1;S<=6;S++)g[S]=1;for(let S=2;S<=o;S++){const k=new Array(v+1).fill(0);for(let A=0;A<=v;A++)if(g[A]!==0)for(let R=1;R<=6;R++)A+R<=v&&(k[A+R]+=g[A]);g=k}const T=Math.pow(6,o);let N=0;for(let S=b;S<=v;S++)N+=g[S];return N/T*100},[o,i,f]),E=()=>{y(!0),m(null),setTimeout(()=>{const b=Array.from({length:o},()=>Math.floor(Math.random()*6)+1),x=b.reduce((v,g)=>v+g,0)+i;m({dice:b,total:x}),y(!1)},600)};return a.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl border border-cyan-500/50 shadow-2xl p-5 flex flex-col gap-4 animate-fade-in-fast ${r}`,children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h5",{className:"font-bold text-cyan-600 dark:text-cyan-400",children:" "}),a.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>c(Math.max(1,f-1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:b=>{const x=b.target.value;x===""?c(0):/^\d+$/.test(x)&&c(parseInt(x,10))},onBlur:()=>{f<1&&c(1)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0"}),a.jsx("button",{onClick:()=>c(f+1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Qe,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s(Math.max(1,o-1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:b=>{const x=b.target.value;x===""?s(0):/^\d+$/.test(x)&&s(parseInt(x,10))},onBlur:()=>{let b=o;b<1&&(b=1),b>20&&(b=20),s(b)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0"}),a.jsx("button",{onClick:()=>s(Math.min(20,o+1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Qe,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" (+/-)"}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>u(i-1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("input",{type:"number",value:i,onChange:b=>{const x=b.target.valueAsNumber;isNaN(x)?(b.target.value===""||b.target.value==="-")&&u(0):u(x)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),a.jsx("button",{onClick:()=>u(i+1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Qe,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-700/50",children:[a.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:["  ( ",f," )"]}),a.jsxs("div",{className:`text-2xl font-black tabular-nums ${w>=80?"text-emerald-500 dark:text-emerald-400":w>=50?"text-cyan-500 dark:text-cyan-400":w>=20?"text-amber-500 dark:text-amber-400":"text-red-500 dark:text-red-400"}`,children:[w.toFixed(1),"%"]})]}),a.jsx("div",{children:a.jsxs("button",{onClick:E,disabled:h,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-lg shadow-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95 flex justify-center items-center gap-2",children:[h?a.jsx(Pe,{className:"w-5 h-5 animate-spin"}):a.jsx(Sn,{className:"w-5 h-5"}),h?" ...":" "]})}),p&&a.jsxs("div",{className:"mt-2 bg-slate-100 dark:bg-slate-700/30 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-600 animate-slide-in-bottom",children:[a.jsx("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:p.dice.map((b,x)=>a.jsx("div",{className:"w-8 h-8 bg-white dark:bg-slate-200 text-slate-900 rounded font-bold flex items-center justify-center shadow-md border border-slate-200 dark:border-none",children:b},x))}),a.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[" ",a.jsx("strong",{className:"text-slate-900 dark:text-white",children:p.total-i})," ",i!==0&&a.jsxs("span",{className:"text-cyan-600 dark:text-cyan-400",children:["(",i>0?"+":"",i,")"]}),"= ",a.jsx("span",{className:`font-black text-lg ${p.total>=f?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:p.total})]}),a.jsx("div",{className:`text-xs font-bold mt-1 ${p.total>=f?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:p.total>=f?"!":""})]})]})},FC=({rows:e,id:t})=>{const[n,r]=_.useState(null),o=e[0].map((i,u)=>{var p;const f=ne(((p=e[1])==null?void 0:p[u])||"").trim(),c=parseInt(f.replace(/[^0-9]/g,""),10)||0;return{label:ne(i).trim(),displayValue:f,value:c}}),s=i=>{const u=[{border:"border-emerald-500",text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20"},{border:"border-cyan-500",text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-500/10",glow:"shadow-cyan-500/20"},{border:"border-blue-500",text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-500/10",glow:"shadow-blue-500/20"},{border:"border-amber-500",text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-500/10",glow:"shadow-amber-500/20"},{border:"border-red-500",text:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",glow:"shadow-red-500/20"},{border:"border-fuchsia-500",text:"text-fuchsia-600 dark:text-fuchsia-400",bg:"bg-fuchsia-500/10",glow:"shadow-fuchsia-500/20"}];return u[Math.min(i,u.length-1)]};return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-12 scroll-mt-24",children:a.jsxs("div",{className:"flex flex-col gap-6 items-center",children:[a.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/40 p-6 rounded-2xl border border-slate-200 dark:border-slate-700/50 shadow-inner flex-grow w-full",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[a.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:a.jsx("span",{children:"  "})}),a.jsx("span",{className:"text-xs text-slate-500 font-medium hidden sm:inline",children:"   "})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4",children:o.map((i,u)=>{const f=s(u),c=(n==null?void 0:n.label)===i.label;return a.jsxs("button",{onClick:()=>r(p=>(p==null?void 0:p.label)===i.label?null:{label:i.label,value:i.value}),className:`relative group flex flex-col items-center justify-center p-4 rounded-xl border transition-all duration-300 ${c?"ring-2 ring-cyan-500 scale-105 z-10 bg-white dark:bg-slate-800":"hover:-translate-y-1 hover:shadow-lg hover:bg-white dark:hover:bg-slate-800"} ${f.border} ${f.bg} ${f.glow}`,children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wide text-center h-8 flex items-center",children:i.label}),a.jsxs("div",{className:`text-2xl font-black ${f.text} tabular-nums`,children:[i.value,"+"]}),a.jsx("div",{className:"text-xs text-slate-500 mt-1 opacity-60",children:""})]},u)})}),a.jsx("div",{className:"text-center text-xs text-slate-500 sm:hidden mt-2",children:"    "})]})}),n&&a.jsx(UC,{className:"w-full max-w-lg",target:n.value,difficultyLabel:n.label,onClose:()=>r(null)})]})})},VC={undead:pC,robot:K0,elemental:hC,insect:fC,beast:mC,scientist:Y0,gunner:gC,archer:xC,mage:Pe,tank:yC,warrior:hi,citizen:vC,person:Rr,fishhook:SC,bigman:TC,feather:EC},jC=({npc:e,className:t})=>{const n=`NPC_ICON_${e.name}`,[r,o]=_.useState(()=>localStorage.getItem(n));_.useEffect(()=>{let i=!0;return(async()=>{if(localStorage.getItem(n)){i&&o(localStorage.getItem(n));return}try{await xi()}catch{}const f=localStorage.getItem(n);if(f){i&&o(f);return}IC(e,c=>{i&&o(c)})})(),()=>{i=!1}},[e,n]);const s=r?VC[r]||Rr:pi;return a.jsxs("div",{className:`relative ${t}`,title:r||" ...",children:[!r&&a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-500 border-t-transparent animate-spin z-10"}),a.jsx(s,{className:`w-full h-full transition-opacity duration-500 ${r?"opacity-100":"opacity-30"}`})]})},Xc=({npc:e,id:t})=>{const n=r=>{const o=window.getSelection();if(o&&o.toString().length>0)return;const s=r.currentTarget;s.classList.remove("highlight-animate"),s.offsetWidth,s.classList.add("highlight-animate"),setTimeout(()=>s.classList.remove("highlight-animate"),3e3)};return a.jsx("div",{className:"not-prose my-6 relative rounded-xl",children:a.jsxs("div",{id:t,"data-highlight-container":"true",onClick:n,className:"p-6 bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg relative z-10 scroll-mt-24 cursor-pointer hover:border-cyan-500/30 hover:shadow-cyan-500/10 transition-all duration-200",children:[a.jsx(Mo,{tableId:t,rowCount:e.sourceRowCount}),a.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-600 pb-4 mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("h3",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:e.name}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 italic mt-1",children:e.description})]}),a.jsx(jC,{npc:e,className:"w-10 h-10 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]}),a.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 mb-4",children:e.stats.map(r=>a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:[r.label.replace(/\.$/,""),":"]}),a.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-white",children:r.value})]},r.label))}),a.jsx("div",{className:"space-y-4",children:e.actions.map(r=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 pb-1 mb-2",children:r.category}),a.jsx("ul",{className:"space-y-3 list-none p-0",children:r.abilities.map((o,s)=>a.jsx("li",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 rounded-md border border-slate-100 dark:border-none",children:a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("div",{className:"flex-grow",children:o.name?a.jsxs(a.Fragment,{children:[a.jsxs("strong",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[o.name,"."]}),a.jsx("span",{className:"text-slate-600 dark:text-slate-300 ml-1",children:o.description})]}):a.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:o.description})}),o.charge!==void 0&&a.jsxs("div",{title:"",className:"flex-shrink-0 flex items-center gap-1 bg-amber-100 dark:bg-slate-700 text-amber-600 dark:text-amber-400 px-2 py-1 rounded-full text-xs font-bold",children:[a.jsx(Sn,{className:"w-3 h-3"}),a.jsxs("span",{children:[" ",o.charge]})]})]})},s))})]},r.category))})]})})},$C=({messages:e,renderContent:t})=>a.jsx("div",{className:"flex flex-col space-y-6 my-8 not-prose px-2 sm:px-4",children:e.map((n,r)=>{const o=n.speaker==="M";return a.jsx("div",{className:`flex w-full ${o?"justify-start":"justify-end"}`,children:a.jsxs("div",{className:`flex max-w-[90%] sm:max-w-[80%] gap-3 ${o?"flex-row":"flex-row-reverse"}`,children:[a.jsx("div",{className:"flex-shrink-0 flex flex-col justify-end pb-1",children:a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shadow-md ${o?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 ring-1 ring-slate-300 dark:ring-slate-600":"bg-cyan-600 text-white ring-1 ring-cyan-500"}`,children:n.speaker})}),a.jsx("div",{className:`relative px-4 py-3 shadow-md border min-w-[120px] ${o?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-2xl rounded-bl-none text-slate-800 dark:text-slate-200":"bg-cyan-50 dark:bg-cyan-900/40 border-cyan-200 dark:border-cyan-700/50 rounded-2xl rounded-br-none text-slate-800 dark:text-slate-100"}`,children:a.jsx("div",{className:"space-y-2 text-sm leading-relaxed",children:n.elements.map((s,i)=>{let u=s;if(i===0){u=JSON.parse(JSON.stringify(s));const f=/^[ML]\s*:\s*/;if(u.runs){for(const c of u.runs)if(c.text&&f.test(c.text)){c.text=c.text.replace(f,"");break}}else u.text&&(u.text=u.text.replace(f,""))}return u.type==="list_item"?a.jsxs("div",{id:s.id,className:"flex gap-2 ml-1 text-left scroll-mt-24",children:[a.jsx("span",{className:`select-none mt-1.5 w-1.5 h-1.5 rounded-full flex-shrink-0 ${o?"bg-slate-400":"bg-cyan-500"}`}),a.jsx("div",{className:"flex-1",children:t(u)})]},i):a.jsx("div",{id:s.id,className:`${u.isBold?"font-bold":""} ${u.isItalic?"italic":""} ${u.alignment==="CENTER","text-center"} scroll-mt-24`,children:t(u)},i)})})})]})},r)})}),GC=({introElements:e,narrativeElements:t,explanationElements:n,renderElement:r})=>{const[o,s]=_.useState(!1),i=u=>a.jsx("div",{className:"space-y-4",children:u.map((f,c)=>r(f,c))});return a.jsxs("div",{className:"relative group my-8",children:[a.jsx("div",{className:"mb-6",children:i(e)}),a.jsxs("div",{className:"relative overflow-hidden min-h-[300px] border border-slate-200 dark:border-slate-700/50 rounded-xl bg-slate-50 dark:bg-slate-900/30 p-6 shadow-inner",children:[a.jsx("h3",{className:"font-semibold text-cyan-600 dark:text-cyan-400 mb-4 text-xl border-b border-slate-200 dark:border-slate-700 pb-2",children:o?"":" "}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`transition-all duration-500 ease-in-out transform ${o?"opacity-0 translate-x-[20px] pointer-events-none absolute top-0 left-0 w-full":"opacity-100 translate-x-0 relative"}`,children:i(t)}),a.jsx("div",{className:`transition-all duration-500 ease-in-out transform ${o?"opacity-100 translate-x-0 relative":"opacity-0 -translate-x-[20px] pointer-events-none absolute top-0 left-0 w-full"}`,children:i(n)})]}),a.jsx("button",{onClick:()=>s(!o),className:`absolute top-1/2 -translate-y-1/2 z-20 
                        w-10 py-6 rounded-full shadow-[0_0_15px_rgba(34,211,238,0.4)] 
                        transition-all duration-500 ease-out cursor-pointer border border-cyan-500/50
                        opacity-0 group-hover:opacity-100
                        flex items-center justify-center
                        ${o?"bg-white dark:bg-slate-800 text-cyan-600 dark:text-cyan-400 right-2":"bg-cyan-600 text-white right-6"}
                        hover:scale-105 active:scale-95
                    `,title:o?" ":" ",children:a.jsx("div",{className:"text-xs font-bold tracking-widest uppercase flex items-center justify-center h-full",style:{writingMode:"vertical-rl",textOrientation:"upright"},children:o?" ":" "})})]})]})},BC=({title:e,description:t,footer:n,id:r,rowCount:o,variant:s,tags:i,onClick:u,isSelected:f,compact:c})=>{const p=s==="item",m=h=>{if(u){h.stopPropagation(),u();return}const y=window.getSelection();if(y&&y.toString().length>0)return;const w=h.currentTarget;w.classList.remove("highlight-animate"),w.offsetWidth,w.classList.add("highlight-animate"),setTimeout(()=>w.classList.remove("highlight-animate"),3e3)};return a.jsx("div",{className:"h-full relative",children:a.jsxs("div",{id:r,"data-highlight-container":"true",onClick:m,className:`
                    rounded-xl border transition-all duration-300 group cursor-pointer h-full flex flex-col relative z-10 scroll-mt-24
                    ${f?p?"bg-indigo-50 dark:bg-indigo-900/60 border-indigo-500 ring-1 ring-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-cyan-50 dark:bg-cyan-900/60 border-cyan-500 ring-1 ring-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]":p?"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700 hover:border-indigo-400/50 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(129,140,248,0.15)]":"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 hover:border-cyan-500/50 hover:bg-cyan-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(34,211,238,0.15)]"}
                    ${c?"p-3":"p-5"}
                `,children:[a.jsx(Mo,{tableId:r,rowCount:o||0}),a.jsxs("div",{className:`flex justify-between items-start gap-3 ${c?"mb-1":"mb-2"}`,children:[a.jsx("h4",{className:`font-bold leading-tight ${c?"text-base":"text-lg"} ${p?"text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-300":"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-500 dark:group-hover:text-cyan-300"}`,children:e}),p?a.jsx("div",{className:`rounded-md bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0 ${c?"p-1":"p-1.5"}`,children:a.jsx(To,{className:c?"w-4 h-4":"w-5 h-5"})}):a.jsx("div",{className:`rounded-md bg-cyan-100 dark:bg-cyan-500/10 text-cyan-500 dark:text-cyan-400 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0 ${c?"p-1":"p-1.5"}`,children:a.jsx(Sn,{className:c?"w-4 h-4":"w-5 h-5"})})]}),!c&&i&&i.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:i.map(h=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${th(h)}`,children:h},h))}),a.jsx("div",{className:"flex-grow",children:a.jsx("div",{className:`text-slate-600 dark:text-slate-300 leading-relaxed ${c?"text-xs line-clamp-2":"text-sm"}`,children:t})}),a.jsx("div",{className:`border-t text-xs ${c?"mt-2 pt-2":"mt-4 pt-3"} ${p?"border-indigo-200 dark:border-indigo-500/20 text-indigo-700 dark:text-indigo-200/80":"border-cyan-200 dark:border-cyan-500/20 text-slate-500 dark:text-slate-400"}`,children:n})]})})},HC=({result:e,type:t,isSelected:n,onSelect:r,onUse:o})=>{const s=t==="item",i=s?"border-indigo-500":"border-cyan-500",u=s?"text-indigo-300":"text-cyan-300",f=s?"from-indigo-900/40 to-slate-900/40":"from-cyan-900/40 to-slate-900/40";return a.jsxs("div",{onClick:r,className:`
                relative p-4 rounded-xl border bg-gradient-to-br shadow-lg animate-slide-in-bottom cursor-pointer transition-all duration-300 overflow-hidden
                ${f} ${n?`ring-2 ring-offset-2 ring-offset-slate-900 ${s?"ring-indigo-400 border-indigo-400":"ring-cyan-400 border-cyan-400"}`:`${i} hover:scale-[1.01]`}
            `,children:[a.jsxs("div",{className:`transition-all duration-300 ${n?"blur-[4px] opacity-40 pointer-events-none":""}`,children:[a.jsx("div",{className:"absolute -top-3 -right-3 pointer-events-none",children:a.jsx(Pe,{className:`w-8 h-8 ${u} drop-shadow-lg`})}),a.jsx("h4",{className:`font-bold text-lg ${u} mb-2`,children:e.name}),a.jsx("p",{className:"text-slate-200 text-sm mb-3 leading-relaxed",children:e.description}),a.jsxs("div",{className:"bg-black/30 rounded p-2 text-xs border-l-2 border-slate-500",children:[a.jsx("span",{className:"text-slate-400 font-semibold mr-1",children:":"}),a.jsx("span",{className:"text-slate-300",children:e.changes})]})]}),a.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-300 ${n?"opacity-100 z-10":"opacity-0 pointer-events-none"}`,children:a.jsxs("button",{onClick:c=>{c.stopPropagation(),o()},className:"group relative px-6 py-3 bg-white/10 backdrop-blur-md border border-white/20 text-white font-bold rounded-xl shadow-2xl hover:bg-white/20 transition-all transform hover:scale-105 active:scale-95 flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-indigo-500/20 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(Pe,{className:"w-5 h-5 text-cyan-300 animate-pulse"}),a.jsx("span",{className:"relative z-10 text-shadow-sm",children:" "}),a.jsx("div",{className:"absolute -inset-1 rounded-xl bg-gradient-to-r from-cyan-400 to-indigo-400 opacity-30 blur-md group-hover:opacity-50 transition-opacity -z-10"})]})})]})},qC=({item:e,type:t,onClose:n})=>{const[r,o]=_.useState([]),[s,i]=_.useState(!1),[u,f]=_.useState(null),[c,p]=_.useState(null),[m,h]=_.useState(!1),[y,w]=_.useState("enhance"),[E,b]=_.useState(""),[x,v]=_.useState(null),[g,T]=_.useState(null),N=t==="item",S=N?"text-indigo-400":"text-cyan-400",k=(C,P)=>`${C==="ability"?"Ability Memo _":"Item Memo _"}${P.trim()}`;_.useEffect(()=>{let C=!0;const P=k(t,e.rawTitle);return(async()=>{var j;if(await xi(),Lt[P]){C&&p(Lt[P]);return}C&&h(!0);try{const I=localStorage.getItem("user_gemini_api_key")||"AIzaSyDVnAaIbEPABcQrGRZV_iVh7YgqcB07rhA",V=new Er({apiKey:I}),B=`TRPG ' ' ${N?"":" "} '${e.rawTitle}'     ,  ,    3~4 .
                
                [ ]
                : ${e.rawDescription}
                ${e.rawDetails.map(U=>`${U.label}: ${U.value}`).join(", ")}
                
                  (~) .`,M=(j=(await V.models.generateContent({model:"gemini-2.5-flash",contents:B})).text)==null?void 0:j.trim();M&&C&&(p(M),Lt[P]=M,fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:M,author:P}})}).catch(U=>console.error("Failed to save memo",U)))}catch(I){console.error("Memo Gen Failed",I)}finally{C&&h(!1)}})(),()=>{C=!1}},[e.rawTitle,t,e.rawDescription,e.rawDetails,N]);const A=async()=>{i(!0),f(null),o([]),v(null);try{const C=localStorage.getItem("user_gemini_api_key")||"AIzaSyDVnAaIbEPABcQrGRZV_iVh7YgqcB07rhA",P=new Er({apiKey:C});let $="";const j=E.trim()?`
[  ]
${E}
`:"";y==="enhance"?$=`
                     TRPG ' '    / .
                      [ ] ,      ** ** 2 .

                    [ ]
                    - : ${N?"(Item)":" (Ability)"}
                    - : ${e.rawTitle}
                    - : ${e.rawDescription}
                    -  : ${JSON.stringify(e.rawDetails)}
                    ${j}

                    [ ]
                    1. ** 1 (Tier 1)**:    ,   .
                    2. ** 2 (Tier 2)**: ,      .
                    3.     /   .
                    4.      .
                    5.      .

                    [ ]
                      JSON   (    JSON):
                    [
                        {
                            "name": " ",
                            "description": "  ",
                            "changes": "  (:  +2,  )"
                        },
                        {
                            "name": " ",
                            "description": "  ",
                            "changes": " "
                        }
                    ]
                `:$=`
                     TRPG ' '    / .
                      [ ] ,     ** (Variant)** 2 .

                    [ ]
                    - : ${N?"(Item)":" (Ability)"}
                    - : ${e.rawTitle}
                    - : ${e.rawDescription}
                    -  : ${JSON.stringify(e.rawDetails)}
                    ${j}

                    [ ]
                    1. ** A (Variant A)**:   ,  (: ->)    .
                    2. ** B (Twisted/Special Variant)**:   ,       .
                    3.      .
                    4.      .
                    5.       .

                    [ ]
                      JSON   (    JSON):
                    [
                        {
                            "name": "  A",
                            "description": "  ",
                            "changes": "  (:   )"
                        },
                        {
                            "name": "   B",
                            "description": "   ",
                            "changes": " "
                        }
                    ]
                `;const V=(await P.models.generateContent({model:"gemini-2.5-flash",contents:$,config:{responseMimeType:"application/json"}})).text;if(!V)throw new Error("AI  .");const q=JSON.parse(V).map(M=>({...M,description:y==="enhance"?`${M.description} (${e.rawTitle}  )`:M.description}));o(q)}catch(C){console.error("Enhancement Error:",C),f("    .")}finally{i(!1)}},R=C=>{const P=t==="ability"?"user_created_abilities":"user_created_items";try{const $=JSON.parse(localStorage.getItem(P)||"[]"),j={name:C.name,description:C.description,isCreation:!0};t==="ability"?(j.condition="-",j.charge="-"):(j.durability="-",j.volume=0),e.rawDetails&&e.rawDetails.forEach(I=>{const V=I.label,B=I.value;V.includes("")?j.condition=B:V.includes("")?j.charge=B:V.includes("")?j.durability=B:V.includes("")&&(j.volume=parseInt(B.replace(/[^0-9]/g,""))||0)}),$.push(j),localStorage.setItem(P,JSON.stringify($)),T(`'${C.name}'()   .`),setTimeout(()=>T(null),3e3)}catch($){console.error("Storage Error",$),alert("   .")}};return a.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl overflow-hidden flex flex-col h-auto relative",children:[g&&a.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-emerald-600 text-white px-6 py-4 rounded-2xl shadow-[0_0_50px_rgba(16,185,129,0.5)] text-lg font-bold animate-fade-in-fast z-[9999] flex items-center gap-4 border-2 border-emerald-400/50 backdrop-blur-md min-w-[300px] justify-center pointer-events-none",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:a.jsx(Z0,{className:"w-6 h-6"})}),g]}),a.jsxs("div",{className:"px-5 py-4 border-b border-slate-700 bg-slate-800/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pe,{className:`w-5 h-5 ${S}`}),a.jsx("h3",{className:"font-bold text-white",children:"AI  "})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(je,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-5 flex flex-col gap-6 max-h-[60vh] xl:max-h-[calc(100vh-320px)] overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:" "}),a.jsxs("div",{className:"bg-slate-800 p-3 rounded-xl border border-slate-700",children:[a.jsx("div",{className:"flex justify-between items-start gap-2 mb-2",children:a.jsx("h4",{className:`font-bold ${S}`,children:e.rawTitle})}),a.jsx("p",{className:"text-sm text-slate-300 mb-2",children:e.rawDescription}),a.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-slate-500",children:e.tags.map(C=>a.jsx("span",{className:"border border-slate-600 px-1 rounded",children:C},C))})]})]}),a.jsxs("div",{className:"bg-white/5 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(pi,{className:`w-4 h-4 text-slate-400 ${m?"animate-pulse":""}`}),a.jsx("span",{className:"text-xs font-bold text-slate-400",children:"AI "})]}),m?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-2 bg-slate-700 rounded w-3/4 animate-pulse"}),a.jsx("div",{className:"h-2 bg-slate-700 rounded w-full animate-pulse"}),a.jsx("div",{className:"h-2 bg-slate-700 rounded w-5/6 animate-pulse"})]}):a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed whitespace-pre-wrap",children:c||"    ."})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[r.length===0&&!s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-0.5 h-8 bg-slate-700 mb-2"}),a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsxs("button",{onClick:A,className:`
                                        group relative px-6 py-3 rounded-l-full font-bold text-white shadow-lg transition-all flex-1
                                        ${N?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/30":"bg-cyan-600 hover:bg-cyan-500 shadow-cyan-500/30"}
                                        active:scale-95 flex items-center justify-center gap-2 overflow-hidden
                                    `,children:[a.jsx("span",{className:"absolute inset-0 w-full h-full bg-white/20 -translate-x-full group-hover:translate-x-full transition-transform duration-500 skew-x-12"}),a.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[a.jsx(Pe,{className:"w-5 h-5"}),y==="enhance"?"AI ":"AI   "]})]}),a.jsx("button",{onClick:()=>w(C=>C==="enhance"?"variant":"enhance"),className:`
                                        p-3 rounded-r-full font-bold text-white shadow-lg transition-all border-l border-white/20
                                        ${N?"bg-indigo-700 hover:bg-indigo-600":"bg-cyan-700 hover:bg-cyan-600"}
                                        active:scale-95 flex items-center justify-center
                                    `,title:y==="enhance"?"   ":"  ",children:a.jsx(X0,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"w-full mt-3 px-1",children:a.jsx("input",{type:"text",value:E,onChange:C=>b(C.target.value),placeholder:"   ()",className:"w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all text-center"})}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:y==="enhance"?"Gemini AI      .":"Gemini AI      ."})]}),s&&a.jsxs("div",{className:"flex flex-col items-center py-4",children:[a.jsx("div",{className:`w-10 h-10 border-4 border-t-transparent rounded-full animate-spin ${N?"border-indigo-500":"border-cyan-500"}`}),a.jsx("p",{className:"text-sm text-slate-400 mt-3 animate-pulse",children:y==="enhance"?"   ...":"   ..."})]}),u&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-red-400 text-sm mb-3",children:u}),a.jsxs("button",{onClick:A,className:"text-xs px-3 py-1.5 bg-slate-800 hover:bg-slate-700 rounded border border-slate-600 text-slate-300 flex items-center gap-1 mx-auto",children:[a.jsx(ta,{className:"w-3 h-3"}),"  "]})]})]}),r.length>0&&a.jsxs("div",{className:"space-y-4 animate-fade-in-fast",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"h-px bg-slate-700 flex-1"}),a.jsx("span",{className:"text-xs font-bold text-slate-400",children:""}),a.jsx("div",{className:"h-px bg-slate-700 flex-1"})]}),r.map((C,P)=>a.jsx(HC,{result:C,type:t,isSelected:P===x,onSelect:()=>v($=>$===P?null:P),onUse:()=>R(C)},P)),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsxs("button",{onClick:()=>o([]),className:"flex-1 py-2 text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center justify-center gap-1 border border-slate-700 rounded hover:bg-slate-800",children:[a.jsx(fi,{className:"w-3 h-3"})," "]}),a.jsxs("button",{onClick:A,className:"flex-1 py-2 text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center justify-center gap-1 border border-slate-700 rounded hover:bg-slate-800",children:[a.jsx(ta,{className:"w-3 h-3"}),"   "]})]})]})]})]})},zC=({items:e,type:t})=>{const[n,r]=_.useState(""),[o,s]=_.useState([]),[i,u]=_.useState(null),f=_.useMemo(()=>{const w=new Set;return e.forEach(E=>E.tags.forEach(b=>w.add(b))),Array.from(w).sort()},[e]),c=_.useMemo(()=>e.filter(w=>{const E=(w.rawTitle+" "+w.rawDescription).toLowerCase().includes(n.toLowerCase()),b=o.length===0||o.every(x=>w.tags.includes(x));return E&&b}),[e,n,o]),p=w=>{s(E=>E.includes(w)?E.filter(b=>b!==w):[...E,w])},m=t==="item",h=_.useMemo(()=>e.find(w=>w.id===i),[e,i]),y=w=>{w&&u(E=>E===w?null:w)};return a.jsxs("div",{className:"my-8 space-y-4",children:[a.jsx("div",{className:"bg-slate-100 dark:bg-slate-900/40 p-4 rounded-xl border border-slate-200 dark:border-slate-700/50 backdrop-blur-sm sticky top-20 z-30 shadow-lg transition-all duration-300",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Kt,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:bg-white dark:focus:bg-slate-900 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:m?" ...":" ...",value:n,onChange:w=>r(w.target.value)}),n&&a.jsx("button",{onClick:()=>r(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${o.length===0?m?"bg-indigo-600 text-white border-indigo-500":"bg-cyan-600 text-white border-cyan-500":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:""}),f.map(w=>{const E=o.includes(w),b=th(w);return a.jsx("button",{onClick:()=>p(w),className:`px-3 py-1 text-xs rounded-full border transition-all relative overflow-hidden ${E?`${b} ring-1 ring-offset-1 ring-offset-slate-100 dark:ring-offset-slate-900 ring-black/20 dark:ring-white/20`:"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:w},w)})]})]})}),a.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 items-start relative",children:[a.jsx("div",{className:`flex-1 transition-all duration-500 ease-in-out w-full ${h?"xl:w-2/3":"xl:w-full"}`,children:a.jsx("div",{className:`grid gap-4 transition-all duration-500 ${h?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:c.length>0?c.map((w,E)=>a.jsx(BC,{id:w.id,title:w.title,description:w.description,footer:w.details,rowCount:w.rowCount,variant:t,tags:w.tags,onClick:()=>y(w.id),isSelected:i===w.id,compact:!!h},E)):a.jsx("div",{className:"col-span-full py-12 text-center text-slate-500",children:a.jsx("p",{children:"  ."})})})}),h&&a.jsx("div",{className:"w-full xl:w-[380px] xl:sticky xl:top-72 animate-fade-in-fast shrink-0",children:a.jsx(qC,{item:h,type:t,onClose:()=>u(null)})})]})]})},JC=({elements:e,pageTitle:t,footnotes:n,onShowFootnote:r,onHideFootnote:o})=>{if(!e||e.length===0)return a.jsx("p",{className:"text-slate-400 italic",children:"  ."});const s=new Set;_.useEffect(()=>{xi()},[]);const i=g=>{var S;let T="";switch((S=g.alignment)==null?void 0:S.toUpperCase()){case"CENTER":T+="text-center ";break;case"END":T+="text-right ";break;case"JUSTIFY":T+="text-justify ";break;case"START":default:T+="text-left ";break}return g.runs||(g.isBold&&(T+="font-bold "),g.isItalic&&(T+="italic "),g.isUnderline&&(T+="underline ")),T+="whitespace-pre-wrap ",T.trim()},u=g=>{const T={};return g.fontSize&&(T.fontSize=`${g.fontSize}pt`,T.lineHeight="1.5"),T},f=(g,T)=>{g.preventDefault();const N=document.getElementById(T),S=100;if(N){const A=N.getBoundingClientRect().top+window.pageYOffset-S;window.scrollTo({top:A,behavior:"smooth"});let R=N;N.classList.contains("absolute")&&N.classList.contains("-top-20")&&N.nextElementSibling instanceof HTMLElement&&(R=N.nextElementSibling),R.classList.remove("highlight-animate"),R.offsetWidth,R.classList.add("highlight-animate"),setTimeout(()=>R.classList.remove("highlight-animate"),2e3)}},c=g=>g==null||g===""?null:String(g).replace(/\/r/g,`
`).replace(/\r/g,`
`).split(/(\[\d+\])/g).map((S,k)=>{if(/^\[\d+\]$/.test(S)){const A=S.replace(/[\[\]]/g,"");n&&n[A]&&s.add(A);const R=`footnote-ref-${A}`,C=`footnote-body-${A}`,P=j=>{if(n&&n[A]&&r){const I=j.currentTarget.getBoundingClientRect();r(`[${A}] ${n[A]}`,I)}},$=()=>{o&&o()};return a.jsx("span",{id:R,className:"inline-block align-middle mx-0.5 relative -top-0.5",children:a.jsx("button",{onClick:j=>f(j,C),onMouseEnter:P,onMouseLeave:$,className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors","aria-label":` ${A}`,children:a.jsx(pi,{className:"w-4 h-4"})})},k)}return S}),p=g=>g.runs&&g.runs.length>0?g.runs.map((T,N)=>{const S=[];T.isBold&&S.push("font-bold"),T.isItalic&&S.push("italic"),T.isUnderline&&S.push("underline");const k=a.jsx("span",{className:S.join(" "),children:c(T.text)});return T.linkUrl?a.jsx("a",{href:T.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors",children:k},N):hs.cloneElement(k,{key:N})}):g.text?c(g.text):null,m=g=>typeof g=="object"&&g!==null?p(g):c(g),h=(g,T)=>{var A,R,C;const N=g.id||(g.text||`element-${T}`).toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,""),S=i(g),k=u(g);switch(g.type){case"title":return a.jsx("h1",{id:N,className:`font-extrabold text-cyan-600 dark:text-cyan-400 border-b border-slate-300 dark:border-slate-600 pb-4 mb-6 scroll-mt-24 ${S}`,style:{...k,fontSize:k.fontSize||"3.5rem"},children:p(g)},T);case"heading_1":return a.jsx("h1",{id:N,className:`font-bold text-cyan-600 dark:text-cyan-400 border-b border-slate-300 dark:border-slate-600 pb-2 mb-4 mt-8 scroll-mt-24 ${S}`,style:{...k,fontSize:k.fontSize||"2.25rem"},children:p(g)},T);case"heading_2":return a.jsx("h2",{id:N,className:`font-bold text-cyan-600 dark:text-cyan-400 mb-3 mt-6 scroll-mt-24 ${S}`,style:{...k,fontSize:k.fontSize||"1.875rem"},children:p(g)},T);case"heading_3":return a.jsx("h3",{id:N,className:`font-semibold text-cyan-600 dark:text-cyan-400 mb-2 mt-4 scroll-mt-24 ${S}`,style:{...k,fontSize:k.fontSize||"1.5rem"},children:p(g)},T);case"heading_4":case"heading_5":case"heading_6":return a.jsx("h4",{id:N,className:`font-medium text-cyan-600 dark:text-cyan-400 mb-2 mt-3 scroll-mt-24 ${S}`,style:{...k,fontSize:k.fontSize||"1.25rem"},children:p(g)},T);case"quote":return a.jsx("blockquote",{id:N,className:`border-l-4 border-cyan-500 pl-4 py-2 my-4 text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/50 rounded-r-md scroll-mt-24 ${S}`,style:k,children:p(g)},T);case"table":return a.jsx("div",{id:N,"data-highlight-container":"true",className:"my-6 scroll-mt-24 rounded-lg relative",children:a.jsx("div",{className:"overflow-x-auto p-1.5",children:a.jsxs("table",{className:"w-full border-collapse text-sm table-fixed",children:[a.jsx("thead",{children:a.jsx("tr",{className:"bg-slate-100 dark:bg-slate-700/80",children:(R=(A=g.rows)==null?void 0:A[0])==null?void 0:R.map(($,j)=>a.jsx("th",{className:`border border-slate-300 dark:border-slate-600 p-3 font-bold text-cyan-700 dark:text-cyan-300 whitespace-pre-wrap break-words ${Wc($)}`,children:m($)},j))})}),a.jsx("tbody",{children:(C=g.rows)==null?void 0:C.slice(1).map(($,j)=>a.jsx("tr",{id:`${N}-row-${j+1}`,className:"border-b border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:$.map((I,V)=>a.jsx("td",{className:`border border-slate-300 dark:border-slate-600 p-3 text-slate-700 dark:text-slate-300 whitespace-pre-wrap break-words ${Wc(I)}`,children:m(I)},V))},j))})]})})},T);case"paragraph":default:return g.runs&&g.runs.some($=>$.text&&String($.text).trim()!=="")||g.text&&String(g.text).trim()!==""?a.jsx("p",{id:N,className:`mb-3 leading-relaxed text-slate-700 dark:text-slate-300 scroll-mt-24 ${S}`,style:k,children:p(g)},T):null}},y=(g,T)=>{var I,V,B,q;if(!g||g.length===0)return null;let N,S=null;const k=[];let A="",R="";const C=[],P=["","","",""];if(g.some(M=>M.length>1&&P.includes(ne(M[1])))){const U=ne(((I=g[0])==null?void 0:I[0])||"").split(/\n\n|\n/).filter(G=>G.trim()!=="");A=U[0]||"",N=c(U[0]),U.length>1&&(R=U.slice(1).join(`
`).trim(),S=a.jsx("p",{children:c(R)}));for(let G=0;G<g.length;G++){const se=g[G];if(se.length<2)continue;const te=ne(se[1]),ie=P.find(oe=>te.includes(oe));if(ie){const oe=(V=g[G+1])==null?void 0:V[1];if(oe!==void 0){const Te=ne(oe);C.push({label:ie,value:Te}),k.push({label:ie,value:m(oe)})}}}}else{const U=ne(((B=g[0])==null?void 0:B[0])||"").split(/\n\n|\n/).filter(G=>G.trim()!=="");A=U[0]||"",N=c(A),U.length>1?R=U.slice(1).join(`
`).trim():R=ne(((q=g[1])==null?void 0:q[0])||""),R.trim()&&(S=a.jsx("p",{children:c(R)})),g.forEach(G=>{if(G.length<2)return;const se=ne(G[0]),te=P.find(ie=>se.includes(ie));if(te){const ie=ne(G[1]);C.push({label:te,value:ie}),k.push({label:te,value:m(G[1])})}})}if(!N||hs.isValidElement(N)&&!N.props.children)return null;const j=AC(A,R,C,T);return{title:N,description:S,details:w(k),tags:j,rawTitle:A,rawDescription:R,rawDetails:C,rowCount:g.length}},w=g=>{const T=["","","",""],N=g.filter(S=>S.label&&S.value).sort((S,k)=>T.indexOf(S.label)-T.indexOf(k.label));return N.length===0?null:a.jsx("div",{className:"flex justify-between items-center gap-4",children:N.map(S=>a.jsxs("span",{children:[a.jsxs("strong",{children:[S.label,":"]})," ",S.value]},S.label))})},E=g=>{const T=g.trim();if(!T)return null;let N,S=T;const k=T.match(/\(\s*(\d+)\)$/);k&&(N=parseInt(k[1],10),S=T.replace(/\(\s*(\d+)\)$/,"").trim());const A=S.indexOf("."),R=S.indexOf(",");let C=-1;if(A>-1&&R>-1?C=Math.min(A,R):C=Math.max(A,R),C>0){const P=S.substring(0,C).trim(),$=S.substring(C+1).trim();return{name:P,description:$,charge:N}}return{name:"",description:S,charge:N}},x=(()=>{var A,R;const g=[],N=(t||"").includes(" ");let S=null,k=0;for(;k<e.length;){const C=e[k],P=e[k+1];if(C.type.startsWith("heading_")){const fe=ne(C);fe.includes(" ")?S="ability":fe.includes("")?S="item":S=null}const $=ne(C);if(C.type==="heading_2"&&$.includes(" ")){const fe=[],ce=[],ue=[],re=C;for(k++;k<e.length;){const le=e[k],Ne=ne(le);if(le.type==="heading_3"&&Ne.includes(" ")||le.type.startsWith("heading_1"))break;fe.push(le),k++}if(k<e.length&&ne(e[k]).includes(" "))for(k++;k<e.length;){const le=e[k],Ne=ne(le);if(le.type==="heading_3"&&Ne.includes("")||le.type.startsWith("heading_1")||le.type==="heading_2")break;ce.push(le),k++}if(k<e.length&&ne(e[k]).includes(""))for(k++;k<e.length;){const le=e[k];if(le.type.startsWith("heading_1")||le.type==="heading_2")break;ue.push(le),k++}g.push(h(re,k)),g.push(a.jsx(GC,{introElements:fe,narrativeElements:ce,explanationElements:ue,renderElement:h},`combat-switcher-${k}`));continue}const j=Yc(C);if(j){const fe=[];let ce=j,ue=[C];for(k++;k<e.length;){const re=e[k];if(re.type.startsWith("heading")||re.type==="title"||re.type==="table")break;const le=Yc(re);if(le){fe.push({speaker:ce,elements:ue}),ce=le,ue=[re],k++;continue}if(re.type==="list_item"){ue.push(re),k++;continue}break}fe.push({speaker:ce,elements:ue}),g.push(a.jsx($C,{messages:fe,renderContent:p},`chat-${k}`));continue}const I=Kc(C,P),V=Wi(C),B=qs(C),q=so(C),M=S!==null&&C.type==="table"&&C.rows&&C.rows.length>0&&!ir(C)&&!gr(C)&&!Ln(C)&&!Dn(C)&&!Un(C)&&!io(C)&&!qi(C)&&!Qo(C)&&!zi(C)&&!Ji(C)&&!Oi(C)&&!Wi(C),U=B||q||M,G=gr(C),se=Ln(C),te=Dn(C),oe=I&&P&&ir(P)||V&&ir(C)||I||V,Te=!N&&U;if(zi(C)&&C.rows){g.push(a.jsx(LC,{rows:C.rows,id:C.id},`char-struct-${k}`)),k++;continue}if(Ji(C)&&C.rows){g.push(a.jsx(DC,{rows:C.rows,id:C.id},`add-info-${k}`)),k++;continue}if(Oi(C)&&C.rows){g.push(a.jsx(FC,{rows:C.rows,id:C.id},`success-rate-${k}`)),k++;continue}if(G&&C.rows){g.push(a.jsx(PC,{id:C.id,rows:C.rows},`skill-tags-${k}`)),k++;continue}if((se||te)&&C.rows){g.push(a.jsx(MC,{rows:C.rows,id:C.id,type:se?"status":"obstacle"},`formatted-grid-${k}`)),k++;continue}if(Un(C)&&C.rows){g.push(a.jsx(RC,{rows:C.rows,id:C.id},`action-type-${k}`)),k++;continue}if(oe){if(V)try{const ce=C.rows||[],ue=ne((A=ce[0])==null?void 0:A[0]),re=ue.indexOf("."),le=re>-1?ue.substring(0,re).trim():ue.trim(),Ne=re>-1?ue.substring(re+1).trim():"",et=(ce[1]||[]).map(Ue=>{const Z=ne(Ue).trim();let D=Z,z="-";const L=Z.indexOf(".");if(L>0)D=Z.substring(0,L+1).trim(),z=Z.substring(L+1).trim();else{const F=Z.lastIndexOf(" ");F>0&&(D=Z.substring(0,F).trim(),z=Z.substring(F+1).trim())}return z===""&&(z="-"),{label:D,value:z}}).filter(Ue=>Ue.label),$e=[];for(let Ue=2;Ue<ce.length;Ue++){const Z=ce[Ue];if(!Z||Z.length<2)continue;const D=ne(Z[0]).trim().replace(/\.$/,"");if(!D)continue;const L=ne(Z[1]).trim().split(`
`).map(E).filter(F=>F!==null&&(!!F.name||!!F.description));L.length>0&&$e.push({category:D,abilities:L})}const tt={name:le,description:Ne,stats:et,actions:$e,sourceRowCount:ce.length};g.push(a.jsx(Xc,{npc:tt,id:C.id},`npc-table-${k}`)),k++;continue}catch(fe){console.error("Failed to parse live NPC card, rendering as default.",fe,C)}else if(I){const fe=k,ce=[e[k],e[k+1]];for(k+=2;k<e.length;){const ue=e[k];if(Kc(ue,e[k+1]))break;if(ue.type==="paragraph"&&ue.isBold)for(ce.push(ue),k++;k<e.length&&e[k].type==="list_item";)ce.push(e[k]),k++;else break}try{const ue=ce[0],re=ce[1],le=ce.slice(2),Ne=ue.text||"",et=Ne.indexOf("."),$e=et>0?Ne.substring(0,et).trim():Ne.trim(),tt=et>0?Ne.substring(et+1).trim():"",Ue=[];re&&re.type==="table"&&re.rows&&re.rows[0].forEach(O=>{const Q=ne(O).trim();let K=Q,ee="";if(Q.startsWith(" .")){const Y=Q.indexOf(".");K=Q.substring(0,Y+1).trim(),ee=Q.substring(Y+1).trim(),ee===""&&(ee="-")}else{const Y=Q.lastIndexOf(" ");Y>-1&&(K=Q.substring(0,Y),ee=Q.substring(Y+1))}Ue.push({label:K,value:ee})});const Z=[];let D=null;le.forEach(O=>{var Q;if(O.type==="paragraph"&&O.isBold)(Q=D==null?void 0:D.abilities)!=null&&Q.length&&D!==null&&Z.push(D),D={category:ne(O).trim().replace(/\.$/,""),abilities:[]};else if(O.type==="list_item"&&D){const K=E(ne(O));K&&D.abilities.push(K)}}),(R=D==null?void 0:D.abilities)!=null&&R.length&&D!==null&&Z.push(D);const z={name:$e,description:tt,stats:Ue,actions:Z,sourceRowCount:0},L=ce.map(O=>O.id).filter(Boolean),F=ce[0].id,J=L.filter(O=>O!==F);g.push(a.jsxs("div",{className:"relative","data-highlight-container":"true",children:[J.map(O=>a.jsx("div",{id:O,className:"absolute -top-20"},O)),a.jsx(Xc,{npc:z,id:F})]},`npc-${fe}`))}catch(ue){console.error("Failed to parse NPC block, rendering as default.",ue,ce),ce.forEach((re,le)=>{const Ne=h(re,fe+le);Ne&&g.push(Ne)})}continue}}if(Te){const fe=[],ce=k;let ue="ability";for((S==="item"||so(C))&&(ue="item");k<e.length;){const re=e[k],le=qs(re),Ne=so(re),et=S!==null&&re.type==="table"&&re.rows&&re.rows.length>0&&!ir(re)&&!gr(re)&&!Ln(re)&&!Dn(re)&&!Un(re)&&!io(re)&&!qi(re)&&!Qo(re)&&!zi(re)&&!Ji(re)&&!Oi(re)&&!Wi(re);if(!le&&!Ne&&!et)break;if(!re.rows){k++;continue}let $e=ue;Ne?$e="item":le&&($e="ability");const tt=y(re.rows||[],$e);tt&&fe.push({...tt,id:re.id}),k++}fe.length>0&&g.push(a.jsx(zC,{items:fe,type:ue},`example-section-${ce}`));continue}if(io(C)){k++;continue}else if(qi(C)){C.rows&&g.push(a.jsx(Qc,{id:C.id,rows:C.rows},`faq-${k}`)),k++;continue}else if(Qo(C)){const fe=[],ce=[],ue=k,re=e[k].id;for(;k<e.length&&Qo(e[k]);){const le=e[k];le.rows&&le.rows.length>0&&(fe.push(le.rows[0]),ce.push(le.id||"")),k++}if(fe.length>0){const le=[["","",""],...fe];g.push(a.jsx(Qc,{id:re,rows:le,itemIds:ce},`faq-group-${ue}`))}continue}else if(C.type==="list_item"){const fe=[];for(;k<e.length&&e[k].type==="list_item";)fe.push(e[k]),k++;g.push(a.jsx("ul",{className:"list-disc pl-6 space-y-1 mb-4 text-slate-700 dark:text-slate-300 marker:text-cyan-600 dark:marker:text-cyan-500",children:fe.map((ce,ue)=>{const re=i(ce),le=u(ce);return a.jsx("li",{id:ce.id,className:`pl-1 ${re} scroll-mt-24`,style:le,children:p(ce)},ue)})},`ul-${k-1}`));continue}const Ce=h(C,k);Ce&&g.push(Ce),k++}return g})(),v=Array.from(s).sort((g,T)=>parseInt(g)-parseInt(T));return a.jsxs(a.Fragment,{children:[x,v.length>0&&n&&a.jsxs("div",{className:"mt-12 pt-6 border-t border-slate-300 dark:border-slate-600",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 mb-4 uppercase tracking-wider",children:""}),a.jsx("ol",{className:"space-y-3",children:v.map(g=>a.jsxs("li",{id:`footnote-body-${g}`,className:"text-sm text-slate-600 dark:text-slate-400 flex gap-2 rounded p-1 -ml-1 scroll-mt-24",children:[a.jsxs("button",{onClick:T=>f(T,`footnote-ref-${g}`),className:"font-bold text-cyan-600 dark:text-cyan-500 select-none hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors","aria-label":` ${g} `,children:["[",g,"]"]}),a.jsx("div",{className:"flex-1 whitespace-pre-wrap",children:n[g]})]},g))})]})]})},Zc={elements:[{type:"heading_1",text:" "},{type:"paragraph",text:"      TRPG   ,        ."},{type:"heading_2",text:" "},{type:"paragraph",text:"       ."},{type:"paragraph",text:"        ."},{type:"quote",text:"    ,     "},{type:"paragraph",text:"           ,         ."},{type:"paragraph",text:" ,                    .            ."},{type:"paragraph",text:"   . !"},{type:"paragraph",text:` KingCrab
 ,LAG
Q&A ,`},{type:"heading_1",text:"  "},{type:"paragraph",text:"     ,         .         TRPG      ."},{type:"heading_2",text:" "},{type:"paragraph",text:"   , ,         .        ,      ,      .    ."},{type:"table",rows:[["","",""],[" ","",""],[" "," ",""],[""," ",""],[""," ",""],[""," ",""]]},{type:"table",rows:[[""],["  "],[""],[""]]},{type:"heading_3",text:""},{type:"paragraph",text:"       .     ,       .           ."},{type:"heading_3",text:""},{type:"paragraph",text:"   5 . ,  ,  ,  , ."},{type:"heading_4",text:""},{type:"paragraph",text:"   , ,    .  2      ,      .     ."},{type:"heading_4",text:" "},{type:"paragraph",text:"            .   , , , ,                     . (   .       .              )"},{type:"paragraph",text:"          [#],       1   ,      0 [#]."},{type:"heading_4",text:"  "},{type:"paragraph",text:"      .        ."},{type:"table",rows:[["[skill] ","","",""," "],["  ","","","",""],["","","","",""],["","",""," "," "],[" "," "," ","",""],[""," ","","",""],["",""," "," ",""]]},{type:"heading_4",text:" "},{type:"paragraph",text:"            , ,   ."},{type:"list_item",text:"   ,        ."},{type:"list_item",text:"        ."},{type:"list_item",text:"          ."},{type:"paragraph",text:"                        ,        .        ."},{type:"heading_4",text:" "},{type:"paragraph",text:"         (  )  ,        .  ,   4 '' ,             ,    ,         ."},{type:"paragraph",text:"      ,      ,               ."},{type:"heading_4",text:" "},{type:"paragraph",text:"       .[#]         ."},{type:"heading_3",text:""},{type:"paragraph",text:"     .   , ,   ."},{type:"list_item",text:"       "},{type:"list_item",text:"          ,                ."},{type:"list_item",text:"        ."},{type:"paragraph",text:"              . ,         ."},{type:"heading_3",text:""},{type:"paragraph",text:"   [#] [#]          .       ."},{type:"heading_2",text:" "},{type:"paragraph",text:"  ,  ,       ."},{type:"paragraph",text:"   2 6            [#],             .           ."},{type:"table",rows:[[" "," "," "," "," ","  "],["4 ","8 ","12 ","18 ","32 ","64 "]]},{type:"paragraph",text:"      ,  2     .            ."},{type:"list_item",text:`       
        .         `},{type:"list_item",text:`    
      .`},{type:"list_item",text:`     
            .        ,  2   .`},{type:"paragraph",text:"              .  +/- ."},{type:"heading_3",text:" "},{type:"paragraph",text:"                 .          ,         ."},{type:"heading_3",text:" "},{type:"paragraph",text:"             ,                 ."},{type:"paragraph",text:"       [#]              ,              ,        ."},{type:"heading_3",text:" "},{type:"paragraph",text:"    (:   ,  ,   )        ,        .          (  )    ."},{type:"paragraph",text:"             .           ,     .                    ,           ."},{type:"heading_2",text:" ,  "},{type:"paragraph",text:"       .    ,    1 ,        ."},{type:"paragraph",text:"                .    ,  1               .        ."},{type:"paragraph",text:"   NPC    [#],  NPC  ,     .     .            [#],        ."},{type:"heading_2",text:"    "},{type:"paragraph",text:"           ,     .       ."},{type:"list_item",text:"         ,         ."},{type:"list_item",text:"    ,  ,         ."},{type:"paragraph",text:"      10     ,             ,          "},{type:"heading_3",text:" ,  "},{type:"paragraph",text:"       .    ?"},{type:"quote",text:"      .       .         ."},{type:"paragraph",text:"            . (: A  30, B 45, C 15 , C, A, B   .)            .              ,           ."},{type:"list_item",runs:[{text:" :",isBold:!0,isItalic:!1,isUnderline:!1},{text:"    ,              .         ,     .",isBold:!1,isItalic:!1,isUnderline:!1}]},{type:"list_item",runs:[{text:" :",isBold:!0,isItalic:!1,isUnderline:!1},{text:"               .       ,         .",isBold:!1,isItalic:!1,isUnderline:!1}]},{type:"paragraph",text:"         [#]        .           ."},{type:"heading_3",text:"  "},{type:"paragraph",text:"      ,       ,         .  ,  2    ,          ."},{type:"heading_3",text:" ,   "},{type:"paragraph",text:"           .        ,           [#]."},{type:"table",rows:[["","",""],[" ,    / ,    .","  ,        ","  ,             ."],[" ,   ( ),   ( )"," ,   ,  "," ,  "]]},{type:"paragraph",text:"                 ."},{type:"heading_3",text:"  "},{type:"paragraph",text:"    .          ,          .       ,     . ,            . ,                ."},{type:"paragraph",text:"         .       ."}]},ef="https://script.google.com/macros/s/AKfycbzOtoczmXQAMBFESt2Tp33JWfR45D2_-VGA11BROUWVdUX0Z4Au7M3qZ-eDJ5lKdgnB/exec",tf="https://script.google.com/macros/s/AKfycby_XDKGTcB-NLSgxQpdCmHi8WrrL4IEyFRXf9SHSFAsHXJAijhFRLO4gd0QCc0RNuOWIw/exec",nf="https://script.google.com/macros/s/AKfycbwyg-Iut_KAr-w7BrcywoDCsZOLUG3gNG_XPFsGBlLEi1UxCpHlzn_2eSlwwYRj7_U4bw/exec",rf="https://docs.google.com/spreadsheets/d/e/2PACX-1vQJJvnRQkDH7T4pffBgBdPDPstjI3NceX93zvvqljQKnaKUUCSxasyyjvKZWu3NKxjRxlKvWgufbswy/pub?output=csv",rt=e=>e?typeof e=="string"?e:e.runs?e.runs.map(t=>t.text||"").join(""):e.text||"":"",en=e=>{var y,w,E,b;if(!e||e.length===0)return{pages:[],footnotes:{}};const t={},n=[];let r=null;for(const x of e)if(x.type==="footnote_marker"){const v=(y=x.text)==null?void 0:y.match(/\d+/);v&&(r=v[0])}else x.type==="footnote_content"&&r?(t[r]=((b=((E=(w=x.runs)==null?void 0:w[0])==null?void 0:E.text)||x.text)==null?void 0:b.trim())||"",r=null):n.push(x);let o=1;const s=x=>{if(x.type==="table"&&x.rows){const g=x.rows.map(T=>T.map(N=>{if(typeof N=="object"&&N!==null)return s(N);if(typeof N=="string"&&N.includes("[#]")){let S=N;for(;S.includes("[#]");)S=S.replace("[#]",`[${o++}]`);return S}return N}));return{...x,rows:g}}if(x.runs&&x.runs.some(g=>g.text&&g.text.includes("[#]"))){const g=[];return x.runs.forEach(T=>{T.text&&T.text.includes("[#]")?T.text.split(/(\[#\])/g).forEach(S=>{S==="[#]"?g.push({...T,text:`[${o++}]`}):S&&g.push({...T,text:S})}):g.push(T)}),{...x,runs:g,text:void 0}}const v=x.text||(x.runs?x.runs.map(g=>g.text||"").join(""):"");if(v&&v.includes("[#]")){let g=v;for(;g.includes("[#]");)g=g.replace("[#]",`[${o++}]`);return{...x,text:g,runs:void 0}}return x},i=n.map(s),u=[];let f=[];const c=x=>x.type==="heading_1"||x.type==="title";for(const x of i)c(x)&&f.length>0&&(u.push(f),f=[]),f.push(x);f.length>0&&u.push(f);const p=x=>x.replace(/^[\uFFFD]/u,"").replace(/\uFFFD/g,"").trim(),m=x=>x.runs&&x.runs.length>0?x.runs.map(v=>v.text).join(""):x.text||"";return{pages:u.map((x,v)=>{const g=x.find(c)||{text:"",type:"heading_1"},T=p(m(g)),N=`page-${v}-${T.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"")}`;x.forEach((R,C)=>{if(!R.id){const P=m(R).slice(0,20).replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"");R.id=`${N}-el-${C}-${P}`}if(R.type==="title"||R.type.startsWith("heading_")){const $=p(m(R)).toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"");R.id=`${N}-section-${C}-${$}`}});const S=[];let k=!1;const A=x.some(R=>{const C=m(R);return R.type==="heading_2"&&C.includes(" ")});for(const R of x){const C=m(R);if(!C)continue;if(g.type==="title"?R.type.startsWith("heading_"):R.type.startsWith("heading_")&&R.type!=="heading_1"){if(A){if(R.type==="heading_2"&&(k=!1),C.includes(" "))continue;if(C.includes("")){k=!0;continue}}if(!k){const $=R.type.split("_"),j=$.length>1?parseInt($[1],10):1;S.push({id:R.id,title:p(C),level:j})}}}return{id:N,title:T,content:x,subsections:S}}).filter(x=>{const v=x.title.includes(""),g=x.content.length<=1;return!(v&&g)}),footnotes:t}},Xo=e=>{const t=[],n=[];e.forEach(s=>{const i=s.title.includes("");s.content.forEach(u=>{var f,c,p,m;if(u.type==="table"&&u.rows){const h=u.rows.flat().map(E=>rt(E)).join(" "),y=h.includes("")&&h.includes(""),w=h.includes("")&&h.includes("")&&!h.includes("");if(y)try{let E="",b="",x="-",v="-";const T=rt(((f=u.rows[0])==null?void 0:f[0])||"").split(/\n+/);E=T[0].trim(),T.length>1?b=T.slice(1).join(" ").trim():u.rows.length>1&&!u.rows[1].some(N=>rt(N).includes(""))&&(b=rt(((c=u.rows[1])==null?void 0:c[0])||"").trim()),u.rows.forEach((N,S)=>{N.forEach((k,A)=>{var C,P,$,j,I,V,B,q;const R=rt(k);if(R.includes("")&&u.rows){const M=((P=(C=u.rows)==null?void 0:C[S])==null?void 0:P[A+1])||((j=($=u.rows)==null?void 0:$[S+1])==null?void 0:j[A]);M&&(x=rt(M).trim())}if(R.includes("")&&u.rows){const M=((V=(I=u.rows)==null?void 0:I[S])==null?void 0:V[A+1])||((q=(B=u.rows)==null?void 0:B[S+1])==null?void 0:q[A]);M&&(v=rt(M).trim())}})}),E&&!E.includes("[")&&!E.includes(" ")&&t.push({name:E,description:b,condition:x,charge:v,isCreation:i})}catch{}else if(w)try{let E="",b="",x="-",v=0;if(u.rows){const T=rt(((p=u.rows[0])==null?void 0:p[0])||"").split(/\n+/);E=T[0].trim(),T.length>1?b=T.slice(1).join(" ").trim():u.rows.length>1&&!u.rows[1].some(N=>rt(N).includes(""))&&(b=rt(((m=u.rows[1])==null?void 0:m[0])||"").trim()),u.rows.forEach((N,S)=>{N.forEach((k,A)=>{var C,P,$,j,I,V,B,q;const R=rt(k);if(R.includes("")){const M=((P=(C=u.rows)==null?void 0:C[S])==null?void 0:P[A+1])||((j=($=u.rows)==null?void 0:$[S+1])==null?void 0:j[A]);M&&(x=rt(M).trim())}if(R.includes("")){const M=((V=(I=u.rows)==null?void 0:I[S])==null?void 0:V[A+1])||((q=(B=u.rows)==null?void 0:B[S+1])==null?void 0:q[A]);if(M){const U=rt(M).trim(),G=parseInt(U,10);isNaN(G)||(v=G)}}})}),E&&!E.includes("[")&&!E.includes("")&&n.push({name:E,description:b,durability:x,volume:v,isCreation:i})}}catch{}}})});const r=Array.from(new Map(t.map(s=>[s.name,s])).values()),o=Array.from(new Map(n.map(s=>[s.name,s])).values());return{abilities:r,items:o}},OC=(e,t)=>{const n=`w-5 h-5 flex-shrink-0 transition-colors ${t?"text-cyan-600 dark:text-white":"text-slate-400 group-hover:text-cyan-600 dark:group-hover:text-cyan-300"}`;return e.includes("")?a.jsx(mi,{className:n}):e.includes(" ")||e.includes("")?a.jsx(To,{className:n}):e.includes("")||e.includes("")?a.jsx(Rr,{className:n}):e.includes("")?a.jsx(hi,{className:n}):e.includes("")?a.jsx(Sn,{className:n}):e.includes("")||e.includes("")?a.jsx(Pe,{className:n}):e.includes("")||e.includes("")?a.jsx(Mr,{className:n}):e.includes("")||e.includes("")?a.jsx(Y0,{className:n}):e.includes("")?a.jsx(Hs,{className:n}):e.toLowerCase().includes("faq")||e.includes("")||e.includes("")||e.includes("q&a")?a.jsx(wC,{className:n}):e.includes("")||e.includes("")?a.jsx(Pe,{className:n}):a.jsx(To,{className:n})},WC=({onUpdate:e,refreshTrigger:t,setDeployVersion:n,setAddonDeployVersion:r,setSecondDeployVersion:o,forceOffline:s,onDataLoaded:i,onPagesLoaded:u,navigateToCreator:f})=>{const[c,p]=_.useState([]),[m,h]=_.useState({}),[y,w]=_.useState(!0),[E,b]=_.useState(null),[x,v]=_.useState(!0),[g,T]=_.useState(!1),[N,S]=_.useState([]),[k,A]=_.useState(""),[R,C]=_.useState(!1),[P,$]=_.useState(0),[j,I]=_.useState(new Set([0])),[V,B]=_.useState(""),[q,M]=_.useState(0),U=_.useRef(0),G=_.useRef(null),se=_.useRef(!1),te=1500,[ie,oe]=_.useState(null),[Te,Ce]=_.useState(null),fe=_.useCallback((L,F)=>{Ce({content:L,rect:F})},[]),ce=_.useCallback(()=>{Ce(null)},[]);_.useEffect(()=>{try{const L=ef.split("/"),F=L[L.length-2];if(n(F),r){const J=tf.split("/"),O=J[J.length-2];r(O)}if(o){const J=nf.split("/"),O=J[J.length-2];o(O)}}catch(L){console.error("Could not parse deployment version",L),n("N/A")}},[n,r,o]),_.useEffect(()=>{c.length>0&&P>=c.length&&$(0)},[c.length,P]),_.useEffect(()=>{if(!y)return;const L=[":    .",":     ?  .",":    .",":     .",":      ."],F=Q=>{const Y=new DOMParser().parseFromString(Q,"text/html").querySelectorAll("table"),ae=[];return Y.forEach(de=>{const me=de.querySelectorAll("tr");for(let Se=1;Se<me.length;Se++)me[Se].querySelectorAll("td").forEach(At=>{var En;const Ft=(En=At.textContent)==null?void 0:En.trim();Ft&&Ft.length>0&&ae.push(Ft)})}),ae},J=Q=>{const K=Q.split(/\r?\n/),ee=[];for(let Y=1;Y<K.length;Y++){const ae=K[Y];if(!ae.trim())continue;let de="",me=!1;for(let Se=0;Se<ae.length;Se++){const nt=ae[Se];nt==='"'?me&&ae[Se+1]==='"'?(de+='"',Se++):me=!me:nt===","&&!me?(de.trim()&&ee.push(de.trim()),de=""):de+=nt}de.trim()&&ee.push(de.trim())}return ee};(async()=>{try{const Q=await fetch(rf);if(!Q.ok)throw new Error("Fetch failed");const K=await Q.text();let ee=[];if(rf.includes("pubhtml")?ee=F(K):ee=J(K),ee.length>0){const Y=Array.from(new Set(ee));S(Y),A(Y[Math.floor(Math.random()*Y.length)])}else S(L),A(L[0])}catch(Q){console.warn("Loading messages fetch failed, using default.",Q),S(L),A(L[0])}})()},[y]),_.useEffect(()=>{if(!y||N.length<=1)return;const L=setInterval(()=>{C(!0),setTimeout(()=>{A(F=>{let J=N[Math.floor(Math.random()*N.length)];if(N.length>1&&J===F){const O=Math.floor(Math.random()*N.length);J=N[O]}return J}),C(!1)},500)},4e3);return()=>clearInterval(L)},[y,N]),_.useEffect(()=>{const L=document.querySelector("main");L&&(ie||window.scrollTo({top:L.offsetTop-80,behavior:"auto"}),se.current=!1),U.current=0,M(0)},[P]),_.useEffect(()=>{I(L=>{const F=new Set(L);return F.has(P)||F.add(P),F})},[P]);const ue=_.useCallback(L=>{const F=document.getElementById(L),J=80;if(F){let O=F;const Q=F.closest('[data-highlight-container="true"]');if(Q instanceof HTMLElement)O=Q;else if(F.offsetHeight===0){const me=F.nextElementSibling;me instanceof HTMLElement&&(O=me)}const K=O.getBoundingClientRect(),ee=K.top+window.scrollY,Y=window.innerHeight;let ae=ee-Y/2+K.height/2;const de=ee-J-20;(K.height>Y-J||ae>de)&&(ae=de),window.scrollTo({top:ae,behavior:"smooth"}),O.classList.contains("cursor-pointer")?O.click():(O.classList.remove("highlight-animate"),O.offsetWidth,O.classList.add("highlight-animate"),setTimeout(()=>O.classList.remove("highlight-animate"),3e3))}},[]);_.useEffect(()=>{const L=F=>{const J=F.detail.title.toLowerCase().trim();let O=-1,Q="";for(let K=0;K<c.length;K++){const ee=c[K];if(ee.title.toLowerCase().includes(J)){O=K,Q="";break}for(const Y of ee.subsections)if(Y.title.toLowerCase().includes(J)){O=K,Q=Y.id;break}if(O!==-1)break;if(O===-1)for(const Y of ee.content){const ae=Y.text||(Y.runs?Y.runs.map(de=>de.text).join(""):"");if(Y.type.startsWith("heading")&&ae.toLowerCase().includes(J)){O=K,Q=Y.id||"";break}if(Y.type==="table"&&Y.rows&&Y.rows.length>0&&rt(Y.rows[0][0]).toLowerCase().includes(J)){O=K,Q=Y.id||"";break}}if(O!==-1)break}O!==-1?P===O?Q?ue(Q):window.scrollTo({top:0,behavior:"smooth"}):($(O),oe(Q)):console.warn(`Cannot find section: ${J}`)};return window.addEventListener("rulebook-navigate",L),()=>window.removeEventListener("rulebook-navigate",L)},[c,P,ue]),_.useEffect(()=>{if(ie){const L=setTimeout(()=>{ue(ie),oe(null)},600);return()=>clearTimeout(L)}},[P,ie,ue]);const re=(L,F,J)=>{L.preventDefault(),P!==F?(oe(J),$(F)):ue(J)},le=(L,F)=>{L.stopPropagation(),I(J=>{const O=new Set(J);return O.has(F)?O.delete(F):O.add(F),O})},Ne=_.useCallback(async()=>{let L=!1;if(b(null),s){console.log("   .   .");const{pages:K,footnotes:ee}=en(Zc.elements);if(p(K),h(ee),i){const{abilities:Y,items:ae}=Xo(K);i(Y,ae)}u&&u(K),e("fallback"),w(!1);return}const F=localStorage.getItem("cachedRulebookData"),J=localStorage.getItem("cachedAddonData"),O=localStorage.getItem("cachedSecondData"),Q=K=>K&&K!=="undefined"&&K!=="null";if(Q(F)&&Q(J)&&Q(O))try{const K=JSON.parse(F),ee=JSON.parse(J),Y=JSON.parse(O),{pages:ae,footnotes:de}=en(K),{pages:me,footnotes:Se}=en(ee),{pages:nt,footnotes:At}=en(Y);nt.forEach(Tn=>{Tn.title.includes("")||(Tn.title=`[] ${Tn.title}`)});const Ft=[...ae,...me,...nt],En={...de,...Se,...At};if(p(Ft),h(En),i){const{abilities:Tn,items:Pr}=Xo(Ft);i(Tn,Pr)}u&&u(Ft),L=!0}catch(K){console.error("   ",K),localStorage.removeItem("cachedRulebookData"),localStorage.removeItem("cachedAddonData"),localStorage.removeItem("cachedSecondData")}try{const[K,ee,Y]=await Promise.all([fetch(ef),fetch(tf),fetch(nf)]);if(!K.ok)throw new Error(`  : ${K.statusText}`);if(!ee.ok)throw new Error(`  : ${ee.statusText}`);if(!Y.ok)throw new Error(`  : ${Y.statusText}`);const ae=await K.json(),de=await ee.json(),me=await Y.json();if(ae.error)throw new Error(`  : ${ae.error}`);if(de.error)throw new Error(`  : ${de.error}`);if(me.error)throw new Error(`  : ${me.error}`);const{pages:Se,footnotes:nt}=en(ae.elements),{pages:At,footnotes:Ft}=en(de.elements),{pages:En,footnotes:Tn}=en(me.elements);if(Se.length<2)throw new Error(" . (  )");En.forEach(Lr=>{Lr.title.includes("")||(Lr.title=`[] ${Lr.title}`)});const Pr=[...Se,...At,...En],lh={...nt,...Ft,...Tn};if(p(Pr),h(lh),i){const{abilities:Lr,items:ah}=Xo(Pr);i(Lr,ah)}u&&u(Pr),ae!=null&&ae.elements&&localStorage.setItem("cachedRulebookData",JSON.stringify(ae.elements)),de!=null&&de.elements&&localStorage.setItem("cachedAddonData",JSON.stringify(de.elements)),me!=null&&me.elements&&localStorage.setItem("cachedSecondData",JSON.stringify(me.elements)),e("success")}catch(K){if(console.warn("   .     .",K),b(K instanceof Error?K.message:String(K)),!L){const{pages:ee,footnotes:Y}=en(Zc.elements);if(p(ee),h(Y),i){const{abilities:ae,items:de}=Xo(ee);i(ae,de)}u&&u(ee)}e("fallback",K)}finally{w(!1)}},[e,s,i,u]);_.useEffect(()=>{w(!0),Ne()},[t,Ne]);const et=_.useCallback(()=>{$(L=>Math.max(0,L-1))},[]),$e=_.useCallback(()=>{$(L=>Math.min(c.length-1,L+1))},[c.length]);_.useEffect(()=>{let L=0;const F=()=>{G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{M(0),U.current=0},5e3)},J=Y=>{F();const ae=window.innerHeight+window.scrollY,de=document.documentElement.offsetHeight,me=Math.abs(de-ae)<20,Se=P<c.length-1;me&&Se&&Y.deltaY>0?(U.current=Math.min(U.current+Y.deltaY,te),M(U.current/te*100),U.current>=te&&(se.current=!0,$e(),U.current=0,M(0),G.current&&clearTimeout(G.current))):U.current>0&&(U.current=0,M(0))},O=()=>{if(U.current>0){const Y=window.innerHeight+window.scrollY,ae=document.documentElement.offsetHeight;Math.abs(ae-Y)<20||(U.current=0,M(0))}},Q=Y=>{L=Y.touches[0].clientY,F()},K=Y=>{F();const ae=window.innerHeight+window.scrollY,de=document.documentElement.offsetHeight,me=Math.abs(de-ae)<20,Se=P<c.length-1,nt=Y.touches[0].clientY,At=L-nt;me&&Se&&At>0?(U.current=Math.min(U.current+At*2,te),M(U.current/te*100),U.current>=te&&(se.current=!0,$e(),U.current=0,M(0),G.current&&clearTimeout(G.current)),L=nt):U.current>0&&(U.current=0,M(0))},ee=()=>{if(U.current<te&&U.current>0){const Y=setInterval(()=>{U.current<=0?(clearInterval(Y),M(0)):(U.current-=50,M(Math.max(0,U.current/te*100)))},16)}};return window.addEventListener("wheel",J),window.addEventListener("scroll",O),window.addEventListener("touchstart",Q),window.addEventListener("touchmove",K),window.addEventListener("touchend",ee),()=>{window.removeEventListener("wheel",J),window.removeEventListener("scroll",O),window.removeEventListener("touchstart",Q),window.removeEventListener("touchmove",K),window.removeEventListener("touchend",ee),G.current&&clearTimeout(G.current)}},[c.length,P,$e]);const tt=L=>L.runs?L.runs.map(F=>F.text).join(""):L.text||"",Ue=_.useMemo(()=>{if(!V.trim())return[];const L=V.toLowerCase(),F=[];return c.forEach((J,O)=>{J.content.forEach(Q=>{if(Q.type==="table"&&Q.rows)Q.rows.forEach((K,ee)=>{K.forEach(Y=>{let ae="";typeof Y=="string"?ae=Y:Y&&typeof Y=="object"&&(ae=tt(Y)),ae.toLowerCase().includes(L)&&F.push({pageIndex:O,elementId:Q.id,text:ae,type:" "})})});else{const K=tt(Q);K.toLowerCase().includes(L)&&F.push({pageIndex:O,elementId:Q.id,text:K,type:Q.type.includes("heading")?"":""})}})}),F},[V,c]),Z=(L,F)=>{P===L?F&&ue(F):($(L),F&&oe(F))},D=(L,F)=>{const J=j.has(F),O=L.subsections.length>0;return a.jsxs("li",{children:[a.jsxs("div",{className:`group flex items-center w-full rounded-md transition-all duration-200 mb-1 ${F===P?"bg-cyan-600 text-white shadow-md dark:shadow-none":"hover:bg-slate-100 text-slate-600 hover:text-slate-900 dark:hover:bg-slate-700 dark:text-slate-300 dark:hover:text-white"}`,children:[a.jsxs("button",{onClick:Q=>{P===F?le(Q,F):$(F)},className:"flex-grow text-left font-semibold p-2 pl-3 focus:outline-none flex items-center gap-3",children:[OC(L.title,F===P),a.jsx("span",{className:"truncate",children:L.title})]}),O&&a.jsx("button",{onClick:Q=>le(Q,F),className:"p-2 px-3 focus:outline-none","aria-label":J?" ":" ",children:a.jsx($t,{className:`w-4 h-4 transition-transform duration-200 ${J?"rotate-90":""}`})})]}),O&&a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${J?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"pl-3 border-l-2 border-slate-300 dark:border-slate-600 space-y-1 ml-1 mb-2",children:L.subsections.map(Q=>{let K="text-slate-500 font-medium dark:text-slate-400",ee="text-sm";return Q.level===3?K="pl-6 text-slate-400 font-normal dark:text-slate-500":Q.level>=4&&(K="pl-10 text-slate-400 font-normal dark:text-slate-500",ee="text-xs"),a.jsx("li",{children:a.jsx("a",{href:`#${Q.id}`,onClick:Y=>re(Y,F,Q.id),className:`block ${ee} py-1 px-2 rounded transition-colors truncate ${K} hover:text-cyan-600 dark:hover:text-cyan-300 hover:bg-slate-100 dark:hover:bg-slate-700/50`,title:Q.title,children:Q.title})},Q.id)})})})})]},L.id)};if(y)return a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg animate-pulse mb-1",children:"  ..."}),k&&a.jsx("p",{className:`text-slate-500 dark:text-slate-500 text-sm max-w-md text-center px-4 transition-opacity duration-500 ${R?"opacity-0":"opacity-100"}`,children:k})]})});const z=c[P];return a.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative",children:[a.jsxs("aside",{className:"md:w-1/4 lg:w-1/5 md:sticky md:top-24 self-start max-h-[calc(100vh-8rem)] overflow-y-auto p-2 custom-scrollbar flex flex-col gap-4",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Kt,{className:"h-4 w-4 text-slate-400 dark:text-slate-500"})}),a.jsx("input",{type:"text",className:"bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 text-slate-800 dark:text-slate-300 text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 block w-full pl-9 p-2.5 placeholder-slate-400 dark:placeholder-slate-500 transition-colors",placeholder:" ...",value:V,onChange:L=>B(L.target.value)}),V&&a.jsx("button",{onClick:()=>B(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"h-4 w-4"})})]}),V?a.jsx("nav",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-1 overflow-y-auto transition-colors",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"font-bold text-sm mb-3 text-cyan-600 dark:text-cyan-400 border-b border-slate-200 dark:border-slate-600 pb-2",children:["  (",Ue.length,")"]}),Ue.length>0?a.jsx("ul",{className:"space-y-3",children:Ue.map((L,F)=>{var J;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>Z(L.pageIndex,L.elementId),className:"text-left w-full group",children:[a.jsxs("div",{className:"text-xs text-cyan-600 dark:text-cyan-500 font-semibold mb-0.5",children:[L.type,"  ",(J=c[L.pageIndex])==null?void 0:J.title]}),a.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 group-hover:text-black dark:group-hover:text-white line-clamp-2 leading-snug",children:L.text})]})},F)})}):a.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"  ."})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-shrink-0 overflow-hidden transition-colors",children:[a.jsxs("button",{onClick:()=>v(!x),className:"w-full flex items-center justify-between p-4 focus:outline-none hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:""}),a.jsx($t,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${x?"rotate-90":""}`})]}),a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${x?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"space-y-2 p-4 pt-0 border-t border-slate-200 dark:border-slate-700/50 mt-2",children:c.map((L,F)=>L.title.includes("")?null:D(L,F))})})})]}),a.jsxs("nav",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-shrink-0 overflow-hidden transition-colors",children:[a.jsxs("button",{onClick:()=>T(!g),className:"w-full flex items-center justify-between p-4 focus:outline-none hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:""})," "]}),a.jsx($t,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${g?"rotate-90":""}`})]}),a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${g?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"space-y-2 p-4 pt-0 border-t border-slate-200 dark:border-slate-700/50 mt-2",children:c.map((L,F)=>L.title.includes("")?D(L,F):null)})})})]})]})]}),a.jsxs("article",{className:"md:w-3/4 lg:w-4/5 bg-white dark:bg-slate-800 p-6 sm:p-10 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 min-h-[500px] relative transition-colors",children:[z?a.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none animate-slide-in-bottom",children:a.jsx(JC,{elements:z.content,pageTitle:z.title,footnotes:m,onShowFootnote:fe,onHideFootnote:ce})},z.id):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center p-8 animate-fade-in-fast",children:[a.jsx("div",{className:"w-32 h-32 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-6 shadow-[0_0_20px_rgba(239,68,68,0.2)]",children:a.jsx(je,{className:"w-16 h-16 text-red-500 dark:text-red-400"})}),a.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-3",children:" "}),a.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mb-10",children:"   ."}),a.jsxs("div",{className:"w-full max-w-lg bg-slate-100 dark:bg-slate-900/80 rounded-xl p-5 border border-slate-200 dark:border-slate-700 text-left shadow-inner",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),a.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),a.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs font-mono text-slate-400 ml-auto",children:"ERROR_LOG"})]}),a.jsxs("div",{className:"font-mono text-xs sm:text-sm space-y-1",children:[a.jsxs("div",{className:"text-slate-500",children:["CODE: ",a.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-bold",children:E?"LOAD_FAILURE":"NO_CONTENT"})]}),a.jsxs("div",{className:"text-red-600 dark:text-red-400 break-all leading-relaxed",children:["Message: ",E||"      ."]})]})]})]}),q>0&&P<c.length-1&&a.jsxs("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center gap-2 pointer-events-none",children:[a.jsx("div",{className:"bg-slate-800/95 dark:bg-slate-800/95 backdrop-blur-sm border border-slate-600 px-4 py-2 rounded-full shadow-xl",children:a.jsxs("span",{className:"text-cyan-400 text-sm font-bold flex items-center gap-2",children:[a.jsx($t,{className:"w-4 h-4 rotate-90"}),"   "]})}),a.jsx("div",{className:"w-48 h-1.5 bg-slate-700 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-cyan-400 transition-all duration-75 ease-out shadow-[0_0_10px_rgba(34,211,238,0.5)]",style:{width:`${Math.min(q,100)}%`}})})]}),Te&&a.jsxs("div",{className:"fixed z-[100] bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm p-3 rounded-lg shadow-xl border border-slate-300 dark:border-slate-600 max-w-sm pointer-events-none animate-fade-in",style:{left:`${Math.min(window.innerWidth-320,Math.max(10,Te.rect.left-150))}px`,top:`${Te.rect.top-10}px`,transform:"translateY(-100%)"},children:[a.jsx("div",{className:"font-semibold text-cyan-600 dark:text-cyan-400 mb-1 border-b border-slate-200 dark:border-slate-700 pb-1",children:""}),a.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:Te.content}),a.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-slate-900 border-b border-r border-slate-300 dark:border-slate-600 rotate-45",style:{bottom:"-7px",left:`${Math.min(300,Math.max(20,Te.rect.left-Math.min(window.innerWidth-320,Math.max(10,Te.rect.left-150))))}px`}})]})]}),c.length>0&&a.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex items-center gap-3",children:[a.jsx("button",{onClick:et,disabled:P===0,className:`
                            flex items-center justify-center w-12 h-12 rounded-full shadow-lg border transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500
                            ${P===0?"opacity-0 pointer-events-none translate-x-8":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-500 translate-x-0"}
                        `,"aria-label":" ",title:P>0&&c[P-1]?`: ${c[P-1].title}`:" ",children:a.jsx(fi,{className:"w-6 h-6"})}),a.jsx("button",{onClick:$e,disabled:P>=c.length-1,className:`
                            flex items-center justify-center w-12 h-12 rounded-full shadow-lg border transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500
                            ${P>=c.length-1?"opacity-0 pointer-events-none translate-x-8":"bg-cyan-600 border-cyan-500 text-white hover:bg-cyan-500 hover:border-cyan-400 translate-x-0"}
                        `,"aria-label":" ",title:P<c.length-1&&c[P+1]?`: ${c[P+1].title}`:" ",children:a.jsx($t,{className:"w-6 h-6"})})]})]})},KC="modulepreload",YC=function(e){return"/Akasha-Simpli-TRPG-Helper/"+e},of={},sf=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=YC(s),s in of)return;of[s]=!0;const i=s.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(!!r)for(let p=o.length-1;p>=0;p--){const m=o[p];if(m.href===s&&(!i||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${u}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":KC,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((p,m)=>{c.addEventListener("load",p),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})},QC=[{name:" ",description:"1       ,     6  .",condition:"  ",charge:"4"},{name:" ",description:"    1   .",condition:"-",charge:"-"},{name:" ",description:"1              .            .",condition:"-",charge:"3"},{name:" ",description:"              2   .",condition:"-",charge:"1"},{name:"",description:"3    .              .",condition:"-",charge:"2"},{name:"",description:"1 ,  1        .          .     .",condition:"-",charge:"-"},{name:" ",description:"1      ,        .   ,  3  .",condition:"-",charge:"-"},{name:" ",description:"  ,     .",condition:"-",charge:"3"},{name:" ",description:"      20 ,    1 .",condition:"-",charge:"-"},{name:"",description:"1     2   .",condition:"-",charge:"2"},{name:"",description:"3   ,      ,    2  .      1 .",condition:"-",charge:"2"},{name:" ",description:"         .      ,     .",condition:"    4 ",charge:"-"},{name:" ",description:"1      ,       .",condition:"-",charge:"1"},{name:"",description:`1        .      0    .
    .`,condition:"-",charge:"2"},{name:" ",description:"    +1  .",condition:"   5",charge:"3"},{name:" ",description:"   5 .",condition:"-",charge:"-"},{name:" ",description:"   3       ,    6   2   .",condition:"-",charge:"3"},{name:" ",description:"     2 .     .",condition:"-",charge:"2"},{name:" ",description:" ,       .",condition:"-",charge:"3"},{name:" ",description:"2     .",condition:"-",charge:"3"},{name:" ",description:"3      6 ,     2  .",condition:"-",charge:"3"},{name:"",description:"4      12 ,    .   6    2  .",condition:"  ",charge:"1"},{name:" ",description:"4      9 .   7     3  .",condition:"  ",charge:"1"},{name:" ",description:"1      6 .       3  .",condition:"  ",charge:"1"},{name:" ",description:"  ,      4   .",condition:"    ",charge:"1"},{name:" ",description:"3   .         .",condition:"  ",charge:"2"},{name:" ",description:"1    .",condition:"-",charge:"1"},{name:" ",description:"3    . 2m  .  .",condition:"   ",charge:"3"},{name:"",description:"3     2 ,    .",condition:"   ",charge:"3"},{name:" ",description:"1      .  ,     3   .       .",condition:"  ",charge:"1"},{name:"",description:" 1     .     2       .",condition:"   ",charge:"3"},{name:" ",description:" 1       ,         3  .",condition:"   2   ",charge:"4"},{name:"",description:" 4       ,           3 .",condition:"   5   ",charge:"2"},{name:" ",description:"1           2 .     .",condition:"   ",charge:"1"},{name:" ",description:"3               .",condition:"   ",charge:"2"},{name:" ",description:"   5     .       .",condition:"  ",charge:"2"},{name:" ",description:"  ,    .      3(m)   ,      .",condition:"   ",charge:"2"},{name:"",description:"1      .   .    2m    .",condition:"   ",charge:"1"},{name:"",description:"  .",condition:"   ",charge:"2"},{name:" ",description:"  15     .       .",condition:"-",charge:"1"},{name:" ",description:"           .",condition:"-",charge:"2"},{name:" ",description:"1       .    ,           .",condition:"-",charge:"3"},{name:"  ",description:"    //        ,",condition:"   5 ",charge:"1"},{name:" ",description:"         .           .      .",condition:"    ",charge:"4"}],XC=[{name:"",description:"1   2  .",durability:"8",volume:1},{name:"",description:"1   6  .",durability:"18",volume:7},{name:"",description:"      4   3 .",durability:"-",volume:4},{name:"",description:"      6    3 .",durability:"-",volume:8},{name:" ",description:"  .    .",durability:"7",volume:3},{name:"",description:" 1   2  .           +1  .",durability:"1",volume:2},{name:"",description:" 3    2 .",durability:"5",volume:2},{name:" ",description:"    5 .",durability:"1",volume:1},{name:" ",description:"   .  10     1 .",durability:"-",volume:0},{name:" ",description:"     .       , +1  .",durability:"3",volume:1},{name:" ",description:"        .",durability:"6",volume:3},{name:"",description:"       .",durability:"8",volume:6},{name:"",description:"   .         .",durability:"16",volume:10},{name:"",description:"   . ( 1  , 1  )",durability:"10",volume:2},{name:" ",description:"       .  1        .",durability:"10",volume:8},{name:"  ",description:"  .       .       +1  .",durability:"4",volume:1},{name:"  ",description:"  .",durability:"1",volume:4},{name:" ",description:"    -2 .",durability:"-",volume:0},{name:" ",description:"   2 .    .",durability:"1",volume:2},{name:" ",description:" ,    3 .    .",durability:"1",volume:2},{name:" ",description:" ,             .",durability:"1",volume:2},{name:" ",description:" ,    .    .",durability:"1",volume:2},{name:"",description:"     .      .",durability:"1",volume:2},{name:" ",description:"    1 .",durability:"1",volume:1},{name:"",description:"    1  .           .      .",durability:"1",volume:2},{name:"  ",description:"    ,      5 ,       ,    .",durability:"1",volume:3},{name:" ",description:"     .  ,        1  4    (:  ) .",durability:"1",volume:3},{name:"",description:"    .     1 2  .           1   .",durability:"1",volume:2},{name:" ",description:"    .         .        .",durability:"3",volume:6}],lf={profile:{name:"",image:"",info:"",comment:"",appearance:"",backstory:"",bonds:"",memories:""},abilities:{luck:3,skills:[{name:"",score:1},{name:"",score:1},{name:"",score:1},{name:"",score:1},{name:"",score:1}],enhancements:[],status:"",growthPoints:0},inventory:{items:[],money:0}},Ki=["","","","",""],af=6,Yi=2,Qi=3,Nn=({title:e,children:t})=>a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 transition-colors",children:[a.jsx("h3",{className:"text-lg font-bold text-cyan-700 dark:text-cyan-400 border-b border-slate-200 dark:border-slate-600 pb-2 mb-3",children:e}),t]}),ZC=({skill:e})=>a.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-700/50 p-2 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:e.name}),a.jsx("span",{className:"font-bold text-cyan-600 dark:text-cyan-300 text-lg",children:e.score})]}),eS=({ability:e})=>a.jsxs("div",{className:"bg-white dark:bg-slate-700/50 p-3 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1 leading-snug",children:e.description}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 flex justify-between border-t border-slate-100 dark:border-slate-600/50 pt-2",children:[a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.condition]}),a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.charge]})]})]}),tS=({item:e})=>a.jsxs("div",{className:"bg-white dark:bg-slate-700/50 p-3 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1 leading-snug",children:e.description}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 flex justify-between border-t border-slate-100 dark:border-slate-600/50 pt-2",children:[a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.durability]}),a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.volume]})]})]}),nS=({character:e})=>{const t=e.inventory.items.reduce((p,m)=>p+m.volume,0),[n,r]=_.useState(0),[o,s]=_.useState(!1),{quote:i,basicInfo:u}=_.useMemo(()=>{const p=e.profile.comment,m=[];return e.profile.info&&m.push(e.profile.info),e.profile.appearance&&m.push(e.profile.appearance),{quote:p,basicInfo:m}},[e.profile.comment,e.profile.info,e.profile.appearance]),f=[{id:"fantasy",name:"",container:"relative inline-block my-3 max-w-xl px-6 py-2",text:"text-xl md:text-2xl font-serif italic text-transparent bg-clip-text bg-gradient-to-r from-cyan-700 via-slate-900 to-cyan-700 dark:from-cyan-200 dark:via-white dark:to-cyan-200 tracking-wide leading-relaxed drop-shadow-sm dark:drop-shadow-[0_0_10px_rgba(34,211,238,0.3)]",decoration:a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"absolute -top-3 -left-2 text-5xl text-slate-300 dark:text-slate-600/30 font-serif leading-none select-none",children:""}),a.jsx("span",{className:"absolute -bottom-5 -right-2 text-5xl text-slate-300 dark:text-slate-600/30 font-serif leading-none select-none",children:""})]})},{id:"modern",name:"",container:"relative inline-block my-3 max-w-xl bg-white dark:bg-slate-800/80 border-l-4 border-cyan-600 dark:border-cyan-500 rounded-r-lg px-5 py-3 shadow-md",text:"text-lg md:text-xl font-sans font-bold text-slate-800 dark:text-slate-100 leading-relaxed",decoration:null},{id:"terminal",name:"",container:"relative inline-block my-3 max-w-xl bg-slate-900 border border-green-500/50 rounded-sm px-4 py-3 shadow-[0_0_15px_rgba(34,197,94,0.15)]",text:"text-lg md:text-xl font-mono text-green-400 leading-relaxed",decoration:a.jsx("span",{className:"absolute -bottom-2 right-2 text-[10px] text-green-700/50 font-mono",children:"SYS.MSG.LOG_01"})},{id:"comic",name:"",container:"relative inline-block my-3 max-w-xl bg-white text-slate-900 rounded-2xl rounded-bl-none px-6 py-4 shadow-lg mx-2 border-2 border-slate-900 dark:border-none",text:"text-xl md:text-2xl font-bold font-sans leading-relaxed",decoration:a.jsx("div",{className:"absolute top-full left-[-2px] w-4 h-4 bg-white border-l-2 border-b-2 border-slate-900 dark:border-none clip-path-polygon-[0_0,100%_0,0_100%]"})}],c=f[n];return a.jsxs("div",{className:"bg-white dark:bg-slate-900/50 p-6 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 transition-colors",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8 border-b border-slate-200 dark:border-slate-700 pb-6",children:[a.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 shrink-0 rounded-full overflow-hidden bg-slate-100 dark:bg-slate-800 border-4 border-cyan-500/20 dark:border-cyan-500/30 shadow-xl flex items-center justify-center",children:e.profile.image?a.jsx("img",{src:e.profile.image,alt:e.profile.name,className:"w-full h-full object-cover"}):a.jsx(Rr,{className:"w-20 h-20 text-slate-400 dark:text-slate-600"})}),a.jsxs("div",{className:"text-center md:text-left flex-grow",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-wider mb-2 transition-colors",children:e.profile.name||" "}),i?a.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 group relative",children:[a.jsxs("div",{className:`${c.container} transition-all duration-300`,children:[c.decoration,a.jsx("p",{className:c.text,children:i})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>s(!o),className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800/80 text-slate-500 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-cyan-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all opacity-0 group-hover:opacity-100 shadow-md border border-slate-200 dark:border-slate-700",title:" ",children:a.jsx(Pe,{className:"w-5 h-5"})}),o&&a.jsx("div",{className:"absolute top-0 left-full ml-2 z-50 w-32 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg shadow-xl overflow-hidden flex flex-col animate-fade-in-fast",children:f.map((p,m)=>a.jsxs("button",{onClick:()=>{r(m),s(!1)},className:`px-3 py-2 text-left text-xs font-bold hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex justify-between items-center ${n===m?"text-cyan-600 dark:text-cyan-400 bg-slate-50 dark:bg-slate-700/50":"text-slate-600 dark:text-slate-300"}`,children:[p.name,n===m&&a.jsx($t,{className:"w-3 h-3"})]},p.id))}),o&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})]}):null,a.jsx("div",{className:"text-slate-600 dark:text-slate-400 text-sm md:text-base space-y-1 mt-3 transition-colors",children:u.length>0?u.map((p,m)=>a.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:p},m)):!i&&a.jsx("p",{className:"text-slate-400 dark:text-slate-500 italic",children:"  "})})]}),a.jsxs("div",{className:"flex gap-4 md:gap-6 text-center shrink-0",children:[a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 min-w-[80px] transition-colors",children:[a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:""}),a.jsx("div",{className:"text-3xl font-black text-cyan-600 dark:text-cyan-400",children:e.abilities.luck})]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 min-w-[80px] transition-colors",children:[a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:" "}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:t})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(Nn,{title:" ",children:a.jsx("div",{className:"space-y-2",children:e.abilities.skills.map(p=>a.jsx(ZC,{skill:p},p.name))})}),a.jsx(Nn,{title:" ",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.abilities.status||"  "})})]}),a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(Nn,{title:" ",children:a.jsx("div",{className:"space-y-3",children:e.abilities.enhancements.length>0?e.abilities.enhancements.map(p=>a.jsx(eS,{ability:p},p.name)):a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"   ."})})}),a.jsx(Nn,{title:"",children:a.jsx("div",{className:"space-y-3",children:e.inventory.items.length>0?e.inventory.items.map(p=>a.jsx(tS,{item:p},p.name)):a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:" ."})})})]}),a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(Nn,{title:" ",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.backstory||"  ."})}),a.jsx(Nn,{title:"",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.bonds||" ."})}),a.jsx(Nn,{title:"",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.memories||" ."})})]})]})]})},rS="https://script.google.com/macros/s/AKfycbw6xP1Bye6yAIbARXBrwUQvqTAFSi84sYk_rf5jiRc6GJxlxzCDAVLXQ-WH7FCrMcHf/exec",oS="https://docs.google.com/spreadsheets/d/e/2PACX-1vTEy73QEig--KR0DCaiwflRndOFsnHDAIePzG1FOw8IdbFO2KOCT1wpaRSP5rlN5Mi1zPypNkpf_fsx/pub?output=csv",sS="https://script.google.com/macros/s/AKfycbyJzlRBusMNXLcZr-WS-812ItkZd6vi7xq6AQ-NhVDNTro3kO-qf6M6c7GFTTt5Id4D9A/exec",Jn=(e,t)=>{const n=t==="ability"?"user_created_abilities":"user_created_items";localStorage.setItem(n,JSON.stringify(e))},uu=async(e,t,n)=>{const r=rS;let o;t==="ability"?o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.condition||"-",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.charge||"-",alignment:"LEFT"}]]}:t==="item"?o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.durability||"-",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:String(e.volume!==void 0?e.volume:0),alignment:"LEFT"}]]}:t==="status"&&(o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:" ",alignment:"LEFT"}]]});const i={document_content:JSON.stringify(o,null,2),export_type:t,timestamp:new Date().toISOString()};try{const u=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),f=await u.json();if(u.ok&&f.status==="SUCCESS")n("Google   !   !","info");else{const c=f.message||"  ";n(` : ${c}`,"error")}}catch(u){console.error("Failed to export:",u);const f=u.message||String(u);n(` :   .
(${f})`,"error")}},iS=e=>{const t=[],n=o=>o?typeof o=="string"?o:o.runs?o.runs.map(s=>s.text).join(""):o.text||"":"";e.forEach(o=>{o.content.forEach(s=>{if(s.type==="table"&&s.rows){const i=s.rows.flat().map(f=>n(f)).join(" ");(i.includes("[passive]")||i.includes("[status]"))&&s.rows.forEach(f=>{f.forEach(c=>{let p=n(c).trim();p=p.replace(/\[passive\]|\[status\]/gi,"").trim(),p&&p.split(/\r?\n/).map(h=>h.trim()).filter(Boolean).forEach(h=>{let y=h,w="";const E=h.indexOf(" - ");if(E!==-1)y=h.substring(0,E).trim(),w=h.substring(E+3).trim();else{const b=h.indexOf("-");b>0&&(y=h.substring(0,b).trim(),w=h.substring(b+1).trim())}y.length>0&&y.length<20&&t.push({name:y,description:w})})})})}})});const r=new Map;return t.forEach(o=>r.set(o.name,o)),Array.from(r.values())},lS=({onAddAbility:e,onAddItem:t,onAddStatus:n,onUpdateBackstory:r,onUpdateAppearance:o,onUpdateName:s,onUpdateBasicInfo:i,forcedType:u,rulebookContext:f,characterContext:c})=>{const[p,m]=_.useState(!1),[h,y]=_.useState(""),[w,E]=_.useState([]),[b,x]=_.useState(!1),v=_.useRef(null),g=()=>{!p&&w.length===0&&E([{role:"model",text:" ?     !"}]),m(!p)},T=()=>{var k;(k=v.current)==null||k.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{p&&T()},[w,p]);const N=async k=>{if(k.preventDefault(),!h.trim())return;const A=h.trim();E(R=>[...R,{role:"user",text:A}]),y(""),x(!0);try{const R=localStorage.getItem("user_gemini_api_key")||"AIzaSyDVnAaIbEPABcQrGRZV_iVh7YgqcB07rhA",C=new Er({apiKey:R}),$=`
                You are Archi, a creative assistant for the TRPG 'Akasha Simpli'.
                The user will describe what they want to create or ask for help with descriptions.
                Your goal is to generate a JSON object based on the description, **strictly following the provided rulebook context** for style, balance, and mechanics.
                
                ${c?`
            [Character Context]
            Name: ${c.name||"Unknown"}
            Basic Info (Gender/Age): ${c.genderAge||"Unknown"}
            Current Backstory: ${c.backstory.substring(0,1e3)||"None"}
            `:""}

                [Rulebook Context]
                ${f||"Rulebook content not available. Use standard TRPG logic."}

                [Rules]
                1. Create the content in Korean.
                2. Return ONLY a JSON object. No markdown code blocks.
                3. **Balance**: Ensure numeric values (Damage, Charge, Volume, Durability) align with the examples in the rulebook. 
                   - Damage is typically low single digits (1-6).
                   - Charge is often small numbers (1-5) or specific conditions (1/Round).
                   - Volume is typically 1-10.
                4. **Style**: Use the tone of the rulebook descriptions.
                5. **Concrete Effects**: For Abilities and Items, the description MUST explicitly state the mechanical effects (damage, healing, range, conditions) using numbers. Avoid vague descriptions like "powerful attack". Example: "Deals 3 damage to enemies within 2 tiles." instead of "Attacks enemies with a strong force."
            `,j='[Schema for Item] { "type": "item", "reply": "...", "data": { "name": "...", "description": "...", "durability": "...", "volume": number } }',I='[Schema for Ability] { "type": "ability", "reply": "...", "data": { "name": "...", "description": "...", "condition": "...", "charge": "..." } }',V='[Schema for Status] { "type": "status", "reply": "...", "data": { "name": "...", "description": "..." } }',B='[Schema for Backstory] { "type": "backstory", "reply": "...", "data": { "text": "..." } }',q='[Schema for Appearance] { "type": "appearance", "reply": "...", "data": { "text": "..." } }',M='[Schema for Name] { "type": "name", "reply": "...", "data": { "name": "..." } }',U='[Schema for Basic Info] { "type": "basic_info", "reply": "...", "data": { "text": "..." } }';let G="";u==="ability"?G=`${$} The user wants to create an **Ability**. ${I} User Input: "${A}"`:u==="item"?G=`${$} The user wants to create an **Item**. ${j} User Input: "${A}"`:u==="status"?G=`${$} The user wants to create a **Status Effect**. ${V} User Input: "${A}"`:u==="backstory"?G=`${$} The user wants to write a **Backstory**. ${B} User Input: "${A}"`:u==="appearance"?G=`${$} The user wants a **Visual Description**. ${q} User Input: "${A}"`:u==="profile"?G=`${$} 1. Infer what aspect of the **Character Profile** the user wants. 2. Select: ${M} ${U} ${q} ${B} User Input: "${A}"`:G=`${$} 1. Infer request type. ${j} ${I} ${V} ${B} ${q} ${M} ${U} User Input: "${A}"`;const te=(await C.models.generateContent({model:"gemini-2.5-flash",contents:G,config:{responseMimeType:"application/json"}})).text;if(!te)throw new Error("No response");const ie=JSON.parse(te);if(ie.type&&ie.data&&ie.reply)E(oe=>[...oe,{role:"model",text:ie.reply,generatedData:{type:ie.type,data:{...ie.data,isCreation:!0}}}]);else throw new Error("Invalid format")}catch(R){console.error(R),E(C=>[...C,{role:"model",text:",  .    ?"}])}finally{x(!1)}},S=k=>{if(k.generatedData){if(k.generatedData.type==="ability"&&e)e(k.generatedData.data),m(!1);else if(k.generatedData.type==="item"&&t)t(k.generatedData.data),m(!1);else if(k.generatedData.type==="status"&&n)n(k.generatedData.data),m(!1);else if(k.generatedData.type==="backstory"&&r)r(k.generatedData.data.text),m(!1);else if(k.generatedData.type==="appearance"&&o)o(k.generatedData.data.text),m(!1);else if(k.generatedData.type==="name"&&s)s(k.generatedData.data.name),m(!1);else if(k.generatedData.type==="basic_info"&&i)i(k.generatedData.data.text),m(!1);else{E(A=>[...A,{role:"model",text:"       .     ."}]);return}E([{role:"model",text:"!   ?"}])}};return a.jsxs("div",{className:"fixed bottom-6 right-6 z-[200] flex flex-col items-end pointer-events-none",children:[a.jsxs("div",{className:`
                mb-4 w-80 sm:w-96 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-2xl shadow-2xl overflow-hidden flex flex-col transition-all duration-300 origin-bottom-right
                ${p?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 translate-y-4 pointer-events-none h-0"}
            `,style:{maxHeight:"500px"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-600 to-purple-600 p-3 flex justify-between items-center border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[a.jsx(Pe,{className:"w-5 h-5 text-fuchsia-200"}),a.jsx("span",{children:"  "})]}),a.jsx("button",{onClick:g,className:"text-white/70 hover:text-white",children:a.jsx(je,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900/50 custom-scrollbar h-[300px]",children:[w.map((k,A)=>a.jsxs("div",{className:`flex flex-col ${k.role==="user"?"items-end":"items-start"}`,children:[k.text&&a.jsx("div",{className:`max-w-[85%] px-3 py-2 rounded-xl text-sm whitespace-pre-wrap shadow-sm ${k.role==="user"?"bg-fuchsia-600 text-white rounded-tr-none":"bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none border border-slate-200 dark:border-slate-600"}`,children:k.text}),k.generatedData&&a.jsxs("div",{className:"mt-2 w-full max-w-[90%] bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-xl overflow-hidden shadow-lg animate-fade-in-fast",children:[a.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase",children:k.generatedData.type==="ability"?" ":k.generatedData.type==="status"?" ":" "}),a.jsx(Pe,{className:"w-4 h-4 text-fuchsia-500"})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3 whitespace-pre-wrap leading-relaxed max-h-32 overflow-y-auto custom-scrollbar",children:k.generatedData.type==="backstory"||k.generatedData.type==="appearance"||k.generatedData.type==="basic_info"?k.generatedData.data.text:k.generatedData.data.name}),a.jsxs("button",{onClick:()=>S(k),className:"w-full py-1.5 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded transition-colors flex items-center justify-center gap-1",children:[a.jsx(Qe,{className:"w-3 h-3"})," "]})]})]})]},A)),b&&a.jsx("div",{className:"flex justify-start animate-fade-in-fast",children:a.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl rounded-tl-none px-4 py-3 border border-slate-200 dark:border-slate-600 shadow-sm",children:a.jsxs("div",{className:"flex gap-1.5 items-center h-full",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"})]})})}),a.jsx("div",{ref:v})]}),a.jsxs("form",{onSubmit:N,className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:k=>y(k.target.value),placeholder:":  ,  ...",className:"flex-1 bg-slate-100 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-full px-4 py-2 text-sm text-slate-900 dark:text-white focus:outline-none focus:border-fuchsia-500 focus:ring-1 focus:ring-fuchsia-500",disabled:b}),a.jsx("button",{type:"submit",disabled:!h.trim()||b,className:"p-2 bg-fuchsia-600 text-white rounded-full hover:bg-fuchsia-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:a.jsx(mi,{className:"w-4 h-4"})})]})]}),a.jsx("button",{onClick:g,className:`w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 relative group pointer-events-auto ${p?"bg-slate-700 text-white rotate-90":"bg-gradient-to-br from-fuchsia-600 to-purple-600 text-white hover:scale-110 shadow-fuchsia-500/30"}`,title:" ",children:p?a.jsx(je,{className:"w-6 h-6"}):a.jsx(Pe,{className:"w-6 h-6"})})]})},aS=({isOpen:e,onClose:t,message:n,type:r="info"})=>e?a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-sm overflow-hidden flex flex-col p-6 text-center relative",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex justify-center mb-4",children:r==="error"?a.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-500/20 rounded-full text-red-600 dark:text-red-400",children:a.jsx(Q0,{className:"w-8 h-8"})}):a.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-500/20 rounded-full text-cyan-600 dark:text-cyan-400",children:a.jsx(Hs,{className:"w-8 h-8"})})}),a.jsx("p",{className:"text-slate-700 dark:text-white text-lg mb-6 whitespace-pre-wrap leading-relaxed",children:n}),a.jsx("button",{onClick:t,className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white rounded-lg font-bold transition-colors",children:""})]})}):null,uS=({isOpen:e,onClose:t,onConfirm:n,currentUrl:r})=>{const[o,s]=_.useState("");if(_.useEffect(()=>{e&&s(r||"")},[e,r]),!e)return null;const i=()=>{n(o),t()};return a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-md p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:" URL "}),a.jsx("input",{type:"text",value:o,onChange:u=>s(u.target.value),placeholder:"https://example.com/image.png",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg p-3 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 mb-4",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:""}),a.jsx("button",{onClick:i,className:"px-4 py-2 bg-cyan-600 text-white rounded-lg font-bold hover:bg-cyan-500 transition-colors",children:""})]})]})})},dS=({name:e,setName:t,image:n,setImage:r,extendedProfile:o,setExtendedProfile:s})=>{const[i,u]=_.useState({name:":     ",genderAge:":      ",commentary:":      ",appearance:":       "}),[f,c]=_.useState(!1);return _.useEffect(()=>{(async()=>{try{const h=await(await fetch(oS)).text(),w=(N=>{const S=[];let k=[],A="",R=!1;for(let C=0;C<N.length;C++){const P=N[C],$=N[C+1];P==='"'?R&&$==='"'?(A+='"',C++):R=!R:P===","&&!R?(k.push(A.trim()),A=""):(P==="\r"||P===`
`)&&!R?(P==="\r"&&$===`
`&&C++,k.push(A.trim()),S.push(k),k=[],A=""):A+=P}return(A||k.length>0)&&(k.push(A.trim()),S.push(k)),S})(h);if(w.length<2)return;const E=w[0].map(N=>N.trim().replace(/^"|"$/g,"").trim());let b=-1,x=-1,v=-1,g=-1;E.forEach((N,S)=>{const k=N.replace(/[\r\n]+/g," ");k.includes("")?b=S:k.includes("")||k.includes("")?x=S:k.includes("")||k.includes("")||k.includes("")?v=S:(k.includes("")||k.includes(""))&&(g=S)}),b===-1&&(b=0),x===-1&&(x=1),v===-1&&(v=2),g===-1&&(g=3);const T=w.slice(1).filter(N=>N.length>1&&N.some(S=>S.trim()));if(T.length>0){const N=T[Math.floor(Math.random()*T.length)],S=k=>k?k.replace(/^"|"$/g,"").trim():"";u(k=>({name:N[b]?`: ${S(N[b])}`:k.name,genderAge:N[x]?`: ${S(N[x])}`:k.genderAge,commentary:N[v]?`: ${S(N[v])}`:k.commentary,appearance:N[g]?`: ${S(N[g])}`:k.appearance}))}}catch(m){console.warn("Example fetch failed",m)}})()},[]),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-6 flex items-center gap-2",children:[a.jsx(Rr,{className:"w-6 h-6"}),"1.  "]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:" "}),a.jsx("div",{onClick:()=>c(!0),className:"relative aspect-square rounded-xl bg-slate-50 dark:bg-slate-900/50 border-2 border-dashed border-slate-300 dark:border-slate-600 hover:border-cyan-500 transition-colors overflow-hidden group cursor-pointer",children:n?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-bold",children:" URL "})})]}):a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500",children:[a.jsx(Qe,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-xs",children:" URL "})]})}),a.jsx(uS,{isOpen:f,onClose:()=>c(!1),onConfirm:p=>{r(p),c(!1)},currentUrl:n})]}),a.jsxs("div",{className:"md:col-span-2 space-y-4",children:[a.jsx(Xi,{label:" ",value:e,onChange:p=>t(p.target.value),placeholder:i.name}),a.jsx(Xi,{label:" (,, )",value:o.genderAge,onChange:p=>s(m=>({...m,genderAge:p.target.value})),placeholder:i.genderAge}),a.jsx(Xi,{label:" ()",value:o.commentary,onChange:p=>s(m=>({...m,commentary:p.target.value})),placeholder:i.commentary})]}),a.jsx("div",{className:"md:col-span-3",children:a.jsx(nh,{label:" ",value:o.appearance,onChange:p=>s(m=>({...m,appearance:p.target.value})),placeholder:i.appearance,rows:4})})]})]})},Xi=({label:e,value:t,onChange:n,className:r,placeholder:o})=>a.jsxs("div",{className:r,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1.5",children:e}),a.jsx("input",{type:"text",value:t,onChange:n,placeholder:o,className:"w-full bg-white dark:bg-slate-900/50 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all placeholder-slate-400"})]}),nh=({label:e,value:t,onChange:n,className:r,placeholder:o,rows:s=4})=>a.jsxs("div",{className:r,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1.5",children:e}),a.jsx("textarea",{value:t,onChange:n,rows:s,placeholder:o,className:"w-full bg-white dark:bg-slate-900/50 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all resize-none placeholder-slate-400"})]}),cS=({skills:e,updateSkills:t,rulebookPages:n})=>{const[r,o]=_.useState(""),[s,i]=_.useState([]),[u,f]=_.useState(!1),c=_.useRef(null),p=_.useMemo(()=>e.reduce((x,v)=>{const g=Ki.includes(v.name)?1:0;return x+(v.score-g)},0),[e]),m=af-p,h=_.useMemo(()=>{const x=new Set;return["","","",""," ","","","","","","","","","","","",""," "," "," "," "," ","","",""," ","","","","",""," "," ",""].forEach(v=>x.add(v)),n&&n.forEach(v=>{v.content.forEach(g=>{g.type==="table"&&g.rows&&g.rows.flat().some(N=>{const S=typeof N=="string"?N:N.text||"";return S.includes("[skill]")||S.includes("  ")})&&g.rows.flat().forEach(N=>{let S=typeof N=="string"?N:N.text||"";S=S.replace(/\[skill\]/gi,"").trim(),S&&S.length>1&&S.length<20&&!S.includes("")&&!S.includes(" ")&&x.add(S)})})}),Array.from(x).sort()},[n]);_.useEffect(()=>{const x=v=>{c.current&&!c.current.contains(v.target)&&f(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const y=x=>{const v=x.target.value;if(o(v),v.trim()){const g=h.filter(T=>T.toLowerCase().includes(v.toLowerCase())&&!e.some(N=>N.name===T));i(g),f(!0)}else i([]),f(!1)},w=(x,v)=>{const g=e.map(T=>{if(T.name===x){const N=Ki.includes(x)?1:0,S=Math.max(N,T.score+v);return{...T,score:S}}return T});t(g)},E=x=>{const v=x||r;v&&!e.find(g=>g.name===v)&&(t([...e,{name:v,score:0}]),o(""),i([]),f(!1))},b=x=>{t(e.filter(v=>v.name!==x))};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Sn,{className:"w-6 h-6"}),"2.   "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:["   : ",a.jsx("span",{className:`font-bold text-2xl ${m<0?"text-red-500 dark:text-red-400":"text-cyan-600 dark:text-cyan-300"}`,children:m})," / ",af]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map(x=>{const v=Ki.includes(x.name);return a.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold text-lg w-24 truncate text-slate-800 dark:text-slate-100",title:x.name,children:x.name}),!v&&a.jsx("button",{onClick:()=>b(x.name),className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 p-1",children:a.jsx(Ro,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>w(x.name,-1),disabled:x.score<=(v?1:0),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 disabled:opacity-30 disabled:hover:bg-slate-200 dark:disabled:hover:bg-slate-700 text-slate-700 dark:text-white transition-colors",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xl font-bold w-6 text-center text-slate-800 dark:text-white",children:x.score}),a.jsx("button",{onClick:()=>w(x.name,1),disabled:m<=0,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 disabled:opacity-30 disabled:hover:bg-slate-200 dark:disabled:hover:bg-slate-700 text-slate-700 dark:text-white transition-colors",children:a.jsx(Qe,{className:"w-4 h-4"})})]})]},x.name)})}),a.jsxs("div",{className:"mt-6 flex gap-2 relative",ref:c,children:[a.jsxs("div",{className:"flex-grow relative",children:[a.jsx("input",{type:"text",value:r,onChange:y,onFocus:()=>{r.trim()&&f(!0)},placeholder:"   (   )",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-3 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 pl-10"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Kt,{className:"h-5 w-5 text-slate-400"})}),u&&s.length>0&&a.jsx("ul",{className:"absolute z-50 w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg mt-1 max-h-60 overflow-y-auto shadow-xl custom-scrollbar",children:s.map((x,v)=>a.jsxs("li",{onClick:()=>E(x),className:"px-4 py-2 hover:bg-cyan-100 dark:hover:bg-cyan-600/30 hover:text-cyan-700 dark:hover:text-cyan-300 cursor-pointer text-sm text-slate-700 dark:text-slate-300 transition-colors border-b border-slate-100 dark:border-slate-700 last:border-none flex items-center justify-between group",children:[a.jsx("span",{children:x}),a.jsx(Qe,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]},v))})]}),a.jsx("button",{onClick:()=>E(),className:"px-6 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 font-bold transition-colors shadow-lg whitespace-nowrap",children:""})]})]})},fS=e=>{switch(e){case"":case"":case" ":return"bg-red-100 dark:bg-red-500/10 text-red-700 dark:text-red-300 border-red-200 dark:border-red-500/20";case"":case"":return"bg-blue-100 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-500/20";case"":case"":return"bg-emerald-100 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-500/20";case"":case"":return"bg-sky-100 dark:bg-sky-500/10 text-sky-700 dark:text-sky-300 border-sky-200 dark:border-sky-500/20";case"":case"":return"bg-violet-100 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-500/20";case" ":return"bg-teal-100 dark:bg-teal-500/10 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-500/20";case" ":return"bg-orange-100 dark:bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-500/20";case"":return"bg-slate-200 dark:bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-300 dark:border-slate-500/20";case"":case"":return"bg-amber-100 dark:bg-amber-500/10 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-500/20";case"":case" ":return"bg-indigo-100 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-500/20";case"":case"":return"bg-yellow-100 dark:bg-yellow-500/5 text-yellow-800 dark:text-yellow-300/80 border-yellow-200 dark:border-yellow-500/10";case"":return"bg-rose-100 dark:bg-rose-500/10 text-rose-700 dark:text-rose-300 border-rose-200 dark:border-rose-500/20";case"":return"bg-fuchsia-100 dark:bg-fuchsia-500/10 text-fuchsia-700 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-500/20";case"":return"bg-purple-100 dark:bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-500/20";case" ":return"bg-fuchsia-100 dark:bg-fuchsia-500/20 text-fuchsia-700 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-500/40 shadow-sm";case"":return"bg-teal-100 dark:bg-teal-500/20 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-500/40 shadow-sm";case"":return"bg-lime-100 dark:bg-lime-500/10 text-lime-700 dark:text-lime-300 border-lime-200 dark:border-lime-500/20";default:return"bg-slate-100 dark:bg-slate-700/30 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600/30"}},zs=(e,t,n,r)=>{var i,u,f,c;const o=new Set,s=(e+" "+t).toLowerCase();if(r==="ability"){s.includes(" ")?o.add(" "):s.includes(" ")?o.add(" "):(s.includes("")||s.includes(""))&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/ |||/)&&o.add(""),s.includes("")&&o.add(""),s.includes("1")||s.includes("")?o.add(""):(s.includes("")||s.includes("")||s.includes(""))&&o.add("");const p=s.match(/(\d+)\s*/);p&&parseInt(p[1],10)>=3&&o.add("");const m=(i=n.find(y=>y.label.includes("")))==null?void 0:i.value;m&&m!=="-"&&m!==""?o.add(""):(m==="-"||m==="")&&o.add("");const h=(u=n.find(y=>y.label.includes("")))==null?void 0:u.value;h&&h!=="-"&&String(h).length>2&&(o.add(""),["","","","","",""].some(y=>String(h).includes(y))&&o.add(""))}else{s.match(/|||||||||||/)?o.add(" "):s.match(/||||||||||||/)?o.add(" "):s.match(//)&&o.add(""),s.match(/|||/)?o.add(""):s.match(/||||||/)?o.add(""):o.add("");const p=parseInt(String((f=n.find(h=>h.label.includes("")))==null?void 0:f.value).replace(/[^0-9]/g,"")||"0");p>=5?o.add(""):p<=1&&o.add("");const m=(c=n.find(h=>h.label.includes("")))==null?void 0:c.value;m&&m!=="-"&&o.add("")}return o.has("")&&o.has("")&&o.delete(""),Array.from(o)},rh=({isOpen:e,onClose:t,onSave:n,type:r,initialData:o,referenceData:s,rulebookContext:i})=>{const[u,f]=_.useState({name:"",description:"",condition:"-",charge:"-",durability:"-",volume:0}),[c,p]=_.useState([]),[m,h]=_.useState(null),[y,w]=_.useState(!1),[E,b]=_.useState(""),x=_.useMemo(()=>{const S=new Set;return s.forEach(k=>{(k.description||"").split(/[.,]\s*/).forEach(R=>{R.trim().length>2&&S.add(R.trim())}),r==="ability"&&"condition"in k&&(k.condition||"").split(/[.,]\s*/).forEach(C=>{C.trim().length>2&&C.trim()!=="-"&&S.add(C.trim())})}),Array.from(S)},[s,r]);if(_.useEffect(()=>{e&&o?f({name:o.name,description:o.description,condition:o.condition||"-",charge:o.charge||"-",durability:o.durability||"-",volume:o.volume||0}):e&&f({name:"",description:"",condition:"-",charge:"-",durability:"-",volume:0}),p([]),w(!1),b("")},[e,o]),_.useEffect(()=>{if(!m){p([]);return}const S=String(u[m]);if(!S||S==="-"){p([]);return}const k=S.trim().split(" "),A=k[k.length-1];if(A.length<2){p([]);return}const R=x.filter(C=>C.toLowerCase().includes(A.toLowerCase())&&C.toLowerCase()!==A.toLowerCase()&&C!==S).slice(0,8);p(R)},[u,m,x]),!e)return null;const v=S=>{S.preventDefault(),n(r==="ability"?{name:u.name,description:u.description,condition:u.condition,charge:u.charge,isCreation:!0}:{name:u.name,description:u.description,durability:u.durability,volume:Number(u.volume),isCreation:!0}),t()},g=S=>{m&&f(k=>{const A=String(k[m]);if(!A||A==="-")return{...k,[m]:S};const R=A.trim().split(" "),C=R[R.length-1];return S.includes(C)?{...k,[m]:R.slice(0,-1).join(" ")+(R.length>1?" ":"")+S}:{...k,[m]:A+" "+S}})},T=S=>{f({name:S.name,description:S.description,condition:S.condition||"-",charge:S.charge||"-",durability:S.durability||"-",volume:S.volume||0}),w(!1)},N=s.filter(S=>S.name.toLowerCase().includes(E.toLowerCase()));return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast overflow-y-auto",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50 flex-shrink-0",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Pe,{className:"w-5 h-5 text-fuchsia-600 dark:text-fuchsia-400"}),r==="ability"?o?"  ":"  ":o?" ":" "]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row flex-grow overflow-hidden",children:[a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 md:border-r border-slate-200 dark:border-slate-700 custom-scrollbar",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("button",{type:"button",onClick:()=>w(!y),className:"w-full py-2 px-3 rounded-lg border border-dashed border-slate-400 dark:border-slate-600 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:border-fuchsia-500 hover:bg-slate-100 dark:hover:bg-slate-700/50 transition-all text-sm flex items-center justify-center gap-2",children:y?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx(Kt,{className:"w-4 h-4"}),a.jsx("span",{children:"    ()"})]})}),y&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-100 dark:bg-slate-900/80 rounded-lg border border-slate-200 dark:border-slate-600 animate-fade-in-fast",children:[a.jsx("input",{type:"text",placeholder:" ...",value:E,onChange:S=>b(S.target.value),className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded p-2 text-sm text-slate-900 dark:text-white mb-2 focus:outline-none focus:border-fuchsia-500",autoFocus:!0}),a.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar space-y-1",children:N.length>0?N.map((S,k)=>a.jsxs("button",{type:"button",onClick:()=>T(S),className:"w-full text-left px-3 py-2 rounded hover:bg-fuchsia-100 dark:hover:bg-fuchsia-900/30 text-slate-700 dark:text-slate-300 hover:text-fuchsia-700 dark:hover:text-fuchsia-300 text-xs transition-colors flex justify-between",children:[a.jsx("span",{className:"font-bold",children:S.name}),a.jsx("span",{className:"opacity-50 truncate max-w-[150px]",children:S.description})]},k)):a.jsx("p",{className:"text-center text-slate-500 text-xs py-2",children:"  ."})})]})]}),a.jsxs("form",{id:"creationForm",onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{required:!0,type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.name,onChange:S=>f({...u,name:S.target.value}),placeholder:r==="ability"?": , ":":  ,  ",onFocus:()=>h("name")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("textarea",{required:!0,rows:5,className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.description,onChange:S=>f({...u,description:S.target.value}),placeholder:"   . : 4  ...",onFocus:()=>h("description")})]}),r==="ability"?a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.condition,onChange:S=>f({...u,condition:S.target.value}),onFocus:()=>h("condition")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.charge,onChange:S=>f({...u,charge:S.target.value}),onFocus:()=>h("charge")})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.durability,onChange:S=>f({...u,durability:S.target.value}),onFocus:()=>h("durability")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"number",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.volume,onChange:S=>f({...u,volume:parseInt(S.target.value)||0}),onFocus:()=>h("volume")})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsx("button",{type:"submit",className:"w-full py-2 bg-fuchsia-600 hover:bg-fuchsia-500 text-white rounded-lg font-bold shadow-lg shadow-fuchsia-500/20 transition-colors",children:o?"  ":"  "}),a.jsx("p",{className:"text-xs text-center text-slate-500 mt-2",children:"    ."})]})]})]}),a.jsxs("div",{className:"w-full md:w-1/3 bg-slate-50 dark:bg-slate-900/30 p-4 border-t md:border-t-0 md:border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-500 dark:text-slate-400",children:[a.jsx(Pe,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold",children:"  "})]}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:c.length>0?a.jsx("ul",{className:"space-y-2",children:c.map((S,k)=>a.jsxs("li",{className:"group flex items-start gap-2",children:[a.jsx("button",{type:"button",onClick:()=>g(S),className:"mt-0.5 p-1 rounded-md bg-slate-200 dark:bg-slate-700 hover:bg-fuchsia-600 text-slate-500 dark:text-slate-300 hover:text-white transition-colors flex-shrink-0",title:"",children:a.jsx(Qe,{className:"w-3 h-3"})}),a.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 group-hover:text-fuchsia-600 dark:group-hover:text-fuchsia-200 transition-colors break-words text-left cursor-pointer",onClick:()=>g(S),children:S})]},k))}):a.jsxs("div",{className:"text-center text-slate-500 dark:text-slate-600 text-xs py-10 px-4",children:[a.jsxs("p",{className:"mb-2",children:["   ",a.jsx("br",{}),"   ."]}),a.jsx("p",{children:': "4"    "4  "'})]})})]})]})]})})},oh=({isOpen:e,onClose:t,onConfirm:n,message:r})=>e?a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-md overflow-hidden flex flex-col p-6 text-center",children:[a.jsx("p",{className:"text-slate-800 dark:text-white text-lg mb-6 whitespace-pre-wrap",children:r}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:n,className:"px-6 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold transition-colors",children:""}),a.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-800 dark:text-white rounded-lg font-bold transition-colors",children:""})]})]})}):null,sh=({title:e,description:t,stats:n,type:r,isSelected:o,onSelect:s,disabled:i,tags:u,onEdit:f,onDelete:c,onExport:p})=>{const h=r==="item"?{base:"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700",selected:"bg-indigo-50 dark:bg-indigo-900/40 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)] ring-1 ring-indigo-500",hover:"hover:border-indigo-400/50 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(129,140,248,0.15)]",titleColor:"text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-300",iconBg:"bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400",footerBorder:"border-indigo-100 dark:border-indigo-500/20 text-indigo-700 dark:text-indigo-200/80",icon:a.jsx(To,{className:"w-5 h-5"})}:{base:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",selected:"bg-cyan-50 dark:bg-cyan-900/40 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)] ring-1 ring-cyan-500",hover:"hover:border-cyan-500/50 hover:bg-cyan-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(34,211,238,0.15)]",titleColor:"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-500 dark:group-hover:text-cyan-300",iconBg:"bg-cyan-100 dark:bg-cyan-500/10 text-cyan-500 dark:text-cyan-400",footerBorder:"border-cyan-100 dark:border-cyan-500/20 text-slate-500 dark:text-slate-400",icon:a.jsx(Sn,{className:"w-5 h-5"})},y=`p-5 rounded-xl border transition-all duration-300 group cursor-pointer h-full flex flex-col relative ${i?"opacity-40 cursor-not-allowed grayscale":""} ${o?h.selected:i?h.base:`${h.base} ${h.hover}`}`;return a.jsxs("div",{onClick:()=>!i&&s(),className:y,children:[a.jsxs("div",{className:"flex justify-between items-start gap-3 mb-2",children:[a.jsx("h4",{className:`font-bold text-lg leading-tight ${h.titleColor}`,children:e}),a.jsx("div",{className:`p-1.5 rounded-md ${h.iconBg} ${o?"opacity-100":"opacity-60 group-hover:opacity-100"} transition-opacity flex-shrink-0`,children:h.icon})]}),u&&u.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:u.map(w=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${fS(w)}`,children:w},w))}),a.jsx("div",{className:"flex-grow",children:a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:t})}),a.jsx("div",{className:`mt-4 pt-3 border-t text-xs ${h.footerBorder}`,children:a.jsx("div",{className:"flex justify-between items-center gap-2",children:n.map((w,E)=>a.jsxs("span",{children:[a.jsxs("strong",{children:[w.label,":"]})," ",w.value]},E))})}),(f||p||c)&&a.jsxs("div",{className:"mt-3 flex gap-2 justify-end border-t border-slate-200 dark:border-slate-700/50 pt-2",children:[c&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),c()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-red-100 dark:bg-red-900/40 hover:bg-red-200 dark:hover:bg-red-800/40 border border-red-200 dark:border-red-700/50 rounded text-red-600 dark:text-red-300 transition-colors mr-auto",children:[a.jsx(Ro,{className:"w-3 h-3"}),""]}),f&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),f()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded text-slate-700 dark:text-slate-300 transition-colors",children:[a.jsx(iu,{className:"w-3 h-3"}),""]}),p&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),p()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-fuchsia-100 dark:bg-fuchsia-900/40 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-800/40 border border-fuchsia-200 dark:border-fuchsia-700/50 rounded text-fuchsia-600 dark:text-fuchsia-300 transition-colors",children:[a.jsx(lu,{className:"w-3 h-3"}),""]})]})]})},pS=({selected:e,updateEnhancements:t,availableAbilities:n,onCreate:r,onUpdate:o,onDelete:s,userCreatedList:i,showMessage:u,rulebookContext:f})=>{const[c,p]=_.useState(""),[m,h]=_.useState([]),[y,w]=_.useState(!1),[E,b]=_.useState(!1),[x,v]=_.useState(null),[g,T]=_.useState(null),N=_.useCallback(I=>{const V=[{label:"",value:I.condition},{label:"",value:I.charge}],B=zs(I.name,I.description,V,"ability");return i.some(M=>M.name===I.name)?B.push(" "):I.isCreation&&B.push(""),B},[i]),S=_.useMemo(()=>{const I=new Set;return n.forEach(V=>{!y&&V.isCreation&&!e.some(B=>B.name===V.name)||N(V).forEach(B=>I.add(B))}),Array.from(I).sort()},[n,N,y,e]),k=_.useMemo(()=>n.filter(I=>{if(!y&&I.isCreation&&!e.some(M=>M.name===I.name))return!1;const V=N(I),B=(I.name+I.description).toLowerCase().includes(c.toLowerCase()),q=m.length===0||m.every(M=>V.includes(M));return B&&q}),[n,c,m,N,y,e]),A=_.useCallback(I=>{e.some(B=>B.name===I.name)?t(e.filter(B=>B.name!==I.name)):e.length<Yi&&t([...e,I])},[e,t]),R=I=>{h(V=>V.includes(I)?V.filter(B=>B!==I):[...V,I])},C=I=>{v(I),b(!0)},P=I=>{T(I)},$=()=>{g&&(s(g),T(null))},j=I=>{uu(I,"ability",u)};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Pe,{className:"w-6 h-6"}),"3.   "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:[" : ",a.jsx("span",{className:"font-bold text-2xl text-cyan-600 dark:text-cyan-300",children:e.length})," / ",Yi]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Kt,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-900/50 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:" ,  ...",value:c,onChange:I=>p(I.target.value)}),c&&a.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>h([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${m.length===0?"bg-cyan-600 text-white border-cyan-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:""}),S.map(I=>{const V=m.includes(I);return a.jsx("button",{onClick:()=>R(I),className:`px-3 py-1 text-xs rounded-full border transition-all ${V?"bg-cyan-100 dark:bg-cyan-900/60 text-cyan-700 dark:text-cyan-200 border-cyan-500 shadow-[0_0_10px_rgba(34,211,238,0.2)]":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:I},I)})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>w(!y),className:`px-4 py-1.5 rounded-full text-xs font-semibold border transition-all flex-shrink-0 ${y?"bg-fuchsia-100 dark:bg-fuchsia-600/20 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500 shadow-[0_0_10px_rgba(232,121,249,0.3)]":"bg-slate-200 dark:bg-slate-800 text-slate-500 border-slate-300 dark:border-slate-600 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`,children:y?"   ":"   "}),a.jsxs("button",{onClick:()=>{v(null),b(!0)},className:"px-3 py-1.5 rounded-full text-xs font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 transition-colors shadow-lg flex items-center gap-1",children:[a.jsx(Qe,{className:"w-3 h-3"})," "]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:k.length>0?k.map(I=>{const V=[{label:"",value:I.condition},{label:"",value:I.charge}],B=zs(I.name,I.description,V,"ability"),q=i.some(M=>M===I);return q?B.push(" "):I.isCreation&&B.push(""),a.jsx(sh,{type:"ability",title:I.name,description:I.description,stats:V,tags:B,isSelected:e.some(M=>M.name===I.name),onSelect:()=>A(I),disabled:e.length>=Yi&&!e.some(M=>M.name===I.name),onEdit:q?()=>C(I):void 0,onDelete:q?()=>P(I):void 0,onExport:q?()=>j(I):void 0},I.name)}):a.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500 flex flex-col items-center gap-2",children:[a.jsx(Kt,{className:"w-8 h-8 opacity-50"}),a.jsx("span",{children:"  ."})]})}),a.jsx(rh,{isOpen:E,onClose:()=>b(!1),onSave:I=>{x?o(x,I):r(I),w(!0)},type:"ability",initialData:x,referenceData:n,rulebookContext:f}),a.jsx(oh,{isOpen:!!g,onClose:()=>T(null),onConfirm:$,message:`   
 ?`})]})},hS=({selected:e,updateItems:t,availableItems:n,onCreate:r,onUpdate:o,onDelete:s,userCreatedList:i,showMessage:u,rulebookContext:f})=>{const[c,p]=_.useState(""),[m,h]=_.useState([]),[y,w]=_.useState(!1),[E,b]=_.useState(!1),[x,v]=_.useState(null),[g,T]=_.useState(null),N=_.useCallback(I=>{const V=[{label:"",value:I.durability},{label:"",value:I.volume}],B=zs(I.name,I.description,V,"item");return i.some(M=>M.name===I.name)?B.push(" "):I.isCreation&&B.push(""),B},[i]),S=_.useMemo(()=>{const I=new Set;return n.forEach(V=>{!y&&V.isCreation&&!e.some(B=>B.name===V.name)||N(V).forEach(B=>I.add(B))}),Array.from(I).sort()},[n,N,y,e]),k=_.useMemo(()=>n.filter(I=>{if(!y&&I.isCreation&&!e.some(M=>M.name===I.name))return!1;const V=N(I),B=(I.name+I.description).toLowerCase().includes(c.toLowerCase()),q=m.length===0||m.every(M=>V.includes(M));return B&&q}),[n,c,m,N,y,e]),A=_.useCallback(I=>{e.some(B=>B.name===I.name)?t(e.filter(B=>B.name!==I.name)):e.length<Qi&&t([...e,I])},[e,t]),R=I=>{h(V=>V.includes(I)?V.filter(B=>B!==I):[...V,I])},C=I=>{v(I),b(!0)},P=I=>{T(I)},$=()=>{g&&(s(g),T(null))},j=I=>{uu(I,"item",u)};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(To,{className:"w-6 h-6"}),"4.  "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:[" : ",a.jsx("span",{className:"font-bold text-2xl text-cyan-600 dark:text-cyan-300",children:e.length})," / ",Qi]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Kt,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-900/50 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:" ,  ...",value:c,onChange:I=>p(I.target.value)}),c&&a.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>h([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${m.length===0?"bg-indigo-600 text-white border-indigo-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:""}),S.map(I=>{const V=m.includes(I);return a.jsx("button",{onClick:()=>R(I),className:`px-3 py-1 text-xs rounded-full border transition-all ${V?"bg-indigo-100 dark:bg-indigo-900/60 text-indigo-700 dark:text-indigo-200 border-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.2)]":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:I},I)})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>w(!y),className:`px-4 py-1.5 rounded-full text-xs font-semibold border transition-all flex-shrink-0 ${y?"bg-fuchsia-100 dark:bg-fuchsia-600/20 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500 shadow-[0_0_10px_rgba(232,121,249,0.3)]":"bg-slate-200 dark:bg-slate-800 text-slate-500 border-slate-300 dark:border-slate-600 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`,children:y?"   ":"   "}),a.jsxs("button",{onClick:()=>{v(null),b(!0)},className:"px-3 py-1.5 rounded-full text-xs font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 transition-colors shadow-lg flex items-center gap-1",children:[a.jsx(Qe,{className:"w-3 h-3"})," "]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:k.length>0?k.map(I=>{const V=[{label:"",value:I.durability},{label:"",value:I.volume}],B=zs(I.name,I.description,V,"item"),q=i.some(M=>M.name===I.name);return q?B.push(" "):I.isCreation&&B.push(""),a.jsx(sh,{type:"item",title:I.name,description:I.description,stats:V,tags:B,isSelected:e.some(M=>M.name===I.name),onSelect:()=>A(I),disabled:e.length>=Qi&&!e.some(M=>M.name===I.name),onEdit:q?()=>C(I):void 0,onDelete:q?()=>P(I):void 0,onExport:q?()=>j(I):void 0},I.name)}):a.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500 flex flex-col items-center gap-2",children:[a.jsx(Kt,{className:"w-8 h-8 opacity-50"}),a.jsx("span",{children:"  ."})]})}),a.jsx(rh,{isOpen:E,onClose:()=>b(!1),onSave:I=>{x?o(x,I):r(I),w(!0)},type:"item",initialData:x,referenceData:n,rulebookContext:f}),a.jsx(oh,{isOpen:!!g,onClose:()=>T(null),onConfirm:$,message:`   
 ?`})]})},mS=({data:e,onDelete:t,onEdit:n,onExport:r})=>a.jsxs("div",{className:"bg-white dark:bg-slate-900/60 border border-indigo-200 dark:border-indigo-500/30 rounded-xl p-4 shadow-lg relative group h-full flex flex-col hover:border-indigo-400 dark:hover:border-indigo-500/60 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg leading-tight",children:e.name}),a.jsx("div",{className:"p-1.5 rounded-md bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400",children:a.jsx(Mr,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap flex-grow",children:e.description}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r&&a.jsx("button",{onClick:o=>{o.stopPropagation(),r()},className:"p-1.5 bg-fuchsia-100 dark:bg-fuchsia-900/80 text-fuchsia-600 dark:text-fuchsia-300 rounded-lg hover:bg-fuchsia-200 dark:hover:bg-fuchsia-800 transition-colors",title:"",children:a.jsx(lu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 bg-slate-200 dark:bg-slate-700/80 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white transition-colors",title:"",children:a.jsx(iu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:o=>{o.stopPropagation(),t()},className:"p-1.5 bg-red-100 dark:bg-red-900/80 text-red-600 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-800 transition-colors",title:"",children:a.jsx(Ro,{className:"w-4 h-4"})})]})]}),gS=({isOpen:e,onClose:t,availableEffects:n,onAdd:r,initialData:o,rulebookContext:s})=>{const[i,u]=_.useState("create"),[f,c]=_.useState(""),[p,m]=_.useState(""),[h,y]=_.useState("");_.useEffect(()=>{e&&(o?(c(o.name),m(o.description),u("create")):(c(""),m(""),u("create")),y(""))},[e,o]);const w=()=>{f&&p&&(r({name:f,description:p}),t())},E=n.filter(b=>(b.name+b.description).toLowerCase().includes(h.toLowerCase()));return e?a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Mr,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"}),o?"  ":"  "]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(je,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:[a.jsx("button",{onClick:()=>u("create"),className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="create"?"bg-indigo-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:" "}),a.jsx("button",{onClick:()=>u("select"),className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="select"?"bg-indigo-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:" "})]}),a.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 bg-white dark:bg-slate-800",children:i==="create"?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:" "}),a.jsx("input",{type:"text",value:f,onChange:b=>c(b.target.value),placeholder:":  , , ",className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:" "}),a.jsx("textarea",{value:p,onChange:b=>m(b.target.value),placeholder:":      1 .",rows:4,className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),a.jsx("button",{onClick:w,disabled:!f.trim()||!p.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all mt-4",children:o?"":""})]}):a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"relative mb-4",children:[a.jsx(Kt,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"...",value:h,onChange:b=>y(b.target.value),className:"w-full pl-9 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 overflow-y-auto pr-1 pb-1",children:E.length>0?E.map((b,x)=>a.jsxs("button",{onClick:()=>{r(b),t()},className:"text-left bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-700 p-3 rounded-lg transition-all group",children:[a.jsx("div",{className:"font-bold text-indigo-600 dark:text-indigo-300 group-hover:text-indigo-700 dark:group-hover:text-indigo-200 mb-1",children:b.name}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-300 line-clamp-2",children:b.description})]},x)):a.jsx("div",{className:"col-span-full text-center py-8 text-slate-500",children:"  ."})})]})})]})}):null},xS=({status:e,setStatus:t,availableEffects:n,rulebookContext:r,showMessage:o})=>{const[s,i]=_.useState(!1),[u,f]=_.useState(null),c=_.useMemo(()=>e?e.split(`
`).map(w=>{const E=w.trim();if(!E)return null;const b=E.match(/^\[(.*?)\] (.*)$/);return b?{name:b[1],description:b[2]}:{name:"",description:E}}).filter(w=>w!==null):[],[e]),p=w=>{const E=w.map(b=>`[${b.name}] ${b.description}`).join(`
`);t(E)},m=w=>{if(u!==null){const E=[...c];E[u]=w,p(E)}else p([...c,w]);f(null)},h=w=>{const E=[...c];E.splice(w,1),p(E)},y=w=>{f(w),i(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-2 flex items-center gap-2",children:[a.jsx(Mr,{className:"w-6 h-6"}),"5.   ()"]}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm",children:"      ."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map((w,E)=>a.jsx("div",{className:"animate-fade-in-fast h-full",children:a.jsx(mS,{data:w,onDelete:()=>h(E),onEdit:()=>y(E),onExport:()=>uu(w,"status",o)})},E)),a.jsxs("button",{onClick:()=>{f(null),i(!0)},className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 hover:text-indigo-500 dark:hover:text-indigo-400 hover:border-indigo-400 dark:hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-all group min-h-[160px]",children:[a.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 group-hover:bg-indigo-100 dark:group-hover:bg-indigo-500/20 rounded-full p-3 mb-2 transition-colors",children:a.jsx(Qe,{className:"w-8 h-8 group-hover:scale-110 transition-transform"})}),a.jsx("span",{className:"text-sm font-bold",children:" "})]})]})]}),a.jsx(gS,{isOpen:s,onClose:()=>i(!1),availableEffects:n,onAdd:m,initialData:u!==null?c[u]:null,rulebookContext:r})]})},yS=({backstory:e,setBackstory:t,memoList:n,setMemoList:r})=>{const[o,s]=_.useState({type:"bond",title:"",content:""}),[i,u]=_.useState(!1),[f,c]=_.useState(!1),p=()=>{!o.title.trim()||!o.content.trim()||(r(h=>[...h,{...o,id:Date.now().toString()}]),s({type:"bond",title:"",content:""}),u(!1))},m=h=>{r(y=>y.filter(w=>w.id!==h))};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(mi,{className:"w-6 h-6"}),"6.  "]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`transition-all duration-300 ease-in-out ${f?"h-96":"h-32"}`,children:a.jsx(nh,{label:"  ",value:e,onChange:h=>t(h.target.value),rows:f?15:4,placeholder:"        .",className:"h-full"})}),a.jsx("button",{onClick:()=>c(!f),className:"absolute bottom-[-1.5rem] left-1/2 -translate-x-1/2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-800 dark:hover:text-white rounded-full p-1 border border-slate-300 dark:border-slate-600 shadow-md transition-colors z-10",title:f?"":"",children:a.jsx(fi,{className:`w-5 h-5 transition-transform duration-300 ${f?"rotate-90":"-rotate-90"}`})})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsxs("h3",{className:"text-xl font-bold text-fuchsia-600 dark:text-fuchsia-400 flex items-center gap-2",children:[a.jsx(Pe,{className:"w-6 h-6"}),"  "]}),a.jsx("button",{onClick:()=>u(!i),className:`
                            px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all
                            ${i?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300":"bg-fuchsia-600 text-white hover:bg-fuchsia-500 shadow-lg shadow-fuchsia-500/20"}
                        `,children:i?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"w-4 h-4"}),""]}):a.jsxs(a.Fragment,{children:[a.jsx(Qe,{className:"w-4 h-4"}),""]})})]}),i&&a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-fuchsia-500/30 mb-6 animate-slide-in-bottom",children:[a.jsxs("div",{className:"flex gap-4 mb-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"memoType",checked:o.type==="bond",onChange:()=>s(h=>({...h,type:"bond"})),className:"accent-fuchsia-500"}),a.jsx("span",{className:o.type==="bond"?"text-slate-900 dark:text-white font-bold":"text-slate-500 dark:text-slate-400",children:""})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"memoType",checked:o.type==="memory",onChange:()=>s(h=>({...h,type:"memory"})),className:"accent-fuchsia-500"}),a.jsx("span",{className:o.type==="memory"?"text-slate-900 dark:text-white font-bold":"text-slate-500 dark:text-slate-400",children:""})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",value:o.title,onChange:h=>s(y=>({...y,title:h.target.value})),placeholder:" (:  , )",className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500"}),a.jsx("textarea",{value:o.content,onChange:h=>s(y=>({...y,content:h.target.value})),placeholder:" .",rows:3,className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500 resize-none"}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:p,disabled:!o.title.trim()||!o.content.trim(),className:"px-6 py-2 bg-fuchsia-600 text-white rounded-lg font-bold hover:bg-fuchsia-500 disabled:opacity-50 transition-colors",children:""})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.length>0?n.map(h=>a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative group hover:border-fuchsia-500/50 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${h.type==="bond"?"bg-pink-100 dark:bg-pink-500/10 text-pink-600 dark:text-pink-400 border-pink-200 dark:border-pink-500/20":"bg-purple-100 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-200 dark:border-purple-500/20"}`,children:h.type==="bond"?"":""}),a.jsx("button",{onClick:()=>m(h.id),className:"text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(je,{className:"w-4 h-4"})})]}),a.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-1",children:h.title}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:h.content})]},h.id)):a.jsx("div",{className:"col-span-full py-8 text-center border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl",children:a.jsx("p",{className:"text-slate-500",children:"    ."})})})]})]})},vS=({character:e,handleReset:t,handleModify:n,sheetRef:r})=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 flex items-center gap-2 self-start sm:self-center",children:[a.jsx(Pe,{className:"w-6 h-6"}),"7.   "]}),a.jsxs("div",{className:"flex gap-2 self-end sm:self-center",children:[a.jsxs("button",{onClick:n,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white transition-colors text-sm font-bold flex items-center gap-2",children:[a.jsx(iu,{className:"w-4 h-4"}),"  "]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-red-100 dark:bg-red-600/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-600/50 rounded-lg hover:bg-red-200 dark:hover:bg-red-600 hover:text-red-700 dark:hover:text-white transition-colors text-sm font-bold flex items-center gap-2",children:[a.jsx(Ro,{className:"w-4 h-4"}),"   "]})]})]}),a.jsx("div",{ref:r,className:"mb-10",children:a.jsx(nS,{character:e})})]}),wS=({customAbilities:e,customItems:t,rulebookPages:n})=>{const[r,o]=_.useState(1),s=7,[i,u]=_.useState(lf),[f,c]=_.useState({genderAge:"",appearance:"",commentary:""}),[p,m]=_.useState([]),[h,y]=_.useState([]),[w,E]=_.useState([]),b=_.useMemo(()=>n?iS(n):[],[n]),[x,v]=_.useState({isOpen:!1,message:"",type:"info"}),g=_.useRef(null),[T,N]=_.useState(!1),[S,k]=_.useState(!1),A=_.useCallback((D,z="info")=>{v({isOpen:!0,message:D,type:z})},[]),R=()=>v(D=>({...D,isOpen:!1}));_.useEffect(()=>{const D=JSON.parse(localStorage.getItem("user_created_abilities")||"[]"),z=JSON.parse(localStorage.getItem("user_created_items")||"[]");y(D),E(z)},[]),_.useEffect(()=>{u(D=>({...D,profile:{...D.profile,info:f.genderAge,comment:f.commentary,appearance:f.appearance}}))},[f]),_.useEffect(()=>{const D=p.filter(L=>L.type==="bond").map(L=>`[${L.title}] ${L.content}`).join(`

`),z=p.filter(L=>L.type==="memory").map(L=>`[${L.title}] ${L.content}`).join(`

`);u(L=>({...L,profile:{...L.profile,bonds:D,memories:z}}))},[p]);const C=_.useMemo(()=>!n||n.length===0?"":n.map(D=>D.title).join(", "),[n]),P=_.useCallback(D=>{y(z=>{const L=[...z,D];return Jn(L,"ability"),L}),A(`${D.name}  !  .`,"info")},[A]),$=(D,z)=>{const L=h.map(J=>J===D?z:J);y(L),Jn(L,"ability");const F=i.abilities.enhancements.findIndex(J=>J===D);if(F!==-1){const J=[...i.abilities.enhancements];J[F]=z,u(O=>({...O,abilities:{...O.abilities,enhancements:J}}))}},j=D=>{const z=h.filter(F=>F!==D);if(y(z),Jn(z,"ability"),i.abilities.enhancements.some(F=>F===D)){const F=i.abilities.enhancements.filter(J=>J!==D);u(J=>({...J,abilities:{...J.abilities,enhancements:F}}))}},I=_.useCallback(D=>{E(z=>{const L=[...z,D];return Jn(L,"item"),L}),A(`${D.name}  !  .`,"info")},[A]),V=(D,z)=>{const L=w.map(J=>J===D?z:J);E(L),Jn(L,"item");const F=i.inventory.items.findIndex(J=>J===D);if(F!==-1){const J=[...i.inventory.items];J[F]=z,u(O=>({...O,inventory:{...O.inventory,items:J}}))}},B=D=>{const z=w.filter(F=>F!==D);if(E(z),Jn(z,"item"),i.inventory.items.some(F=>F===D)){const F=i.inventory.items.filter(J=>J!==D);u(J=>({...J,inventory:{...J.inventory,items:F}}))}},q=_.useMemo(()=>{const D=e&&e.length>0?e:QC;return[...h,...D]},[e,h]),M=_.useMemo(()=>{const D=t&&t.length>0?t:XC;return[...w,...D]},[t,w]),U=()=>o(D=>Math.min(D+1,s)),G=()=>o(D=>Math.max(D-1,1)),se=()=>{u(lf),c({genderAge:"",appearance:"",commentary:""}),m([]),o(1)},te=(D,z)=>{u(L=>({...L,profile:{...L.profile,[D]:z}}))},ie=D=>{u(z=>({...z,abilities:{...z.abilities,skills:D}}))},oe=D=>{u(z=>({...z,abilities:{...z.abilities,enhancements:D}}))},Te=D=>{u(z=>({...z,inventory:{...z.inventory,items:D}}))},Ce=_.useCallback(D=>{P(D)},[P]),fe=_.useCallback(D=>{I(D)},[I]),ce=_.useCallback(D=>{const z=`[${D.name}] ${D.description}`;u(L=>({...L,abilities:{...L.abilities,status:L.abilities.status?`${L.abilities.status}
${z}`:z}})),A(`${D.name}  !`,"info")},[A]),ue=_.useCallback(D=>{te("backstory",D),A("  !","info")},[]),re=_.useCallback(D=>{c(z=>({...z,appearance:D})),A("  !","info")},[]),le=_.useCallback(D=>{te("name",D),A(` '${D}' !`,"info")},[]),Ne=_.useCallback(D=>{c(z=>({...z,genderAge:D})),A(" !","info")},[]),et=async()=>{var D;if(g.current){N(!0),k(!1);try{const z=await sf(()=>import("./html2canvas.esm-e0a7d97b.js"),[]),L=z.default||z,F=await sf(()=>import("./jspdf.es.min-700ce04e.js").then(At=>At.j),[]),J=F.jsPDF||((D=F.default)==null?void 0:D.jsPDF)||F.default;if(!L||!J)throw new Error("   .   .");const Q=(await L(g.current,{useCORS:!0,logging:!1,background:document.documentElement.classList.contains("dark")?"#0f172a":"#ffffff"})).toDataURL("image/png"),K=new J("p","mm","a4"),ee=K.internal.pageSize.getWidth(),Y=K.internal.pageSize.getHeight(),ae=K.getImageProperties(Q),de=ae.height*ee/ae.width;let me=de,Se=0;for(K.addImage(Q,"PNG",0,Se,ee,de),me-=Y;me>0;)Se-=Y,K.addPage(),K.addImage(Q,"PNG",0,Se,ee,de),me-=Y;const nt=`${i.profile.name||"Character"}_Sheet.pdf`;K.save(nt)}catch(z){console.error("PDF Export Error:",z),alert(`PDF  . 
(: `+(z instanceof Error?z.message:String(z))+")")}finally{N(!1)}}},$e=()=>{const D="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,2)),z=document.createElement("a");z.setAttribute("href",D),z.setAttribute("download",`${i.profile.name||"character"}_data.json`),document.body.appendChild(z),z.click(),z.remove(),k(!1)},tt=()=>{const D=JSON.stringify(i),z=JSON.stringify({data:D}),L=encodeURIComponent(z),F=document.createElement("form");F.method="POST",F.action=`${sS}?payload=${L}`,F.target="_blank",document.body.appendChild(F),F.submit(),document.body.removeChild(F),k(!1)},Ue=()=>{switch(r){case 1:return a.jsx(dS,{name:i.profile.name,setName:D=>te("name",D),image:i.profile.image,setImage:D=>te("image",D),extendedProfile:f,setExtendedProfile:c});case 2:return a.jsx(cS,{skills:i.abilities.skills,updateSkills:ie,rulebookPages:n});case 3:return a.jsx(pS,{selected:i.abilities.enhancements,updateEnhancements:oe,availableAbilities:q,onCreate:P,onUpdate:$,onDelete:j,userCreatedList:h,showMessage:A,rulebookContext:C});case 4:return a.jsx(hS,{selected:i.inventory.items,updateItems:Te,availableItems:M,onCreate:I,onUpdate:V,onDelete:B,userCreatedList:w,showMessage:A,rulebookContext:C});case 5:return a.jsx(xS,{status:i.abilities.status,setStatus:D=>u(z=>({...z,abilities:{...z.abilities,status:D}})),availableEffects:b,rulebookContext:C,showMessage:A});case 6:return a.jsx(yS,{backstory:i.profile.backstory,setBackstory:D=>te("backstory",D),memoList:p,setMemoList:m});case 7:return a.jsx(vS,{character:i,handleReset:se,handleModify:()=>o(1),sheetRef:g});default:return null}},Z=[" ","","","","","",""];return a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-8 rounded-lg shadow-xl max-w-7xl mx-auto relative transition-colors",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white text-center mb-2",children:" "}),a.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-6",children:"   ."}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"relative pt-1",children:a.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-slate-200 dark:bg-slate-700",children:a.jsx("div",{style:{width:`${r/s*100}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-cyan-600 dark:bg-cyan-500 transition-all duration-500"})})}),a.jsx("div",{className:"flex justify-between text-xs px-1",children:Z.map((D,z)=>{const L=z+1,F=r===L,J=r>L;return a.jsx("button",{onClick:()=>o(L),className:`transition-colors duration-200 font-medium ${F?"text-cyan-600 dark:text-cyan-400 font-bold":J?"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-400"}`,children:D},L)})})]}),a.jsx("div",{className:"min-h-[50vh]",children:Ue()}),a.jsxs("div",{className:"flex justify-between mt-8 border-t border-slate-200 dark:border-slate-700 pt-6",children:[a.jsxs("button",{onClick:G,disabled:r===1,className:"flex items-center gap-2 px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-white rounded-md disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-medium",children:[a.jsx(fi,{className:"w-5 h-5"}),"  "]}),r<s?a.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-8 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-500 transition-colors font-bold shadow-lg shadow-cyan-500/20",children:[r===5?" ( )":" "," ",a.jsx($t,{className:"w-5 h-5"})]}):a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>k(!S),disabled:T,className:"flex items-center gap-2 px-8 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-500 transition-colors font-bold shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[T?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(zc,{className:"w-5 h-5"}),T?" ...":""]}),S&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-xl shadow-xl overflow-hidden animate-fade-in-fast z-50",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("button",{onClick:et,className:"text-left px-4 py-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-slate-700 dark:text-slate-200 transition-colors flex items-center gap-2 text-sm font-medium border-b border-slate-100 dark:border-slate-700",children:[a.jsx(zc,{className:"w-4 h-4 text-red-500"}),"PDF "]}),a.jsxs("button",{onClick:$e,className:"text-left px-4 py-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-slate-700 dark:text-slate-200 transition-colors flex items-center gap-2 text-sm font-medium border-b border-slate-100 dark:border-slate-700",children:[a.jsx(lu,{className:"w-4 h-4 text-green-500"}),"JSON "]}),a.jsxs("button",{onClick:tt,className:"text-left px-4 py-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-slate-700 dark:text-slate-200 transition-colors flex items-center gap-2 text-sm font-medium",children:[a.jsx(X0,{className:"w-4 h-4 text-blue-500"}),"  "]})]})}),S&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>k(!1)})]})]}),a.jsx(aS,{isOpen:x.isOpen,onClose:R,message:x.message,type:x.type}),a.jsx(lS,{onAddAbility:Ce,onAddItem:fe,onAddStatus:ce,onUpdateBackstory:ue,onUpdateAppearance:re,onUpdateName:le,onUpdateBasicInfo:Ne,forcedType:r===1?"profile":r===3?"ability":r===4?"item":r===5?"status":r===6?"backstory":void 0,rulebookContext:C,characterContext:{name:i.profile.name,genderAge:f.genderAge,backstory:i.profile.backstory}})]})},kS=({pages:e,aiClient:t})=>{var A,R;const[n,r]=_.useState(!1),[o,s]=_.useState([]),[i,u]=_.useState(""),[f,c]=_.useState(!1),p=_.useRef(null),m=_.useRef(null),[h,y]=_.useState(!1),[w,E]=_.useState(""),b=()=>{r(!n)};_.useEffect(()=>{o.length===0&&s([{id:"init",role:"model",text:'!   "".      ?'}])},[o.length]),_.useEffect(()=>{var C;n&&((C=m.current)==null||C.scrollIntoView({behavior:"smooth"}))},[o,n,f]);const x=C=>C?typeof C=="string"?C:C.runs?C.runs.map(P=>P.text||"").join(""):C.text||"":"",v=C=>{var I,V,B;if(!C.rows||C.rows.length===0)return"";const P=C.rows.flat().map(q=>x(q)).join(" ");if(P.includes("[npc]")){let q=`
[NPC ]
`;try{const M=x((I=C.rows[0])==null?void 0:I[0]).replace(/\[npc\]/gi,"").trim();if(q+=`/: ${M}
`,C.rows.length>1){const U=C.rows[1].map(G=>x(G)).join(" / ");q+=`: ${U}
`}for(let U=2;U<C.rows.length;U++){const G=x((V=C.rows[U])==null?void 0:V[0]).trim(),se=x((B=C.rows[U])==null?void 0:B[1]).trim();G&&se&&(q+=`${G}: ${se}
`)}}catch{q+=P}return q+`
`}const $=C.rows[0].map(q=>x(q).trim());if($.some(q=>q.includes(""))&&$.some(q=>q.includes(""))){let q=`
[  ]
`;return C.rows[0].forEach((M,U)=>{var ie,oe,Te,Ce;const G=x(M).trim(),se=x(((oe=(ie=C.rows)==null?void 0:ie[1])==null?void 0:oe[U])||"").trim(),te=x(((Ce=(Te=C.rows)==null?void 0:Te[2])==null?void 0:Ce[U])||"").trim();q+=`- ${G}: ${se} (: ${te})
`}),q+`
`}if($.includes("")&&$.includes("")){let q=`
[FAQ /   ]
`;const M=$[0]==="Q & A"||$[0]===""?1:0;for(let U=M;U<C.rows.length;U++){const G=C.rows[U];if(G.length>=3){const se=x(G[0]).trim(),te=x(G[1]).trim(),ie=x(G[2]).trim();se&&ie&&(q+=`Q(${te}): ${se}
A: ${ie}
---
`)}}return q+`
`}if(P.includes("[passive]")||P.includes("[obstacle]")||P.includes("[skill]")){let q=`
[ ]
`;return C.rows.flat().forEach(M=>{let U=x(M).trim();U=U.replace(/\[passive\]|\[obstacle\]|\[skill\]/gi,"").trim(),U&&(q+=`- ${U}
`)}),q+`
`}let j=`
`;j+="| "+C.rows[0].map(q=>x(q).replace(/\n/g," ")).join(" | ")+` |
`,j+="| "+C.rows[0].map(()=>"---").join(" | ")+` |
`;for(let q=1;q<C.rows.length;q++)j+="| "+C.rows[q].map(M=>x(M).replace(/\n/g,"<br>")).join(" | ")+` |
`;return j+`
`};_.useEffect(()=>{if(e.length===0)return;const P=` ' ' TRPG    ''. 
         [ ]    .
        
        []
        1. ** :**
            - ** /:**  "", " ", ""     ,         .
            - **/ :**   , , , NPC,    , ** [ ] ** .    .

        2. ** :**
            -   . (3~4  )
            - **   (<think>  )   .**
            -     ****    .

        3. **   (   ):**
            -           . **   .**
            - **:** ' :', ' :'       .
            - [[REF:]] ( 2).  '', ' ', 'NPC '    .
            - [[Q:]] ( 3).      .
        
        [ ]
        ${e.map($=>{let j=`
# : ${$.title}
`;return $.content.forEach(I=>{var B;if(I.type==="table"){j+=v(I);return}let V=I.text||((B=I.runs)==null?void 0:B.map(q=>q.text).join(""))||"";if(V=V.trim(),!!V)switch(I.type){case"heading_1":j+=`
## ${V}
`;break;case"heading_2":j+=`
### ${V}
`;break;case"heading_3":j+=`
#### ${V}
`;break;case"heading_4":case"heading_5":case"heading_6":j+=`
##### ${V}
`;break;case"list_item":j+=`- ${V}
`;break;default:j+=`${V}
`}}),j}).join(`
`).substring(0,35e3)}... ( )`;E(P),y(!0)},[e]);const g=()=>{if(p.current)return p.current;const C=t.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:w}});return p.current=C,C},T=C=>{let P=C.replace(/<think>[\s\S]*?<\/think>/g,"");return P=P.replace(/\[\[REF:(.*?)\]\]/g,""),P=P.replace(/\[\[Q:(.*?)\]\]/g,""),P=P.replace(/(\s*|\s*|Related\s*Sections?|Suggested\s*Questions?)\s*[:]\s*/gi,""),P.trim()},N=(C,P)=>C?C.split(/(\*\*[\s\S]*?\*\*)/g).map((j,I)=>{if(j.startsWith("**")&&j.endsWith("**")&&j.length>=4){const V=j.slice(2,-2);return P==="user"?a.jsx("strong",{className:"font-extrabold text-white bg-white/20 px-0.5 rounded",children:V},I):a.jsx("strong",{className:"font-extrabold text-slate-900 dark:text-white",children:V},I)}return a.jsx("span",{children:j},I)}):null,S=async(C,P)=>{C==null||C.preventDefault();const $=P||i;if(!$.trim()||!h)return;const j={id:Date.now().toString(),role:"user",text:$};s(V=>[...V,j]),u(""),c(!0);const I=(Date.now()+1).toString();s(V=>[...V,{id:I,role:"model",text:"",isStreaming:!0}]);try{const B=await g().sendMessageStream({message:$});let q="";for await(const ie of B)if(ie.text){q+=ie.text;let oe=q;oe=oe.replace(/<think>[\s\S]*?<\/think>/g,""),oe=oe.replace(/<think>[\s\S]*/g,""),oe=oe.replace(/\[\[REF:.*?\]\]/g,""),oe=oe.replace(/\[\[Q:.*?\]\]/g,""),oe=oe.replace(/(\s*|\s*)\s*[:]\s*/g,""),oe=oe.replace(/\[\[[^\]]*$/g,""),oe=oe.trimEnd(),s(Te=>Te.map(Ce=>Ce.id===I?{...Ce,text:oe}:Ce))}const M=/\[\[REF:(.*?)\]\]/g,U=/\[\[Q:(.*?)\]\]/g,G=[...q.matchAll(M)].map(ie=>ie[1].trim()).slice(0,2),se=[...q.matchAll(U)].map(ie=>ie[1].trim()).slice(0,3),te=T(q);s(ie=>ie.map(oe=>oe.id===I?{...oe,text:te,relatedRefs:G,suggestedQuestions:se,isStreaming:!1}:oe))}catch{s(B=>B.map(q=>q.id===I?{...q,text:" .",isStreaming:!1}:q))}finally{c(!1)}},k=C=>{const P=new CustomEvent("rulebook-navigate",{detail:{title:C}});window.dispatchEvent(P)};return a.jsxs("div",{className:"fixed bottom-6 left-6 z-[200] flex flex-col items-start pointer-events-none",children:[a.jsxs("div",{className:`
                mb-4 w-80 sm:w-96 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-2xl shadow-2xl overflow-hidden flex flex-col transition-all duration-300 origin-bottom-left
                ${n?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 translate-y-4 pointer-events-none h-0"}
            `,style:{maxHeight:"600px"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-3 flex justify-between items-center border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[a.jsx(Hs,{className:"w-5 h-5 text-cyan-100"}),a.jsx("span",{children:"  "})]}),a.jsx("button",{onClick:b,className:"text-white/70 hover:text-white transition-colors p-1 rounded-full hover:bg-white/10",children:a.jsx(je,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900/50 custom-scrollbar h-[350px]",children:[o.map((C,P)=>{var $,j;return a.jsxs("div",{className:`flex flex-col ${C.role==="user"?"items-end":"items-start"} space-y-2`,children:[C.text&&a.jsx("div",{className:`
                                    max-w-[90%] px-4 py-3 rounded-2xl text-sm whitespace-pre-wrap shadow-sm leading-relaxed relative animate-fade-in-fast
                                    ${C.role==="user"?"bg-cyan-600 text-white rounded-tr-none":"bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none border border-slate-200 dark:border-slate-600"}
                                `,children:(C.isStreaming,N(C.text,C.role))}),C.role==="model"&&!C.isStreaming&&(((($=C.relatedRefs)==null?void 0:$.length)??0)>0||(((j=C.suggestedQuestions)==null?void 0:j.length)??0)>0)&&a.jsxs("div",{className:"pl-2 flex flex-col gap-2 animate-fade-in w-full max-w-[90%]",children:[C.relatedRefs&&C.relatedRefs.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:C.relatedRefs.map((I,V)=>a.jsxs("button",{onClick:()=>k(I),className:"text-xs bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 px-2 py-1 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900 hover:text-cyan-700 dark:hover:text-cyan-300 transition-colors flex items-center gap-1",children:[a.jsx(Pe,{className:"w-3 h-3"})," ",I]},V))}),C.suggestedQuestions&&C.suggestedQuestions.length>0&&a.jsx("div",{className:"flex flex-col gap-1 mt-1",children:C.suggestedQuestions.map((I,V)=>a.jsxs("button",{onClick:()=>S(void 0,I),className:"text-xs text-left text-cyan-600 dark:text-cyan-400 hover:underline flex items-center gap-1 py-0.5",children:[a.jsx($t,{className:"w-3 h-3"})," ",I]},V))})]})]},C.id||P)}),f&&(!((A=o[o.length-1])!=null&&A.isStreaming)||!((R=o[o.length-1])!=null&&R.text))&&a.jsx("div",{className:"flex justify-start animate-fade-in-fast",children:a.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl rounded-tl-none px-4 py-3 border border-slate-200 dark:border-slate-600 shadow-sm",children:a.jsxs("div",{className:"flex gap-1.5 items-center h-full",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"})]})})}),a.jsx("div",{ref:m})]}),a.jsxs("form",{onSubmit:C=>S(C),className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:C=>u(C.target.value),placeholder:"  ...",className:"flex-1 bg-slate-100 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-full px-4 py-2 text-sm text-slate-900 dark:text-white focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500",disabled:f}),a.jsx("button",{type:"submit",disabled:!i.trim()||f,className:"p-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-full hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a.jsx(mi,{className:"w-4 h-4"})})]})]}),a.jsxs("button",{onClick:b,className:`
                    w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 relative group pointer-events-auto
                    ${n?"bg-slate-700 text-white rotate-90":"bg-gradient-to-r from-cyan-600 to-blue-600 text-white hover:scale-110 shadow-cyan-500/30"}
                `,title:" ",children:[n?a.jsx(je,{className:"w-6 h-6"}):a.jsx(Hs,{className:"w-6 h-6"}),!n&&a.jsx("span",{className:"absolute left-full ml-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-white text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-600 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity shadow-md",children:"  "})]})]})},CS=()=>{const[e,t]=_.useState(!1),[n,r]=_.useState(""),[o,s]=_.useState(""),[i,u]=_.useState(!1),[f,c]=_.useState(!1);_.useEffect(()=>{const h=localStorage.getItem("user_gemini_api_key");h&&(s(h),r(h))},[]);const p=()=>{n.trim()&&(c(!0),setTimeout(()=>{localStorage.setItem("user_gemini_api_key",n.trim()),s(n.trim()),c(!1),console.log(" API ")},500))},m=()=>{window.confirm(" API Key ?")&&(localStorage.removeItem("user_gemini_api_key"),s(""),r(""),console.log(" API "))};return a.jsxs(a.Fragment,{children:[!e&&a.jsx("button",{onClick:()=>t(!0),className:"fixed top-1/2 right-0 transform -translate-y-1/2 bg-slate-200 dark:bg-slate-700/80 p-2 rounded-l-md shadow-lg hover:bg-cyan-100 dark:hover:bg-slate-600 hover:text-cyan-600 dark:hover:text-cyan-400 transition-all z-50 group",title:"",children:a.jsx(Jc,{className:"w-6 h-6 text-slate-500 dark:text-slate-400 group-hover:text-cyan-600 dark:group-hover:text-cyan-400"})}),e&&a.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30 dark:bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>t(!1)}),a.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:a.jsx("div",{className:"pointer-events-auto w-screen max-w-sm transform transition ease-in-out duration-500 sm:duration-700 translate-x-0",children:a.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white dark:bg-slate-900 shadow-2xl",children:[a.jsxs("div",{className:"px-4 py-6 sm:px-6 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[a.jsx(Jc,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"}),""]}),a.jsx("div",{className:"ml-3 flex h-7 items-center",children:a.jsxs("button",{type:"button",className:"rounded-md bg-transparent text-slate-400 hover:text-slate-500 focus:outline-none",onClick:()=>t(!1),children:[a.jsx("span",{className:"sr-only",children:"Close panel"}),a.jsx(je,{className:"w-6 h-6"})]})})]}),a.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"   ."})]}),a.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6 space-y-8",children:a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:a.jsx(NC,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:"Google Gemini API Key"}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" API   (BYOK)"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:i?"text":"password",value:n,onChange:h=>r(h.target.value),placeholder:"AIza...",className:"w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg py-2 pl-3 pr-10 text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow"}),a.jsx("button",{type:"button",onClick:()=>u(!i),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i?a.jsx(bC,{className:"w-4 h-4"}):a.jsx(_C,{className:"w-4 h-4"})})]}),o?a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-emerald-600 dark:text-emerald-400 font-medium bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded",children:[a.jsx(Z0,{className:"w-3 h-3"}),""]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:p,className:"text-xs px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded font-bold transition-colors",children:f?" ...":""}),a.jsx("button",{onClick:m,className:"text-xs px-2 py-1.5 bg-red-100 hover:bg-red-200 text-red-600 dark:bg-red-900/30 dark:hover:bg-red-900/50 dark:text-red-400 rounded transition-colors",title:"",children:a.jsx(Ro,{className:"w-4 h-4"})})]})]}):a.jsx("button",{onClick:p,disabled:!n.trim(),className:"w-full py-2 bg-indigo-600 hover:bg-indigo-500 disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:cursor-not-allowed text-white rounded-lg font-bold text-sm transition-colors shadow-sm",children:f?" ...":""})]}),a.jsxs("p",{className:"mt-3 text-[10px] text-slate-400 dark:text-slate-500 leading-relaxed",children:["*   (Local Storage)    .",a.jsx("br",{}),"*         AI      ."]})]})})]})})})]})]})},SS="AIzaSyDVnAaIbEPABcQrGRZV_iVh7YgqcB07rhA",ES=new Er({apiKey:SS}),TS=()=>{const[e,t]=_.useState("rulebook"),[n,r]=_.useState("dark"),[o,s]=_.useState(null),[i,u]=_.useState(!1),[f,c]=_.useState(null),[p,m]=_.useState(""),[h,y]=_.useState(!0),[w,E]=_.useState(0),[b,x]=_.useState(""),[v,g]=_.useState(""),[T,N]=_.useState(""),[S,k]=_.useState(""),[A,R]=_.useState(""),[C,P]=_.useState(""),[$,j]=_.useState(""),[I,V]=_.useState(""),[B,q]=_.useState(""),[M,U]=_.useState(!1),[G,se]=_.useState(!1),[te,ie]=_.useState({abilities:[],items:[]}),[oe,Te]=_.useState([]);_.useEffect(()=>{const Z=localStorage.getItem("theme");Z?(r(Z),Z==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")):(r("dark"),document.documentElement.classList.add("dark"))},[]);const Ce=()=>{const Z=n==="dark"?"light":"dark";r(Z),localStorage.setItem("theme",Z),Z==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},fe=_.useCallback((Z,D)=>{ie({abilities:Z,items:D})},[]),ce=_.useCallback(Z=>{Te(Z)},[]);_.useEffect(()=>{const Z=localStorage.getItem("lastUpdatedTime");Z&&s(new Date(Z))},[]);const ue=_.useCallback((Z,D)=>{if(y(!1),Z==="success"){const z=new Date;s(z),localStorage.setItem("lastUpdatedTime",z.toISOString()),u(!1),c(null)}else u(!0),D?c(D.message):f||c("   ")},[f]),re=_.useCallback(Z=>{x(Z)},[]),le=_.useCallback(Z=>{g(Z)},[]),Ne=_.useCallback(Z=>{N(Z)},[]);_.useEffect(()=>{const Z={"AKfycbylvOe0ltS1u558pgWjj_cHVtFBvKvecmasv1KEH0Sbc-V0fU2u7-xU02AmfyGw364A":69,AKfycbzYZ7Byxr6qOBL2Emi7J3cWQfHzHnvkQiYp1r2x28SAWXMEitOyq0p29gg9flM_UF9L:70,"AKfycbyOS8KsUDB375DtsvUUz1GbhJagxERlVJRRv6Svde8K_fGxdOTPVNF-9oOFNeQgfwMo":72,"AKfycbylCR1uPC9vjA3Xw62932vd1Hndwysqglw9-ktIPSC2iF8zRB6qYOrBOZGFvq6D5hva":80,"AKfycbyPo0la3Zfa_EuNzmO6caEhuQXvqIsRiaecZhgnbxhZxDh_GDQk-fpeoLznvDHnZIth":81,"AKfycbzOtoczmXQAMBFESt2Tp33JWfR45D2_-VGA11BROUWVdUX0Z4Au7M3qZ-eDJ5lKdgnB":83,"AKfycby_XDKGTcB-NLSgxQpdCmHi8WrrL4IEyFRXf9SHSFAsHXJAijhFRLO4gd0QCc0RNuOWIw":3,"AKfycbwyg-Iut_KAr-w7BrcywoDCsZOLUG3gNG_XPFsGBlLEi1UxCpHlzn_2eSlwwYRj7_U4bw":4,AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY:13,"AKfycbw6xP1Bye6yAIbARXBrwUQvqTAFSi84sYk_rf5jiRc6GJxlxzCDAVLXQ-WH7FCrMcHf":14,"AKfycbxJU07yzY5Jxja2jOy1i1H8HAnO-ETyA_8RYcj3jNAnwhONyCybHKBU0myIEu4VErh7":2,"AKfycbzPYTZcydgM5AsY2zguD-cd3qkbLfn4oceLb4xyI-XF9sKtHdodmEwrMYNgOyAi58A1Ag":3,"AKfycbwOtnSxBJfl32DtLw-5RnXVsQVgQPaonEmHTIEtRh5PqdsBu_WOf2KwwUNGXGS0gPgnYg":4,AKfycbzSh2knOCgY1d1SSvuP2ZcrGbRb_r9mZ5kPM6ZPcB9EMl288qxoRB0bx4QZJDugol2chg:6,AKfycbw_f7QZtj6ioS0KOfjMVqwrumBpQUYZ8nL5UZlGSLNB5wNdIQYd67MEZeRvJxbgLYnCWQ:7,"AKfycbyg2-bMtNWVnjfV7DwAZDL4hskdEONMnaDmvJVPfy8SuxljJkowzZ5QHqDC5bMBo-I2Cw":8,"AKfycbyqYq9HBNWwdkOaTucQQ3Db2aMhy10XUwgsdDgET8t-60YzzGMKNRh-4U5lKhgBCtq7-Q":11,AKfycbxLtDwPiCAMGhxoYOpI5x3Gl1TNQ9bqldV6HujPsKpISxh3twZW0kDvE583F4P0VxbQrw:12,"AKfycbxyVOqSLdppiVS3-Tz4m7P8_e5ruVxhRQPzlfKdFcSVNBUPzXIW-w_btfwBkorwGU1gFw":13,"AKfycbzXpUvilAISpJlbcRGVUvZgpRAhPLMN3CHLIFYnMo0C-FWAGsSW2qzX0CVQA216yY4Esg":15,AKfycbwOnT4wDeH8SOP39GFNJRw8oURvMk6zfkT6ekw5C_qwgBd38UcvJZxllt79ZqSs1oOzkg:18,"AKfycbyJzlRBusMNXLcZr-WS-812ItkZd6vi7xq6AQ-NhVDNTro3kO-qf6M6c7GFTTt5Id4D9A":19},D="AKfycbw6xP1Bye6yAIbARXBrwUQvqTAFSi84sYk_rf5jiRc6GJxlxzCDAVLXQ-WH7FCrMcHf",z="AKfycbzbvAajmyWMO4dLe2OeukVbJ9wtOVi_-W2Zadc4qMLlbgyaQ-yTDKTPnPT57Y7DmcVB",L="AKfycbyJzlRBusMNXLcZr-WS-812ItkZd6vi7xq6AQ-NhVDNTro3kO-qf6M6c7GFTTt5Id4D9A";let F={};try{const O=localStorage.getItem("deployVersions");O&&(F=JSON.parse(O))}catch(O){console.error("Failed to parse deploy versions from localStorage",O),localStorage.removeItem("deployVersions")}const J=(O,Q)=>{if(!O)return;const K=O.slice(-6);let ee="";if(Z[O])ee=`v${Z[O]}(${K})`;else{let Y;if(F[O])Y=F[O];else{const de=Object.values(F).reduce((me,Se)=>Math.max(me,Se),0)+1;F[O]=de,Y=de;try{localStorage.setItem("deployVersions",JSON.stringify(F))}catch(me){console.error("Failed to save deploy versions to localStorage",me)}}ee=`v${Y}(${K})`}Q==="main"?k(ee):Q==="addon"?R(ee):Q==="second"?P(ee):Q==="export"?j(ee):Q==="aiDatabase"?V(ee):Q==="personalSheet"&&q(ee)};b&&J(b,"main"),v&&J(v,"addon"),T&&J(T,"second"),J(D,"export"),J(z,"aiDatabase"),J(L,"personalSheet")},[b,v,T]),_.useEffect(()=>{if(!o){m("");return}const Z=()=>{const L=Math.floor((new Date().getTime()-o.getTime())/1e3);if(L<5)m("  ");else if(L<60)m(`${L}  `);else{const F=Math.floor(L/60);m(`${F}  `)}};Z();const D=setInterval(Z,5e3);return()=>clearInterval(D)},[o]);const et=()=>{y(!0),u(!1),c(null),U(!1),E(Z=>Z+1)},$e=()=>{U(!0),y(!0),c(" "),E(Z=>Z+1)},tt=Z=>`px-6 py-2 rounded-md text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500 ${Z?"bg-cyan-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"}`,Ue=()=>{let Z;return h?Z=a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:" ..."}):i?Z=a.jsx("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",title:f||"",children:a.jsxs("span",{children:["    : ",a.jsx("span",{className:"font-mono text-xs",children:f})]})}):o&&(Z=a.jsx("span",{className:"text-green-600 dark:text-green-400",children:p})),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Z,a.jsx("button",{onClick:et,className:"p-1 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors","aria-label":" ",children:a.jsx(ta,{className:"w-4 h-4"})})]})};return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 font-sans transition-colors duration-300",children:[a.jsx("header",{className:"bg-white dark:bg-slate-800 shadow-lg sticky top-0 z-50 transition-colors duration-300",children:a.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors duration-300",children:"Akasha Simpli TRPG Helper"}),Ue()]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:Ce,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-yellow-300 dark:hover:bg-slate-600 transition-colors",title:n==="dark"?" ":" ",children:n==="dark"?a.jsx(kC,{className:"w-5 h-5"}):a.jsx(CC,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>t("rulebook"),className:tt(e==="rulebook"),children:" "}),a.jsx("button",{onClick:()=>t("creator"),className:tt(e==="creator"),children:" "})]})]})})}),a.jsxs("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[a.jsx("div",{className:e==="rulebook"?"block":"hidden",children:a.jsx(WC,{onUpdate:ue,refreshTrigger:w,setDeployVersion:re,setAddonDeployVersion:le,setSecondDeployVersion:Ne,forceOffline:M,onDataLoaded:fe,onPagesLoaded:ce,navigateToCreator:()=>t("creator")})}),e==="creator"&&a.jsx(wS,{customAbilities:te.abilities,customItems:te.items,rulebookPages:oe})]}),a.jsx(kS,{pages:oe,aiClient:ES}),a.jsx(CS,{}),a.jsxs("footer",{className:"text-center p-4 text-slate-500 text-sm space-y-2",children:[a.jsx("p",{children:"Created for Akasha Simpli TRPG. All rules content provided by KingCrab."}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[S&&a.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600",children:["Deploy Ver: ",S]}),C&&a.jsx("button",{onClick:()=>se(!G),className:"p-0.5 text-slate-400 hover:text-slate-600 dark:text-slate-600 dark:hover:text-slate-400 focus:outline-none transition-colors","aria-label":"Toggle Addon Version",children:a.jsx($t,{className:`w-3 h-3 transition-transform duration-200 ${G?"rotate-90":""}`})})]}),G&&C&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Addon Deploy Ver: ",C]}),G&&$&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Export Creation Ver: ",$]}),G&&I&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Ai Data Base Ver: ",I]}),G&&B&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Personal Sheet Distribution Ver: ",B]}),a.jsx("button",{onClick:$e,className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-600 dark:hover:text-slate-400 underline decoration-dotted transition-colors",children:"  "})]})]})]})};class NS extends hs.Component{constructor(){super(...arguments);du(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){var n,r;return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 p-4 font-sans",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-10 h-10 text-red-600 dark:text-red-400",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),a.jsx("h1",{className:"text-2xl font-bold mb-2 text-slate-900 dark:text-white",children:" "}),a.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm",children:["     .",a.jsx("br",{}),"   ."]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 rounded-lg p-4 mb-6 text-left overflow-auto max-h-40 border border-slate-200 dark:border-slate-700",children:[a.jsx("p",{className:"text-xs font-mono text-slate-500 mb-1 font-bold tracking-wider",children:"ERROR CODE"}),a.jsxs("p",{className:"text-sm font-mono text-red-600 dark:text-red-400 break-all font-medium leading-relaxed",children:[((n=this.state.error)==null?void 0:n.name)||"CRITICAL_FAILURE",": ",((r=this.state.error)==null?void 0:r.message)||"Unknown error occurred during rendering."]})]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-3 px-4 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-bold transition-colors shadow-lg shadow-cyan-500/20 flex items-center justify-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-2.695A8.25 8.25 0 005.166 6.166L2 9.348"})}),""]})]})}):this.props.children}}const ih=document.getElementById("root");if(!ih)throw new Error("Could not find root element to mount to");const _S=Zi.createRoot(ih);_S.render(a.jsx(hs.StrictMode,{children:a.jsx(NS,{children:a.jsx(TS,{})})}));export{sf as _,IS as c,ch as g};
