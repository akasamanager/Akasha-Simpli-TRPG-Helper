(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var mS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var of={exports:{}},Js={},sf={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var No=Symbol.for("react.element"),ih=Symbol.for("react.portal"),lh=Symbol.for("react.fragment"),ah=Symbol.for("react.strict_mode"),uh=Symbol.for("react.profiler"),dh=Symbol.for("react.provider"),ch=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),hh=Symbol.for("react.memo"),mh=Symbol.for("react.lazy"),au=Symbol.iterator;function gh(e){return e===null||typeof e!="object"?null:(e=au&&e[au]||e["@@iterator"],typeof e=="function"?e:null)}var lf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},af=Object.assign,uf={};function br(e,t,n){this.props=e,this.context=t,this.refs=uf,this.updater=n||lf}br.prototype.isReactComponent={};br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function df(){}df.prototype=br.prototype;function oa(e,t,n){this.props=e,this.context=t,this.refs=uf,this.updater=n||lf}var sa=oa.prototype=new df;sa.constructor=oa;af(sa,br.prototype);sa.isPureReactComponent=!0;var uu=Array.isArray,cf=Object.prototype.hasOwnProperty,ia={current:null},ff={key:!0,ref:!0,__self:!0,__source:!0};function pf(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)cf.call(t,r)&&!ff.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:No,type:e,key:s,ref:i,props:o,_owner:ia.current}}function xh(e,t){return{$$typeof:No,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function la(e){return typeof e=="object"&&e!==null&&e.$$typeof===No}function yh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var du=/\/+/g;function yi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yh(""+e.key):t.toString(36)}function Zo(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case No:case ih:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+yi(i,0):r,uu(o)?(n="",e!=null&&(n=e.replace(du,"$&/")+"/"),Zo(o,t,n,"",function(f){return f})):o!=null&&(la(o)&&(o=xh(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(du,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",uu(e))for(var u=0;u<e.length;u++){s=e[u];var c=r+yi(s,u);i+=Zo(s,t,n,c,o)}else if(c=gh(e),typeof c=="function")for(e=c.call(e),u=0;!(s=e.next()).done;)s=s.value,c=r+yi(s,u++),i+=Zo(s,t,n,c,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Po(e,t,n){if(e==null)return e;var r=[],o=0;return Zo(e,r,"","",function(s){return t.call(n,s,o++)}),r}function vh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var et={current:null},es={transition:null},wh={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:es,ReactCurrentOwner:ia};function hf(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Po,forEach:function(e,t,n){Po(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Po(e,function(){t++}),t},toArray:function(e){return Po(e,function(t){return t})||[]},only:function(e){if(!la(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=br;fe.Fragment=lh;fe.Profiler=uh;fe.PureComponent=oa;fe.StrictMode=ah;fe.Suspense=ph;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wh;fe.act=hf;fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=af({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=ia.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)cf.call(t,c)&&!ff.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:No,type:e.type,key:o,ref:s,props:r,_owner:i}};fe.createContext=function(e){return e={$$typeof:ch,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dh,_context:e},e.Consumer=e};fe.createElement=pf;fe.createFactory=function(e){var t=pf.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:fh,render:e}};fe.isValidElement=la;fe.lazy=function(e){return{$$typeof:mh,_payload:{_status:-1,_result:e},_init:vh}};fe.memo=function(e,t){return{$$typeof:hh,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=es.transition;es.transition={};try{e()}finally{es.transition=t}};fe.unstable_act=hf;fe.useCallback=function(e,t){return et.current.useCallback(e,t)};fe.useContext=function(e){return et.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return et.current.useDeferredValue(e)};fe.useEffect=function(e,t){return et.current.useEffect(e,t)};fe.useId=function(){return et.current.useId()};fe.useImperativeHandle=function(e,t,n){return et.current.useImperativeHandle(e,t,n)};fe.useInsertionEffect=function(e,t){return et.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return et.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return et.current.useMemo(e,t)};fe.useReducer=function(e,t,n){return et.current.useReducer(e,t,n)};fe.useRef=function(e){return et.current.useRef(e)};fe.useState=function(e){return et.current.useState(e)};fe.useSyncExternalStore=function(e,t,n){return et.current.useSyncExternalStore(e,t,n)};fe.useTransition=function(){return et.current.useTransition()};fe.version="18.3.1";sf.exports=fe;var I=sf.exports;const hs=sh(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh=I,Ch=Symbol.for("react.element"),Sh=Symbol.for("react.fragment"),Th=Object.prototype.hasOwnProperty,Eh=kh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_h={key:!0,ref:!0,__self:!0,__source:!0};function mf(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Th.call(t,r)&&!_h.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Ch,type:e,key:s,ref:i,props:o,_owner:Eh.current}}Js.Fragment=Sh;Js.jsx=mf;Js.jsxs=mf;of.exports=Js;var a=of.exports,Zi={},gf={exports:{}},ft={},xf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,$){var B=M.length;M.push($);e:for(;0<B;){var Z=B-1>>>1,se=M[Z];if(0<o(se,$))M[Z]=$,M[B]=se,B=Z;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var $=M[0],B=M.pop();if(B!==$){M[0]=B;e:for(var Z=0,se=M.length,ge=se>>>1;Z<ge;){var Se=2*(Z+1)-1,De=M[Se],je=Se+1,ce=M[je];if(0>o(De,B))je<se&&0>o(ce,De)?(M[Z]=ce,M[je]=B,Z=je):(M[Z]=De,M[Se]=B,Z=Se);else if(je<se&&0>o(ce,B))M[Z]=ce,M[je]=B,Z=je;else break e}}return $}function o(M,$){var B=M.sortIndex-$.sortIndex;return B!==0?B:M.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,u=i.now();e.unstable_now=function(){return i.now()-u}}var c=[],f=[],p=1,m=null,h=3,g=!1,w=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var $=n(f);$!==null;){if($.callback===null)r(f);else if($.startTime<=M)r(f),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(f)}}function E(M){if(S=!1,x(M),!w)if(n(c)!==null)w=!0,L(T);else{var $=n(f);$!==null&&O(E,$.startTime-M)}}function T(M,$){w=!1,S&&(S=!1,y(A),A=-1),g=!0;var B=h;try{for(x($),m=n(c);m!==null&&(!(m.expirationTime>$)||M&&!P());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,h=m.priorityLevel;var se=Z(m.expirationTime<=$);$=e.unstable_now(),typeof se=="function"?m.callback=se:m===n(c)&&r(c),x($)}else r(c);m=n(c)}if(m!==null)var ge=!0;else{var Se=n(f);Se!==null&&O(E,Se.startTime-$),ge=!1}return ge}finally{m=null,h=B,g=!1}}var C=!1,k=null,A=-1,R=5,_=-1;function P(){return!(e.unstable_now()-_<R)}function V(){if(k!==null){var M=e.unstable_now();_=M;var $=!0;try{$=k(!0,M)}finally{$?G():(C=!1,k=null)}}else C=!1}var G;if(typeof v=="function")G=function(){v(V)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,U=b.port2;b.port1.onmessage=V,G=function(){U.postMessage(null)}}else G=function(){N(V,0)};function L(M){k=M,C||(C=!0,G())}function O(M,$){A=N(function(){M(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,L(T))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var B=h;h=$;try{return M()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=h;h=M;try{return $()}finally{h=B}},e.unstable_scheduleCallback=function(M,$,B){var Z=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Z+B:Z):B=Z,M){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=B+se,M={id:p++,callback:$,priorityLevel:M,startTime:B,expirationTime:se,sortIndex:-1},B>Z?(M.sortIndex=B,t(f,M),n(c)===null&&M===n(f)&&(S?(y(A),A=-1):S=!0,O(E,B-Z))):(M.sortIndex=se,t(c,M),w||g||(w=!0,L(T))),M},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(M){var $=h;return function(){var B=h;h=$;try{return M.apply(this,arguments)}finally{h=B}}}})(yf);xf.exports=yf;var Nh=xf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh=I,ct=Nh;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vf=new Set,ao={};function Bn(e,t){vr(e,t),vr(e+"Capture",t)}function vr(e,t){for(ao[e]=t,e=0;e<t.length;e++)vf.add(t[e])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),el=Object.prototype.hasOwnProperty,Ih=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cu={},fu={};function Ah(e){return el.call(fu,e)?!0:el.call(cu,e)?!1:Ih.test(e)?fu[e]=!0:(cu[e]=!0,!1)}function Rh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mh(e,t,n,r){if(t===null||typeof t>"u"||Rh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tt(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var aa=/[\-:]([a-z])/g;function ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aa,ua);He[t]=new tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aa,ua);He[t]=new tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aa,ua);He[t]=new tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new tt(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function da(e,t,n,r){var o=He.hasOwnProperty(t)?He[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mh(t,n,o,r)&&(n=null),r||o===null?Ah(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Kt=bh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Do=Symbol.for("react.element"),Kn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),ca=Symbol.for("react.strict_mode"),tl=Symbol.for("react.profiler"),wf=Symbol.for("react.provider"),kf=Symbol.for("react.context"),fa=Symbol.for("react.forward_ref"),nl=Symbol.for("react.suspense"),rl=Symbol.for("react.suspense_list"),pa=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),Cf=Symbol.for("react.offscreen"),pu=Symbol.iterator;function Fr(e){return e===null||typeof e!="object"?null:(e=pu&&e[pu]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,vi;function Jr(e){if(vi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vi=t&&t[1]||""}return`
`+vi+e}var wi=!1;function ki(e,t){if(!e||wi)return"";wi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var o=f.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,u=s.length-1;1<=i&&0<=u&&o[i]!==s[u];)u--;for(;1<=i&&0<=u;i--,u--)if(o[i]!==s[u]){if(i!==1||u!==1)do if(i--,u--,0>u||o[i]!==s[u]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=u);break}}}finally{wi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jr(e):""}function Ph(e){switch(e.tag){case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return e=ki(e.type,!1),e;case 11:return e=ki(e.type.render,!1),e;case 1:return e=ki(e.type,!0),e;default:return""}}function ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Kn:return"Portal";case tl:return"Profiler";case ca:return"StrictMode";case nl:return"Suspense";case rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kf:return(e.displayName||"Context")+".Consumer";case wf:return(e._context.displayName||"Context")+".Provider";case fa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pa:return t=e.displayName||null,t!==null?t:ol(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return ol(e(t))}catch{}}return null}function Dh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(t);case 8:return t===ca?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lh(e){var t=Sf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lo(e){e._valueTracker||(e._valueTracker=Lh(e))}function Tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Sf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sl(e,t){var n=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ef(e,t){t=t.checked,t!=null&&da(e,"checked",t,!1)}function il(e,t){Ef(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ll(e,t.type,n):t.hasOwnProperty("defaultValue")&&ll(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ll(e,t,n){(t!=="number"||ms(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wr=Array.isArray;function ur(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function al(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(j(92));if(Wr(n)){if(1<n.length)throw Error(j(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function _f(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fo,bf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fh=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(e){Fh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yr[t]=Yr[e]})});function If(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yr.hasOwnProperty(e)&&Yr[e]?(""+t).trim():t+"px"}function Af(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=If(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Uh=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(Uh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function ha(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,dr=null,cr=null;function yu(e){if(e=Ao(e)){if(typeof pl!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Qs(t),pl(e.stateNode,e.type,t))}}function Rf(e){dr?cr?cr.push(e):cr=[e]:dr=e}function Mf(){if(dr){var e=dr,t=cr;if(cr=dr=null,yu(e),t)for(e=0;e<t.length;e++)yu(t[e])}}function Pf(e,t){return e(t)}function Df(){}var Ci=!1;function Lf(e,t,n){if(Ci)return e(t,n);Ci=!0;try{return Pf(e,t,n)}finally{Ci=!1,(dr!==null||cr!==null)&&(Df(),Mf())}}function co(e,t){var n=e.stateNode;if(n===null)return null;var r=Qs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var hl=!1;if(Ht)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){hl=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{hl=!1}function Vh(e,t,n,r,o,s,i,u,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Qr=!1,gs=null,xs=!1,ml=null,jh={onError:function(e){Qr=!0,gs=e}};function $h(e,t,n,r,o,s,i,u,c){Qr=!1,gs=null,Vh.apply(jh,arguments)}function Gh(e,t,n,r,o,s,i,u,c){if($h.apply(this,arguments),Qr){if(Qr){var f=gs;Qr=!1,gs=null}else throw Error(j(198));xs||(xs=!0,ml=f)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ff(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vu(e){if(Hn(e)!==e)throw Error(j(188))}function Bh(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return vu(o),e;if(s===r)return vu(o),t;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,u=o.child;u;){if(u===n){i=!0,n=o,r=s;break}if(u===r){i=!0,r=o,n=s;break}u=u.sibling}if(!i){for(u=s.child;u;){if(u===n){i=!0,n=s,r=o;break}if(u===r){i=!0,r=s,n=o;break}u=u.sibling}if(!i)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function Uf(e){return e=Bh(e),e!==null?Vf(e):null}function Vf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vf(e);if(t!==null)return t;e=e.sibling}return null}var jf=ct.unstable_scheduleCallback,wu=ct.unstable_cancelCallback,Hh=ct.unstable_shouldYield,qh=ct.unstable_requestPaint,Ae=ct.unstable_now,zh=ct.unstable_getCurrentPriorityLevel,ma=ct.unstable_ImmediatePriority,$f=ct.unstable_UserBlockingPriority,ys=ct.unstable_NormalPriority,Jh=ct.unstable_LowPriority,Gf=ct.unstable_IdlePriority,Ws=null,Dt=null;function Wh(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ws,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Yh,Oh=Math.log,Kh=Math.LN2;function Yh(e){return e>>>=0,e===0?32:31-(Oh(e)/Kh|0)|0}var Uo=64,Vo=4194304;function Or(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var u=i&~o;u!==0?r=Or(u):(s&=i,s!==0&&(r=Or(s)))}else i=n&~o,i!==0?r=Or(i):s!==0&&(r=Or(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_t(t),o=1<<n,r|=e[n],t&=~o;return r}function Qh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-_t(s),u=1<<i,c=o[i];c===-1?(!(u&n)||u&r)&&(o[i]=Qh(u,t)):c<=t&&(e.expiredLanes|=u),s&=~u}}function gl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bf(){var e=Uo;return Uo<<=1,!(Uo&4194240)&&(Uo=64),e}function Si(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=n}function Zh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-_t(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function ga(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var xe=0;function Hf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qf,xa,zf,Jf,Wf,xl=!1,jo=[],dn=null,cn=null,fn=null,fo=new Map,po=new Map,on=[],em="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(t.pointerId)}}function Vr(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ao(t),t!==null&&xa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function tm(e,t,n,r,o){switch(t){case"focusin":return dn=Vr(dn,e,t,n,r,o),!0;case"dragenter":return cn=Vr(cn,e,t,n,r,o),!0;case"mouseover":return fn=Vr(fn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return fo.set(s,Vr(fo.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,po.set(s,Vr(po.get(s)||null,e,t,n,r,o)),!0}return!1}function Of(e){var t=In(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ff(n),t!==null){e.blockedOn=t,Wf(e.priority,function(){zf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ts(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fl=r,n.target.dispatchEvent(r),fl=null}else return t=Ao(n),t!==null&&xa(t),e.blockedOn=n,!1;t.shift()}return!0}function Cu(e,t,n){ts(e)&&n.delete(t)}function nm(){xl=!1,dn!==null&&ts(dn)&&(dn=null),cn!==null&&ts(cn)&&(cn=null),fn!==null&&ts(fn)&&(fn=null),fo.forEach(Cu),po.forEach(Cu)}function jr(e,t){e.blockedOn===t&&(e.blockedOn=null,xl||(xl=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,nm)))}function ho(e){function t(o){return jr(o,e)}if(0<jo.length){jr(jo[0],e);for(var n=1;n<jo.length;n++){var r=jo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dn!==null&&jr(dn,e),cn!==null&&jr(cn,e),fn!==null&&jr(fn,e),fo.forEach(t),po.forEach(t),n=0;n<on.length;n++)r=on[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)Of(n),n.blockedOn===null&&on.shift()}var fr=Kt.ReactCurrentBatchConfig,ws=!0;function rm(e,t,n,r){var o=xe,s=fr.transition;fr.transition=null;try{xe=1,ya(e,t,n,r)}finally{xe=o,fr.transition=s}}function om(e,t,n,r){var o=xe,s=fr.transition;fr.transition=null;try{xe=4,ya(e,t,n,r)}finally{xe=o,fr.transition=s}}function ya(e,t,n,r){if(ws){var o=yl(e,t,n,r);if(o===null)Pi(e,t,r,ks,n),ku(e,r);else if(tm(o,e,t,n,r))r.stopPropagation();else if(ku(e,r),t&4&&-1<em.indexOf(e)){for(;o!==null;){var s=Ao(o);if(s!==null&&qf(s),s=yl(e,t,n,r),s===null&&Pi(e,t,r,ks,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Pi(e,t,r,null,n)}}var ks=null;function yl(e,t,n,r){if(ks=null,e=ha(r),e=In(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ff(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ks=e,null}function Kf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zh()){case ma:return 1;case $f:return 4;case ys:case Jh:return 16;case Gf:return 536870912;default:return 16}default:return 16}}var ln=null,va=null,ns=null;function Yf(){if(ns)return ns;var e,t=va,n=t.length,r,o="value"in ln?ln.value:ln.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return ns=o.slice(e,1<r?1-r:void 0)}function rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $o(){return!0}function Su(){return!1}function pt(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$o:Su,this.isPropagationStopped=Su,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=pt(Ir),Io=be({},Ir,{view:0,detail:0}),sm=pt(Io),Ti,Ei,$r,Os=be({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Ti=e.screenX-$r.screenX,Ei=e.screenY-$r.screenY):Ei=Ti=0,$r=e),Ti)},movementY:function(e){return"movementY"in e?e.movementY:Ei}}),Tu=pt(Os),im=be({},Os,{dataTransfer:0}),lm=pt(im),am=be({},Io,{relatedTarget:0}),_i=pt(am),um=be({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),dm=pt(um),cm=be({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fm=pt(cm),pm=be({},Ir,{data:0}),Eu=pt(pm),hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gm[e])?!!t[e]:!1}function ka(){return xm}var ym=be({},Io,{key:function(e){if(e.key){var t=hm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ka,charCode:function(e){return e.type==="keypress"?rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vm=pt(ym),wm=be({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=pt(wm),km=be({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ka}),Cm=pt(km),Sm=be({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tm=pt(Sm),Em=be({},Os,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_m=pt(Em),Nm=[9,13,27,32],Ca=Ht&&"CompositionEvent"in window,Xr=null;Ht&&"documentMode"in document&&(Xr=document.documentMode);var bm=Ht&&"TextEvent"in window&&!Xr,Qf=Ht&&(!Ca||Xr&&8<Xr&&11>=Xr),Nu=String.fromCharCode(32),bu=!1;function Xf(e,t){switch(e){case"keyup":return Nm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qn=!1;function Im(e,t){switch(e){case"compositionend":return Zf(t);case"keypress":return t.which!==32?null:(bu=!0,Nu);case"textInput":return e=t.data,e===Nu&&bu?null:e;default:return null}}function Am(e,t){if(Qn)return e==="compositionend"||!Ca&&Xf(e,t)?(e=Yf(),ns=va=ln=null,Qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qf&&t.locale!=="ko"?null:t.data;default:return null}}var Rm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rm[e.type]:t==="textarea"}function ep(e,t,n,r){Rf(r),t=Cs(t,"onChange"),0<t.length&&(n=new wa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zr=null,mo=null;function Mm(e){cp(e,0)}function Ks(e){var t=er(e);if(Tf(t))return e}function Pm(e,t){if(e==="change")return t}var tp=!1;if(Ht){var Ni;if(Ht){var bi="oninput"in document;if(!bi){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),bi=typeof Au.oninput=="function"}Ni=bi}else Ni=!1;tp=Ni&&(!document.documentMode||9<document.documentMode)}function Ru(){Zr&&(Zr.detachEvent("onpropertychange",np),mo=Zr=null)}function np(e){if(e.propertyName==="value"&&Ks(mo)){var t=[];ep(t,mo,e,ha(e)),Lf(Mm,t)}}function Dm(e,t,n){e==="focusin"?(Ru(),Zr=t,mo=n,Zr.attachEvent("onpropertychange",np)):e==="focusout"&&Ru()}function Lm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(mo)}function Fm(e,t){if(e==="click")return Ks(t)}function Um(e,t){if(e==="input"||e==="change")return Ks(t)}function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:Vm;function go(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!el.call(t,o)||!bt(e[o],t[o]))return!1}return!0}function Mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pu(e,t){var n=Mu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mu(n)}}function rp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function op(){for(var e=window,t=ms();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ms(e.document)}return t}function Sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jm(e){var t=op(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rp(n.ownerDocument.documentElement,n)){if(r!==null&&Sa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Pu(n,s);var i=Pu(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $m=Ht&&"documentMode"in document&&11>=document.documentMode,Xn=null,vl=null,eo=null,wl=!1;function Du(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wl||Xn==null||Xn!==ms(r)||(r=Xn,"selectionStart"in r&&Sa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&go(eo,r)||(eo=r,r=Cs(vl,"onSelect"),0<r.length&&(t=new wa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xn)))}function Go(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zn={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},Ii={},sp={};Ht&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function Ys(e){if(Ii[e])return Ii[e];if(!Zn[e])return e;var t=Zn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sp)return Ii[e]=t[n];return e}var ip=Ys("animationend"),lp=Ys("animationiteration"),ap=Ys("animationstart"),up=Ys("transitionend"),dp=new Map,Lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){dp.set(e,t),Bn(t,[e])}for(var Ai=0;Ai<Lu.length;Ai++){var Ri=Lu[Ai],Gm=Ri.toLowerCase(),Bm=Ri[0].toUpperCase()+Ri.slice(1);wn(Gm,"on"+Bm)}wn(ip,"onAnimationEnd");wn(lp,"onAnimationIteration");wn(ap,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(up,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function Fu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Gh(r,t,void 0,e),e.currentTarget=null}function cp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var u=r[i],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==s&&o.isPropagationStopped())break e;Fu(o,u,f),s=c}else for(i=0;i<r.length;i++){if(u=r[i],c=u.instance,f=u.currentTarget,u=u.listener,c!==s&&o.isPropagationStopped())break e;Fu(o,u,f),s=c}}}if(xs)throw e=ml,xs=!1,ml=null,e}function we(e,t){var n=t[El];n===void 0&&(n=t[El]=new Set);var r=e+"__bubble";n.has(r)||(fp(t,e,2,!1),n.add(r))}function Mi(e,t,n){var r=0;t&&(r|=4),fp(n,e,r,t)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function xo(e){if(!e[Bo]){e[Bo]=!0,vf.forEach(function(n){n!=="selectionchange"&&(Hm.has(n)||Mi(n,!1,e),Mi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bo]||(t[Bo]=!0,Mi("selectionchange",!1,t))}}function fp(e,t,n,r){switch(Kf(t)){case 1:var o=rm;break;case 4:o=om;break;default:o=ya}n=o.bind(null,t,n,e),o=void 0,!hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Pi(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;u!==null;){if(i=In(u),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}u=u.parentNode}}r=r.return}Lf(function(){var f=s,p=ha(n),m=[];e:{var h=dp.get(e);if(h!==void 0){var g=wa,w=e;switch(e){case"keypress":if(rs(n)===0)break e;case"keydown":case"keyup":g=vm;break;case"focusin":w="focus",g=_i;break;case"focusout":w="blur",g=_i;break;case"beforeblur":case"afterblur":g=_i;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Cm;break;case ip:case lp:case ap:g=dm;break;case up:g=Tm;break;case"scroll":g=sm;break;case"wheel":g=_m;break;case"copy":case"cut":case"paste":g=fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_u}var S=(t&4)!==0,N=!S&&e==="scroll",y=S?h!==null?h+"Capture":null:h;S=[];for(var v=f,x;v!==null;){x=v;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,y!==null&&(E=co(v,y),E!=null&&S.push(yo(v,E,x)))),N)break;v=v.return}0<S.length&&(h=new g(h,w,null,n,p),m.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==fl&&(w=n.relatedTarget||n.fromElement)&&(In(w)||w[qt]))break e;if((g||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=f,w=w?In(w):null,w!==null&&(N=Hn(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=f),g!==w)){if(S=Tu,E="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(S=_u,E="onPointerLeave",y="onPointerEnter",v="pointer"),N=g==null?h:er(g),x=w==null?h:er(w),h=new S(E,v+"leave",g,n,p),h.target=N,h.relatedTarget=x,E=null,In(p)===f&&(S=new S(y,v+"enter",w,n,p),S.target=x,S.relatedTarget=N,E=S),N=E,g&&w)t:{for(S=g,y=w,v=0,x=S;x;x=Wn(x))v++;for(x=0,E=y;E;E=Wn(E))x++;for(;0<v-x;)S=Wn(S),v--;for(;0<x-v;)y=Wn(y),x--;for(;v--;){if(S===y||y!==null&&S===y.alternate)break t;S=Wn(S),y=Wn(y)}S=null}else S=null;g!==null&&Uu(m,h,g,S,!1),w!==null&&N!==null&&Uu(m,N,w,S,!0)}}e:{if(h=f?er(f):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var T=Pm;else if(Iu(h))if(tp)T=Um;else{T=Lm;var C=Dm}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=Fm);if(T&&(T=T(e,f))){ep(m,T,n,p);break e}C&&C(e,h,f),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&ll(h,"number",h.value)}switch(C=f?er(f):window,e){case"focusin":(Iu(C)||C.contentEditable==="true")&&(Xn=C,vl=f,eo=null);break;case"focusout":eo=vl=Xn=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,Du(m,n,p);break;case"selectionchange":if($m)break;case"keydown":case"keyup":Du(m,n,p)}var k;if(Ca)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Qn?Xf(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Qf&&n.locale!=="ko"&&(Qn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Qn&&(k=Yf()):(ln=p,va="value"in ln?ln.value:ln.textContent,Qn=!0)),C=Cs(f,A),0<C.length&&(A=new Eu(A,e,null,n,p),m.push({event:A,listeners:C}),k?A.data=k:(k=Zf(n),k!==null&&(A.data=k)))),(k=bm?Im(e,n):Am(e,n))&&(f=Cs(f,"onBeforeInput"),0<f.length&&(p=new Eu("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=k))}cp(m,t)})}function yo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cs(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=co(e,n),s!=null&&r.unshift(yo(e,s,o)),s=co(e,t),s!=null&&r.push(yo(e,s,o))),e=e.return}return r}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uu(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&f!==null&&(u=f,o?(c=co(n,s),c!=null&&i.unshift(yo(n,c,u))):o||(c=co(n,s),c!=null&&i.push(yo(n,c,u)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qm=/\r\n?/g,zm=/\u0000|\uFFFD/g;function Vu(e){return(typeof e=="string"?e:""+e).replace(qm,`
`).replace(zm,"")}function Ho(e,t,n){if(t=Vu(t),Vu(e)!==t&&n)throw Error(j(425))}function Ss(){}var kl=null,Cl=null;function Sl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tl=typeof setTimeout=="function"?setTimeout:void 0,Jm=typeof clearTimeout=="function"?clearTimeout:void 0,ju=typeof Promise=="function"?Promise:void 0,Wm=typeof queueMicrotask=="function"?queueMicrotask:typeof ju<"u"?function(e){return ju.resolve(null).then(e).catch(Om)}:Tl;function Om(e){setTimeout(function(){throw e})}function Di(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ho(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ho(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $u(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Ar,vo="__reactProps$"+Ar,qt="__reactContainer$"+Ar,El="__reactEvents$"+Ar,Km="__reactListeners$"+Ar,Ym="__reactHandles$"+Ar;function In(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[Mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$u(e);e!==null;){if(n=e[Mt])return n;e=$u(e)}return t}e=n,n=e.parentNode}return null}function Ao(e){return e=e[Mt]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Qs(e){return e[vo]||null}var _l=[],tr=-1;function kn(e){return{current:e}}function Ce(e){0>tr||(e.current=_l[tr],_l[tr]=null,tr--)}function ve(e,t){tr++,_l[tr]=e.current,e.current=t}var vn={},Ke=kn(vn),st=kn(!1),Un=vn;function wr(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function it(e){return e=e.childContextTypes,e!=null}function Ts(){Ce(st),Ce(Ke)}function Gu(e,t,n){if(Ke.current!==vn)throw Error(j(168));ve(Ke,t),ve(st,n)}function pp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(j(108,Dh(e)||"Unknown",o));return be({},n,r)}function Es(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Un=Ke.current,ve(Ke,e),ve(st,st.current),!0}function Bu(e,t,n){var r=e.stateNode;if(!r)throw Error(j(169));n?(e=pp(e,t,Un),r.__reactInternalMemoizedMergedChildContext=e,Ce(st),Ce(Ke),ve(Ke,e)):Ce(st),ve(st,n)}var Vt=null,Xs=!1,Li=!1;function hp(e){Vt===null?Vt=[e]:Vt.push(e)}function Qm(e){Xs=!0,hp(e)}function Cn(){if(!Li&&Vt!==null){Li=!0;var e=0,t=xe;try{var n=Vt;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vt=null,Xs=!1}catch(o){throw Vt!==null&&(Vt=Vt.slice(e+1)),jf(ma,Cn),o}finally{xe=t,Li=!1}}return null}var nr=[],rr=0,_s=null,Ns=0,mt=[],gt=0,Vn=null,$t=1,Gt="";function Nn(e,t){nr[rr++]=Ns,nr[rr++]=_s,_s=e,Ns=t}function mp(e,t,n){mt[gt++]=$t,mt[gt++]=Gt,mt[gt++]=Vn,Vn=e;var r=$t;e=Gt;var o=32-_t(r)-1;r&=~(1<<o),n+=1;var s=32-_t(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,$t=1<<32-_t(t)+o|n<<o|r,Gt=s+e}else $t=1<<s|n<<o|r,Gt=e}function Ta(e){e.return!==null&&(Nn(e,1),mp(e,1,0))}function Ea(e){for(;e===_s;)_s=nr[--rr],nr[rr]=null,Ns=nr[--rr],nr[rr]=null;for(;e===Vn;)Vn=mt[--gt],mt[gt]=null,Gt=mt[--gt],mt[gt]=null,$t=mt[--gt],mt[gt]=null}var dt=null,ut=null,Te=!1,Et=null;function gp(e,t){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ut=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vn!==null?{id:$t,overflow:Gt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dt=e,ut=null,!0):!1;default:return!1}}function Nl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(Te){var t=ut;if(t){var n=t;if(!Hu(e,t)){if(Nl(e))throw Error(j(418));t=pn(n.nextSibling);var r=dt;t&&Hu(e,t)?gp(r,n):(e.flags=e.flags&-4097|2,Te=!1,dt=e)}}else{if(Nl(e))throw Error(j(418));e.flags=e.flags&-4097|2,Te=!1,dt=e}}}function qu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function qo(e){if(e!==dt)return!1;if(!Te)return qu(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sl(e.type,e.memoizedProps)),t&&(t=ut)){if(Nl(e))throw xp(),Error(j(418));for(;t;)gp(e,t),t=pn(t.nextSibling)}if(qu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ut=pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ut=null}}else ut=dt?pn(e.stateNode.nextSibling):null;return!0}function xp(){for(var e=ut;e;)e=pn(e.nextSibling)}function kr(){ut=dt=null,Te=!1}function _a(e){Et===null?Et=[e]:Et.push(e)}var Xm=Kt.ReactCurrentBatchConfig;function Gr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var u=o.refs;i===null?delete u[s]:u[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,e))}return e}function zo(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zu(e){var t=e._init;return t(e._payload)}function yp(e){function t(y,v){if(e){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=xn(y,v),y.index=0,y.sibling=null,y}function s(y,v,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,v,x,E){return v===null||v.tag!==6?(v=Bi(x,y.mode,E),v.return=y,v):(v=o(v,x),v.return=y,v)}function c(y,v,x,E){var T=x.type;return T===Yn?p(y,v,x.props.children,E,x.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===nn&&zu(T)===v.type)?(E=o(v,x.props),E.ref=Gr(y,v,x),E.return=y,E):(E=ds(x.type,x.key,x.props,null,y.mode,E),E.ref=Gr(y,v,x),E.return=y,E)}function f(y,v,x,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Hi(x,y.mode,E),v.return=y,v):(v=o(v,x.children||[]),v.return=y,v)}function p(y,v,x,E,T){return v===null||v.tag!==7?(v=Pn(x,y.mode,E,T),v.return=y,v):(v=o(v,x),v.return=y,v)}function m(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Bi(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Do:return x=ds(v.type,v.key,v.props,null,y.mode,x),x.ref=Gr(y,null,v),x.return=y,x;case Kn:return v=Hi(v,y.mode,x),v.return=y,v;case nn:var E=v._init;return m(y,E(v._payload),x)}if(Wr(v)||Fr(v))return v=Pn(v,y.mode,x,null),v.return=y,v;zo(y,v)}return null}function h(y,v,x,E){var T=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:u(y,v,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Do:return x.key===T?c(y,v,x,E):null;case Kn:return x.key===T?f(y,v,x,E):null;case nn:return T=x._init,h(y,v,T(x._payload),E)}if(Wr(x)||Fr(x))return T!==null?null:p(y,v,x,E,null);zo(y,x)}return null}function g(y,v,x,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(x)||null,u(v,y,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Do:return y=y.get(E.key===null?x:E.key)||null,c(v,y,E,T);case Kn:return y=y.get(E.key===null?x:E.key)||null,f(v,y,E,T);case nn:var C=E._init;return g(y,v,x,C(E._payload),T)}if(Wr(E)||Fr(E))return y=y.get(x)||null,p(v,y,E,T,null);zo(v,E)}return null}function w(y,v,x,E){for(var T=null,C=null,k=v,A=v=0,R=null;k!==null&&A<x.length;A++){k.index>A?(R=k,k=null):R=k.sibling;var _=h(y,k,x[A],E);if(_===null){k===null&&(k=R);break}e&&k&&_.alternate===null&&t(y,k),v=s(_,v,A),C===null?T=_:C.sibling=_,C=_,k=R}if(A===x.length)return n(y,k),Te&&Nn(y,A),T;if(k===null){for(;A<x.length;A++)k=m(y,x[A],E),k!==null&&(v=s(k,v,A),C===null?T=k:C.sibling=k,C=k);return Te&&Nn(y,A),T}for(k=r(y,k);A<x.length;A++)R=g(k,y,A,x[A],E),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?A:R.key),v=s(R,v,A),C===null?T=R:C.sibling=R,C=R);return e&&k.forEach(function(P){return t(y,P)}),Te&&Nn(y,A),T}function S(y,v,x,E){var T=Fr(x);if(typeof T!="function")throw Error(j(150));if(x=T.call(x),x==null)throw Error(j(151));for(var C=T=null,k=v,A=v=0,R=null,_=x.next();k!==null&&!_.done;A++,_=x.next()){k.index>A?(R=k,k=null):R=k.sibling;var P=h(y,k,_.value,E);if(P===null){k===null&&(k=R);break}e&&k&&P.alternate===null&&t(y,k),v=s(P,v,A),C===null?T=P:C.sibling=P,C=P,k=R}if(_.done)return n(y,k),Te&&Nn(y,A),T;if(k===null){for(;!_.done;A++,_=x.next())_=m(y,_.value,E),_!==null&&(v=s(_,v,A),C===null?T=_:C.sibling=_,C=_);return Te&&Nn(y,A),T}for(k=r(y,k);!_.done;A++,_=x.next())_=g(k,y,A,_.value,E),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?A:_.key),v=s(_,v,A),C===null?T=_:C.sibling=_,C=_);return e&&k.forEach(function(V){return t(y,V)}),Te&&Nn(y,A),T}function N(y,v,x,E){if(typeof x=="object"&&x!==null&&x.type===Yn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Do:e:{for(var T=x.key,C=v;C!==null;){if(C.key===T){if(T=x.type,T===Yn){if(C.tag===7){n(y,C.sibling),v=o(C,x.props.children),v.return=y,y=v;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===nn&&zu(T)===C.type){n(y,C.sibling),v=o(C,x.props),v.ref=Gr(y,C,x),v.return=y,y=v;break e}n(y,C);break}else t(y,C);C=C.sibling}x.type===Yn?(v=Pn(x.props.children,y.mode,E,x.key),v.return=y,y=v):(E=ds(x.type,x.key,x.props,null,y.mode,E),E.ref=Gr(y,v,x),E.return=y,y=E)}return i(y);case Kn:e:{for(C=x.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=o(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Hi(x,y.mode,E),v.return=y,y=v}return i(y);case nn:return C=x._init,N(y,v,C(x._payload),E)}if(Wr(x))return w(y,v,x,E);if(Fr(x))return S(y,v,x,E);zo(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=o(v,x),v.return=y,y=v):(n(y,v),v=Bi(x,y.mode,E),v.return=y,y=v),i(y)):n(y,v)}return N}var Cr=yp(!0),vp=yp(!1),bs=kn(null),Is=null,or=null,Na=null;function ba(){Na=or=Is=null}function Ia(e){var t=bs.current;Ce(bs),e._currentValue=t}function Il(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pr(e,t){Is=e,Na=or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},or===null){if(Is===null)throw Error(j(308));or=e,Is.dependencies={lanes:0,firstContext:e}}else or=or.next=e;return t}var An=null;function Aa(e){An===null?An=[e]:An.push(e)}function wp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Aa(t)):(n.next=o.next,o.next=n),t.interleaved=n,zt(e,r)}function zt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,zt(e,n)}return o=r.interleaved,o===null?(t.next=t,Aa(r)):(t.next=o.next,o.next=t),r.interleaved=t,zt(e,n)}function os(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ga(e,n)}}function Ju(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function As(e,t,n,r){var o=e.updateQueue;rn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var c=u,f=c.next;c.next=null,i===null?s=f:i.next=f,i=c;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==i&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=o.baseState;i=0,p=f=c=null,u=s;do{var h=u.lane,g=u.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,S=u;switch(h=t,g=n,S.tag){case 1:if(w=S.payload,typeof w=="function"){m=w.call(g,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,h=typeof w=="function"?w.call(g,m,h):w,h==null)break e;m=be({},m,h);break e;case 2:rn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[u]:h.push(u))}else g={eventTime:g,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=g,c=m):p=p.next=g,i|=h;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;h=u,u=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(p===null&&(c=m),o.baseState=c,o.firstBaseUpdate=f,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);$n|=i,e.lanes=i,e.memoizedState=m}}function Wu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(j(191,o));o.call(r)}}}var Ro={},Lt=kn(Ro),wo=kn(Ro),ko=kn(Ro);function Rn(e){if(e===Ro)throw Error(j(174));return e}function Ma(e,t){switch(ve(ko,t),ve(wo,e),ve(Lt,Ro),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}Ce(Lt),ve(Lt,t)}function Sr(){Ce(Lt),Ce(wo),Ce(ko)}function Cp(e){Rn(ko.current);var t=Rn(Lt.current),n=ul(t,e.type);t!==n&&(ve(wo,e),ve(Lt,n))}function Pa(e){wo.current===e&&(Ce(Lt),Ce(wo))}var _e=kn(0);function Rs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fi=[];function Da(){for(var e=0;e<Fi.length;e++)Fi[e]._workInProgressVersionPrimary=null;Fi.length=0}var ss=Kt.ReactCurrentDispatcher,Ui=Kt.ReactCurrentBatchConfig,jn=0,Ne=null,Me=null,Fe=null,Ms=!1,to=!1,Co=0,Zm=0;function ze(){throw Error(j(321))}function La(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function Fa(e,t,n,r,o,s){if(jn=s,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ss.current=e===null||e.memoizedState===null?rg:og,e=n(r,o),to){s=0;do{if(to=!1,Co=0,25<=s)throw Error(j(301));s+=1,Fe=Me=null,t.updateQueue=null,ss.current=sg,e=n(r,o)}while(to)}if(ss.current=Ps,t=Me!==null&&Me.next!==null,jn=0,Fe=Me=Ne=null,Ms=!1,t)throw Error(j(300));return e}function Ua(){var e=Co!==0;return Co=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ne.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function kt(){if(Me===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Fe===null?Ne.memoizedState:Fe.next;if(t!==null)Fe=t,Me=e;else{if(e===null)throw Error(j(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Fe===null?Ne.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function So(e,t){return typeof t=="function"?t(e):t}function Vi(e){var t=kt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=Me,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var u=i=null,c=null,f=s;do{var p=f.lane;if((jn&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=m,i=r):c=c.next=m,Ne.lanes|=p,$n|=p}f=f.next}while(f!==null&&f!==s);c===null?i=r:c.next=u,bt(r,t.memoizedState)||(ot=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ne.lanes|=s,$n|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ji(e){var t=kt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);bt(s,t.memoizedState)||(ot=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Sp(){}function Tp(e,t){var n=Ne,r=kt(),o=t(),s=!bt(r.memoizedState,o);if(s&&(r.memoizedState=o,ot=!0),r=r.queue,Va(Np.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,To(9,_p.bind(null,n,r,o,t),void 0,null),Ue===null)throw Error(j(349));jn&30||Ep(n,t,o)}return o}function Ep(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _p(e,t,n,r){t.value=n,t.getSnapshot=r,bp(t)&&Ip(e)}function Np(e,t,n){return n(function(){bp(t)&&Ip(e)})}function bp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function Ip(e){var t=zt(e,1);t!==null&&Nt(t,e,1,-1)}function Ou(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=ng.bind(null,Ne,e),[t.memoizedState,e]}function To(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ap(){return kt().memoizedState}function is(e,t,n,r){var o=Rt();Ne.flags|=e,o.memoizedState=To(1|t,n,void 0,r===void 0?null:r)}function Zs(e,t,n,r){var o=kt();r=r===void 0?null:r;var s=void 0;if(Me!==null){var i=Me.memoizedState;if(s=i.destroy,r!==null&&La(r,i.deps)){o.memoizedState=To(t,n,s,r);return}}Ne.flags|=e,o.memoizedState=To(1|t,n,s,r)}function Ku(e,t){return is(8390656,8,e,t)}function Va(e,t){return Zs(2048,8,e,t)}function Rp(e,t){return Zs(4,2,e,t)}function Mp(e,t){return Zs(4,4,e,t)}function Pp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dp(e,t,n){return n=n!=null?n.concat([e]):null,Zs(4,4,Pp.bind(null,t,e),n)}function ja(){}function Lp(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&La(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fp(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&La(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Up(e,t,n){return jn&21?(bt(n,t)||(n=Bf(),Ne.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n)}function eg(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=Ui.transition;Ui.transition={};try{e(!1),t()}finally{xe=n,Ui.transition=r}}function Vp(){return kt().memoizedState}function tg(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jp(e))$p(t,n);else if(n=wp(e,t,n,r),n!==null){var o=Xe();Nt(n,e,r,o),Gp(n,t,r)}}function ng(e,t,n){var r=gn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jp(e))$p(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,u=s(i,n);if(o.hasEagerState=!0,o.eagerState=u,bt(u,i)){var c=t.interleaved;c===null?(o.next=o,Aa(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=wp(e,t,o,r),n!==null&&(o=Xe(),Nt(n,e,r,o),Gp(n,t,r))}}function jp(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function $p(e,t){to=Ms=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ga(e,n)}}var Ps={readContext:wt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},rg={readContext:wt,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Ku,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,is(4194308,4,Pp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return is(4194308,4,e,t)},useInsertionEffect:function(e,t){return is(4,2,e,t)},useMemo:function(e,t){var n=Rt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tg.bind(null,Ne,e),[r.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:Ou,useDebugValue:ja,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=Ou(!1),t=e[0];return e=eg.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ne,o=Rt();if(Te){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),Ue===null)throw Error(j(349));jn&30||Ep(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ku(Np.bind(null,r,s,e),[e]),r.flags|=2048,To(9,_p.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rt(),t=Ue.identifierPrefix;if(Te){var n=Gt,r=$t;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Co++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},og={readContext:wt,useCallback:Lp,useContext:wt,useEffect:Va,useImperativeHandle:Dp,useInsertionEffect:Rp,useLayoutEffect:Mp,useMemo:Fp,useReducer:Vi,useRef:Ap,useState:function(){return Vi(So)},useDebugValue:ja,useDeferredValue:function(e){var t=kt();return Up(t,Me.memoizedState,e)},useTransition:function(){var e=Vi(So)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Sp,useSyncExternalStore:Tp,useId:Vp,unstable_isNewReconciler:!1},sg={readContext:wt,useCallback:Lp,useContext:wt,useEffect:Va,useImperativeHandle:Dp,useInsertionEffect:Rp,useLayoutEffect:Mp,useMemo:Fp,useReducer:ji,useRef:Ap,useState:function(){return ji(So)},useDebugValue:ja,useDeferredValue:function(e){var t=kt();return Me===null?t.memoizedState=e:Up(t,Me.memoizedState,e)},useTransition:function(){var e=ji(So)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Sp,useSyncExternalStore:Tp,useId:Vp,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Al(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ei={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xe(),o=gn(e),s=Bt(r,o);s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,o),t!==null&&(Nt(t,e,o,r),os(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xe(),o=gn(e),s=Bt(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,o),t!==null&&(Nt(t,e,o,r),os(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xe(),r=gn(e),o=Bt(n,r);o.tag=2,t!=null&&(o.callback=t),t=hn(e,o,r),t!==null&&(Nt(t,e,r,n),os(t,e,r))}};function Yu(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!go(n,r)||!go(o,s):!0}function Bp(e,t,n){var r=!1,o=vn,s=t.contextType;return typeof s=="object"&&s!==null?s=wt(s):(o=it(t)?Un:Ke.current,r=t.contextTypes,s=(r=r!=null)?wr(e,o):vn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ei,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Qu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ei.enqueueReplaceState(t,t.state,null)}function Rl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ra(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=wt(s):(s=it(t)?Un:Ke.current,o.context=wr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Al(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ei.enqueueReplaceState(o,o.state,null),As(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Tr(e,t){try{var n="",r=t;do n+=Ph(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function $i(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ig=typeof WeakMap=="function"?WeakMap:Map;function Hp(e,t,n){n=Bt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ls||(Ls=!0,Bl=r),Ml(e,t)},n}function qp(e,t,n){n=Bt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ml(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ml(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Xu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ig;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=wg.bind(null,e,t,n),t.then(e,e))}function Zu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ed(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Bt(-1,1),t.tag=2,hn(n,t,1))),n.lanes|=1),e)}var lg=Kt.ReactCurrentOwner,ot=!1;function Qe(e,t,n,r){t.child=e===null?vp(t,null,n,r):Cr(t,e.child,n,r)}function td(e,t,n,r,o){n=n.render;var s=t.ref;return pr(t,o),r=Fa(e,t,n,r,s,o),n=Ua(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Jt(e,t,o)):(Te&&n&&Ta(t),t.flags|=1,Qe(e,t,r,o),t.child)}function nd(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Wa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,zp(e,t,s,r,o)):(e=ds(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(i,r)&&e.ref===t.ref)return Jt(e,t,o)}return t.flags|=1,e=xn(s,r),e.ref=t.ref,e.return=t,t.child=e}function zp(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(go(s,r)&&e.ref===t.ref)if(ot=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,Jt(e,t,o)}return Pl(e,t,n,r,o)}function Jp(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ir,at),at|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(ir,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(ir,at),at|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ve(ir,at),at|=r;return Qe(e,t,o,n),t.child}function Wp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,n,r,o){var s=it(n)?Un:Ke.current;return s=wr(t,s),pr(t,o),n=Fa(e,t,n,r,s,o),r=Ua(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Jt(e,t,o)):(Te&&r&&Ta(t),t.flags|=1,Qe(e,t,n,o),t.child)}function rd(e,t,n,r,o){if(it(n)){var s=!0;Es(t)}else s=!1;if(pr(t,o),t.stateNode===null)ls(e,t),Bp(t,n,r),Rl(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var c=i.context,f=n.contextType;typeof f=="object"&&f!==null?f=wt(f):(f=it(n)?Un:Ke.current,f=wr(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==r||c!==f)&&Qu(t,i,r,f),rn=!1;var h=t.memoizedState;i.state=h,As(t,r,i,o),c=t.memoizedState,u!==r||h!==c||st.current||rn?(typeof p=="function"&&(Al(t,n,p,r),c=t.memoizedState),(u=rn||Yu(t,n,u,r,h,c,f))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=f,r=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,kp(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:St(t.type,u),i.props=f,m=t.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=wt(c):(c=it(n)?Un:Ke.current,c=wr(t,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==m||h!==c)&&Qu(t,i,r,c),rn=!1,h=t.memoizedState,i.state=h,As(t,r,i,o);var w=t.memoizedState;u!==m||h!==w||st.current||rn?(typeof g=="function"&&(Al(t,n,g,r),w=t.memoizedState),(f=rn||Yu(t,n,f,r,h,w,c)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=f):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Dl(e,t,n,r,s,o)}function Dl(e,t,n,r,o,s){Wp(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Bu(t,n,!1),Jt(e,t,s);r=t.stateNode,lg.current=t;var u=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Cr(t,e.child,null,s),t.child=Cr(t,null,u,s)):Qe(e,t,u,s),t.memoizedState=r.state,o&&Bu(t,n,!0),t.child}function Op(e){var t=e.stateNode;t.pendingContext?Gu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gu(e,t.context,!1),Ma(e,t.containerInfo)}function od(e,t,n,r,o){return kr(),_a(o),t.flags|=256,Qe(e,t,n,r),t.child}var Ll={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kp(e,t,n){var r=t.pendingProps,o=_e.current,s=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ve(_e,o&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ri(i,r,0,null),e=Pn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fl(n),t.memoizedState=Ll,e):$a(t,i));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return ag(e,t,i,r,u,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,u=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=xn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?s=xn(u,s):(s=Pn(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Fl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Ll,r}return s=e.child,e=s.sibling,r=xn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $a(e,t){return t=ri({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jo(e,t,n,r){return r!==null&&_a(r),Cr(t,e.child,null,n),e=$a(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ag(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=$i(Error(j(422))),Jo(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ri({mode:"visible",children:r.children},o,0,null),s=Pn(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Cr(t,e.child,null,i),t.child.memoizedState=Fl(i),t.memoizedState=Ll,s);if(!(t.mode&1))return Jo(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(j(419)),r=$i(s,r,void 0),Jo(e,t,i,r)}if(u=(i&e.childLanes)!==0,ot||u){if(r=Ue,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,zt(e,o),Nt(r,e,o,-1))}return Ja(),r=$i(Error(j(421))),Jo(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=kg.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,ut=pn(o.nextSibling),dt=t,Te=!0,Et=null,e!==null&&(mt[gt++]=$t,mt[gt++]=Gt,mt[gt++]=Vn,$t=e.id,Gt=e.overflow,Vn=t),t=$a(t,r.children),t.flags|=4096,t)}function sd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Il(e.return,t,n)}function Gi(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Yp(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(Qe(e,t,r.children,n),r=_e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,n,t);else if(e.tag===19)sd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ve(_e,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Rs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Gi(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Rs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Gi(t,!0,n,null,s);break;case"together":Gi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ls(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=xn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ug(e,t,n){switch(t.tag){case 3:Op(t),kr();break;case 5:Cp(t);break;case 1:it(t.type)&&Es(t);break;case 4:Ma(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ve(bs,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ve(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?Kp(e,t,n):(ve(_e,_e.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);ve(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ve(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,Jp(e,t,n)}return Jt(e,t,n)}var Qp,Ul,Xp,Zp;Qp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ul=function(){};Xp=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Rn(Lt.current);var s=null;switch(n){case"input":o=sl(e,o),r=sl(e,r),s=[];break;case"select":o=be({},o,{value:void 0}),r=be({},r,{value:void 0}),s=[];break;case"textarea":o=al(e,o),r=al(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ss)}dl(n,r);var i;n=null;for(f in o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&o[f]!=null)if(f==="style"){var u=o[f];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ao.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(u=o!=null?o[f]:void 0,r.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ao.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&we("scroll",e),s||u===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};Zp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Br(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dg(e,t,n){var r=t.pendingProps;switch(Ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return it(t.type)&&Ts(),Je(t),null;case 3:return r=t.stateNode,Sr(),Ce(st),Ce(Ke),Da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(zl(Et),Et=null))),Ul(e,t),Je(t),null;case 5:Pa(t);var o=Rn(ko.current);if(n=t.type,e!==null&&t.stateNode!=null)Xp(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(j(166));return Je(t),null}if(e=Rn(Lt.current),qo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Mt]=t,r[vo]=s,e=(t.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(o=0;o<Kr.length;o++)we(Kr[o],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":hu(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":gu(r,s),we("invalid",r)}dl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,u,e),o=["children",""+u]):ao.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&we("scroll",r)}switch(n){case"input":Lo(r),mu(r,s,!0);break;case"textarea":Lo(r),xu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ss)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Mt]=t,e[vo]=r,Qp(e,t,!1,!1),t.stateNode=e;e:{switch(i=cl(n,r),n){case"dialog":we("cancel",e),we("close",e),o=r;break;case"iframe":case"object":case"embed":we("load",e),o=r;break;case"video":case"audio":for(o=0;o<Kr.length;o++)we(Kr[o],e);o=r;break;case"source":we("error",e),o=r;break;case"img":case"image":case"link":we("error",e),we("load",e),o=r;break;case"details":we("toggle",e),o=r;break;case"input":hu(e,r),o=sl(e,r),we("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=be({},r,{value:void 0}),we("invalid",e);break;case"textarea":gu(e,r),o=al(e,r),we("invalid",e);break;default:o=r}dl(n,o),u=o;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?Af(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bf(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uo(e,c):typeof c=="number"&&uo(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ao.hasOwnProperty(s)?c!=null&&s==="onScroll"&&we("scroll",e):c!=null&&da(e,s,c,i))}switch(n){case"input":Lo(e),mu(e,r,!1);break;case"textarea":Lo(e),xu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ur(e,!!r.multiple,s,!1):r.defaultValue!=null&&ur(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ss)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)Zp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(j(166));if(n=Rn(ko.current),Rn(Lt.current),qo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mt]=t,(s=r.nodeValue!==n)&&(e=dt,e!==null))switch(e.tag){case 3:Ho(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ho(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mt]=t,t.stateNode=r}return Je(t),null;case 13:if(Ce(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&ut!==null&&t.mode&1&&!(t.flags&128))xp(),kr(),t.flags|=98560,s=!1;else if(s=qo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(j(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Mt]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),s=!1}else Et!==null&&(zl(Et),Et=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Pe===0&&(Pe=3):Ja())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return Sr(),Ul(e,t),e===null&&xo(t.stateNode.containerInfo),Je(t),null;case 10:return Ia(t.type._context),Je(t),null;case 17:return it(t.type)&&Ts(),Je(t),null;case 19:if(Ce(_e),s=t.memoizedState,s===null)return Je(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Br(s,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Rs(e),i!==null){for(t.flags|=128,Br(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ve(_e,_e.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ae()>Er&&(t.flags|=128,r=!0,Br(s,!1),t.lanes=4194304)}else{if(!r)if(e=Rs(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Br(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Te)return Je(t),null}else 2*Ae()-s.renderingStartTime>Er&&n!==1073741824&&(t.flags|=128,r=!0,Br(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ae(),t.sibling=null,n=_e.current,ve(_e,r?n&1|2:n&1),t):(Je(t),null);case 22:case 23:return za(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?at&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function cg(e,t){switch(Ea(t),t.tag){case 1:return it(t.type)&&Ts(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sr(),Ce(st),Ce(Ke),Da(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pa(t),null;case 13:if(Ce(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(_e),null;case 4:return Sr(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return za(),null;case 24:return null;default:return null}}var Wo=!1,We=!1,fg=typeof WeakSet=="function"?WeakSet:Set,Q=null;function sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(e,t,r)}else n.current=null}function Vl(e,t,n){try{n()}catch(r){Ie(e,t,r)}}var id=!1;function pg(e,t){if(kl=ws,e=op(),Sa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,u=-1,c=-1,f=0,p=0,m=e,h=null;t:for(;;){for(var g;m!==n||o!==0&&m.nodeType!==3||(u=i+o),m!==s||r!==0&&m.nodeType!==3||(c=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++f===o&&(u=i),h===s&&++p===r&&(c=i),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cl={focusedElem:e,selectionRange:n},ws=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,N=w.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?S:St(t.type,S),N);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(E){Ie(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return w=id,id=!1,w}function no(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Vl(t,n,s)}o=o.next}while(o!==r)}}function ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function e0(e){var t=e.alternate;t!==null&&(e.alternate=null,e0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[vo],delete t[El],delete t[Km],delete t[Ym])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function t0(e){return e.tag===5||e.tag===3||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||t0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $l(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ss));else if(r!==4&&(e=e.child,e!==null))for($l(e,t,n),e=e.sibling;e!==null;)$l(e,t,n),e=e.sibling}function Gl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Gl(e,t,n),e=e.sibling;e!==null;)Gl(e,t,n),e=e.sibling}var Ge=null,Tt=!1;function en(e,t,n){for(n=n.child;n!==null;)n0(e,t,n),n=n.sibling}function n0(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ws,n)}catch{}switch(n.tag){case 5:We||sr(n,t);case 6:var r=Ge,o=Tt;Ge=null,en(e,t,n),Ge=r,Tt=o,Ge!==null&&(Tt?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Tt?(e=Ge,n=n.stateNode,e.nodeType===8?Di(e.parentNode,n):e.nodeType===1&&Di(e,n),ho(e)):Di(Ge,n.stateNode));break;case 4:r=Ge,o=Tt,Ge=n.stateNode.containerInfo,Tt=!0,en(e,t,n),Ge=r,Tt=o;break;case 0:case 11:case 14:case 15:if(!We&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Vl(n,t,i),o=o.next}while(o!==r)}en(e,t,n);break;case 1:if(!We&&(sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ie(n,t,u)}en(e,t,n);break;case 21:en(e,t,n);break;case 22:n.mode&1?(We=(r=We)||n.memoizedState!==null,en(e,t,n),We=r):en(e,t,n);break;default:en(e,t,n)}}function ad(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fg),t.forEach(function(r){var o=Cg.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:Ge=u.stateNode,Tt=!1;break e;case 3:Ge=u.stateNode.containerInfo,Tt=!0;break e;case 4:Ge=u.stateNode.containerInfo,Tt=!0;break e}u=u.return}if(Ge===null)throw Error(j(160));n0(s,i,o),Ge=null,Tt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(f){Ie(o,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r0(t,e),t=t.sibling}function r0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),At(e),r&4){try{no(3,e,e.return),ti(3,e)}catch(S){Ie(e,e.return,S)}try{no(5,e,e.return)}catch(S){Ie(e,e.return,S)}}break;case 1:Ct(t,e),At(e),r&512&&n!==null&&sr(n,n.return);break;case 5:if(Ct(t,e),At(e),r&512&&n!==null&&sr(n,n.return),e.flags&32){var o=e.stateNode;try{uo(o,"")}catch(S){Ie(e,e.return,S)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Ef(o,s),cl(u,i);var f=cl(u,s);for(i=0;i<c.length;i+=2){var p=c[i],m=c[i+1];p==="style"?Af(o,m):p==="dangerouslySetInnerHTML"?bf(o,m):p==="children"?uo(o,m):da(o,p,m,f)}switch(u){case"input":il(o,s);break;case"textarea":_f(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ur(o,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?ur(o,!!s.multiple,s.defaultValue,!0):ur(o,!!s.multiple,s.multiple?[]:"",!1))}o[vo]=s}catch(S){Ie(e,e.return,S)}}break;case 6:if(Ct(t,e),At(e),r&4){if(e.stateNode===null)throw Error(j(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(S){Ie(e,e.return,S)}}break;case 3:if(Ct(t,e),At(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ho(t.containerInfo)}catch(S){Ie(e,e.return,S)}break;case 4:Ct(t,e),At(e);break;case 13:Ct(t,e),At(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Ha=Ae())),r&4&&ad(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(We=(f=We)||p,Ct(t,e),We=f):Ct(t,e),At(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(Q=e,p=e.child;p!==null;){for(m=Q=p;Q!==null;){switch(h=Q,g=h.child,h.tag){case 0:case 11:case 14:case 15:no(4,h,h.return);break;case 1:sr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(S){Ie(r,n,S)}}break;case 5:sr(h,h.return);break;case 22:if(h.memoizedState!==null){dd(m);continue}}g!==null?(g.return=h,Q=g):dd(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{o=m.stateNode,f?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=If("display",i))}catch(S){Ie(e,e.return,S)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(S){Ie(e,e.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ct(t,e),At(e),r&4&&ad(e);break;case 21:break;default:Ct(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(t0(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(uo(o,""),r.flags&=-33);var s=ld(e);Gl(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,u=ld(e);$l(e,u,i);break;default:throw Error(j(161))}}catch(c){Ie(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hg(e,t,n){Q=e,o0(e)}function o0(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var o=Q,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Wo;if(!i){var u=o.alternate,c=u!==null&&u.memoizedState!==null||We;u=Wo;var f=We;if(Wo=i,(We=c)&&!f)for(Q=o;Q!==null;)i=Q,c=i.child,i.tag===22&&i.memoizedState!==null?cd(o):c!==null?(c.return=i,Q=c):cd(o);for(;s!==null;)Q=s,o0(s),s=s.sibling;Q=o,Wo=u,We=f}ud(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Q=s):ud(e)}}function ud(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||ti(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!We)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Wu(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wu(t,i,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ho(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}We||t.flags&512&&jl(t)}catch(h){Ie(t,t.return,h)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function dd(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function cd(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ti(4,t)}catch(c){Ie(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Ie(t,o,c)}}var s=t.return;try{jl(t)}catch(c){Ie(t,s,c)}break;case 5:var i=t.return;try{jl(t)}catch(c){Ie(t,i,c)}}}catch(c){Ie(t,t.return,c)}if(t===e){Q=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Q=u;break}Q=t.return}}var mg=Math.ceil,Ds=Kt.ReactCurrentDispatcher,Ga=Kt.ReactCurrentOwner,yt=Kt.ReactCurrentBatchConfig,he=0,Ue=null,Re=null,Be=0,at=0,ir=kn(0),Pe=0,Eo=null,$n=0,ni=0,Ba=0,ro=null,rt=null,Ha=0,Er=1/0,Ut=null,Ls=!1,Bl=null,mn=null,Oo=!1,an=null,Fs=0,oo=0,Hl=null,as=-1,us=0;function Xe(){return he&6?Ae():as!==-1?as:as=Ae()}function gn(e){return e.mode&1?he&2&&Be!==0?Be&-Be:Xm.transition!==null?(us===0&&(us=Bf()),us):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Kf(e.type)),e):1}function Nt(e,t,n,r){if(50<oo)throw oo=0,Hl=null,Error(j(185));bo(e,n,r),(!(he&2)||e!==Ue)&&(e===Ue&&(!(he&2)&&(ni|=n),Pe===4&&sn(e,Be)),lt(e,r),n===1&&he===0&&!(t.mode&1)&&(Er=Ae()+500,Xs&&Cn()))}function lt(e,t){var n=e.callbackNode;Xh(e,t);var r=vs(e,e===Ue?Be:0);if(r===0)n!==null&&wu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&wu(n),t===1)e.tag===0?Qm(fd.bind(null,e)):hp(fd.bind(null,e)),Wm(function(){!(he&6)&&Cn()}),n=null;else{switch(Hf(r)){case 1:n=ma;break;case 4:n=$f;break;case 16:n=ys;break;case 536870912:n=Gf;break;default:n=ys}n=f0(n,s0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function s0(e,t){if(as=-1,us=0,he&6)throw Error(j(327));var n=e.callbackNode;if(hr()&&e.callbackNode!==n)return null;var r=vs(e,e===Ue?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Us(e,r);else{t=r;var o=he;he|=2;var s=l0();(Ue!==e||Be!==t)&&(Ut=null,Er=Ae()+500,Mn(e,t));do try{yg();break}catch(u){i0(e,u)}while(1);ba(),Ds.current=s,he=o,Re!==null?t=0:(Ue=null,Be=0,t=Pe)}if(t!==0){if(t===2&&(o=gl(e),o!==0&&(r=o,t=ql(e,o))),t===1)throw n=Eo,Mn(e,0),sn(e,r),lt(e,Ae()),n;if(t===6)sn(e,r);else{if(o=e.current.alternate,!(r&30)&&!gg(o)&&(t=Us(e,r),t===2&&(s=gl(e),s!==0&&(r=s,t=ql(e,s))),t===1))throw n=Eo,Mn(e,0),sn(e,r),lt(e,Ae()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(j(345));case 2:bn(e,rt,Ut);break;case 3:if(sn(e,r),(r&130023424)===r&&(t=Ha+500-Ae(),10<t)){if(vs(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Xe(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Tl(bn.bind(null,e,rt,Ut),t);break}bn(e,rt,Ut);break;case 4:if(sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-_t(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mg(r/1960))-r,10<r){e.timeoutHandle=Tl(bn.bind(null,e,rt,Ut),r);break}bn(e,rt,Ut);break;case 5:bn(e,rt,Ut);break;default:throw Error(j(329))}}}return lt(e,Ae()),e.callbackNode===n?s0.bind(null,e):null}function ql(e,t){var n=ro;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=Us(e,t),e!==2&&(t=rt,rt=n,t!==null&&zl(t)),e}function zl(e){rt===null?rt=e:rt.push.apply(rt,e)}function gg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!bt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~Ba,t&=~ni,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function fd(e){if(he&6)throw Error(j(327));hr();var t=vs(e,0);if(!(t&1))return lt(e,Ae()),null;var n=Us(e,t);if(e.tag!==0&&n===2){var r=gl(e);r!==0&&(t=r,n=ql(e,r))}if(n===1)throw n=Eo,Mn(e,0),sn(e,t),lt(e,Ae()),n;if(n===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,rt,Ut),lt(e,Ae()),null}function qa(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(Er=Ae()+500,Xs&&Cn())}}function Gn(e){an!==null&&an.tag===0&&!(he&6)&&hr();var t=he;he|=1;var n=yt.transition,r=xe;try{if(yt.transition=null,xe=1,e)return e()}finally{xe=r,yt.transition=n,he=t,!(he&6)&&Cn()}}function za(){at=ir.current,Ce(ir)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Jm(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(Ea(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ts();break;case 3:Sr(),Ce(st),Ce(Ke),Da();break;case 5:Pa(r);break;case 4:Sr();break;case 13:Ce(_e);break;case 19:Ce(_e);break;case 10:Ia(r.type._context);break;case 22:case 23:za()}n=n.return}if(Ue=e,Re=e=xn(e.current,null),Be=at=t,Pe=0,Eo=null,Ba=ni=$n=0,rt=ro=null,An!==null){for(t=0;t<An.length;t++)if(n=An[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}An=null}return e}function i0(e,t){do{var n=Re;try{if(ba(),ss.current=Ps,Ms){for(var r=Ne.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ms=!1}if(jn=0,Fe=Me=Ne=null,to=!1,Co=0,Ga.current=null,n===null||n.return===null){Pe=1,Eo=t,Re=null;break}e:{var s=e,i=n.return,u=n,c=t;if(t=Be,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=Zu(i);if(g!==null){g.flags&=-257,ed(g,i,u,s,t),g.mode&1&&Xu(s,f,t),t=g,c=f;var w=t.updateQueue;if(w===null){var S=new Set;S.add(c),t.updateQueue=S}else w.add(c);break e}else{if(!(t&1)){Xu(s,f,t),Ja();break e}c=Error(j(426))}}else if(Te&&u.mode&1){var N=Zu(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ed(N,i,u,s,t),_a(Tr(c,u));break e}}s=c=Tr(c,u),Pe!==4&&(Pe=2),ro===null?ro=[s]:ro.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Hp(s,c,t);Ju(s,y);break e;case 1:u=c;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(mn===null||!mn.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=qp(s,u,t);Ju(s,E);break e}}s=s.return}while(s!==null)}u0(n)}catch(T){t=T,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(1)}function l0(){var e=Ds.current;return Ds.current=Ps,e===null?Ps:e}function Ja(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Ue===null||!($n&268435455)&&!(ni&268435455)||sn(Ue,Be)}function Us(e,t){var n=he;he|=2;var r=l0();(Ue!==e||Be!==t)&&(Ut=null,Mn(e,t));do try{xg();break}catch(o){i0(e,o)}while(1);if(ba(),he=n,Ds.current=r,Re!==null)throw Error(j(261));return Ue=null,Be=0,Pe}function xg(){for(;Re!==null;)a0(Re)}function yg(){for(;Re!==null&&!Hh();)a0(Re)}function a0(e){var t=c0(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?u0(e):Re=t,Ga.current=null}function u0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cg(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,Re=null;return}}else if(n=dg(n,t,at),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Pe===0&&(Pe=5)}function bn(e,t,n){var r=xe,o=yt.transition;try{yt.transition=null,xe=1,vg(e,t,n,r)}finally{yt.transition=o,xe=r}return null}function vg(e,t,n,r){do hr();while(an!==null);if(he&6)throw Error(j(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zh(e,s),e===Ue&&(Re=Ue=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oo||(Oo=!0,f0(ys,function(){return hr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yt.transition,yt.transition=null;var i=xe;xe=1;var u=he;he|=4,Ga.current=null,pg(e,n),r0(n,e),jm(Cl),ws=!!kl,Cl=kl=null,e.current=n,hg(n),qh(),he=u,xe=i,yt.transition=s}else e.current=n;if(Oo&&(Oo=!1,an=e,Fs=o),s=e.pendingLanes,s===0&&(mn=null),Wh(n.stateNode),lt(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ls)throw Ls=!1,e=Bl,Bl=null,e;return Fs&1&&e.tag!==0&&hr(),s=e.pendingLanes,s&1?e===Hl?oo++:(oo=0,Hl=e):oo=0,Cn(),null}function hr(){if(an!==null){var e=Hf(Fs),t=yt.transition,n=xe;try{if(yt.transition=null,xe=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,Fs=0,he&6)throw Error(j(331));var o=he;for(he|=4,Q=e.current;Q!==null;){var s=Q,i=s.child;if(Q.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(Q=f;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:no(8,p,s)}var m=p.child;if(m!==null)m.return=p,Q=m;else for(;Q!==null;){p=Q;var h=p.sibling,g=p.return;if(e0(p),p===f){Q=null;break}if(h!==null){h.return=g,Q=h;break}Q=g}}}var w=s.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}Q=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Q=i;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:no(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Q=y;break e}Q=s.return}}var v=e.current;for(Q=v;Q!==null;){i=Q;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,Q=x;else e:for(i=v;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ti(9,u)}}catch(T){Ie(u,u.return,T)}if(u===i){Q=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,Q=E;break e}Q=u.return}}if(he=o,Cn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ws,e)}catch{}r=!0}return r}finally{xe=n,yt.transition=t}}return!1}function pd(e,t,n){t=Tr(n,t),t=Hp(e,t,1),e=hn(e,t,1),t=Xe(),e!==null&&(bo(e,1,t),lt(e,t))}function Ie(e,t,n){if(e.tag===3)pd(e,e,n);else for(;t!==null;){if(t.tag===3){pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=Tr(n,e),e=qp(t,e,1),t=hn(t,e,1),e=Xe(),t!==null&&(bo(t,1,e),lt(t,e));break}}t=t.return}}function wg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&n,Ue===e&&(Be&n)===n&&(Pe===4||Pe===3&&(Be&130023424)===Be&&500>Ae()-Ha?Mn(e,0):Ba|=n),lt(e,t)}function d0(e,t){t===0&&(e.mode&1?(t=Vo,Vo<<=1,!(Vo&130023424)&&(Vo=4194304)):t=1);var n=Xe();e=zt(e,t),e!==null&&(bo(e,t,n),lt(e,n))}function kg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),d0(e,n)}function Cg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(t),d0(e,n)}var c0;c0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||st.current)ot=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ot=!1,ug(e,t,n);ot=!!(e.flags&131072)}else ot=!1,Te&&t.flags&1048576&&mp(t,Ns,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ls(e,t),e=t.pendingProps;var o=wr(t,Ke.current);pr(t,n),o=Fa(null,t,r,e,o,n);var s=Ua();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(r)?(s=!0,Es(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ra(t),o.updater=ei,t.stateNode=o,o._reactInternals=t,Rl(t,r,e,n),t=Dl(null,t,r,!0,s,n)):(t.tag=0,Te&&s&&Ta(t),Qe(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ls(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Tg(r),e=St(r,e),o){case 0:t=Pl(null,t,r,e,n);break e;case 1:t=rd(null,t,r,e,n);break e;case 11:t=td(null,t,r,e,n);break e;case 14:t=nd(null,t,r,St(r.type,e),n);break e}throw Error(j(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),Pl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),rd(e,t,r,o,n);case 3:e:{if(Op(t),e===null)throw Error(j(387));r=t.pendingProps,s=t.memoizedState,o=s.element,kp(e,t),As(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Tr(Error(j(423)),t),t=od(e,t,r,n,o);break e}else if(r!==o){o=Tr(Error(j(424)),t),t=od(e,t,r,n,o);break e}else for(ut=pn(t.stateNode.containerInfo.firstChild),dt=t,Te=!0,Et=null,n=vp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),r===o){t=Jt(e,t,n);break e}Qe(e,t,r,n)}t=t.child}return t;case 5:return Cp(t),e===null&&bl(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Sl(r,o)?i=null:s!==null&&Sl(r,s)&&(t.flags|=32),Wp(e,t),Qe(e,t,i,n),t.child;case 6:return e===null&&bl(t),null;case 13:return Kp(e,t,n);case 4:return Ma(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Cr(t,null,r,n):Qe(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),td(e,t,r,o,n);case 7:return Qe(e,t,t.pendingProps,n),t.child;case 8:return Qe(e,t,t.pendingProps.children,n),t.child;case 12:return Qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,ve(bs,r._currentValue),r._currentValue=i,s!==null)if(bt(s.value,i)){if(s.children===o.children&&!st.current){t=Jt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){i=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Bt(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Il(s.return,n,t),u.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(j(341));i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Il(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Qe(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,pr(t,n),o=wt(o),r=r(o),t.flags|=1,Qe(e,t,r,n),t.child;case 14:return r=t.type,o=St(r,t.pendingProps),o=St(r.type,o),nd(e,t,r,o,n);case 15:return zp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),ls(e,t),t.tag=1,it(r)?(e=!0,Es(t)):e=!1,pr(t,n),Bp(t,r,o),Rl(t,r,o,n),Dl(null,t,r,!0,e,n);case 19:return Yp(e,t,n);case 22:return Jp(e,t,n)}throw Error(j(156,t.tag))};function f0(e,t){return jf(e,t)}function Sg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,n,r){return new Sg(e,t,n,r)}function Wa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tg(e){if(typeof e=="function")return Wa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fa)return 11;if(e===pa)return 14}return 2}function xn(e,t){var n=e.alternate;return n===null?(n=xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ds(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")Wa(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Yn:return Pn(n.children,o,s,t);case ca:i=8,o|=8;break;case tl:return e=xt(12,n,t,o|2),e.elementType=tl,e.lanes=s,e;case nl:return e=xt(13,n,t,o),e.elementType=nl,e.lanes=s,e;case rl:return e=xt(19,n,t,o),e.elementType=rl,e.lanes=s,e;case Cf:return ri(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wf:i=10;break e;case kf:i=9;break e;case fa:i=11;break e;case pa:i=14;break e;case nn:i=16,r=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=xt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Pn(e,t,n,r){return e=xt(7,e,r,t),e.lanes=n,e}function ri(e,t,n,r){return e=xt(22,e,r,t),e.elementType=Cf,e.lanes=n,e.stateNode={isHidden:!1},e}function Bi(e,t,n){return e=xt(6,e,null,t),e.lanes=n,e}function Hi(e,t,n){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Oa(e,t,n,r,o,s,i,u,c){return e=new Eg(e,t,n,u,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=xt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(s),e}function _g(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function p0(e){if(!e)return vn;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var n=e.type;if(it(n))return pp(e,n,t)}return t}function h0(e,t,n,r,o,s,i,u,c){return e=Oa(n,r,!0,e,o,s,i,u,c),e.context=p0(null),n=e.current,r=Xe(),o=gn(n),s=Bt(r,o),s.callback=t??null,hn(n,s,o),e.current.lanes=o,bo(e,o,r),lt(e,r),e}function oi(e,t,n,r){var o=t.current,s=Xe(),i=gn(o);return n=p0(n),t.context===null?t.context=n:t.pendingContext=n,t=Bt(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hn(o,t,i),e!==null&&(Nt(e,o,i,s),os(e,o,i)),i}function Vs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ka(e,t){hd(e,t),(e=e.alternate)&&hd(e,t)}function Ng(){return null}var m0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ya(e){this._internalRoot=e}si.prototype.render=Ya.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));oi(e,t,null,null)};si.prototype.unmount=Ya.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){oi(null,e,null,null)}),t[qt]=null}};function si(e){this._internalRoot=e}si.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<on.length&&t!==0&&t<on[n].priority;n++);on.splice(n,0,e),n===0&&Of(e)}};function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function md(){}function bg(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var f=Vs(i);s.call(f)}}var i=h0(t,r,e,0,null,!1,!1,"",md);return e._reactRootContainer=i,e[qt]=i.current,xo(e.nodeType===8?e.parentNode:e),Gn(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var f=Vs(c);u.call(f)}}var c=Oa(e,0,!1,null,null,!1,!1,"",md);return e._reactRootContainer=c,e[qt]=c.current,xo(e.nodeType===8?e.parentNode:e),Gn(function(){oi(t,c,n,r)}),c}function li(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var u=o;o=function(){var c=Vs(i);u.call(c)}}oi(t,i,e,o)}else i=bg(n,t,e,o,r);return Vs(i)}qf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Or(t.pendingLanes);n!==0&&(ga(t,n|1),lt(t,Ae()),!(he&6)&&(Er=Ae()+500,Cn()))}break;case 13:Gn(function(){var r=zt(e,1);if(r!==null){var o=Xe();Nt(r,e,1,o)}}),Ka(e,1)}};xa=function(e){if(e.tag===13){var t=zt(e,134217728);if(t!==null){var n=Xe();Nt(t,e,134217728,n)}Ka(e,134217728)}};zf=function(e){if(e.tag===13){var t=gn(e),n=zt(e,t);if(n!==null){var r=Xe();Nt(n,e,t,r)}Ka(e,t)}};Jf=function(){return xe};Wf=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};pl=function(e,t,n){switch(t){case"input":if(il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Qs(r);if(!o)throw Error(j(90));Tf(r),il(r,o)}}}break;case"textarea":_f(e,n);break;case"select":t=n.value,t!=null&&ur(e,!!n.multiple,t,!1)}};Pf=qa;Df=Gn;var Ig={usingClientEntryPoint:!1,Events:[Ao,er,Qs,Rf,Mf,qa]},Hr={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ag={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uf(e),e===null?null:e.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||Ng,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Ws=Ko.inject(Ag),Dt=Ko}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(t))throw Error(j(200));return _g(e,t,null,n)};ft.createRoot=function(e,t){if(!Qa(e))throw Error(j(299));var n=!1,r="",o=m0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Oa(e,1,!1,null,null,n,!1,r,o),e[qt]=t.current,xo(e.nodeType===8?e.parentNode:e),new Ya(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=Uf(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return Gn(e)};ft.hydrate=function(e,t,n){if(!ii(t))throw Error(j(200));return li(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!Qa(e))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=m0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=h0(t,null,e,1,n??null,o,!1,s,i),e[qt]=t.current,xo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new si(t)};ft.render=function(e,t,n){if(!ii(t))throw Error(j(200));return li(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!ii(e))throw Error(j(40));return e._reactRootContainer?(Gn(function(){li(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1};ft.unstable_batchedUpdates=qa;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ii(n))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return li(e,t,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function g0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g0)}catch(e){console.error(e)}}g0(),gf.exports=ft;var Rg=gf.exports,gd=Rg;Zi.createRoot=gd.createRoot,Zi.hydrateRoot=gd.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mg,Pg;function Dg(){return{geminiUrl:Mg,vertexUrl:Pg}}function Lg(e,t,n,r){var o,s;if(!(e!=null&&e.baseUrl)){const i=Dg();return t?(o=i.vertexUrl)!==null&&o!==void 0?o:n:(s=i.geminiUrl)!==null&&s!==void 0?s:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yt{}function z(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(e,t,n){for(let s=0;s<t.length-1;s++){const i=t[s];if(i.endsWith("[]")){const u=i.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[u])){const c=e[u];if(Array.isArray(n))for(let f=0;f<c.length;f++){const p=c[f];d(p,t.slice(s+1),n[f])}else for(const f of c)d(f,t.slice(s+1),n)}return}else if(i.endsWith("[0]")){const u=i.slice(0,-3);u in e||(e[u]=[{}]);const c=e[u];d(c[0],t.slice(s+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const r=t[t.length-1],o=e[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const o=t[r];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const i=e[s];return Array.isArray(i)?i.map(u=>l(u,t.slice(r+1),n)):n}else return n}else e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function Fg(e,t){for(const[n,r]of Object.entries(t)){const o=n.split("."),s=r.split("."),i=new Set;let u=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){u=c;break}if(u!==-1&&s.length>u)for(let c=u;c<s.length;c++){const f=s[c];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&i.add(f)}Jl(e,o,s,0,i)}}function Jl(e,t,n,r,o){if(r>=t.length||typeof e!="object"||e===null)return;const s=t[r];if(s.endsWith("[]")){const i=s.slice(0,-2),u=e;if(i in u&&Array.isArray(u[i]))for(const c of u[i])Jl(c,t,n,r+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,u=Object.keys(i).filter(f=>!f.startsWith("_")&&!o.has(f)),c={};for(const f of u)c[f]=i[f];for(const[f,p]of Object.entries(c)){const m=[];for(const h of n.slice(r))h==="*"?m.push(f):m.push(h);d(i,m,p)}for(const f of u)delete i[f]}}else{const i=e;s in i&&Jl(i[s],t,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xa(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ug(e){const t={},n=l(e,["operationName"]);n!=null&&d(t,["operationName"],n);const r=l(e,["resourceName"]);return r!=null&&d(t,["_url","resourceName"],r),t}function Vg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],$g(i)),t}function jg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Gg(i)),t}function $g(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Bg(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Gg(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Hg(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Bg(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],Kg(n)),t}function Hg(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],Yg(n)),t}function qg(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function zg(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function Jg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Wg(i)),t}function Wg(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function x0(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Og(i)),t}function Og(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function Kg(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],Xa(r));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function Yg(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],Xa(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xd;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xd||(xd={}));var yd;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(yd||(yd={}));var vd;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(vd||(vd={}));var un;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(un||(un={}));var wd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(wd||(wd={}));var kd;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kd||(kd={}));var Cd;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Cd||(Cd={}));var Sd;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Sd||(Sd={}));var Td;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Td||(Td={}));var Ed;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(Ed||(Ed={}));var _d;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_d||(_d={}));var Nd;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Nd||(Nd={}));var bd;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(bd||(bd={}));var Id;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Id||(Id={}));var Ad;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ad||(Ad={}));var Rd;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Rd||(Rd={}));var Md;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Md||(Md={}));var Pd;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Pd||(Pd={}));var Dd;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Dd||(Dd={}));var js;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(js||(js={}));var Ld;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ld||(Ld={}));var Fd;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Fd||(Fd={}));var Ud;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ud||(Ud={}));var Wl;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wl||(Wl={}));var Vd;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Vd||(Vd={}));var jd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jd||(jd={}));var $d;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})($d||($d={}));var Gd;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Gd||(Gd={}));var Bd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Bd||(Bd={}));var Hd;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hd||(Hd={}));var qd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(qd||(qd={}));var zd;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zd||(zd={}));var Jd;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Jd||(Jd={}));var Wd;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Wd||(Wd={}));var Od;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Od||(Od={}));var Kd;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Kd||(Kd={}));var Yd;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Yd||(Yd={}));var Qd;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Qd||(Qd={}));var Xd;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Xd||(Xd={}));var Zd;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Zd||(Zd={}));var ec;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(ec||(ec={}));var tc;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(tc||(tc={}));var nc;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(nc||(nc={}));var rc;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(rc||(rc={}));var oc;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(oc||(oc={}));var sc;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(sc||(sc={}));var ic;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ic||(ic={}));var lc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(lc||(lc={}));var ac;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ac||(ac={}));var uc;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(uc||(uc={}));var dc;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(dc||(dc={}));var cc;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cc||(cc={}));var fc;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fc||(fc={}));var pc;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(pc||(pc={}));var lr;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(lr||(lr={}));class Ol{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class qr{get text(){var t,n,r,o,s,i,u,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const m=[];for(const h of(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,w]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,f+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,n,r,o,s,i,u,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const m of(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(f+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,r,o,s,i,u,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,r,o,s,i,u,c,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,r,o,s,i,u,c,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class hc{}class mc{}class Qg{}class Xg{}class Zg{}class ex{}class gc{}class xc{}class yc{}class tx{}class $s{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new $s;let o;const s=t;return n?o=jg(s):o=Vg(s),Object.assign(r,o),r}}class vc{}class wc{}class kc{}class Cc{}class nx{}class rx{}class ox{}class Za{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Za,s=Jg(t);return Object.assign(r,s),r}}class sx{}class ix{}class lx{}class Sc{}class ax{get text(){var t,n,r;let o="",s=!1;const i=[];for(const u of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(u))c!=="text"&&c!=="thought"&&f!==null&&i.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,o+=u.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,r;let o="";const s=[];for(const i of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(i))u!=="inlineData"&&c!==null&&s.push(u);i.inlineData&&typeof i.inlineData.data=="string"&&(o+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class ux{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class eu{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new eu,s=x0(t);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function me(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function y0(e,t){const n=me(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function v0(e){return Array.isArray(e)?e.map(t=>Gs(t)):[Gs(e)]}function Gs(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function w0(e){const t=Gs(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function k0(e){const t=Gs(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Tc(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function C0(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Tc(t)):[Tc(e)]}function Kl(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Ec(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function _c(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Oe(e){if(e==null)throw new Error("ContentUnion is required");return Kl(e)?e:{role:"user",parts:C0(e)}}function tu(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=Oe(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=Oe(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Oe(n)):[Oe(t)]}function vt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Ec(e)||_c(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Oe(e)]}const t=[],n=[],r=Kl(e[0]);for(const o of e){const s=Kl(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(Ec(o)||_c(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:C0(n)}),t}function dx(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(un).includes(n[0].toUpperCase())?n[0].toUpperCase():un.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(un).includes(r.toUpperCase())?r.toUpperCase():un.TYPE_UNSPECIFIED})}}function mr(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&dx(e.type,t);for(const[i,u]of Object.entries(e))if(u!=null)if(i=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(un).includes(u.toUpperCase())?u.toUpperCase():un.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=mr(u);else if(r.includes(i)){const c=[];for(const f of u){if(f.type=="null"){t.nullable=!0;continue}c.push(mr(f))}t[i]=c}else if(o.includes(i)){const c={};for(const[f,p]of Object.entries(u))c[f]=mr(p);t[i]=c}else{if(i==="additionalProperties")continue;t[i]=u}return t}function nu(e){return mr(e)}function ru(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ou(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Rr(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=mr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=mr(t.response));return e}function Mr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function cx(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Qt(e,t){if(typeof t!="string")throw new Error("name must be a string");return cx(e,t,"cachedContents")}function S0(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Sn(e){return Xa(e)}function fx(e){return e!=null&&typeof e=="object"&&"name"in e}function px(e){return e!=null&&typeof e=="object"&&"video"in e}function hx(e){return e!=null&&typeof e=="object"&&"uri"in e}function T0(e){var t;let n;if(fx(e)&&(n=e.name),!(hx(e)&&(n=e.uri,n===void 0))&&!(px(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function E0(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function _0(e){for(const t of["models","tunedModels","publisherModels"])if(mx(e,t))return e[t];return[]}function mx(e,t){return e!==null&&typeof e=="object"&&t in e}function gx(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function xx(e,t={}){const n=[],r=new Set;for(const o of e){const s=o.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const i=gx(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function N0(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function yx(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function b0(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const i of o){if(typeof i!="object"||i===null)continue;const c=i.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Pr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function I0(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vx(e){const t={},n=l(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const r=l(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Zx(i))),d(t,["inlinedResponses"],s)}const o=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["inlinedEmbedContentResponses"],s)}return t}function wx(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const r=l(e,["gcsDestination","outputUriPrefix"]);r!=null&&d(t,["gcsUri"],r);const o=l(e,["bigqueryDestination","outputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function kx(e){const t={},n=l(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const r=l(e,["gcsUri"]);r!=null&&d(t,["gcsDestination","outputUriPrefix"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigqueryDestination","outputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function cs(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata","displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["metadata","state"]);o!=null&&d(t,["state"],I0(o));const s=l(e,["metadata","createTime"]);s!=null&&d(t,["createTime"],s);const i=l(e,["metadata","endTime"]);i!=null&&d(t,["endTime"],i);const u=l(e,["metadata","updateTime"]);u!=null&&d(t,["updateTime"],u);const c=l(e,["metadata","model"]);c!=null&&d(t,["model"],c);const f=l(e,["metadata","output"]);return f!=null&&d(t,["dest"],vx(b0(f))),t}function Yl(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["state"]);o!=null&&d(t,["state"],I0(o));const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["createTime"]);i!=null&&d(t,["createTime"],i);const u=l(e,["startTime"]);u!=null&&d(t,["startTime"],u);const c=l(e,["endTime"]);c!=null&&d(t,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(t,["updateTime"],f);const p=l(e,["model"]);p!=null&&d(t,["model"],p);const m=l(e,["inputConfig"]);m!=null&&d(t,["src"],Cx(m));const h=l(e,["outputConfig"]);h!=null&&d(t,["dest"],wx(b0(h)));const g=l(e,["completionStats"]);return g!=null&&d(t,["completionStats"],g),t}function Cx(e){const t={},n=l(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const r=l(e,["gcsSource","uris"]);r!=null&&d(t,["gcsUri"],r);const o=l(e,["bigquerySource","inputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function Sx(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(t,["fileName"]);r!=null&&d(n,["fileName"],r);const o=l(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Xx(e,i))),d(n,["requests","requests"],s)}return n}function Tx(e){const t={},n=l(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const r=l(e,["gcsUri"]);r!=null&&d(t,["gcsSource","uris"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigquerySource","inputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Ex(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function _x(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Pr(e,r)),n}function Nx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Pr(e,r)),n}function bx(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],Ix(r));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=l(e,["avgLogprobs"]);i!=null&&d(t,["avgLogprobs"],i);const u=l(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const c=l(e,["index"]);c!=null&&d(t,["index"],c);const f=l(e,["logprobsResult"]);f!=null&&d(t,["logprobsResult"],f);const p=l(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),d(t,["safetyRatings"],h)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function Ix(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function A0(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>iy(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function Ax(e,t){const n={},r=l(e,["displayName"]);if(t!==void 0&&r!=null&&d(t,["batch","displayName"],r),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Rx(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["dest"]);return t!==void 0&&o!=null&&d(t,["outputConfig"],kx(yx(o))),n}function Nc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],Sx(e,N0(e,o)));const s=l(t,["config"]);return s!=null&&Ax(s,n),n}function Mx(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],me(e,r));const o=l(t,["src"]);o!=null&&d(n,["inputConfig"],Tx(N0(e,o)));const s=l(t,["config"]);return s!=null&&Rx(s,n),n}function Px(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["batch","displayName"],r),n}function Dx(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],Gx(e,o));const s=l(t,["config"]);return s!=null&&Px(s,n),n}function Lx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Pr(e,r)),n}function Fx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Pr(e,r)),n}function Ux(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function Vx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function jx(e,t){const n={},r=l(t,["contents"]);if(r!=null){let s=tu(e,r);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["requests[]","request","content"],s)}const o=l(t,["config"]);return o!=null&&(d(n,["_self"],$x(o,n)),Fg(n,{"requests[].*":"requests[].request.*"})),n}function $x(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Gx(e,t){const n={},r=l(t,["fileName"]);r!=null&&d(n,["file_name"],r);const o=l(t,["inlinedRequests"]);return o!=null&&d(n,["requests"],jx(e,o)),n}function Bx(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Hx(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function qx(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function zx(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],A0(Oe(o)));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const g=l(t,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const S=l(t,["seed"]);S!=null&&d(r,["seed"],S);const N=l(t,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const y=l(t,["responseSchema"]);y!=null&&d(r,["responseSchema"],nu(y));const v=l(t,["responseJsonSchema"]);if(v!=null&&d(r,["responseJsonSchema"],v),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(t,["safetySettings"]);if(n!==void 0&&x!=null){let G=x;Array.isArray(G)&&(G=G.map(b=>ly(b))),d(n,["safetySettings"],G)}const E=l(t,["tools"]);if(n!==void 0&&E!=null){let G=Mr(E);Array.isArray(G)&&(G=G.map(b=>uy(Rr(b)))),d(n,["tools"],G)}const T=l(t,["toolConfig"]);if(n!==void 0&&T!=null&&d(n,["toolConfig"],ay(T)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(t,["cachedContent"]);n!==void 0&&C!=null&&d(n,["cachedContent"],Qt(e,C));const k=l(t,["responseModalities"]);k!=null&&d(r,["responseModalities"],k);const A=l(t,["mediaResolution"]);A!=null&&d(r,["mediaResolution"],A);const R=l(t,["speechConfig"]);if(R!=null&&d(r,["speechConfig"],ru(R)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=l(t,["thinkingConfig"]);_!=null&&d(r,["thinkingConfig"],_);const P=l(t,["imageConfig"]);P!=null&&d(r,["imageConfig"],Qx(P));const V=l(t,["enableEnhancedCivicAnswers"]);return V!=null&&d(r,["enableEnhancedCivicAnswers"],V),r}function Jx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>bx(f))),d(t,["candidates"],c)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=l(e,["responseId"]);i!=null&&d(t,["responseId"],i);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function Wx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Pr(e,r)),n}function Ox(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Pr(e,r)),n}function Kx(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Yx(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Qx(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Xx(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["request","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let u=vt(o);Array.isArray(u)&&(u=u.map(c=>A0(c))),d(n,["request","contents"],u)}const s=l(t,["metadata"]);s!=null&&d(n,["metadata"],s);const i=l(t,["config"]);return i!=null&&d(n,["request","generationConfig"],zx(e,i,l(n,["request"],{}))),n}function Zx(e){const t={},n=l(e,["response"]);n!=null&&d(t,["response"],Jx(n));const r=l(e,["error"]);return r!=null&&d(t,["error"],r),t}function ey(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);if(t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ty(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);t!==void 0&&o!=null&&d(t,["_query","pageToken"],o);const s=l(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function ny(e){const t={},n=l(e,["config"]);return n!=null&&ey(n,t),t}function ry(e){const t={},n=l(e,["config"]);return n!=null&&ty(n,t),t}function oy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>cs(i))),d(t,["batchJobs"],s)}return t}function sy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Yl(i))),d(t,["batchJobs"],s)}return t}function iy(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Bx(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],Hx(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],Ex(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function ly(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function ay(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],qx(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function uy(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],Kx(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],Yx(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Wt||(Wt={}));class qn{constructor(t,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,o)}init(t,n,r){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(o=i.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dy extends Yt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Nc(this.apiClient,t),r=n._url,o=z("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,c=u.requests,f=[];for(const p of c){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}f.push(m)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const s=this.getGcsUri(t),i=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${o}`;else if(i)r.dest=`${i}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Mx(this.apiClient,t);return u=z("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Yl(p))}else{const f=Nc(this.apiClient,t);return u=z("{model}:batchGenerateContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>cs(p))}}async createEmbeddingsInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Dx(this.apiClient,t);return s=z("{model}:asyncBatchEmbedContent",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>cs(c))}}async get(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ox(this.apiClient,t);return u=z("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Yl(p))}else{const f=Wx(this.apiClient,t);return u=z("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>cs(p))}}async cancel(t){var n,r,o,s;let i="",u={};if(this.apiClient.isVertexAI()){const c=Nx(this.apiClient,t);i=z("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=_x(this.apiClient,t);i=z("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=ry(t);return u=z("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=sy(p),h=new Sc;return Object.assign(h,m),h})}else{const f=ny(t);return u=z("batches",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=oy(p),h=new Sc;return Object.assign(h,m),h})}}async delete(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Fx(this.apiClient,t);return u=z("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>Vx(p))}else{const f=Lx(this.apiClient,t);return u=z("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>Ux(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cy(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function bc(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Dy(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function fy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=l(e,["contents"]);if(t!==void 0&&i!=null){let p=vt(i);Array.isArray(p)&&(p=p.map(m=>bc(m))),d(t,["contents"],p)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&d(t,["systemInstruction"],bc(Oe(u)));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Fy(m))),d(t,["tools"],p)}const f=l(e,["toolConfig"]);if(t!==void 0&&f!=null&&d(t,["toolConfig"],Ly(f)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function py(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=l(e,["contents"]);if(t!==void 0&&i!=null){let m=vt(i);Array.isArray(m)&&(m=m.map(h=>h)),d(t,["contents"],m)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&d(t,["systemInstruction"],Oe(u));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Uy(h))),d(t,["tools"],m)}const f=l(e,["toolConfig"]);t!==void 0&&f!=null&&d(t,["toolConfig"],f);const p=l(e,["kmsKeyName"]);return t!==void 0&&p!=null&&d(t,["encryption_spec","kmsKeyName"],p),n}function hy(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],y0(e,r));const o=l(t,["config"]);return o!=null&&fy(o,n),n}function my(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],y0(e,r));const o=l(t,["config"]);return o!=null&&py(o,n),n}function gy(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Qt(e,r)),n}function xy(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Qt(e,r)),n}function yy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function vy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function wy(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ky(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Cy(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Sy(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function Ty(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Qt(e,r)),n}function Ey(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Qt(e,r)),n}function _y(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Ny(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function by(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Iy(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Ay(e){const t={},n=l(e,["config"]);return n!=null&&by(n,t),t}function Ry(e){const t={},n=l(e,["config"]);return n!=null&&Iy(n,t),t}function My(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function Py(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function Dy(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],wy(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],ky(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],cy(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function Ly(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],Cy(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function Fy(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],_y(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],Ny(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function Uy(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Sy(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const c=l(e,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],f);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function Vy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function jy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function $y(e,t){const n={},r=l(t,["name"]);r!=null&&d(n,["_url","name"],Qt(e,r));const o=l(t,["config"]);return o!=null&&Vy(o,n),n}function Gy(e,t){const n={},r=l(t,["name"]);r!=null&&d(n,["_url","name"],Qt(e,r));const o=l(t,["config"]);return o!=null&&jy(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class By extends Yt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=my(this.apiClient,t);return u=z("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const f=hy(this.apiClient,t);return u=z("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async get(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ey(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const f=Ty(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=xy(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=vy(p),h=new kc;return Object.assign(h,m),h})}else{const f=gy(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=yy(p),h=new kc;return Object.assign(h,m),h})}}async update(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Gy(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const f=$y(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ry(t);return u=z("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Py(p),h=new Cc;return Object.assign(h,m),h})}else{const f=Ay(t);return u=z("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=My(p),h=new Cc;return Object.assign(h,m),h})}}}function Ic(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(e){return this instanceof ke?(this.v=e,this):new ke(e)}function gr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(g){return function(w){return Promise.resolve(w).then(g,m)}}function u(g,w){r[g]&&(o[g]=function(S){return new Promise(function(N,y){s.push([g,S,N,y])>1||c(g,S)})},w&&(o[g]=w(o[g])))}function c(g,w){try{f(r[g](w))}catch(S){h(s[0][3],S)}}function f(g){g.value instanceof ke?Promise.resolve(g.value.v).then(p,m):h(s[0][2],g)}function p(g){c("next",g)}function m(g){c("throw",g)}function h(g,w){g(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function so(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ic=="function"?Ic(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(i){return new Promise(function(u,c){i=e[s](i),o(u,c,i.done,i.value)})}}function o(s,i,u,c){Promise.resolve(c).then(function(f){s({value:f,done:u})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hy(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:R0(n)}function R0(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function qy(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ac(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const o=[];let s=!0;for(;r<n&&e[r].role==="model";)o.push(e[r]),s&&!R0(e[r])&&(s=!1),r++;s?t.push(...o):t.pop()}return t}class zy{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Jy(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Jy{constructor(t,n,r,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),qy(s)}async sendMessage(t){var n;await this.sendPromise;const r=Oe(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,u;const c=await o,f=(i=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,p=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(u=p.slice(m))!==null&&u!==void 0?u:[]);const g=f?[f]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const r=Oe(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,r)}getHistory(t=!1){const n=t?Ac(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return gr(this,arguments,function*(){var o,s,i,u,c,f;const p=[];try{for(var m=!0,h=so(t),g;g=yield ke(h.next()),o=g.done,!o;m=!0){u=g.value,m=!1;const w=u;if(Hy(w)){const S=(f=(c=w.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content;S!==void 0&&p.push(S)}yield yield ke(w)}}catch(w){s={error:w}}finally{try{!m&&!o&&(i=h.return)&&(yield ke(i.call(h)))}finally{if(s)throw s.error}}this.recordHistory(n,p)})}recordHistory(t,n,r){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Ac(r)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ai extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,ai.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wy(e){const t={},n=l(e,["file"]);return n!=null&&d(t,["file"],n),t}function Oy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Ky(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],T0(n)),t}function Yy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Qy(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],T0(n)),t}function Xy(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Zy(e){const t={},n=l(e,["config"]);return n!=null&&Xy(n,t),t}function ev(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tv extends Yt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zy(t);return s=z("files",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=ev(c),p=new sx;return Object.assign(p,f),p})}}async createInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wy(t);return s=z("upload/v1beta/files",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=Oy(c),p=new ix;return Object.assign(p,f),p})}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qy(t);return s=z("files/{file}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ky(t);return s=z("files/{file}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Yy(c),p=new lx;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fs(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function nv(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>yv(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function rv(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ov(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function sv(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function iv(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const i=l(e,["enableAffectiveDialog"]);i!=null&&d(t,["enableAffectiveDialog"],i);const u=l(e,["frequencyPenalty"]);u!=null&&d(t,["frequencyPenalty"],u);const c=l(e,["logprobs"]);c!=null&&d(t,["logprobs"],c);const f=l(e,["maxOutputTokens"]);f!=null&&d(t,["maxOutputTokens"],f);const p=l(e,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const h=l(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const g=l(e,["responseMimeType"]);g!=null&&d(t,["responseMimeType"],g);const w=l(e,["responseModalities"]);w!=null&&d(t,["responseModalities"],w);const S=l(e,["responseSchema"]);S!=null&&d(t,["responseSchema"],S);const N=l(e,["routingConfig"]);N!=null&&d(t,["routingConfig"],N);const y=l(e,["seed"]);y!=null&&d(t,["seed"],y);const v=l(e,["speechConfig"]);v!=null&&d(t,["speechConfig"],M0(v));const x=l(e,["stopSequences"]);x!=null&&d(t,["stopSequences"],x);const E=l(e,["temperature"]);E!=null&&d(t,["temperature"],E);const T=l(e,["thinkingConfig"]);T!=null&&d(t,["thinkingConfig"],T);const C=l(e,["topK"]);C!=null&&d(t,["topK"],C);const k=l(e,["topP"]);if(k!=null&&d(t,["topP"],k),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function lv(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function av(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function uv(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const f=l(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],ou(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const g=l(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],nv(Oe(w)));const S=l(e,["tools"]);if(t!==void 0&&S!=null){let C=Mr(S);Array.isArray(C)&&(C=C.map(k=>wv(Rr(k)))),d(t,["setup","tools"],C)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&d(t,["setup","sessionResumption"],vv(N));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","outputAudioTranscription"],v);const x=l(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&d(t,["setup","realtimeInputConfig"],x);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&d(t,["setup","contextWindowCompression"],E);const T=l(e,["proactivity"]);return t!==void 0&&T!=null&&d(t,["setup","proactivity"],T),n}function dv(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],iv(r));const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const f=l(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],M0(ou(m)));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const g=l(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],Oe(w));const S=l(e,["tools"]);if(t!==void 0&&S!=null){let C=Mr(S);Array.isArray(C)&&(C=C.map(k=>kv(Rr(k)))),d(t,["setup","tools"],C)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&d(t,["setup","sessionResumption"],N);const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","outputAudioTranscription"],v);const x=l(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&d(t,["setup","realtimeInputConfig"],x);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&d(t,["setup","contextWindowCompression"],E);const T=l(e,["proactivity"]);return t!==void 0&&T!=null&&d(t,["setup","proactivity"],T),n}function cv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],me(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],uv(o,n)),n}function fv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],me(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],dv(o,n)),n}function pv(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function hv(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["weightedPrompts"],r)}return t}function mv(e){const t={},n=l(e,["media"]);if(n!=null){let f=v0(n);Array.isArray(f)&&(f=f.map(p=>fs(p))),d(t,["mediaChunks"],f)}const r=l(e,["audio"]);r!=null&&d(t,["audio"],fs(k0(r)));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],fs(w0(s)));const i=l(e,["text"]);i!=null&&d(t,["text"],i);const u=l(e,["activityStart"]);u!=null&&d(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&d(t,["activityEnd"],c),t}function gv(e){const t={},n=l(e,["media"]);if(n!=null){let f=v0(n);Array.isArray(f)&&(f=f.map(p=>p)),d(t,["mediaChunks"],f)}const r=l(e,["audio"]);r!=null&&d(t,["audio"],k0(r));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],w0(s));const i=l(e,["text"]);i!=null&&d(t,["text"],i);const u=l(e,["activityStart"]);u!=null&&d(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&d(t,["activityEnd"],c),t}function xv(e){const t={},n=l(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const r=l(e,["serverContent"]);r!=null&&d(t,["serverContent"],r);const o=l(e,["toolCall"]);o!=null&&d(t,["toolCall"],o);const s=l(e,["toolCallCancellation"]);s!=null&&d(t,["toolCallCancellation"],s);const i=l(e,["usageMetadata"]);i!=null&&d(t,["usageMetadata"],Cv(i));const u=l(e,["goAway"]);u!=null&&d(t,["goAway"],u);const c=l(e,["sessionResumptionUpdate"]);return c!=null&&d(t,["sessionResumptionUpdate"],c),t}function yv(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],rv(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],ov(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],fs(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function vv(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function M0(e){const t={},n=l(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],n);const r=l(e,["languageCode"]);if(r!=null&&d(t,["languageCode"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function wv(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],lv(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],av(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function kv(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>sv(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const c=l(e,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],f);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function Cv(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const r=l(e,["cachedContentTokenCount"]);r!=null&&d(t,["cachedContentTokenCount"],r);const o=l(e,["candidatesTokenCount"]);o!=null&&d(t,["responseTokenCount"],o);const s=l(e,["toolUsePromptTokenCount"]);s!=null&&d(t,["toolUsePromptTokenCount"],s);const i=l(e,["thoughtsTokenCount"]);i!=null&&d(t,["thoughtsTokenCount"],i);const u=l(e,["totalTokenCount"]);u!=null&&d(t,["totalTokenCount"],u);const c=l(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(w=>w)),d(t,["promptTokensDetails"],g)}const f=l(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(w=>w)),d(t,["cacheTokensDetails"],g)}const p=l(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>w)),d(t,["responseTokensDetails"],g)}const m=l(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(w=>w)),d(t,["toolUsePromptTokensDetails"],g)}const h=l(e,["trafficType"]);return h!=null&&d(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sv(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Tv(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],Ev(r));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=l(e,["avgLogprobs"]);i!=null&&d(t,["avgLogprobs"],i);const u=l(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const c=l(e,["index"]);c!=null&&d(t,["index"],c);const f=l(e,["logprobsResult"]);f!=null&&d(t,["logprobsResult"],f);const p=l(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),d(t,["safetyRatings"],h)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function Ev(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function _v(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["contents"],s)}return n}function Nv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["tokensInfo"],o)}return t}function bv(e){const t={},n=l(e,["values"]);n!=null&&d(t,["values"],n);const r=l(e,["statistics"]);return r!=null&&d(t,["statistics"],Iv(r)),t}function Iv(e){const t={},n=l(e,["truncated"]);n!=null&&d(t,["truncated"],n);const r=l(e,["token_count"]);return r!=null&&d(t,["tokenCount"],r),t}function ui(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Vw(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function Av(e){const t={},n=l(e,["controlType"]);n!=null&&d(t,["controlType"],n);const r=l(e,["enableControlImageComputation"]);return r!=null&&d(t,["computeControl"],r),t}function Rv(e){const t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Mv(e,t){const n={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],Oe(r));const o=l(e,["tools"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(u=>U0(u))),d(t,["tools"],i)}const s=l(e,["generationConfig"]);return t!==void 0&&s!=null&&d(t,["generationConfig"],Sw(s)),n}function Pv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>ui(u))),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&Rv(s),n}function Dv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&Mv(s,n),n}function Lv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);r!=null&&d(t,["totalTokens"],r);const o=l(e,["cachedContentTokenCount"]);return o!=null&&d(t,["cachedContentTokenCount"],o),t}function Fv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);return r!=null&&d(t,["totalTokens"],r),t}function Uv(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],me(e,r)),n}function Vv(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],me(e,r)),n}function jv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function $v(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Gv(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const f=l(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const g=l(e,["language"]);t!==void 0&&g!=null&&d(t,["parameters","language"],g);const w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&d(t,["parameters","outputOptions","mimeType"],w);const S=l(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&d(t,["parameters","outputOptions","compressionQuality"],S);const N=l(e,["addWatermark"]);t!==void 0&&N!=null&&d(t,["parameters","addWatermark"],N);const y=l(e,["labels"]);t!==void 0&&y!=null&&d(t,["labels"],y);const v=l(e,["editMode"]);t!==void 0&&v!=null&&d(t,["parameters","editMode"],v);const x=l(e,["baseSteps"]);return t!==void 0&&x!=null&&d(t,["parameters","editConfig","baseSteps"],x),n}function Bv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>qw(c))),d(n,["instances[0]","referenceImages"],u)}const i=l(t,["config"]);return i!=null&&Gv(i,n),n}function Hv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>di(s))),d(t,["generatedImages"],o)}return t}function qv(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function zv(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["instances[]","task_type"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["instances[]","title"],o);const s=l(e,["outputDimensionality"]);t!==void 0&&s!=null&&d(t,["parameters","outputDimensionality"],s);const i=l(e,["mimeType"]);t!==void 0&&i!=null&&d(t,["instances[]","mimeType"],i);const u=l(e,["autoTruncate"]);return t!==void 0&&u!=null&&d(t,["parameters","autoTruncate"],u),n}function Jv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let u=tu(e,o);Array.isArray(u)&&(u=u.map(c=>c)),d(n,["requests[]","content"],u)}const s=l(t,["config"]);s!=null&&qv(s,n);const i=l(t,["model"]);return i!==void 0&&d(n,["requests[]","model"],me(e,i)),n}function Wv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let i=tu(e,o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["instances[]","content"],i)}const s=l(t,["config"]);return s!=null&&zv(s,n),n}function Ov(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function Kv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>bv(i))),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function Yv(e){const t={},n=l(e,["endpoint"]);n!=null&&d(t,["name"],n);const r=l(e,["deployedModelId"]);return r!=null&&d(t,["deployedModelId"],r),t}function Qv(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Xv(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Zv(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function ew(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function tw(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],ui(Oe(o)));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const g=l(t,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const S=l(t,["seed"]);S!=null&&d(r,["seed"],S);const N=l(t,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const y=l(t,["responseSchema"]);y!=null&&d(r,["responseSchema"],nu(y));const v=l(t,["responseJsonSchema"]);if(v!=null&&d(r,["responseJsonSchema"],v),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(t,["safetySettings"]);if(n!==void 0&&x!=null){let G=x;Array.isArray(G)&&(G=G.map(b=>zw(b))),d(n,["safetySettings"],G)}const E=l(t,["tools"]);if(n!==void 0&&E!=null){let G=Mr(E);Array.isArray(G)&&(G=G.map(b=>Xw(Rr(b)))),d(n,["tools"],G)}const T=l(t,["toolConfig"]);if(n!==void 0&&T!=null&&d(n,["toolConfig"],Qw(T)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(t,["cachedContent"]);n!==void 0&&C!=null&&d(n,["cachedContent"],Qt(e,C));const k=l(t,["responseModalities"]);k!=null&&d(r,["responseModalities"],k);const A=l(t,["mediaResolution"]);A!=null&&d(r,["mediaResolution"],A);const R=l(t,["speechConfig"]);if(R!=null&&d(r,["speechConfig"],ru(R)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const _=l(t,["thinkingConfig"]);_!=null&&d(r,["thinkingConfig"],_);const P=l(t,["imageConfig"]);P!=null&&d(r,["imageConfig"],bw(P));const V=l(t,["enableEnhancedCivicAnswers"]);return V!=null&&d(r,["enableEnhancedCivicAnswers"],V),r}function nw(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Oe(o));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const g=l(t,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const S=l(t,["seed"]);S!=null&&d(r,["seed"],S);const N=l(t,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const y=l(t,["responseSchema"]);y!=null&&d(r,["responseSchema"],nu(y));const v=l(t,["responseJsonSchema"]);v!=null&&d(r,["responseJsonSchema"],v);const x=l(t,["routingConfig"]);x!=null&&d(r,["routingConfig"],x);const E=l(t,["modelSelectionConfig"]);E!=null&&d(r,["modelConfig"],E);const T=l(t,["safetySettings"]);if(n!==void 0&&T!=null){let L=T;Array.isArray(L)&&(L=L.map(O=>O)),d(n,["safetySettings"],L)}const C=l(t,["tools"]);if(n!==void 0&&C!=null){let L=Mr(C);Array.isArray(L)&&(L=L.map(O=>U0(Rr(O)))),d(n,["tools"],L)}const k=l(t,["toolConfig"]);n!==void 0&&k!=null&&d(n,["toolConfig"],k);const A=l(t,["labels"]);n!==void 0&&A!=null&&d(n,["labels"],A);const R=l(t,["cachedContent"]);n!==void 0&&R!=null&&d(n,["cachedContent"],Qt(e,R));const _=l(t,["responseModalities"]);_!=null&&d(r,["responseModalities"],_);const P=l(t,["mediaResolution"]);P!=null&&d(r,["mediaResolution"],P);const V=l(t,["speechConfig"]);V!=null&&d(r,["speechConfig"],F0(ru(V)));const G=l(t,["audioTimestamp"]);G!=null&&d(r,["audioTimestamp"],G);const b=l(t,["thinkingConfig"]);b!=null&&d(r,["thinkingConfig"],b);const U=l(t,["imageConfig"]);if(U!=null&&d(r,["imageConfig"],Iw(U)),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Rc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>ui(u))),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],tw(e,s,n)),n}function Mc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],nw(e,s,n)),n}function Pc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>Tv(f))),d(t,["candidates"],c)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=l(e,["responseId"]);i!=null&&d(t,["responseId"],i);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function Dc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["candidates"],f)}const o=l(e,["createTime"]);o!=null&&d(t,["createTime"],o);const s=l(e,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);const i=l(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);const u=l(e,["responseId"]);u!=null&&d(t,["responseId"],u);const c=l(e,["usageMetadata"]);return c!=null&&d(t,["usageMetadata"],c),t}function rw(e,t){const n={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const s=l(e,["guidanceScale"]);if(t!==void 0&&s!=null&&d(t,["parameters","guidanceScale"],s),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&d(t,["parameters","safetySetting"],i);const u=l(e,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const c=l(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&d(t,["parameters","includeSafetyAttributes"],c);const f=l(e,["includeRaiReason"]);t!==void 0&&f!=null&&d(t,["parameters","includeRaiReason"],f);const p=l(e,["language"]);t!==void 0&&p!=null&&d(t,["parameters","language"],p);const m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const h=l(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&d(t,["parameters","outputOptions","compressionQuality"],h),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(e,["imageSize"]);if(t!==void 0&&g!=null&&d(t,["parameters","sampleImageSize"],g),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ow(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const f=l(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const g=l(e,["language"]);t!==void 0&&g!=null&&d(t,["parameters","language"],g);const w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&d(t,["parameters","outputOptions","mimeType"],w);const S=l(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&d(t,["parameters","outputOptions","compressionQuality"],S);const N=l(e,["addWatermark"]);t!==void 0&&N!=null&&d(t,["parameters","addWatermark"],N);const y=l(e,["labels"]);t!==void 0&&y!=null&&d(t,["labels"],y);const v=l(e,["imageSize"]);t!==void 0&&v!=null&&d(t,["parameters","sampleImageSize"],v);const x=l(e,["enhancePrompt"]);return t!==void 0&&x!=null&&d(t,["parameters","enhancePrompt"],x),n}function sw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&rw(s,n),n}function iw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&ow(s,n),n}function lw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>vw(i))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],D0(o)),t}function aw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>di(i))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],L0(o)),t}function uw(e,t){const n={},r=l(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(e,["durationSeconds"]);if(t!==void 0&&o!=null&&d(t,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const i=l(e,["resolution"]);t!==void 0&&i!=null&&d(t,["parameters","resolution"],i);const u=l(e,["personGeneration"]);if(t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(e,["negativePrompt"]);t!==void 0&&c!=null&&d(t,["parameters","negativePrompt"],c);const f=l(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&d(t,["parameters","enhancePrompt"],f),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=l(e,["lastFrame"]);t!==void 0&&p!=null&&d(t,["instances[0]","lastFrame"],ci(p));const m=l(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>c1(g))),d(t,["instances[0]","referenceImages"],h)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function dw(e,t){const n={},r=l(e,["numberOfVideos"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const s=l(e,["fps"]);t!==void 0&&s!=null&&d(t,["parameters","fps"],s);const i=l(e,["durationSeconds"]);t!==void 0&&i!=null&&d(t,["parameters","durationSeconds"],i);const u=l(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const c=l(e,["aspectRatio"]);t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c);const f=l(e,["resolution"]);t!==void 0&&f!=null&&d(t,["parameters","resolution"],f);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["pubsubTopic"]);t!==void 0&&m!=null&&d(t,["parameters","pubsubTopic"],m);const h=l(e,["negativePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","negativePrompt"],h);const g=l(e,["enhancePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","enhancePrompt"],g);const w=l(e,["generateAudio"]);t!==void 0&&w!=null&&d(t,["parameters","generateAudio"],w);const S=l(e,["lastFrame"]);t!==void 0&&S!=null&&d(t,["instances[0]","lastFrame"],It(S));const N=l(e,["referenceImages"]);if(t!==void 0&&N!=null){let x=N;Array.isArray(x)&&(x=x.map(E=>f1(E))),d(t,["instances[0]","referenceImages"],x)}const y=l(e,["mask"]);t!==void 0&&y!=null&&d(t,["instances[0]","mask"],d1(y));const v=l(e,["compressionQuality"]);return t!==void 0&&v!=null&&d(t,["parameters","compressionQuality"],v),n}function cw(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],mw(i)),t}function fw(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],gw(i)),t}function pw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],ci(s));const i=l(t,["video"]);i!=null&&d(n,["instances[0]","video"],V0(i));const u=l(t,["source"]);u!=null&&xw(u,n);const c=l(t,["config"]);return c!=null&&uw(c,n),n}function hw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],It(s));const i=l(t,["video"]);i!=null&&d(n,["instances[0]","video"],j0(i));const u=l(t,["source"]);u!=null&&yw(u,n);const c=l(t,["config"]);return c!=null&&dw(c,n),n}function mw(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>kw(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function gw(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Cw(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function xw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],ci(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],V0(s)),n}function yw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],It(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],j0(s)),n}function vw(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],Aw(n));const r=l(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const o=l(e,["_self"]);return o!=null&&d(t,["safetyAttributes"],D0(o)),t}function di(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],P0(n));const r=l(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const o=l(e,["_self"]);o!=null&&d(t,["safetyAttributes"],L0(o));const s=l(e,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function ww(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["mask"],P0(n));const r=l(e,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["labels"],o)}return t}function kw(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],a1(n)),t}function Cw(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],u1(n)),t}function Sw(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const i=l(e,["enableAffectiveDialog"]);i!=null&&d(t,["enableAffectiveDialog"],i);const u=l(e,["frequencyPenalty"]);u!=null&&d(t,["frequencyPenalty"],u);const c=l(e,["logprobs"]);c!=null&&d(t,["logprobs"],c);const f=l(e,["maxOutputTokens"]);f!=null&&d(t,["maxOutputTokens"],f);const p=l(e,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const h=l(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const g=l(e,["responseMimeType"]);g!=null&&d(t,["responseMimeType"],g);const w=l(e,["responseModalities"]);w!=null&&d(t,["responseModalities"],w);const S=l(e,["responseSchema"]);S!=null&&d(t,["responseSchema"],S);const N=l(e,["routingConfig"]);N!=null&&d(t,["routingConfig"],N);const y=l(e,["seed"]);y!=null&&d(t,["seed"],y);const v=l(e,["speechConfig"]);v!=null&&d(t,["speechConfig"],F0(v));const x=l(e,["stopSequences"]);x!=null&&d(t,["stopSequences"],x);const E=l(e,["temperature"]);E!=null&&d(t,["temperature"],E);const T=l(e,["thinkingConfig"]);T!=null&&d(t,["thinkingConfig"],T);const C=l(e,["topK"]);C!=null&&d(t,["topK"],C);const k=l(e,["topP"]);if(k!=null&&d(t,["topP"],k),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Tw(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],me(e,r)),n}function Ew(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],me(e,r)),n}function _w(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Nw(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function bw(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Iw(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);r!=null&&d(t,["imageSize"],r);const o=l(e,["outputMimeType"]);o!=null&&d(t,["imageOutputOptions","mimeType"],o);const s=l(e,["outputCompressionQuality"]);return s!=null&&d(t,["imageOutputOptions","compressionQuality"],s),t}function Aw(e){const t={},n=l(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],Sn(n));const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function P0(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["imageBytes"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function ci(e){const t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],Sn(n));const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function It(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["imageBytes"]);r!=null&&d(t,["bytesBase64Encoded"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Rw(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=l(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],E0(e,u)),r}function Mw(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=l(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],E0(e,u)),r}function Pw(e,t){const n={},r=l(t,["config"]);return r!=null&&Rw(e,r,n),n}function Dw(e,t){const n={},r=l(t,["config"]);return r!=null&&Mw(e,r,n),n}function Lw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let s=_0(o);Array.isArray(s)&&(s=s.map(i=>Ql(i))),d(t,["models"],s)}return t}function Fw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let s=_0(o);Array.isArray(s)&&(s=s.map(i=>Xl(i))),d(t,["models"],s)}return t}function Uw(e){const t={},n=l(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const r=l(e,["segmentationClasses"]);r!=null&&d(t,["maskClasses"],r);const o=l(e,["maskDilation"]);return o!=null&&d(t,["dilation"],o),t}function Ql(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["version"]);s!=null&&d(t,["version"],s);const i=l(e,["_self"]);i!=null&&d(t,["tunedModelInfo"],Zw(i));const u=l(e,["inputTokenLimit"]);u!=null&&d(t,["inputTokenLimit"],u);const c=l(e,["outputTokenLimit"]);c!=null&&d(t,["outputTokenLimit"],c);const f=l(e,["supportedGenerationMethods"]);f!=null&&d(t,["supportedActions"],f);const p=l(e,["temperature"]);p!=null&&d(t,["temperature"],p);const m=l(e,["maxTemperature"]);m!=null&&d(t,["maxTemperature"],m);const h=l(e,["topP"]);h!=null&&d(t,["topP"],h);const g=l(e,["topK"]);g!=null&&d(t,["topK"],g);const w=l(e,["thinking"]);return w!=null&&d(t,["thinking"],w),t}function Xl(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["versionId"]);s!=null&&d(t,["version"],s);const i=l(e,["deployedModels"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>Yv(h))),d(t,["endpoints"],m)}const u=l(e,["labels"]);u!=null&&d(t,["labels"],u);const c=l(e,["_self"]);c!=null&&d(t,["tunedModelInfo"],e1(c));const f=l(e,["defaultCheckpointId"]);f!=null&&d(t,["defaultCheckpointId"],f);const p=l(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),d(t,["checkpoints"],m)}return t}function Vw(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Qv(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],Xv(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],Sv(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function jw(e){const t={},n=l(e,["productImage"]);return n!=null&&d(t,["image"],It(n)),t}function $w(e,t){const n={},r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["baseSteps"]);t!==void 0&&o!=null&&d(t,["parameters","baseSteps"],o);const s=l(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const i=l(e,["seed"]);t!==void 0&&i!=null&&d(t,["parameters","seed"],i);const u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&d(t,["parameters","safetySetting"],u);const c=l(e,["personGeneration"]);t!==void 0&&c!=null&&d(t,["parameters","personGeneration"],c);const f=l(e,["addWatermark"]);t!==void 0&&f!=null&&d(t,["parameters","addWatermark"],f);const p=l(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);const m=l(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","compressionQuality"],m);const h=l(e,["enhancePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","enhancePrompt"],h);const g=l(e,["labels"]);return t!==void 0&&g!=null&&d(t,["labels"],g),n}function Gw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["source"]);o!=null&&Hw(o,n);const s=l(t,["config"]);return s!=null&&$w(s,n),n}function Bw(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>di(o))),d(t,["generatedImages"],r)}return t}function Hw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["personImage"]);t!==void 0&&o!=null&&d(t,["instances[0]","personImage","image"],It(o));const s=l(e,["productImages"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>jw(u))),d(t,["instances[0]","productImages"],i)}return n}function qw(e){const t={},n=l(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],It(n));const r=l(e,["referenceId"]);r!=null&&d(t,["referenceId"],r);const o=l(e,["referenceType"]);o!=null&&d(t,["referenceType"],o);const s=l(e,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],Uw(s));const i=l(e,["controlImageConfig"]);i!=null&&d(t,["controlImageConfig"],Av(i));const u=l(e,["styleImageConfig"]);u!=null&&d(t,["styleImageConfig"],u);const c=l(e,["subjectImageConfig"]);return c!=null&&d(t,["subjectImageConfig"],c),t}function D0(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function L0(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function zw(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function Jw(e){const t={},n=l(e,["image"]);return n!=null&&d(t,["image"],It(n)),t}function Ww(e,t){const n={},r=l(e,["mode"]);t!==void 0&&r!=null&&d(t,["parameters","mode"],r);const o=l(e,["maxPredictions"]);t!==void 0&&o!=null&&d(t,["parameters","maxPredictions"],o);const s=l(e,["confidenceThreshold"]);t!==void 0&&s!=null&&d(t,["parameters","confidenceThreshold"],s);const i=l(e,["maskDilation"]);t!==void 0&&i!=null&&d(t,["parameters","maskDilation"],i);const u=l(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&d(t,["parameters","binaryColorThreshold"],u);const c=l(e,["labels"]);return t!==void 0&&c!=null&&d(t,["labels"],c),n}function Ow(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["source"]);o!=null&&Yw(o,n);const s=l(t,["config"]);return s!=null&&Ww(s,n),n}function Kw(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ww(o))),d(t,["generatedMasks"],r)}return t}function Yw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],It(o));const s=l(e,["scribbleImage"]);return t!==void 0&&s!=null&&d(t,["instances[0]","scribble"],Jw(s)),n}function F0(e){const t={},n=l(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],n);const r=l(e,["languageCode"]);if(r!=null&&d(t,["languageCode"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Qw(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],Zv(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function Xw(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],_w(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],Nw(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function U0(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>ew(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const c=l(e,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],f);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function Zw(e){const t={},n=l(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function e1(e){const t={},n=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function t1(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function n1(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function r1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","name"],me(e,r));const o=l(t,["config"]);return o!=null&&t1(o,n),n}function o1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["config"]);return o!=null&&n1(o,n),n}function s1(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&d(t,["parameters","safetySetting"],o);const s=l(e,["personGeneration"]);t!==void 0&&s!=null&&d(t,["parameters","personGeneration"],s);const i=l(e,["includeRaiReason"]);t!==void 0&&i!=null&&d(t,["parameters","includeRaiReason"],i);const u=l(e,["outputMimeType"]);t!==void 0&&u!=null&&d(t,["parameters","outputOptions","mimeType"],u);const c=l(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&d(t,["parameters","outputOptions","compressionQuality"],c);const f=l(e,["enhanceInputImage"]);t!==void 0&&f!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=l(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const h=l(e,["numberOfImages"]);t!==void 0&&h!=null&&d(t,["parameters","sampleCount"],h);const g=l(e,["mode"]);return t!==void 0&&g!=null&&d(t,["parameters","mode"],g),n}function i1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],me(e,r));const o=l(t,["image"]);o!=null&&d(n,["instances[0]","image"],It(o));const s=l(t,["upscaleFactor"]);s!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=l(t,["config"]);return i!=null&&s1(i,n),n}function l1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>di(s))),d(t,["generatedImages"],o)}return t}function a1(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],Sn(r));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function u1(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function d1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["_self"],It(n));const r=l(e,["maskMode"]);return r!=null&&d(t,["maskMode"],r),t}function c1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],ci(n));const r=l(e,["referenceType"]);return r!=null&&d(t,["referenceType"],r),t}function f1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],It(n));const r=l(e,["referenceType"]);return r!=null&&d(t,["referenceType"],r),t}function V0(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["videoBytes"]);r!=null&&d(t,["encodedVideo"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["encoding"],o),t}function j0(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["videoBytes"]);r!=null&&d(t,["bytesBase64Encoded"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p1(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["displayName"],r),n}function h1(e){const t={},n=l(e,["config"]);return n!=null&&p1(n,t),t}function m1(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function g1(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&m1(r,t),t}function x1(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function y1(e,t){const n={},r=l(e,["customMetadata"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["customMetadata"],s)}const o=l(e,["chunkingConfig"]);return t!==void 0&&o!=null&&d(t,["chunkingConfig"],o),n}function v1(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],k1(i)),t}function w1(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const r=l(e,["fileName"]);r!=null&&d(t,["fileName"],r);const o=l(e,["config"]);return o!=null&&y1(o,t),t}function k1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function C1(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function S1(e){const t={},n=l(e,["config"]);return n!=null&&C1(n,t),t}function T1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["fileSearchStores"],s)}return t}function $0(e,t){const n={},r=l(e,["mimeType"]);t!==void 0&&r!=null&&d(t,["mimeType"],r);const o=l(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const s=l(e,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>c)),d(t,["customMetadata"],u)}const i=l(e,["chunkingConfig"]);return t!==void 0&&i!=null&&d(t,["chunkingConfig"],i),n}function E1(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const r=l(e,["config"]);return r!=null&&$0(r,t),t}function _1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1="Content-Type",b1="X-Server-Timeout",I1="User-Agent",Zl="x-goog-api-client",A1="1.32.0",R1=`google-genai-sdk/${A1}`,M1="v1beta1",P1="v1beta";class D1{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:M1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:P1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[i,u]of Object.entries(t.queryParams))o.searchParams.append(i,String(u));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?r[o]=Object.assign(Object.assign({},r[o]),s):s!==void 0&&(r[o]=s);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,o){if(n&&n.timeout||o){const s=new AbortController,i=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=i}return n&&n.extraBody!==null&&L1(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Lc(o),new Ol(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Lc(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return gr(this,arguments,function*(){var r;const o=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let i="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield ke(o.read());if(f){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=s.decode(p,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const S=JSON.parse(JSON.stringify(w.error)),N=S.status,y=S.code,v=`got status: ${N}. ${JSON.stringify(w)}`;if(y>=400&&y<600)throw new ai({message:v,status:y})}}catch(w){if(w.name==="ApiError")throw w}i+=m;let h=-1,g=0;for(;;){h=-1,g=0;for(const N of c){const y=i.indexOf(N);y!==-1&&(h===-1||y<h)&&(h=y,g=N.length)}if(h===-1)break;const w=i.substring(0,h);i=i.substring(h+g);const S=w.trim();if(S.startsWith(u)){const N=S.substring(u.length).trim();try{const y=new Response(N,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ke(new Ol(y))}catch(y){throw new Error(`exception parsing stream chunk ${N}. ${y}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=R1+" "+this.clientOptions.userAgentExtra;return t[I1]=n,t[Zl]=n,t[N1]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))r.append(o,s);t.timeout&&t.timeout>0&&r.append(b1,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,i=await s.stat(t);o.sizeBytes=String(i.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const c={file:o},f=this.getFileName(t),p=z("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(p,o.sizeBytes,o.mimeType,f,c,n==null?void 0:n.httpOptions);return s.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,r){var o;const s=this.clientOptions.uploader,i=await s.stat(n),u=String(i.size),c=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:i.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&$0(r,m);const h=await this.fetchUploadUrl(f,u,c,p,m,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,o,s,i){var u;let c={};i?c=i:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const f=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Lc(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new ai({message:o,status:n}):new Error(o)}}function L1(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,i){const u=Object.assign({},s);for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const f=i[c],p=u[c];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?u[c]=r(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),u[c]=f)}return u}const o=r(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F1="mcp_used/unknown";let U1=!1;function G0(e){for(const t of e)if(V1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return U1}function B0(e){var t;const n=(t=e[Zl])!==null&&t!==void 0?t:"";e[Zl]=(n+` ${F1}`).trimStart()}function V1(e){return e!==null&&typeof e=="object"&&e instanceof su}function j1(e){return gr(this,arguments,function*(n,r=100){let o,s=0;for(;s<r;){const i=yield ke(n.listTools({cursor:o}));for(const u of i.tools)yield yield ke(u),s++;if(!i.nextCursor)break;o=i.nextCursor}})}class su{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new su(t,n)}async initialize(){var t,n,r,o;if(this.mcpTools.length>0)return;const s={},i=[];for(const p of this.mcpClients)try{for(var u=!0,c=(n=void 0,so(j1(p))),f;f=await c.next(),t=f.done,!t;u=!0){o=f.value,u=!1;const m=o;i.push(m);const h=m.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=p}}catch(m){n={error:m}}finally{try{!u&&!t&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),xx(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await o.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $1(e,t,n){const r=new ux;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),t(r)}class G1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=q1(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const p=new Promise(x=>{f=x}),m=t.callbacks,h=function(){f({})},g=this.apiClient,w={onopen:h,onmessage:x=>{$1(g,m.onmessage,x)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(x){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(x){}},S=this.webSocketFactory.create(c,H1(i),w);S.connect(),await p;const v={setup:{model:me(this.apiClient,t.model)}};return S.send(JSON.stringify(v)),new B1(S,this.apiClient)}}class B1{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=hv(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=pv(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(lr.PLAY)}pause(){this.sendPlaybackControl(lr.PAUSE)}stop(){this.sendPlaybackControl(lr.STOP)}resetContext(){this.sendPlaybackControl(lr.RESET_CONTEXT)}close(){this.conn.close()}}function H1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function q1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function J1(e,t,n){const r=new ax;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const i=xv(s);Object.assign(r,i)}else Object.assign(r,s);t(r)}class W1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new G1(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,o,s,i,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&G0(t.config.tools)&&B0(m);const h=Q1(m);if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const R=this.apiClient.getApiKey();let _="BidiGenerateContent",P="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),_="BidiGenerateContentConstrained",P="access_token"),p=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${_}?${P}=${R}`}let g=()=>{};const w=new Promise(R=>{g=R}),S=t.callbacks,N=function(){var R;(R=S==null?void 0:S.onopen)===null||R===void 0||R.call(S),g({})},y=this.apiClient,v={onopen:N,onmessage:R=>{J1(y,S.onmessage,R)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(R){}},x=this.webSocketFactory.create(p,Y1(h),v);x.connect(),await w;let E=me(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const R=this.apiClient.getProject(),_=this.apiClient.getLocation();E=`projects/${R}/locations/${_}/`+E}let T={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[js.AUDIO]}:t.config.responseModalities=[js.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(u=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&u!==void 0?u:[],k=[];for(const R of C)if(this.isCallableTool(R)){const _=R;k.push(await _.tool())}else k.push(R);k.length>0&&(t.config.tools=k);const A={model:E,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?T=fv(this.apiClient,A):T=cv(this.apiClient,A),delete T.config,x.send(JSON.stringify(T)),new K1(x,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const O1={turnComplete:!0};class K1{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=vt(n.turns),t.isVertexAI()||(r=r.map(o=>ui(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(z1)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},O1),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:gv(t)}:n={realtimeInput:mv(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Y1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Q1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fc=10;function Uc(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(xr(i)){o=!0;break}if(!o)return!0;const s=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function xr(e){return"callTool"in e&&typeof e.callTool=="function"}function X1(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>xr(o)))!==null&&r!==void 0?r:!1}function Vc(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,o)=>{if(xr(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function jc(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z1 extends Yt{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,o,s,i,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!X1(n)||Uc(n.config))return await this.generateContentInternal(c);const f=Vc(n);if(f.length>0){const S=f.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let p,m;const h=vt(c.contents),g=(s=(o=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Fc;let w=0;for(;w<g&&(p=await this.generateContentInternal(c),!(!p.functionCalls||p.functionCalls.length===0));){const S=p.candidates[0].content,N=[];for(const y of(u=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&u!==void 0?u:[])if(xr(y)){const x=await y.callTool(p.functionCalls);N.push(...x)}w++,m={role:"user",parts:N},c.contents=vt(c.contents),c.contents.push(S),c.contents.push(m),jc(c.config)&&(h.push(S),h.push(m))}return jc(c.config)&&(p.automaticFunctionCallingHistory=h),p},this.generateContentStream=async n=>{var r,o,s,i,u;if(this.maybeMoveToResponseJsonSchem(n),Uc(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Vc(n);if(c.length>0){const m=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(s=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,p=(u=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let s;const i=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:i.push(c);let u;return s?u={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new qn(Wt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,s,i,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(s=n.source)===null||s===void 0?void 0:s.video)===null||i===void 0)&&i.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const i=await Promise.all(s.map(async c=>xr(c)?await c.tool():c)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(u.config.tools=i,t.config&&t.config.tools&&G0(t.config.tools)){const c=(o=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),B0(f),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(t){var n,r,o;const s=new Map;for(const i of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(xr(i)){const u=i,c=await u.tool();for(const f of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,u)}}return s}async processAfcStream(t){var n,r,o;const s=(o=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Fc;let i=!1,u=0;const c=await this.initAfcToolsMap(t);return function(f,p,m){return gr(this,arguments,function*(){for(var h,g,w,S,N,y;u<s;){i&&(u++,i=!1);const T=yield ke(f.processParamsMaybeAddMcpUsage(m)),C=yield ke(f.generateContentStreamInternal(T)),k=[],A=[];try{for(var v=!0,x=(g=void 0,so(C)),E;E=yield ke(x.next()),h=E.done,!h;v=!0){S=E.value,v=!1;const R=S;if(yield yield ke(R),R.candidates&&(!((N=R.candidates[0])===null||N===void 0)&&N.content)){A.push(R.candidates[0].content);for(const _ of(y=R.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<s&&_.functionCall){if(!_.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(_.functionCall.name)){const P=yield ke(p.get(_.functionCall.name).callTool([_.functionCall]));k.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${_.functionCall.name}`)}}}}catch(R){g={error:R}}finally{try{!v&&!h&&(w=x.return)&&(yield ke(w.call(x)))}finally{if(g)throw g.error}}if(k.length>0){i=!0;const R=new qr;R.candidates=[{content:{role:"user",parts:k}}],yield yield ke(R);const _=[];_.push(...A),_.push({role:"user",parts:k});const P=vt(m.contents).concat(_);m.contents=P}else break}})}(this,c,t)}async generateContentInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Mc(this.apiClient,t);return u=z("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Dc(p),h=new qr;return Object.assign(h,m),h})}else{const f=Rc(this.apiClient,t);return u=z("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Pc(p),h=new qr;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Mc(this.apiClient,t);return u=z("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(m){return gr(this,arguments,function*(){var h,g,w,S;try{for(var N=!0,y=so(m),v;v=yield ke(y.next()),h=v.done,!h;N=!0){S=v.value,N=!1;const x=S,E=Dc(yield ke(x.json()));E.sdkHttpResponse={headers:x.headers};const T=new qr;Object.assign(T,E),yield yield ke(T)}}catch(x){g={error:x}}finally{try{!N&&!h&&(w=y.return)&&(yield ke(w.call(y)))}finally{if(g)throw g.error}}})})}else{const f=Rc(this.apiClient,t);return u=z("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(m){return gr(this,arguments,function*(){var h,g,w,S;try{for(var N=!0,y=so(m),v;v=yield ke(y.next()),h=v.done,!h;N=!0){S=v.value,N=!1;const x=S,E=Pc(yield ke(x.json()));E.sdkHttpResponse={headers:x.headers};const T=new qr;Object.assign(T,E),yield yield ke(T)}}catch(x){g={error:x}}finally{try{!N&&!h&&(w=y.return)&&(yield ke(w.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Wv(this.apiClient,t);return u=z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Kv(p),h=new hc;return Object.assign(h,m),h})}else{const f=Jv(this.apiClient,t);return u=z("{model}:batchEmbedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Ov(p),h=new hc;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=iw(this.apiClient,t);return u=z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=aw(p),h=new mc;return Object.assign(h,m),h})}else{const f=sw(this.apiClient,t);return u=z("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=lw(p),h=new mc;return Object.assign(h,m),h})}}async editImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Bv(this.apiClient,t);return s=z("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Hv(c),p=new Qg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=i1(this.apiClient,t);return s=z("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=l1(c),p=new Xg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Gw(this.apiClient,t);return s=z("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=Bw(c),p=new Zg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Ow(this.apiClient,t);return s=z("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=Kw(c),p=new ex;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ew(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Xl(p))}else{const f=Tw(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Ql(p))}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Dw(this.apiClient,t);return u=z("{models_url}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Fw(p),h=new gc;return Object.assign(h,m),h})}else{const f=Pw(this.apiClient,t);return u=z("{models_url}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Lw(p),h=new gc;return Object.assign(h,m),h})}}async update(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=o1(this.apiClient,t);return u=z("{model}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Xl(p))}else{const f=r1(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Ql(p))}}async delete(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Vv(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=$v(p),h=new xc;return Object.assign(h,m),h})}else{const f=Uv(this.apiClient,t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=jv(p),h=new xc;return Object.assign(h,m),h})}}async countTokens(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Dv(this.apiClient,t);return u=z("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Fv(p),h=new yc;return Object.assign(h,m),h})}else{const f=Pv(this.apiClient,t);return u=z("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Lv(p),h=new yc;return Object.assign(h,m),h})}}async computeTokens(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=_v(this.apiClient,t);return s=z("{model}:computeTokens",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Nv(c),p=new tx;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=hw(this.apiClient,t);return u=z("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=fw(p),h=new $s;return Object.assign(h,m),h})}else{const f=pw(this.apiClient,t);return u=z("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>{const m=cw(p),h=new $s;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ek extends Yt{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=zg(t);return u=z("{operationName}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i}else{const f=qg(t);return u=z("{operationName}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i}}async fetchPredictVideosOperationInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Ug(t);return s=z("{resourceName}:fetchPredictOperation",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tk(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function nk(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ck(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function rk(e,t,n){const r={},o=l(t,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const s=l(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&d(n,["newSessionExpireTime"],s);const i=l(t,["uses"]);n!==void 0&&i!=null&&d(n,["uses"],i);const u=l(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&d(n,["bidiGenerateContentSetup"],dk(e,u));const c=l(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&d(n,["fieldMask"],c),r}function ok(e,t){const n={},r=l(t,["config"]);return r!=null&&d(n,["config"],rk(e,r,n)),n}function sk(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ik(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function lk(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function ak(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function uk(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const f=l(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],ou(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const g=l(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],nk(Oe(w)));const S=l(e,["tools"]);if(t!==void 0&&S!=null){let C=Mr(S);Array.isArray(C)&&(C=C.map(k=>pk(Rr(k)))),d(t,["setup","tools"],C)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&d(t,["setup","sessionResumption"],fk(N));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","inputAudioTranscription"],y);const v=l(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","outputAudioTranscription"],v);const x=l(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&d(t,["setup","realtimeInputConfig"],x);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&d(t,["setup","contextWindowCompression"],E);const T=l(e,["proactivity"]);return t!==void 0&&T!=null&&d(t,["setup","proactivity"],T),n}function dk(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],me(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],uk(o,n)),n}function ck(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],sk(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],ik(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],tk(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function fk(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function pk(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],lk(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],ak(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hk(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function mk(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=hk(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(f=>i.includes(f)?`generationConfig.${f}`:f));const c=[];s&&c.push(s),u.length>0&&c.push(...u),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class gk extends Yt{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=ok(this.apiClient,t);s=z("auth_tokens",u._url),i=u._query,delete u.config,delete u._url,delete u._query;const c=mk(u,t.config);return o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xk(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function yk(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&xk(r,t),t}function vk(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function wk(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function kk(e){const t={},n=l(e,["parent"]);n!=null&&d(t,["_url","parent"],n);const r=l(e,["config"]);return r!=null&&wk(r,t),t}function Ck(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sk extends Yt{constructor(t){super(),this.apiClient=t,this.list=async n=>new qn(Wt.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vk(t);return s=z("{name}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=yk(t);o=z("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kk(t);return s=z("{parent}/documents",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=Ck(c),p=new nx;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tk extends Yt{constructor(t,n=new Sk(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new qn(Wt.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=h1(t);return s=z("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=x1(t);return s=z("{name}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=g1(t);o=z("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S1(t);return s=z("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=T1(c),p=new rx;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=E1(t);return s=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=_1(c),p=new ox;return Object.assign(p,f),p})}}async importFile(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=w1(t);return s=z("{file_search_store_name}:importFile",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=v1(c),p=new Za;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ek(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function _k(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Nk(e,t){const n={},r=l(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function bk(e,t){const n={},r=l(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function Ik(e,t,n){const r={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&d(t,["displayName"],o),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(e,["epochCount"]);t!==void 0&&s!=null&&d(t,["tuningTask","hyperparameters","epochCount"],s);const i=l(e,["learningRateMultiplier"]);if(i!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(e,["batchSize"]);t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","batchSize"],u);const c=l(e,["learningRate"]);if(t!==void 0&&c!=null&&d(t,["tuningTask","hyperparameters","learningRate"],c),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Ak(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=l(e,["validationDataset"]);t!==void 0&&g!=null&&d(t,["supervisedTuningSpec"],$c(g))}else if(o==="PREFERENCE_TUNING"){const g=l(e,["validationDataset"]);t!==void 0&&g!=null&&d(t,["preferenceOptimizationSpec"],$c(g))}const s=l(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&d(t,["tunedModelDisplayName"],s);const i=l(e,["description"]);t!==void 0&&i!=null&&d(t,["description"],i);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=l(e,["epochCount"]);t!==void 0&&g!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=l(e,["epochCount"]);t!==void 0&&g!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let p=l(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const g=l(e,["adapterSize"]);t!==void 0&&g!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(p==="PREFERENCE_TUNING"){const g=l(e,["adapterSize"]);t!==void 0&&g!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const h=l(e,["beta"]);return t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function Rk(e,t){const n={},r=l(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&Bk(s);const i=l(e,["config"]);return i!=null&&Ik(i,n),n}function Mk(e,t){const n={},r=l(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&Hk(s,n,t);const i=l(e,["config"]);return i!=null&&Ak(i,n,t),n}function Pk(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Dk(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Lk(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const i=l(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),r}function Fk(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const i=l(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),r}function Uk(e,t){const n={},r=l(e,["config"]);return r!=null&&Lk(r,n),n}function Vk(e,t){const n={},r=l(e,["config"]);return r!=null&&Fk(r,n),n}function jk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tunedModels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>H0(u))),d(n,["tuningJobs"],i)}return n}function $k(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tuningJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>ea(u))),d(n,["tuningJobs"],i)}return n}function Gk(e,t){const n={},r=l(e,["name"]);r!=null&&d(n,["model"],r);const o=l(e,["name"]);return o!=null&&d(n,["endpoint"],o),n}function Bk(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(e,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["examples","examples"],o)}return n}function Hk(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=l(e,["gcsUri"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=l(e,["gcsUri"]);t!==void 0&&i!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let s=l(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=l(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=l(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function H0(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],S0(s));const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const u=l(e,["tuningTask","startTime"]);u!=null&&d(n,["startTime"],u);const c=l(e,["tuningTask","completeTime"]);c!=null&&d(n,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(n,["updateTime"],f);const p=l(e,["description"]);p!=null&&d(n,["description"],p);const m=l(e,["baseModel"]);m!=null&&d(n,["baseModel"],m);const h=l(e,["_self"]);return h!=null&&d(n,["tunedModel"],Gk(h)),n}function ea(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],S0(s));const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const u=l(e,["startTime"]);u!=null&&d(n,["startTime"],u);const c=l(e,["endTime"]);c!=null&&d(n,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(n,["updateTime"],f);const p=l(e,["error"]);p!=null&&d(n,["error"],p);const m=l(e,["description"]);m!=null&&d(n,["description"],m);const h=l(e,["baseModel"]);h!=null&&d(n,["baseModel"],h);const g=l(e,["tunedModel"]);g!=null&&d(n,["tunedModel"],g);const w=l(e,["preTunedModel"]);w!=null&&d(n,["preTunedModel"],w);const S=l(e,["supervisedTuningSpec"]);S!=null&&d(n,["supervisedTuningSpec"],S);const N=l(e,["preferenceOptimizationSpec"]);N!=null&&d(n,["preferenceOptimizationSpec"],N);const y=l(e,["tuningDataStats"]);y!=null&&d(n,["tuningDataStats"],y);const v=l(e,["encryptionSpec"]);v!=null&&d(n,["encryptionSpec"],v);const x=l(e,["partnerModelTuningSpec"]);x!=null&&d(n,["partnerModelTuningSpec"],x);const E=l(e,["customBaseModel"]);E!=null&&d(n,["customBaseModel"],E);const T=l(e,["experiment"]);T!=null&&d(n,["experiment"],T);const C=l(e,["labels"]);C!=null&&d(n,["labels"],C);const k=l(e,["outputUri"]);k!=null&&d(n,["outputUri"],k);const A=l(e,["pipelineJob"]);A!=null&&d(n,["pipelineJob"],A);const R=l(e,["serviceAccount"]);R!=null&&d(n,["serviceAccount"],R);const _=l(e,["tunedModelDisplayName"]);_!=null&&d(n,["tunedModelDisplayName"],_);const P=l(e,["veoTuningSpec"]);return P!=null&&d(n,["veoTuningSpec"],P),n}function qk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["metadata"]);s!=null&&d(n,["metadata"],s);const i=l(e,["done"]);i!=null&&d(n,["done"],i);const u=l(e,["error"]);return u!=null&&d(n,["error"],u),n}function $c(e,t){const n={},r=l(e,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const o=l(e,["vertexDatasetResource"]);return o!=null&&d(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zk extends Yt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new qn(Wt.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:Wl.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Dk(t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>ea(p))}else{const f=Pk(t);return u=z("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>H0(p))}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Vk(t);return u=z("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=$k(p),h=new vc;return Object.assign(h,m),h})}else{const f=Uk(t);return u=z("tunedModels",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=jk(p),h=new vc;return Object.assign(h,m),h})}}async cancel(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=_k(t);return u=z("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=bk(p),h=new wc;return Object.assign(h,m),h})}else{const f=Ek(t);return u=z("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Nk(p),h=new wc;return Object.assign(h,m),h})}}async tuneInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Mk(t,t);return s=z("tuningJobs",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>ea(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rk(t);return s=z("tunedModels",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>qk(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jk{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Wk=1024*1024*8,Ok=3,Kk=1e3,Yk=2,Bs="x-goog-upload-status";async function Qk(e,t,n){var r;const o=await q0(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Xk(e,t,n){var r;const o=await q0(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=x0(s),u=new eu;return Object.assign(u,i),u}async function q0(e,t,n){var r,o;let s=0,i=0,u=new Ol(new Response),c="upload";for(s=e.size;i<s;){const f=Math.min(Wk,s-i),p=e.slice(i,i+f);i+f>=s&&(c+=", finalize");let m=0,h=Kk;for(;m<Ok&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(i),"Content-Length":String(f)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[Bs]));)m++,await eC(h),h=h*Yk;if(i+=f,((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[Bs])!=="active")break;if(s<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Zk(e){return{size:e.size,type:e.type}}function eC(e){return new Promise(t=>setTimeout(t,e))}class tC{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Qk(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Xk(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Zk(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nC{create(t,n,r){return new rC(t,n,r)}}class rC{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gc="x-goog-api-key";class oC{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Gc)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Gc,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sC="gl-node/";class _r{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=Lg(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new oC(this.apiKey);this.apiClient=new D1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:sC+"web",uploader:new tC,downloader:new Jk}),this.models=new Z1(this.apiClient),this.live=new W1(this.apiClient,o,new nC),this.batches=new dy(this.apiClient),this.chats=new zy(this.models,this.apiClient),this.caches=new By(this.apiClient),this.files=new tv(this.apiClient),this.operations=new ek(this.apiClient),this.authTokens=new gk(this.apiClient),this.tunings=new zk(this.apiClient),this.fileSearchStores=new Tk(this.apiClient)}}const Ze=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ps=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"})}),fi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),jt=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),pi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.036-2.134H8.716c-1.126 0-2.036.954-2.036 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),ta=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-2.695A8.25 8.25 0 005.166 6.166L2 9.348"})}),hi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),Ot=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),qe=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Xt=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),iC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.832A1.5 1.5 0 015.25 3.5h13.5a1.5 1.5 0 011.5 1.5v1.168a1.5 1.5 0 01-1.5 1.5h-1.5v1.5a1.5 1.5 0 01-3 0v-1.5H9v1.5a1.5 1.5 0 01-3 0v-1.5H4.5a1.5 1.5 0 01-1.5-1.5V4.832zM21 14.5a.75.75 0 000-1.5h-18a.75.75 0 000 1.5h18z"})}),lC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 4c4.418 0 8 3.358 8 7.5c0 1.901 -.755 3.637 -2 4.96l0 2.54a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1v-2.54c-1.245 -1.322 -2 -3.058 -2 -4.96c0 -4.142 3.582 -7.5 8 -7.5z"}),a.jsx("path",{d:"M10 17v3"}),a.jsx("path",{d:"M14 17v3"}),a.jsx("path",{d:"M9 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),a.jsx("path",{d:"M15 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),aC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.047 8.287 8.287 0 009 9.601a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.468 5.99 5.99 0 00-1.925 3.547 5.975 5.975 0 01-2.133-1.001A3.75 3.75 0 0012 18z"})]}),z0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z"})}),Ve=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),mi=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z"}),a.jsx("path",{d:"M5 13l6 6"}),a.jsx("path",{d:"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365"}),a.jsx("path",{d:"M10 5.5l-2 -2.5h-5v5l3 2.5"})]}),uC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M14.7 13.5c-1.1 -2 -1.441 -2.5 -2.7 -2.5c-1.259 0 -1.736 .755 -2.836 2.747c-.942 1.703 -2.846 1.845 -3.321 3.291c-.097 .265 -.145 .677 -.143 .962c0 1.176 .787 2 1.8 2c1.259 0 3 -1 4.5 -1s3.241 1 4.5 1c1.013 0 1.8 -.823 1.8 -2c0 -.285 -.049 -.697 -.146 -.962c-.475 -1.451 -2.512 -1.835 -3.454 -3.538z"}),a.jsx("path",{d:"M20.188 8.082a1.039 1.039 0 0 0 -.406 -.082h-.015c-.735 .012 -1.56 .75 -1.993 1.866c-.519 1.335 -.28 2.7 .538 3.052c.129 .055 .267 .082 .406 .082c.739 0 1.575 -.742 2.011 -1.866c.516 -1.335 .273 -2.7 -.54 -3.052z"}),a.jsx("path",{d:"M9.474 9c.055 0 .109 0 .163 -.011c.944 -.128 1.533 -1.346 1.32 -2.722c-.203 -1.297 -1.047 -2.267 -1.932 -2.267c-.055 0 -.109 0 -.163 .011c-.944 .128 -1.533 1.346 -1.32 2.722c.204 1.293 1.048 2.267 1.933 2.267z"}),a.jsx("path",{d:"M16.456 6.733c.214 -1.376 -.375 -2.594 -1.32 -2.722a1.164 1.164 0 0 0 -.162 -.011c-.885 0 -1.728 .97 -1.93 2.267c-.214 1.376 .375 2.594 1.32 2.722c.054 .007 .108 .011 .162 .011c.885 0 1.73 -.974 1.93 -2.267z"}),a.jsx("path",{d:"M5.69 12.918c.816 -.352 1.054 -1.719 .536 -3.052c-.436 -1.124 -1.271 -1.866 -2.009 -1.866c-.14 0 -.277 .027 -.407 .082c-.816 .352 -1.054 1.719 -.536 3.052c.436 1.124 1.271 1.866 2.009 1.866c.14 0 .277 -.027 .407 -.082z"})]}),dC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13h4l1-3h8l1-3H8L7 10H3v3zm10 0v5h4v-5h-4z"}),a.jsx("rect",{x:"14",y:"14",width:"2",height:"3",rx:"1",fill:"currentColor",fillOpacity:"0.2"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7h2v2h-2z"})]}),cC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M17 3h4v4"}),a.jsx("path",{d:"M21 3l-15 15"}),a.jsx("path",{d:"M3 18h3v3"}),a.jsx("path",{d:"M16.5 20c1.576 -1.576 2.5 -4.095 2.5 -6.5c0 -4.81 -3.69 -8.5 -8.5 -8.5c-2.415 0 -4.922 .913 -6.5 2.5l12.5 12.5z"})]}),fC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"}),a.jsx("path",{d:"M4 14l8 -3l8 3"})]}),J0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})}),zn=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 10.663c0 -4.224 -4.041 -7.663 -9 -7.663s-9 3.439 -9 7.663c0 3.783 3.201 6.958 7.527 7.56c1.053 .239 .932 .644 .696 2.133c-.039 .238 -.184 .932 .777 .512c.96 -.42 5.18 -3.201 7.073 -5.48c1.304 -1.504 1.927 -3.029 1.927 -4.715v-.01z"})]}),pC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 10.663c0 -4.224 -4.041 -7.663 -9 -7.663s-9 3.439 -9 7.663c0 3.783 3.201 6.958 7.527 7.56c1.053 .239 .932 .644 .696 2.133c-.039 .238 -.184 .932 .777 .512c.96 -.42 5.18 -3.201 7.073 -5.48c1.304 -1.504 1.927 -3.029 1.927 -4.715v-.01z"})]}),Hs=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),_o=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),W0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Jn=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),Nr=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),hC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M12 17.25h.008v.008H12v-.008z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),mC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),gC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),iu=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),O0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),Bc=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M12 9.75V15m0 0 3-3m-3 3-3-3m6-6.75-1.5-1.5m-9 0L4.5 9"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v13.5"})]}),xC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M16 9v6a5 5 0 0 1 -10 0v-4l3 3"}),a.jsx("path",{d:"M16 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M16 5v-2"})]}),yC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M4 20l10 -10m0 -5v5h5m-9 -1v5h5m-9 -1v5h5m-5 -5l4 -4l4 -4"}),a.jsx("path",{d:"M19 10c.638 -.636 1 -1.515 1 -2.486a3.515 3.515 0 0 0 -3.517 -3.514c-.97 0 -1.847 .367 -2.483 1m-3 13l4 -4l4 -4"})]}),vC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M10 16v5"}),a.jsx("path",{d:"M14 16v5"}),a.jsx("path",{d:"M9 9h6l-1 7h-4z"}),a.jsx("path",{d:"M5 11c1.333 -1.333 2.667 -2 4 -2"}),a.jsx("path",{d:"M19 11c-1.333 -1.333 -2.667 -2 -4 -2"}),a.jsx("path",{d:"M12 4m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"})]}),wC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})}),kC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),gi="https://script.google.com/macros/s/AKfycbzbvAajmyWMO4dLe2OeukVbJ9wtOVi_-W2Zadc4qMLlbgyaQ-yTDKTPnPT57Y7DmcVB/exec";let Yo=null;const Pt={},xi=()=>Yo||(console.log("Fetching AI Database (Icons & Skills)..."),Yo=fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"GET_DATA"})}).then(e=>e.json()).then(e=>{if(e.data&&Array.isArray(e.data)){let t=0,n=0,r=0,o=0;e.data.forEach(s=>{const i=Object.values(s).map(h=>String(h).trim()),u=i.find(h=>h.startsWith("Skill_")),c=i.find(h=>h.startsWith("NPC_ICON_")),f=i.find(h=>h.startsWith("Ability Memo _")),p=i.find(h=>h.startsWith("Item Memo _")),m=h=>{let g=s.aiCode||s.AI_||s.B||s.B||s.b||s.description||s.;if(!g||String(g).trim()===h){const w=i.filter(S=>S!==h&&S.length>2);w.length>0&&(g=w.sort((S,N)=>N.length-S.length)[0])}return g?String(g).trim():null};if(u){const h=u.replace(/^Skill_/,"").trim(),g=m(u);g&&(Pt[h]=g,n++)}if(f){const h=m(f);h&&(Pt[f]=h,r++)}if(p){const h=m(p);h&&(Pt[p]=h,o++)}if(c){let h=s.aiCode||s.AI_||s.B||s.B||s.b;if(!h||String(h).trim()===c){const g=["undead","robot","elemental","insect","beast","scientist","gunner","archer","mage","tank","warrior","citizen","person","fishhook","bigman","feather"];h=i.find(w=>g.includes(w.toLowerCase()))}h&&(localStorage.setItem(c,String(h).trim()),t++)}if(!u&&!c&&!f&&!p){let h=s.author||s.||s.C||s.C||s.c||s.name||s.,g=s.aiCode||s.AI_||s.B||s.B||s.b||s.description||s.;if(h&&g){const w=String(h).trim();!w.startsWith("NPC_ICON_")&&!w.startsWith("Skill_")&&!w.startsWith("Ability Memo")&&!w.startsWith("Item Memo")&&(Pt[w]=String(g).trim(),n++)}}}),console.log(`AI DB Loaded: Icons(${t}), Skills(${n}), Abilities(${r}), Items(${o})`)}}).catch(e=>{console.warn("Failed to load AI Database",e)}),Yo),na=[];let zr=!1;const ra=async()=>{if(zr||na.length===0)return;zr=!0;const e=na.shift();if(!e){zr=!1;return}try{const{npc:t,resolve:n}=e,r=`NPC_ICON_${t.name}`,o=localStorage.getItem(r);if(o){console.log(`[Queue] Icon found in storage for ${t.name}, skipping AI.`),n(o),zr=!1,setTimeout(ra,0);return}console.log(`[Queue] Generating AI Icon for ${t.name}...`);const s=new _r({apiKey:"AIzaSyCeW0VBVT7nIwbusmjIbe1HTkD-6OEVht4"}),i=["undead","robot","elemental","insect","beast","scientist","gunner","archer","mage","tank","warrior","citizen","person","fishhook","bigman","feather"],u=`
            Analyze the following RPG Character (NPC) and select the most appropriate icon key from the list.
            
            [Icon Keys]
            ${i.join(", ")}

            [NPC Data]
            Name: ${t.name}
            Description: ${t.description}
            Stats: ${t.stats.map(m=>`${m.label}:${m.value}`).join(", ")}
            Actions: ${t.actions.map(m=>m.category).join(", ")}

            Rule: Return ONLY the selected key as a plain string. If unsure, return 'person'.
        `,f=(await s.models.generateContent({model:"gemini-2.5-flash",contents:u})).text||"person",p=i.find(m=>f.includes(m))||"person";localStorage.setItem(r,p),fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:p,author:r}})}).catch(m=>console.warn("Failed to save icon to DB",m)),n(p)}catch(t){console.error("NPC Icon Analysis Failed:",t),e.resolve("person")}finally{setTimeout(()=>{zr=!1,ra()},500)}},CC=(e,t)=>{na.push({npc:e,resolve:t}),ra()},Hc={:"            .",:"     .     .",:"          .",:" ,            ."," ":"  .     .","  ":"  .       .",:"        .",:"   .     .",:"     . , ,   .",:"        .",:"     .   .",:"        .",:",         .",:"        .",:"        .",:"  . , ,   .",:"       .",:"       ."," ":"      ."," ":"       ."," ":"        ."," ":"  ,   / ."," ":"       .",:" , ,     .",:"  ,      .",:" , ,       ."," ":"       .",:",        .",:"       .",:"         .",:", ,     .",:"      ."," ":"       ."," ":"     .",:"       ."},K0={" ":" .     ."," ":", , ,      .",:"     ,   .",:" , ,  .    0    .      ."," ":"   . (: , ,  )     ."," ":"      .   ."," ":"   , /     ."," ":"   .    .",:",    .   .",:",       .",:"  .    () .",:"  .","  ":"  NPC ,    .",:"     .",:"        ."},qc=e=>{if(typeof e!="object"||e===null||!e.alignment)return"text-left";switch(e.alignment.toUpperCase()){case"CENTER":return"text-center";case"END":return"text-right";case"JUSTIFY":return"text-justify";case"START":default:return"text-left"}return"text-left"},lu=e=>e?typeof e=="string"?e:e.runs?e.runs.map(t=>t.text||"").join(""):e.text||"":"",ne=e=>lu(e).replace(/\[npc\]|\[skill\]/gi,"").trim(),ar=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(lu).join(" ");return/\[npc\]/i.test(t)},yr=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(lu).join(" ");return/\[skill\]/i.test(t)},Dn=e=>e.type!=="table"||!e.rows?!1:e.rows.flat().map(ne).join(" ").includes("[passive]"),Ln=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return/\[obstacle\]|\[object\]/i.test(t)||e.rows.length>0&&ne(e.rows[0][0]).includes("")&&(ne(e.rows[0][1]).includes("")||ne(e.rows[0][1]).includes(""))},Fn=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim());return t.some(n=>n.includes(""))&&t.some(n=>n.includes(""))&&t.some(n=>n.includes(""))},qs=e=>{if(ar(e)||yr(e)||Dn(e)||Ln(e)||Fn(e)||e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return t.includes("")&&t.includes("")},io=e=>{if(ar(e)||yr(e)||Dn(e)||Ln(e)||Fn(e)||e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return t.includes("")?!1:t.includes("")&&t.includes("")},lo=e=>{var r;if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=ne((r=e.rows[0])==null?void 0:r[0]).trim(),n=e.rows[1].map(o=>ne(o).trim());return t==="Q & A"&&n[0]===""&&n[1]===""&&n[2]===""},qi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<1||lo(e))return!1;const t=e.rows[0].map(n=>ne(n).trim());return t[0]===""&&t[1]===""&&t[2]===""},Qo=e=>e.type!=="table"||!e.rows||qs(e)||io(e)||lo(e)||yr(e)||Dn(e)||Ln(e)||Fn(e)?!1:e.rows.length===1&&e.rows[0].length===3,zi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim()).join(" ");return t.includes("")&&t.includes("")&&t.includes("")},Ji=e=>{var r;if(e.type!=="table"||!e.rows||e.rows.length<2||ne(((r=e.rows[0])==null?void 0:r[0])||"").trim()!=="")return!1;const n=e.rows.flat().map(o=>ne(o)).join(" ");return n.includes("")||n.includes("")||n.includes("")||n.includes("")},Wi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim()).join(" ");return t.includes(" ")&&t.includes(" ")},zc=(e,t)=>{if(e.type!=="paragraph"||!e.isBold||!e.text||!e.text.includes(".")||!t||t.type!=="table"||!t.rows||t.rows.length===0)return!1;const n=t.rows.flat().map(ne).join(" ");return(n.includes("")||n.includes(" ")||n.includes(" "))&&e.text.length<150},Oi=e=>{var u,c,f;if(e.type!=="table"||!e.rows||e.rows.length<3)return!1;const t=ne((u=e.rows[0])==null?void 0:u[0]),n=((c=e.rows[1])==null?void 0:c.map(ne).join(" "))||"",r=ne((f=e.rows[2])==null?void 0:f[0]).trim(),o=t.includes("."),s=n.includes("")||n.includes(" ")||n.includes(" "),i=[" "," ",""," "," ."].some(p=>r.startsWith(p));return qs(e)||io(e)||Dn(e)||Ln(e)||Fn(e)?!1:o&&s&&i},Jc=e=>{let t=e.text||"";return!t&&e.runs&&(t=e.runs.map(n=>n.text).join("")),t=t.trim(),t.startsWith("M:")||t.startsWith("M :")?"M":t.startsWith("L:")||t.startsWith("L :")?"L":null},Y0=e=>{switch(e){case"":case"":case" ":return"bg-red-500/10 text-red-600 dark:text-red-300 border-red-500/20";case"":case"":return"bg-blue-500/10 text-blue-600 dark:text-blue-300 border-blue-500/20";case"":case"":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-300 border-emerald-500/20";case"":case"":return"bg-sky-500/10 text-sky-600 dark:text-sky-300 border-sky-500/20";case"":case"":return"bg-violet-500/10 text-violet-600 dark:text-violet-300 border-violet-500/20";case" ":return"bg-teal-500/10 text-teal-600 dark:text-teal-300 border-teal-500/20";case" ":return"bg-orange-500/10 text-orange-600 dark:text-orange-300 border-orange-500/20";case"":return"bg-slate-500/10 text-slate-600 dark:text-slate-300 border-slate-500/20";case"":case"":return"bg-amber-500/10 text-amber-600 dark:text-amber-300 border-amber-500/20";case"":case" ":return"bg-indigo-500/10 text-indigo-600 dark:text-indigo-300 border-indigo-500/20";case"":case"":return"bg-yellow-500/10 text-yellow-600 dark:text-yellow-300 border-yellow-500/20";case"":return"bg-rose-500/10 text-rose-600 dark:text-rose-300 border-rose-500/20";case"":return"bg-fuchsia-500/10 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500/20";case"":return"bg-purple-500/10 text-purple-600 dark:text-purple-300 border-purple-500/20";case"":return"bg-lime-500/10 text-lime-600 dark:text-lime-300 border-lime-500/20";default:return"bg-slate-200 dark:bg-slate-700/30 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600/30"}},SC=(e,t,n,r)=>{var i,u,c,f;const o=new Set,s=(e+" "+t).toLowerCase();if(r==="ability"){s.includes(" ")?o.add(" "):s.includes(" ")?o.add(" "):(s.includes("")||s.includes(""))&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/ |||/)&&o.add(""),s.includes("")&&o.add(""),s.includes("1")||s.includes("")?o.add(""):(s.includes("")||s.includes("")||s.includes(""))&&o.add("");const p=s.match(/(\d+)\s*/);p&&parseInt(p[1],10)>=3&&o.add("");const m=(i=n.find(g=>g.label.includes("")))==null?void 0:i.value;m&&m!=="-"&&m!==""?o.add(""):(m==="-"||m==="")&&o.add("");const h=(u=n.find(g=>g.label.includes("")))==null?void 0:u.value;if(h&&h!=="-"&&String(h).length>2){o.add("");const g=String(h);["","","","","",""].some(S=>g.includes(S))&&o.add("")}}else{s.match(/|||||||||||/)?o.add(" "):s.match(/||||||||||||/)?o.add(" "):s.match(//)&&o.add(""),s.match(/|||/)?o.add(""):s.match(/||||||/)?o.add(""):o.add("");const p=String(((c=n.find(g=>g.label.includes("")))==null?void 0:c.value)||"0"),m=parseInt(p.replace(/[^0-9]/g,"")||"0");m>=5?o.add(""):m<=1&&o.add("");const h=(f=n.find(g=>g.label.includes("")))==null?void 0:f.value;h&&h!=="-"&&o.add("")}return o.has("")&&o.has("")&&o.delete(""),Array.from(o)},Mo=({tableId:e,rowCount:t})=>!e||t<=0?null:a.jsx("div",{className:"absolute top-0 left-0 w-full h-0 overflow-visible pointer-events-none",children:Array.from({length:t}).map((n,r)=>a.jsx("div",{id:`${e}-row-${r}`,className:"absolute top-0"},r))}),TC=({rows:e,id:t})=>{const[n,r]=I.useState(null);if(!e||e.length<2)return null;const o=e[0].map((f,p)=>{var w,S;const m=ne(f).trim(),h=ne(((w=e[1])==null?void 0:w[p])||"").trim(),g=ne(((S=e[2])==null?void 0:S[p])||"").trim();return{title:m,description:h,examples:g}}),s=f=>f.includes("")?{wrapper:"border-orange-500/30 bg-orange-50 dark:bg-orange-900/10 hover:bg-orange-100 dark:hover:bg-orange-900/20 hover:border-orange-500/50",iconBg:"bg-orange-100 dark:bg-orange-500/20",iconColor:"text-orange-600 dark:text-orange-400",titleColor:"text-orange-600 dark:text-orange-400",icon:a.jsx(mi,{className:"w-6 h-6"}),analysisBg:"bg-orange-100 dark:bg-orange-900/40"}:f.includes("")?{wrapper:"border-teal-500/30 bg-teal-50 dark:bg-teal-900/10 hover:bg-teal-100 dark:hover:bg-teal-900/20 hover:border-teal-500/50",iconBg:"bg-teal-100 dark:bg-teal-500/20",iconColor:"text-teal-600 dark:text-teal-400",titleColor:"text-teal-600 dark:text-teal-400",icon:a.jsx(Ve,{className:"w-6 h-6"}),analysisBg:"bg-teal-100 dark:bg-teal-900/40"}:{wrapper:"border-indigo-500/30 bg-indigo-50 dark:bg-indigo-900/10 hover:bg-indigo-100 dark:hover:bg-indigo-900/20 hover:border-indigo-500/50",iconBg:"bg-indigo-100 dark:bg-indigo-500/20",iconColor:"text-indigo-600 dark:text-indigo-400",titleColor:"text-indigo-600 dark:text-indigo-400",icon:a.jsx(Jn,{className:"w-6 h-6"}),analysisBg:"bg-indigo-100 dark:bg-indigo-900/40"},i=f=>f.includes("")?"  (' ', '', ' ' )    ,  ,         .             ** ** .":f.includes("")?"  ('', '' )     ,       .         ** ** .":"  ('', '' )   ''  ,         .      ( )  ** ** .",u=(f,p)=>{r(h=>h===p?null:p);const m=f.currentTarget;m.classList.remove("highlight-animate"),m.offsetWidth,m.classList.add("highlight-animate"),setTimeout(()=>m.classList.remove("highlight-animate"),3e3)},c=f=>f.split(/(\*\*.*?\*\*)/g).map((m,h)=>m.startsWith("**")&&m.endsWith("**")?a.jsx("strong",{className:"text-slate-900 dark:text-white font-bold",children:m.slice(2,-2)},h):a.jsx("span",{children:m},h));return a.jsxs("div",{id:t,"data-highlight-container":"true",className:"not-prose my-8 scroll-mt-24",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((f,p)=>{const m=s(f.title),h=n===p,g=i(f.title);return a.jsxs("div",{onClick:w=>u(w,p),className:`flex flex-col p-6 rounded-2xl border transition-all duration-300 cursor-pointer shadow-lg overflow-hidden min-h-[280px] relative group ${m.wrapper}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-20",children:[a.jsx("h4",{className:`text-xl font-bold ${m.titleColor}`,children:f.title}),a.jsx("div",{className:`p-2 rounded-lg ${m.iconBg} ${m.iconColor} transition-transform duration-300 ${h?"scale-110 rotate-12":""}`,children:m.icon})]}),a.jsxs("div",{className:"relative flex-grow",children:[a.jsxs("div",{className:`
                                        transition-all duration-500 ease-in-out absolute top-0 left-0 w-full h-full flex flex-col
                                        ${h?"opacity-0 -translate-x-full pointer-events-none":"opacity-100 translate-x-0 relative"}
                                    `,children:[a.jsx("div",{className:"flex-grow mb-6",children:a.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap",children:f.description})}),f.examples&&a.jsxs("div",{className:"pt-4 border-t border-slate-300 dark:border-slate-700/50 mt-auto",children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.examples.split(",").map((w,S)=>{const N=w.trim();return N?a.jsx("span",{className:"text-xs px-2 py-1 bg-white dark:bg-slate-800 rounded border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:N},S):null})})]}),a.jsx("div",{className:"mt-4 text-center text-xs text-slate-500 dark:text-slate-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:"   "})]}),a.jsxs("div",{className:`
                                        transition-all duration-500 ease-in-out absolute top-0 left-0 w-full h-full flex flex-col
                                        ${h?"opacity-100 translate-x-0 relative":"opacity-0 translate-x-full pointer-events-none"}
                                    `,children:[a.jsxs("div",{className:`p-4 rounded-xl border border-slate-300 dark:border-white/10 ${m.analysisBg} flex-grow flex flex-col`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-300 dark:border-white/10 pb-2",children:[a.jsx(Xt,{className:`w-4 h-4 ${m.iconColor}`}),a.jsx("span",{className:`text-sm font-bold ${m.titleColor}`,children:"  "})]}),a.jsx("p",{className:"text-slate-700 dark:text-slate-200 text-sm leading-relaxed",children:c(g)})]}),a.jsx("div",{className:"mt-4 text-center text-xs text-slate-500 font-medium",children:"   "})]})]})]},p)})})]})},Wc=({rows:e,id:t,itemIds:n})=>{const[r,o]=I.useState(null),s=I.useMemo(()=>!e||e.length<=1?[]:e.slice(1).map(u=>{const f=ne(u[0]).trim().split(/\n+/),p=f.length>1?f.slice(0,-1).join(`
`).trim():f[0].trim(),m=f.length>1?f[f.length-1].trim():"";return{question:p,asker:m,category:ne(u[1]).trim(),answer:ne(u[2]).trim()}}),[e]),i=u=>{o(r===u?null:u)};return a.jsx("div",{id:t,"data-highlight-container":"true",className:"space-y-4 not-prose my-8 p-4 bg-slate-100 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 scroll-mt-24 relative",children:s.map((u,c)=>a.jsxs("div",{id:n?n[c]:t?`${t}-row-${c+1}`:void 0,className:`bg-white dark:bg-slate-800 rounded-lg shadow-md transition-all duration-300 ease-in-out border scroll-mt-24 ${r===c?"border-cyan-500 ring-2 ring-cyan-500/50":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[a.jsx("button",{onClick:()=>i(c),className:"w-full text-left p-4 focus:outline-none","aria-expanded":r===c,children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(hi,{className:"w-7 h-7 text-cyan-600 dark:text-cyan-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight",children:u.question})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 mt-3 pl-10",children:[u.category&&a.jsx("span",{className:"font-semibold bg-slate-200 dark:bg-slate-700 text-cyan-700 dark:text-cyan-400 px-2 py-0.5 rounded",children:u.category}),a.jsx("span",{children:""}),a.jsxs("span",{children:[": ",u.asker]})]})]}),a.jsx("div",{className:"transition-transform duration-300 ease-in-out flex-shrink-0",style:{transform:r===c?"rotate(45deg)":"rotate(0deg)"},children:a.jsx(Ze,{className:"w-6 h-6 text-slate-400"})})]})}),a.jsx("div",{className:`faq-answer-wrapper ${r===c?"open":""}`,children:a.jsx("div",{className:"faq-answer-content",children:a.jsx("div",{className:"px-4 pb-5 pt-3 border-t border-slate-200 dark:border-slate-700/70",children:a.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:u.answer})})})})]},c))})},EC=({rows:e,id:t,type:n})=>{const r=I.useMemo(()=>{const i=[];return e.forEach(u=>{u.forEach(c=>{let f=ne(c).trim();if(f=f.replace(/\[passive\]|\[obstacle\]|\[object\]/gi,"").trim(),!f)return;f.split(/\r?\n/).map(m=>m.trim()).filter(Boolean).forEach(m=>{let h=m,g="";const w=m.indexOf(" - ");if(w!==-1)h=m.substring(0,w).trim(),g=m.substring(w+3).trim();else{const S=m.indexOf("-");S!==-1&&S>0&&(h=m.substring(0,S).trim(),g=m.substring(S+1).trim())}h&&i.push({title:h,description:g})})})}),i},[e]),o=n==="obstacle"?{border:"border-orange-500/50",bg:"bg-orange-500/5",hoverBorder:"hover:border-orange-400",iconColor:"text-orange-600 dark:text-orange-500",titleColor:"text-orange-700 dark:text-orange-400",icon:a.jsx(W0,{className:"w-8 h-8"})}:{border:"border-indigo-500/50",bg:"bg-indigo-500/5",hoverBorder:"hover:border-indigo-400",iconColor:"text-indigo-600 dark:text-indigo-500",titleColor:"text-indigo-700 dark:text-indigo-400",icon:a.jsx(Jn,{className:"w-8 h-8"})},s=i=>{const u=window.getSelection();if(u&&u.toString().length>0)return;const c=i.currentTarget;c.classList.remove("highlight-animate"),c.offsetWidth,c.classList.add("highlight-animate"),setTimeout(()=>c.classList.remove("highlight-animate"),3e3)};return r.length===0?null:a.jsx("div",{className:"not-prose my-8 relative",children:a.jsxs("div",{id:t,"data-highlight-container":"true",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 scroll-mt-24",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),r.map((i,u)=>a.jsxs("div",{onClick:s,className:`
                            relative overflow-hidden p-5 rounded-xl border transition-all duration-300 group cursor-pointer
                            bg-white dark:bg-slate-900/50 shadow-lg hover:shadow-xl hover:-translate-y-1
                            ${o.border} ${o.hoverBorder}
                        `,children:[a.jsx("div",{className:`absolute inset-0 ${o.bg} opacity-50 group-hover:opacity-100 transition-opacity`}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h4",{className:`text-lg font-bold ${o.titleColor} leading-tight`,children:i.title}),a.jsx("div",{className:`${o.iconColor} opacity-70 group-hover:opacity-100 transition-opacity`,children:o.icon})]}),i.description&&a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:i.description})]})]},u))]})})},_C=({rows:e,id:t})=>{const[n,r]=I.useState(null),[o,s]=I.useState({}),[i,u]=I.useState(!1),[c,f]=I.useState(null);I.useEffect(()=>{(async()=>{await xi(),s({...Pt})})()},[]);const p=I.useMemo(()=>{if(!e)return[];const g=[];return e.forEach(w=>{w.forEach(S=>{const N=ne(S);N&&N.split(/\r?\n/).forEach(v=>{const x=v.trim();x&&g.push(x)})})}),g.sort((w,S)=>w.localeCompare(S))},[e]);I.useEffect(()=>{if(!n)return;if(Hc[n]){f(null);return}if(o[n]){f(null);return}const g=JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}");if(g[n]){f(null),s(N=>({...N,[n]:g[n]})),Pt[n]=g[n];return}let w=!0;return(async()=>{u(!0),f(null);try{const y=await new _r({apiKey:"AIzaSyCeW0VBVT7nIwbusmjIbe1HTkD-6OEVht4"}).models.generateContent({model:"gemini-2.5-flash",contents:`TRPG ' '  '${n}' 1~2( 2)    . 
                    /   ,   (~) .
                    **          .`});if(w){const v=y.text;if(v){const x=v.trim();s(T=>({...T,[n]:x})),Pt[n]=x;const E=JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}");E[n]=x,localStorage.setItem("ai_skill_descriptions",JSON.stringify(E)),fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:x,author:`Skill_${n}`}})}).catch(T=>console.error("Failed to save skill to remote DB:",T))}else f("   .")}}catch(N){console.error("AI Description Generation Error:",N),w&&f("AI  .")}finally{w&&u(!1)}})(),()=>{w=!1}},[n,o]);const m=g=>{const w=window.getSelection();if(w&&w.toString().length>0)return;const S=g.currentTarget;S.classList.remove("highlight-animate"),S.offsetWidth,S.classList.add("highlight-animate"),setTimeout(()=>S.classList.remove("highlight-animate"),3e3)},h=n?Hc[n]||o[n]||JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}")[n]:null;return a.jsx("div",{className:"not-prose my-8 relative",children:a.jsxs("div",{id:t,"data-highlight-container":"true",onClick:m,className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg relative overflow-hidden scroll-mt-24 cursor-pointer hover:border-cyan-500/30 hover:shadow-cyan-500/10 transition-all duration-200",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:a.jsx(z0,{className:"w-24 h-24 text-cyan-500"})}),a.jsxs("h4",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400 mb-4 uppercase tracking-wider border-b border-slate-200 dark:border-slate-700 pb-2 flex items-center gap-2",children:[a.jsx("span",{children:"  "}),a.jsx("span",{className:"text-xs text-slate-500 font-normal normal-case ml-auto",children:"   "})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:p.map((g,w)=>a.jsx("button",{onClick:S=>{r(g===n?null:g)},className:`
                                px-3 py-1.5 rounded-md text-sm font-semibold transition-all duration-200 transform border
                                ${n===g?"bg-cyan-600 text-white border-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.5)] scale-105":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-cyan-600 dark:hover:text-cyan-300 hover:border-cyan-500/50 hover:scale-110"}
                            `,children:g},`${g}-${w}`))}),a.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${n?"max-h-64 opacity-100":"max-h-0 opacity-0"}`,children:n&&a.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-lg p-5 border border-cyan-500/30 shadow-inner relative animate-fade-in-fast backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ve,{className:`w-5 h-5 text-cyan-500 dark:text-cyan-400 ${i&&!h?"animate-spin":""}`}),a.jsx("h5",{className:"text-cyan-700 dark:text-cyan-300 font-bold text-lg",children:n})]}),a.jsx("p",{className:"text-slate-700 dark:text-slate-200 leading-relaxed text-sm min-h-[3rem]",children:h||(i?a.jsx("span",{className:"text-slate-500 dark:text-slate-400 animate-pulse",children:"AI      ..."}):c?a.jsx("span",{className:"text-red-500 dark:text-red-400 text-xs",children:c}):"       .")})]})})]})})},NC=({rows:e,id:t})=>{const[n,r]=I.useState(null),o=[{type:"profile",title:"",subtitle:" ",description:" ?",icon:a.jsx(zn,{className:"w-8 h-8 text-emerald-500 dark:text-emerald-400"}),color:"emerald",bg:"bg-emerald-100 dark:bg-emerald-500/10",border:"border-emerald-200 dark:border-emerald-500/20"},{type:"ability",title:"",subtitle:" ",description:"   ?",icon:a.jsx(Xt,{className:"w-8 h-8 text-amber-500 dark:text-amber-400"}),color:"amber",bg:"bg-amber-100 dark:bg-amber-500/10",border:"border-amber-200 dark:border-amber-500/20"},{type:"inventory",title:"",subtitle:" ",description:" ?",icon:a.jsx(mi,{className:"w-8 h-8 text-cyan-500 dark:text-cyan-400"}),color:"cyan",bg:"bg-cyan-100 dark:bg-cyan-500/10",border:"border-cyan-200 dark:border-cyan-500/20"},{type:"additional",title:"",subtitle:" ",description:"  ",icon:a.jsx(Ze,{className:"w-8 h-8 text-purple-500 dark:text-purple-400"}),color:"purple",bg:"bg-purple-100 dark:bg-purple-500/10",border:"border-purple-200 dark:border-purple-500/20"}],i=e[0].map(c=>ne(c).trim()).map((c,f)=>{let p=o.find(m=>c.includes(m.title));return p||c===""&&f===3&&(p=o[3]),p?{...p,items:[],originalIndex:f}:null}).filter(c=>c!==null);for(let c=1;c<e.length;c++)i.forEach(f=>{const p=e[c][f.originalIndex];if(p){let m=ne(p).trim();if((m==="-"||m===".")&&(m=""),m){const h=m.split(/\r?\n/).filter(g=>{const w=g.trim();return w!==""&&w!=="-"&&w!=="."});f.items.push(...h)}}});const u=i.length>=4?"grid-cols-1 sm:grid-cols-2 xl:grid-cols-4":i.length===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 sm:grid-cols-2";return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-12 scroll-mt-24",children:a.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/40 rounded-3xl border border-slate-200 dark:border-slate-700/50 shadow-2xl backdrop-blur-sm overflow-hidden",children:a.jsx("div",{className:`grid ${u} divide-y sm:divide-y-0 sm:divide-x divide-slate-200 dark:divide-slate-700/50`,children:i.map((c,f)=>a.jsxs("div",{className:"relative group p-6 xl:p-8 hover:bg-white dark:hover:bg-slate-800/40 transition-colors duration-500",children:[a.jsx("div",{className:`absolute top-0 left-0 w-full h-1 bg-${c.color}-500/50 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500`}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl ${c.bg} border ${c.border} flex items-center justify-center mb-5 shadow-[0_0_15px_rgba(0,0,0,0.1)] dark:shadow-[0_0_15px_rgba(0,0,0,0.3)] group-hover:scale-x-110 transition-transform duration-300`,children:c.icon}),a.jsx("h3",{className:`font-black text-2xl text-${c.color}-600 dark:text-${c.color}-400 mb-1`,children:c.title}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:c.subtitle}),a.jsx("div",{className:"bg-slate-200 dark:bg-slate-800/50 px-4 py-1.5 rounded-full border border-slate-300 dark:border-slate-700/50 mb-6",children:a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 font-medium",children:c.description})}),a.jsx("div",{className:"w-full space-y-2.5",children:c.items.map((p,m)=>{const h=n===p;return a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("button",{onClick:g=>{g.stopPropagation(),r(h?null:p)},className:`
                                                    w-full flex items-center justify-between p-3 transition-all cursor-pointer text-left focus:outline-none focus:ring-2 focus:ring-cyan-500/50
                                                    ${h?`bg-slate-100 dark:bg-slate-800 border border-${c.color}-500/50 rounded-t-xl rounded-b-none border-b-0`:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-cyan-500/30"}
                                                `,children:[a.jsx("span",{className:"text-slate-800 dark:text-slate-200 font-bold text-sm",children:p}),a.jsx("div",{className:`w-2 h-2 rounded-full bg-${c.color}-500 shadow-[0_0_6px_currentColor] ${h?"opacity-100":"opacity-60 group-hover:opacity-100"} flex-shrink-0 ml-2`})]}),h&&a.jsx("div",{className:`bg-slate-50/90 dark:bg-slate-800/80 backdrop-blur-md p-3 rounded-b-xl border border-t-0 border-${c.color}-500/50 animate-fade-in-fast`,children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap text-left",children:K0[p]||"     ."})})]},m)})})]})]},f))})})})},bC=({rows:e,id:t})=>{const[n,r]=I.useState(null),o=e.slice(1).flatMap(s=>{const i=ne(s[0]).trim();return i?i.split(/\r?\n/).map(u=>u.trim()).filter(Boolean):[]});return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-8 scroll-mt-24",children:a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/40 rounded-2xl border border-dashed border-slate-300 dark:border-slate-600/50 p-2 flex flex-col sm:flex-row items-stretch gap-2 hover:border-slate-400 dark:hover:border-slate-500 transition-colors group",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-xl px-6 py-4 flex items-center justify-center sm:justify-start gap-4 border border-slate-200 dark:border-slate-700/50 sm:min-w-[180px]",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-500/20 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform duration-300",children:a.jsx(Ze,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-none",children:" "}),a.jsx("span",{className:"text-xs text-slate-500 mt-1 font-medium",children:" "})]})]}),a.jsx("div",{className:"flex-1 bg-white/50 dark:bg-slate-800/30 rounded-xl border border-slate-200 dark:border-slate-700/30 p-4 flex flex-wrap items-center gap-3",children:o.map((s,i)=>{const u=n===s;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>r(u?null:s),className:`
                                        px-4 py-2 rounded-lg text-sm font-bold border shadow-sm flex items-center gap-2 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500/50
                                        ${u?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white border-purple-500 ring-1 ring-purple-500/50":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:text-white hover:border-purple-500/50"}
                                    `,children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500/50"}),s]}),u&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-72 p-4 bg-white dark:bg-slate-800 border border-purple-500/50 rounded-xl shadow-2xl z-50 animate-fade-in-fast",children:[a.jsx("h5",{className:"font-bold text-purple-600 dark:text-purple-400 mb-2 pb-2 border-b border-slate-200 dark:border-slate-700",children:s}),a.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap text-left",children:K0[s]||"     ."}),a.jsx("div",{className:"absolute -top-1.5 left-4 w-3 h-3 bg-white dark:bg-slate-800 border-t border-l border-purple-500/50 transform rotate-45"})]})]},i)})})]})})},IC=({target:e,difficultyLabel:t,onClose:n,className:r})=>{const[o,s]=I.useState(2),[i,u]=I.useState(0),[c,f]=I.useState(e);I.useEffect(()=>{f(e)},[e]);const[p,m]=I.useState(null),[h,g]=I.useState(!1),w=I.useMemo(()=>{const N=c-i,y=o,v=o*6;if(N<=y)return 100;if(N>v)return 0;let x=new Array(v+1).fill(0);for(let C=1;C<=6;C++)x[C]=1;for(let C=2;C<=o;C++){const k=new Array(v+1).fill(0);for(let A=0;A<=v;A++)if(x[A]!==0)for(let R=1;R<=6;R++)A+R<=v&&(k[A+R]+=x[A]);x=k}const E=Math.pow(6,o);let T=0;for(let C=N;C<=v;C++)T+=x[C];return T/E*100},[o,i,c]),S=()=>{g(!0),m(null),setTimeout(()=>{const N=Array.from({length:o},()=>Math.floor(Math.random()*6)+1),y=N.reduce((v,x)=>v+x,0)+i;m({dice:N,total:y}),g(!1)},600)};return a.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl border border-cyan-500/50 shadow-2xl p-5 flex flex-col gap-4 animate-fade-in-fast ${r}`,children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h5",{className:"font-bold text-cyan-600 dark:text-cyan-400",children:" "}),a.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>f(Math.max(1,c-1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",inputMode:"numeric",value:c,onChange:N=>{const y=N.target.value;y===""?f(0):/^\d+$/.test(y)&&f(parseInt(y,10))},onBlur:()=>{c<1&&f(1)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0"}),a.jsx("button",{onClick:()=>f(c+1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Ze,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s(Math.max(1,o-1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:N=>{const y=N.target.value;y===""?s(0):/^\d+$/.test(y)&&s(parseInt(y,10))},onBlur:()=>{let N=o;N<1&&(N=1),N>20&&(N=20),s(N)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0"}),a.jsx("button",{onClick:()=>s(Math.min(20,o+1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Ze,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" (+/-)"}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>u(i-1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("input",{type:"number",value:i,onChange:N=>{const y=N.target.valueAsNumber;isNaN(y)?(N.target.value===""||N.target.value==="-")&&u(0):u(y)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),a.jsx("button",{onClick:()=>u(i+1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Ze,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-700/50",children:[a.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:["  ( ",c," )"]}),a.jsxs("div",{className:`text-2xl font-black tabular-nums ${w>=80?"text-emerald-500 dark:text-emerald-400":w>=50?"text-cyan-500 dark:text-cyan-400":w>=20?"text-amber-500 dark:text-amber-400":"text-red-500 dark:text-red-400"}`,children:[w.toFixed(1),"%"]})]}),a.jsx("div",{children:a.jsxs("button",{onClick:S,disabled:h,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-lg shadow-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95 flex justify-center items-center gap-2",children:[h?a.jsx(Ve,{className:"w-5 h-5 animate-spin"}):a.jsx(Xt,{className:"w-5 h-5"}),h?" ...":" "]})}),p&&a.jsxs("div",{className:"mt-2 bg-slate-100 dark:bg-slate-700/30 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-600 animate-slide-in-bottom",children:[a.jsx("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:p.dice.map((N,y)=>a.jsx("div",{className:"w-8 h-8 bg-white dark:bg-slate-200 text-slate-900 rounded font-bold flex items-center justify-center shadow-md border border-slate-200 dark:border-none",children:N},y))}),a.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[" ",a.jsx("strong",{className:"text-slate-900 dark:text-white",children:p.total-i})," ",i!==0&&a.jsxs("span",{className:"text-cyan-600 dark:text-cyan-400",children:["(",i>0?"+":"",i,")"]}),"= ",a.jsx("span",{className:`font-black text-lg ${p.total>=c?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:p.total})]}),a.jsx("div",{className:`text-xs font-bold mt-1 ${p.total>=c?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:p.total>=c?"!":""})]})]})},AC=({rows:e,id:t})=>{const[n,r]=I.useState(null),o=e[0].map((i,u)=>{var p;const c=ne(((p=e[1])==null?void 0:p[u])||"").trim(),f=parseInt(c.replace(/[^0-9]/g,""),10)||0;return{label:ne(i).trim(),displayValue:c,value:f}}),s=i=>{const u=[{border:"border-emerald-500",text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20"},{border:"border-cyan-500",text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-500/10",glow:"shadow-cyan-500/20"},{border:"border-blue-500",text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-500/10",glow:"shadow-blue-500/20"},{border:"border-amber-500",text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-500/10",glow:"shadow-amber-500/20"},{border:"border-red-500",text:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",glow:"shadow-red-500/20"},{border:"border-fuchsia-500",text:"text-fuchsia-600 dark:text-fuchsia-400",bg:"bg-fuchsia-500/10",glow:"shadow-fuchsia-500/20"}];return u[Math.min(i,u.length-1)]};return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-12 scroll-mt-24",children:a.jsxs("div",{className:"flex flex-col gap-6 items-center",children:[a.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/40 p-6 rounded-2xl border border-slate-200 dark:border-slate-700/50 shadow-inner flex-grow w-full",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[a.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:a.jsx("span",{children:"  "})}),a.jsx("span",{className:"text-xs text-slate-500 font-medium hidden sm:inline",children:"   "})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4",children:o.map((i,u)=>{const c=s(u),f=(n==null?void 0:n.label)===i.label;return a.jsxs("button",{onClick:()=>r(p=>(p==null?void 0:p.label)===i.label?null:{label:i.label,value:i.value}),className:`relative group flex flex-col items-center justify-center p-4 rounded-xl border transition-all duration-300 ${f?"ring-2 ring-cyan-500 scale-105 z-10 bg-white dark:bg-slate-800":"hover:-translate-y-1 hover:shadow-lg hover:bg-white dark:hover:bg-slate-800"} ${c.border} ${c.bg} ${c.glow}`,children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wide text-center h-8 flex items-center",children:i.label}),a.jsxs("div",{className:`text-2xl font-black ${c.text} tabular-nums`,children:[i.value,"+"]}),a.jsx("div",{className:"text-xs text-slate-500 mt-1 opacity-60",children:""})]},u)})}),a.jsx("div",{className:"text-center text-xs text-slate-500 sm:hidden mt-2",children:"    "})]})}),n&&a.jsx(IC,{className:"w-full max-w-lg",target:n.value,difficultyLabel:n.label,onClose:()=>r(null)})]})})},RC={undead:lC,robot:z0,elemental:aC,insect:iC,beast:uC,scientist:J0,gunner:dC,archer:cC,mage:Ve,tank:fC,warrior:mi,citizen:pC,person:zn,fishhook:xC,bigman:vC,feather:yC},MC=({npc:e,className:t})=>{const n=`NPC_ICON_${e.name}`,[r,o]=I.useState(()=>localStorage.getItem(n));I.useEffect(()=>{let i=!0;return(async()=>{if(localStorage.getItem(n)){i&&o(localStorage.getItem(n));return}try{await xi()}catch{}const c=localStorage.getItem(n);if(c){i&&o(c);return}CC(e,f=>{i&&o(f)})})(),()=>{i=!1}},[e,n]);const s=r?RC[r]||zn:hi;return a.jsxs("div",{className:`relative ${t}`,title:r||" ...",children:[!r&&a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-500 border-t-transparent animate-spin z-10"}),a.jsx(s,{className:`w-full h-full transition-opacity duration-500 ${r?"opacity-100":"opacity-30"}`})]})},Oc=({npc:e,id:t})=>{const n=r=>{const o=window.getSelection();if(o&&o.toString().length>0)return;const s=r.currentTarget;s.classList.remove("highlight-animate"),s.offsetWidth,s.classList.add("highlight-animate"),setTimeout(()=>s.classList.remove("highlight-animate"),3e3)};return a.jsx("div",{className:"not-prose my-6 relative rounded-xl",children:a.jsxs("div",{id:t,"data-highlight-container":"true",onClick:n,className:"p-6 bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg relative z-10 scroll-mt-24 cursor-pointer hover:border-cyan-500/30 hover:shadow-cyan-500/10 transition-all duration-200",children:[a.jsx(Mo,{tableId:t,rowCount:e.sourceRowCount}),a.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-600 pb-4 mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("h3",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:e.name}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 italic mt-1",children:e.description})]}),a.jsx(MC,{npc:e,className:"w-10 h-10 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]}),a.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 mb-4",children:e.stats.map(r=>a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:[r.label.replace(/\.$/,""),":"]}),a.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-white",children:r.value})]},r.label))}),a.jsx("div",{className:"space-y-4",children:e.actions.map(r=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 pb-1 mb-2",children:r.category}),a.jsx("ul",{className:"space-y-3 list-none p-0",children:r.abilities.map((o,s)=>a.jsx("li",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 rounded-md border border-slate-100 dark:border-none",children:a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("div",{className:"flex-grow",children:o.name?a.jsxs(a.Fragment,{children:[a.jsxs("strong",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[o.name,"."]}),a.jsx("span",{className:"text-slate-600 dark:text-slate-300 ml-1",children:o.description})]}):a.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:o.description})}),o.charge!==void 0&&a.jsxs("div",{title:"",className:"flex-shrink-0 flex items-center gap-1 bg-amber-100 dark:bg-slate-700 text-amber-600 dark:text-amber-400 px-2 py-1 rounded-full text-xs font-bold",children:[a.jsx(Xt,{className:"w-3 h-3"}),a.jsxs("span",{children:[" ",o.charge]})]})]})},s))})]},r.category))})]})})},PC=({messages:e,renderContent:t})=>a.jsx("div",{className:"flex flex-col space-y-6 my-8 not-prose px-2 sm:px-4",children:e.map((n,r)=>{const o=n.speaker==="M";return a.jsx("div",{className:`flex w-full ${o?"justify-start":"justify-end"}`,children:a.jsxs("div",{className:`flex max-w-[90%] sm:max-w-[80%] gap-3 ${o?"flex-row":"flex-row-reverse"}`,children:[a.jsx("div",{className:"flex-shrink-0 flex flex-col justify-end pb-1",children:a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shadow-md ${o?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 ring-1 ring-slate-300 dark:ring-slate-600":"bg-cyan-600 text-white ring-1 ring-cyan-500"}`,children:n.speaker})}),a.jsx("div",{className:`relative px-4 py-3 shadow-md border min-w-[120px] ${o?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-2xl rounded-bl-none text-slate-800 dark:text-slate-200":"bg-cyan-50 dark:bg-cyan-900/40 border-cyan-200 dark:border-cyan-700/50 rounded-2xl rounded-br-none text-slate-800 dark:text-slate-100"}`,children:a.jsx("div",{className:"space-y-2 text-sm leading-relaxed",children:n.elements.map((s,i)=>{let u=s;if(i===0){u=JSON.parse(JSON.stringify(s));const c=/^[ML]\s*:\s*/;if(u.runs){for(const f of u.runs)if(f.text&&c.test(f.text)){f.text=f.text.replace(c,"");break}}else u.text&&(u.text=u.text.replace(c,""))}return u.type==="list_item"?a.jsxs("div",{id:s.id,className:"flex gap-2 ml-1 text-left scroll-mt-24",children:[a.jsx("span",{className:`select-none mt-1.5 w-1.5 h-1.5 rounded-full flex-shrink-0 ${o?"bg-slate-400":"bg-cyan-500"}`}),a.jsx("div",{className:"flex-1",children:t(u)})]},i):a.jsx("div",{id:s.id,className:`${u.isBold?"font-bold":""} ${u.isItalic?"italic":""} ${u.alignment==="CENTER","text-center"} scroll-mt-24`,children:t(u)},i)})})})]})},r)})}),DC=({introElements:e,narrativeElements:t,explanationElements:n,renderElement:r})=>{const[o,s]=I.useState(!1),i=u=>a.jsx("div",{className:"space-y-4",children:u.map((c,f)=>r(c,f))});return a.jsxs("div",{className:"relative group my-8",children:[a.jsx("div",{className:"mb-6",children:i(e)}),a.jsxs("div",{className:"relative overflow-hidden min-h-[300px] border border-slate-200 dark:border-slate-700/50 rounded-xl bg-slate-50 dark:bg-slate-900/30 p-6 shadow-inner",children:[a.jsx("h3",{className:"font-semibold text-cyan-600 dark:text-cyan-400 mb-4 text-xl border-b border-slate-200 dark:border-slate-700 pb-2",children:o?"":" "}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`transition-all duration-500 ease-in-out transform ${o?"opacity-0 translate-x-[20px] pointer-events-none absolute top-0 left-0 w-full":"opacity-100 translate-x-0 relative"}`,children:i(t)}),a.jsx("div",{className:`transition-all duration-500 ease-in-out transform ${o?"opacity-100 translate-x-0 relative":"opacity-0 -translate-x-[20px] pointer-events-none absolute top-0 left-0 w-full"}`,children:i(n)})]}),a.jsx("button",{onClick:()=>s(!o),className:`absolute top-1/2 -translate-y-1/2 z-20 
                        w-10 py-6 rounded-full shadow-[0_0_15px_rgba(34,211,238,0.4)] 
                        transition-all duration-500 ease-out cursor-pointer border border-cyan-500/50
                        opacity-0 group-hover:opacity-100
                        flex items-center justify-center
                        ${o?"bg-white dark:bg-slate-800 text-cyan-600 dark:text-cyan-400 right-2":"bg-cyan-600 text-white right-6"}
                        hover:scale-105 active:scale-95
                    `,title:o?" ":" ",children:a.jsx("div",{className:"text-xs font-bold tracking-widest uppercase flex items-center justify-center h-full",style:{writingMode:"vertical-rl",textOrientation:"upright"},children:o?" ":" "})})]})]})},LC=({title:e,description:t,footer:n,id:r,rowCount:o,variant:s,tags:i,onClick:u,isSelected:c,compact:f})=>{const p=s==="item",m=h=>{if(u){h.stopPropagation(),u();return}const g=window.getSelection();if(g&&g.toString().length>0)return;const w=h.currentTarget;w.classList.remove("highlight-animate"),w.offsetWidth,w.classList.add("highlight-animate"),setTimeout(()=>w.classList.remove("highlight-animate"),3e3)};return a.jsx("div",{className:"h-full relative",children:a.jsxs("div",{id:r,"data-highlight-container":"true",onClick:m,className:`
                    rounded-xl border transition-all duration-300 group cursor-pointer h-full flex flex-col relative z-10 scroll-mt-24
                    ${c?p?"bg-indigo-50 dark:bg-indigo-900/60 border-indigo-500 ring-1 ring-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-cyan-50 dark:bg-cyan-900/60 border-cyan-500 ring-1 ring-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]":p?"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700 hover:border-indigo-400/50 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(129,140,248,0.15)]":"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 hover:border-cyan-500/50 hover:bg-cyan-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(34,211,238,0.15)]"}
                    ${f?"p-3":"p-5"}
                `,children:[a.jsx(Mo,{tableId:r,rowCount:o||0}),a.jsxs("div",{className:`flex justify-between items-start gap-3 ${f?"mb-1":"mb-2"}`,children:[a.jsx("h4",{className:`font-bold leading-tight ${f?"text-base":"text-lg"} ${p?"text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-300":"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-500 dark:group-hover:text-cyan-300"}`,children:e}),p?a.jsx("div",{className:`rounded-md bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0 ${f?"p-1":"p-1.5"}`,children:a.jsx(Nr,{className:f?"w-4 h-4":"w-5 h-5"})}):a.jsx("div",{className:`rounded-md bg-cyan-100 dark:bg-cyan-500/10 text-cyan-500 dark:text-cyan-400 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0 ${f?"p-1":"p-1.5"}`,children:a.jsx(Xt,{className:f?"w-4 h-4":"w-5 h-5"})})]}),!f&&i&&i.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:i.map(h=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${Y0(h)}`,children:h},h))}),a.jsx("div",{className:"flex-grow",children:a.jsx("div",{className:`text-slate-600 dark:text-slate-300 leading-relaxed ${f?"text-xs line-clamp-2":"text-sm"}`,children:t})}),a.jsx("div",{className:`border-t text-xs ${f?"mt-2 pt-2":"mt-4 pt-3"} ${p?"border-indigo-200 dark:border-indigo-500/20 text-indigo-700 dark:text-indigo-200/80":"border-cyan-200 dark:border-cyan-500/20 text-slate-500 dark:text-slate-400"}`,children:n})]})})},FC=({result:e,type:t,isSelected:n,onSelect:r,onUse:o})=>{const s=t==="item",i=s?"border-indigo-500":"border-cyan-500",u=s?"text-indigo-300":"text-cyan-300",c=s?"from-indigo-900/40 to-slate-900/40":"from-cyan-900/40 to-slate-900/40";return a.jsxs("div",{onClick:r,className:`
                relative p-4 rounded-xl border bg-gradient-to-br shadow-lg animate-slide-in-bottom cursor-pointer transition-all duration-300 overflow-hidden
                ${c} ${n?`ring-2 ring-offset-2 ring-offset-slate-900 ${s?"ring-indigo-400 border-indigo-400":"ring-cyan-400 border-cyan-400"}`:`${i} hover:scale-[1.01]`}
            `,children:[a.jsxs("div",{className:`transition-all duration-300 ${n?"blur-[4px] opacity-40 pointer-events-none":""}`,children:[a.jsx("div",{className:"absolute -top-3 -right-3 pointer-events-none",children:a.jsx(Ve,{className:`w-8 h-8 ${u} drop-shadow-lg`})}),a.jsx("h4",{className:`font-bold text-lg ${u} mb-2`,children:e.name}),a.jsx("p",{className:"text-slate-200 text-sm mb-3 leading-relaxed",children:e.description}),a.jsxs("div",{className:"bg-black/30 rounded p-2 text-xs border-l-2 border-slate-500",children:[a.jsx("span",{className:"text-slate-400 font-semibold mr-1",children:":"}),a.jsx("span",{className:"text-slate-300",children:e.changes})]})]}),a.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-300 ${n?"opacity-100 z-10":"opacity-0 pointer-events-none"}`,children:a.jsxs("button",{onClick:f=>{f.stopPropagation(),o()},className:"group relative px-6 py-3 bg-white/10 backdrop-blur-md border border-white/20 text-white font-bold rounded-xl shadow-2xl hover:bg-white/20 transition-all transform hover:scale-105 active:scale-95 flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-indigo-500/20 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(Ve,{className:"w-5 h-5 text-cyan-300 animate-pulse"}),a.jsx("span",{className:"relative z-10 text-shadow-sm",children:" "}),a.jsx("div",{className:"absolute -inset-1 rounded-xl bg-gradient-to-r from-cyan-400 to-indigo-400 opacity-30 blur-md group-hover:opacity-50 transition-opacity -z-10"})]})})]})},UC=({item:e,type:t,onClose:n})=>{const[r,o]=I.useState([]),[s,i]=I.useState(!1),[u,c]=I.useState(null),[f,p]=I.useState(null),[m,h]=I.useState(!1),[g,w]=I.useState("enhance"),[S,N]=I.useState(""),[y,v]=I.useState(null),[x,E]=I.useState(null),T=t==="item",C=T?"text-indigo-400":"text-cyan-400",k=(_,P)=>`${_==="ability"?"Ability Memo _":"Item Memo _"}${P.trim()}`;I.useEffect(()=>{let _=!0;const P=k(t,e.rawTitle);return(async()=>{var G;if(await xi(),Pt[P]){_&&p(Pt[P]);return}_&&h(!0);try{const b=new _r({apiKey:"AIzaSyCeW0VBVT7nIwbusmjIbe1HTkD-6OEVht4"}),U=`TRPG ' ' ${T?"":" "} '${e.rawTitle}'     ,  ,    3~4 .
                
                [ ]
                : ${e.rawDescription}
                ${e.rawDetails.map(M=>`${M.label}: ${M.value}`).join(", ")}
                
                  (~) .`,O=(G=(await b.models.generateContent({model:"gemini-2.5-flash",contents:U})).text)==null?void 0:G.trim();O&&_&&(p(O),Pt[P]=O,fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:O,author:P}})}).catch(M=>console.error("Failed to save memo",M)))}catch(b){console.error("Memo Gen Failed",b)}finally{_&&h(!1)}})(),()=>{_=!1}},[e.rawTitle,t,e.rawDescription,e.rawDetails,T]);const A=async()=>{i(!0),c(null),o([]),v(null);try{const _=new _r({apiKey:"AIzaSyCeW0VBVT7nIwbusmjIbe1HTkD-6OEVht4"});let P="";const V=S.trim()?`
[  ]
${S}
`:"";g==="enhance"?P=`
                     TRPG ' '    / .
                      [ ] ,      ** ** 2 .

                    [ ]
                    - : ${T?"(Item)":" (Ability)"}
                    - : ${e.rawTitle}
                    - : ${e.rawDescription}
                    -  : ${JSON.stringify(e.rawDetails)}
                    ${V}

                    [ ]
                    1. ** 1 (Tier 1)**:    ,   .
                    2. ** 2 (Tier 2)**: ,      .
                    3.     /   .
                    4.      .
                    5.      .

                    [ ]
                      JSON   (    JSON):
                    [
                        {
                            "name": " ",
                            "description": "  ",
                            "changes": "  (:  +2,  )"
                        },
                        {
                            "name": " ",
                            "description": "  ",
                            "changes": " "
                        }
                    ]
                `:P=`
                     TRPG ' '    / .
                      [ ] ,     ** (Variant)** 2 .

                    [ ]
                    - : ${T?"(Item)":" (Ability)"}
                    - : ${e.rawTitle}
                    - : ${e.rawDescription}
                    -  : ${JSON.stringify(e.rawDetails)}
                    ${V}

                    [ ]
                    1. ** A (Variant A)**:   ,  (: ->)    .
                    2. ** B (Twisted/Special Variant)**:   ,       .
                    3.      .
                    4.      .
                    5.       .

                    [ ]
                      JSON   (    JSON):
                    [
                        {
                            "name": "  A",
                            "description": "  ",
                            "changes": "  (:   )"
                        },
                        {
                            "name": "   B",
                            "description": "   ",
                            "changes": " "
                        }
                    ]
                `;const b=(await _.models.generateContent({model:"gemini-2.5-flash",contents:P,config:{responseMimeType:"application/json"}})).text;if(!b)throw new Error("AI  .");const L=JSON.parse(b).map(O=>({...O,description:g==="enhance"?`${O.description} (${e.rawTitle}  )`:O.description}));o(L)}catch(_){console.error("Enhancement Error:",_),c("    .")}finally{i(!1)}},R=_=>{const P=t==="ability"?"user_created_abilities":"user_created_items";try{const V=JSON.parse(localStorage.getItem(P)||"[]"),G={name:_.name,description:_.description,isCreation:!0};t==="ability"?(G.condition="-",G.charge="-"):(G.durability="-",G.volume=0),e.rawDetails&&e.rawDetails.forEach(b=>{const U=b.label,L=b.value;U.includes("")?G.condition=L:U.includes("")?G.charge=L:U.includes("")?G.durability=L:U.includes("")&&(G.volume=parseInt(L.replace(/[^0-9]/g,""))||0)}),V.push(G),localStorage.setItem(P,JSON.stringify(V)),E(`'${_.name}'()   .`),setTimeout(()=>E(null),3e3)}catch(V){console.error("Storage Error",V),alert("   .")}};return a.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl overflow-hidden flex flex-col h-auto relative",children:[x&&a.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-emerald-600 text-white px-6 py-4 rounded-2xl shadow-[0_0_50px_rgba(16,185,129,0.5)] text-lg font-bold animate-fade-in-fast z-[9999] flex items-center gap-4 border-2 border-emerald-400/50 backdrop-blur-md min-w-[300px] justify-center pointer-events-none",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:a.jsx(kC,{className:"w-6 h-6"})}),x]}),a.jsxs("div",{className:"px-5 py-4 border-b border-slate-700 bg-slate-800/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ve,{className:`w-5 h-5 ${C}`}),a.jsx("h3",{className:"font-bold text-white",children:"AI  "})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-5 flex flex-col gap-6 max-h-[60vh] xl:max-h-[calc(100vh-320px)] overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:" "}),a.jsxs("div",{className:"bg-slate-800 p-3 rounded-xl border border-slate-700",children:[a.jsx("div",{className:"flex justify-between items-start gap-2 mb-2",children:a.jsx("h4",{className:`font-bold ${C}`,children:e.rawTitle})}),a.jsx("p",{className:"text-sm text-slate-300 mb-2",children:e.rawDescription}),a.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-slate-500",children:e.tags.map(_=>a.jsx("span",{className:"border border-slate-600 px-1 rounded",children:_},_))})]})]}),a.jsxs("div",{className:"bg-white/5 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(hi,{className:`w-4 h-4 text-slate-400 ${m?"animate-pulse":""}`}),a.jsx("span",{className:"text-xs font-bold text-slate-400",children:"AI "})]}),m?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-2 bg-slate-700 rounded w-3/4 animate-pulse"}),a.jsx("div",{className:"h-2 bg-slate-700 rounded w-full animate-pulse"}),a.jsx("div",{className:"h-2 bg-slate-700 rounded w-5/6 animate-pulse"})]}):a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed whitespace-pre-wrap",children:f||"    ."})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[r.length===0&&!s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-0.5 h-8 bg-slate-700 mb-2"}),a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsxs("button",{onClick:A,className:`
                                        group relative px-6 py-3 rounded-l-full font-bold text-white shadow-lg transition-all flex-1
                                        ${T?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/30":"bg-cyan-600 hover:bg-cyan-500 shadow-cyan-500/30"}
                                        active:scale-95 flex items-center justify-center gap-2 overflow-hidden
                                    `,children:[a.jsx("span",{className:"absolute inset-0 w-full h-full bg-white/20 -translate-x-full group-hover:translate-x-full transition-transform duration-500 skew-x-12"}),a.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5"}),g==="enhance"?"AI ":"AI   "]})]}),a.jsx("button",{onClick:()=>w(_=>_==="enhance"?"variant":"enhance"),className:`
                                        p-3 rounded-r-full font-bold text-white shadow-lg transition-all border-l border-white/20
                                        ${T?"bg-indigo-700 hover:bg-indigo-600":"bg-cyan-700 hover:bg-cyan-600"}
                                        active:scale-95 flex items-center justify-center
                                    `,title:g==="enhance"?"   ":"  ",children:a.jsx(wC,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"w-full mt-3 px-1",children:a.jsx("input",{type:"text",value:S,onChange:_=>N(_.target.value),placeholder:"   ()",className:"w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all text-center"})}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:g==="enhance"?"Gemini AI      .":"Gemini AI      ."})]}),s&&a.jsxs("div",{className:"flex flex-col items-center py-4",children:[a.jsx("div",{className:`w-10 h-10 border-4 border-t-transparent rounded-full animate-spin ${T?"border-indigo-500":"border-cyan-500"}`}),a.jsx("p",{className:"text-sm text-slate-400 mt-3 animate-pulse",children:g==="enhance"?"   ...":"   ..."})]}),u&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-red-400 text-sm mb-3",children:u}),a.jsxs("button",{onClick:A,className:"text-xs px-3 py-1.5 bg-slate-800 hover:bg-slate-700 rounded border border-slate-600 text-slate-300 flex items-center gap-1 mx-auto",children:[a.jsx(ta,{className:"w-3 h-3"}),"  "]})]})]}),r.length>0&&a.jsxs("div",{className:"space-y-4 animate-fade-in-fast",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"h-px bg-slate-700 flex-1"}),a.jsx("span",{className:"text-xs font-bold text-slate-400",children:""}),a.jsx("div",{className:"h-px bg-slate-700 flex-1"})]}),r.map((_,P)=>a.jsx(FC,{result:_,type:t,isSelected:P===y,onSelect:()=>v(V=>V===P?null:P),onUse:()=>R(_)},P)),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsxs("button",{onClick:()=>o([]),className:"flex-1 py-2 text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center justify-center gap-1 border border-slate-700 rounded hover:bg-slate-800",children:[a.jsx(fi,{className:"w-3 h-3"})," "]}),a.jsxs("button",{onClick:A,className:"flex-1 py-2 text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center justify-center gap-1 border border-slate-700 rounded hover:bg-slate-800",children:[a.jsx(ta,{className:"w-3 h-3"}),"   "]})]})]})]})]})},VC=({items:e,type:t})=>{const[n,r]=I.useState(""),[o,s]=I.useState([]),[i,u]=I.useState(null),c=I.useMemo(()=>{const w=new Set;return e.forEach(S=>S.tags.forEach(N=>w.add(N))),Array.from(w).sort()},[e]),f=I.useMemo(()=>e.filter(w=>{const S=(w.rawTitle+" "+w.rawDescription).toLowerCase().includes(n.toLowerCase()),N=o.length===0||o.every(y=>w.tags.includes(y));return S&&N}),[e,n,o]),p=w=>{s(S=>S.includes(w)?S.filter(N=>N!==w):[...S,w])},m=t==="item",h=I.useMemo(()=>e.find(w=>w.id===i),[e,i]),g=w=>{w&&u(S=>S===w?null:w)};return a.jsxs("div",{className:"my-8 space-y-4",children:[a.jsx("div",{className:"bg-slate-100 dark:bg-slate-900/40 p-4 rounded-xl border border-slate-200 dark:border-slate-700/50 backdrop-blur-sm sticky top-20 z-30 shadow-lg transition-all duration-300",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ot,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:bg-white dark:focus:bg-slate-900 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:m?" ...":" ...",value:n,onChange:w=>r(w.target.value)}),n&&a.jsx("button",{onClick:()=>r(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${o.length===0?m?"bg-indigo-600 text-white border-indigo-500":"bg-cyan-600 text-white border-cyan-500":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:""}),c.map(w=>{const S=o.includes(w),N=Y0(w);return a.jsx("button",{onClick:()=>p(w),className:`px-3 py-1 text-xs rounded-full border transition-all relative overflow-hidden ${S?`${N} ring-1 ring-offset-1 ring-offset-slate-100 dark:ring-offset-slate-900 ring-black/20 dark:ring-white/20`:"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:w},w)})]})]})}),a.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 items-start relative",children:[a.jsx("div",{className:`flex-1 transition-all duration-500 ease-in-out w-full ${h?"xl:w-2/3":"xl:w-full"}`,children:a.jsx("div",{className:`grid gap-4 transition-all duration-500 ${h?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:f.length>0?f.map((w,S)=>a.jsx(LC,{id:w.id,title:w.title,description:w.description,footer:w.details,rowCount:w.rowCount,variant:t,tags:w.tags,onClick:()=>g(w.id),isSelected:i===w.id,compact:!!h},S)):a.jsx("div",{className:"col-span-full py-12 text-center text-slate-500",children:a.jsx("p",{children:"  ."})})})}),h&&a.jsx("div",{className:"w-full xl:w-[380px] xl:sticky xl:top-72 animate-fade-in-fast shrink-0",children:a.jsx(UC,{item:h,type:t,onClose:()=>u(null)})})]})]})},jC=({elements:e,pageTitle:t,footnotes:n,onShowFootnote:r,onHideFootnote:o})=>{if(!e||e.length===0)return a.jsx("p",{className:"text-slate-400 italic",children:"  ."});const s=new Set;I.useEffect(()=>{xi()},[]);const i=x=>{var C;let E="";switch((C=x.alignment)==null?void 0:C.toUpperCase()){case"CENTER":E+="text-center ";break;case"END":E+="text-right ";break;case"JUSTIFY":E+="text-justify ";break;case"START":default:E+="text-left ";break}return x.runs||(x.isBold&&(E+="font-bold "),x.isItalic&&(E+="italic "),x.isUnderline&&(E+="underline ")),E+="whitespace-pre-wrap ",E.trim()},u=x=>{const E={};return x.fontSize&&(E.fontSize=`${x.fontSize}pt`,E.lineHeight="1.5"),E},c=(x,E)=>{x.preventDefault();const T=document.getElementById(E),C=100;if(T){const A=T.getBoundingClientRect().top+window.pageYOffset-C;window.scrollTo({top:A,behavior:"smooth"});let R=T;T.classList.contains("absolute")&&T.classList.contains("-top-20")&&T.nextElementSibling instanceof HTMLElement&&(R=T.nextElementSibling),R.classList.remove("highlight-animate"),R.offsetWidth,R.classList.add("highlight-animate"),setTimeout(()=>R.classList.remove("highlight-animate"),2e3)}},f=x=>x==null||x===""?null:String(x).replace(/\/r/g,`
`).replace(/\r/g,`
`).split(/(\[\d+\])/g).map((C,k)=>{if(/^\[\d+\]$/.test(C)){const A=C.replace(/[\[\]]/g,"");n&&n[A]&&s.add(A);const R=`footnote-ref-${A}`,_=`footnote-body-${A}`,P=G=>{if(n&&n[A]&&r){const b=G.currentTarget.getBoundingClientRect();r(`[${A}] ${n[A]}`,b)}},V=()=>{o&&o()};return a.jsx("span",{id:R,className:"inline-block align-middle mx-0.5 relative -top-0.5",children:a.jsx("button",{onClick:G=>c(G,_),onMouseEnter:P,onMouseLeave:V,className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors","aria-label":` ${A}`,children:a.jsx(hi,{className:"w-4 h-4"})})},k)}return C}),p=x=>x.runs&&x.runs.length>0?x.runs.map((E,T)=>{const C=[];E.isBold&&C.push("font-bold"),E.isItalic&&C.push("italic"),E.isUnderline&&C.push("underline");const k=a.jsx("span",{className:C.join(" "),children:f(E.text)});return E.linkUrl?a.jsx("a",{href:E.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors",children:k},T):hs.cloneElement(k,{key:T})}):x.text?f(x.text):null,m=x=>typeof x=="object"&&x!==null?p(x):f(x),h=(x,E)=>{var A,R,_;const T=x.id||(x.text||`element-${E}`).toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,""),C=i(x),k=u(x);switch(x.type){case"title":return a.jsx("h1",{id:T,className:`font-extrabold text-cyan-600 dark:text-cyan-400 border-b border-slate-300 dark:border-slate-600 pb-4 mb-6 scroll-mt-24 ${C}`,style:{...k,fontSize:k.fontSize||"3.5rem"},children:p(x)},E);case"heading_1":return a.jsx("h1",{id:T,className:`font-bold text-cyan-600 dark:text-cyan-400 border-b border-slate-300 dark:border-slate-600 pb-2 mb-4 mt-8 scroll-mt-24 ${C}`,style:{...k,fontSize:k.fontSize||"2.25rem"},children:p(x)},E);case"heading_2":return a.jsx("h2",{id:T,className:`font-bold text-cyan-600 dark:text-cyan-400 mb-3 mt-6 scroll-mt-24 ${C}`,style:{...k,fontSize:k.fontSize||"1.875rem"},children:p(x)},E);case"heading_3":return a.jsx("h3",{id:T,className:`font-semibold text-cyan-600 dark:text-cyan-400 mb-2 mt-4 scroll-mt-24 ${C}`,style:{...k,fontSize:k.fontSize||"1.5rem"},children:p(x)},E);case"heading_4":case"heading_5":case"heading_6":return a.jsx("h4",{id:T,className:`font-medium text-cyan-600 dark:text-cyan-400 mb-2 mt-3 scroll-mt-24 ${C}`,style:{...k,fontSize:k.fontSize||"1.25rem"},children:p(x)},E);case"quote":return a.jsx("blockquote",{id:T,className:`border-l-4 border-cyan-500 pl-4 py-2 my-4 text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/50 rounded-r-md scroll-mt-24 ${C}`,style:k,children:p(x)},E);case"table":return a.jsx("div",{id:T,"data-highlight-container":"true",className:"my-6 scroll-mt-24 rounded-lg relative",children:a.jsx("div",{className:"overflow-x-auto p-1.5",children:a.jsxs("table",{className:"w-full border-collapse text-sm table-fixed",children:[a.jsx("thead",{children:a.jsx("tr",{className:"bg-slate-100 dark:bg-slate-700/80",children:(R=(A=x.rows)==null?void 0:A[0])==null?void 0:R.map((V,G)=>a.jsx("th",{className:`border border-slate-300 dark:border-slate-600 p-3 font-bold text-cyan-700 dark:text-cyan-300 whitespace-pre-wrap break-words ${qc(V)}`,children:m(V)},G))})}),a.jsx("tbody",{children:(_=x.rows)==null?void 0:_.slice(1).map((V,G)=>a.jsx("tr",{id:`${T}-row-${G+1}`,className:"border-b border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:V.map((b,U)=>a.jsx("td",{className:`border border-slate-300 dark:border-slate-600 p-3 text-slate-700 dark:text-slate-300 whitespace-pre-wrap break-words ${qc(b)}`,children:m(b)},U))},G))})]})})},E);case"paragraph":default:return x.runs&&x.runs.some(V=>V.text&&String(V.text).trim()!=="")||x.text&&String(x.text).trim()!==""?a.jsx("p",{id:T,className:`mb-3 leading-relaxed text-slate-700 dark:text-slate-300 scroll-mt-24 ${C}`,style:k,children:p(x)},E):null}},g=(x,E)=>{var b,U,L,O;if(!x||x.length===0)return null;let T,C=null;const k=[];let A="",R="";const _=[],P=["","","",""];if(x.some(M=>M.length>1&&P.includes(ne(M[1])))){const $=ne(((b=x[0])==null?void 0:b[0])||"").split(/\n\n|\n/).filter(B=>B.trim()!=="");A=$[0]||"",T=f($[0]),$.length>1&&(R=$.slice(1).join(`
`).trim(),C=a.jsx("p",{children:f(R)}));for(let B=0;B<x.length;B++){const Z=x[B];if(Z.length<2)continue;const se=ne(Z[1]),ge=P.find(Se=>se.includes(Se));if(ge){const Se=(U=x[B+1])==null?void 0:U[1];if(Se!==void 0){const De=ne(Se);_.push({label:ge,value:De}),k.push({label:ge,value:m(Se)})}}}}else{const $=ne(((L=x[0])==null?void 0:L[0])||"").split(/\n\n|\n/).filter(B=>B.trim()!=="");A=$[0]||"",T=f(A),$.length>1?R=$.slice(1).join(`
`).trim():R=ne(((O=x[1])==null?void 0:O[0])||""),R.trim()&&(C=a.jsx("p",{children:f(R)})),x.forEach(B=>{if(B.length<2)return;const Z=ne(B[0]),se=P.find(ge=>Z.includes(ge));if(se){const ge=ne(B[1]);_.push({label:se,value:ge}),k.push({label:se,value:m(B[1])})}})}if(!T||hs.isValidElement(T)&&!T.props.children)return null;const G=SC(A,R,_,E);return{title:T,description:C,details:w(k),tags:G,rawTitle:A,rawDescription:R,rawDetails:_,rowCount:x.length}},w=x=>{const E=["","","",""],T=x.filter(C=>C.label&&C.value).sort((C,k)=>E.indexOf(C.label)-E.indexOf(k.label));return T.length===0?null:a.jsx("div",{className:"flex justify-between items-center gap-4",children:T.map(C=>a.jsxs("span",{children:[a.jsxs("strong",{children:[C.label,":"]})," ",C.value]},C.label))})},S=x=>{const E=x.trim();if(!E)return null;let T,C=E;const k=E.match(/\(\s*(\d+)\)$/);k&&(T=parseInt(k[1],10),C=E.replace(/\(\s*(\d+)\)$/,"").trim());const A=C.indexOf("."),R=C.indexOf(",");let _=-1;if(A>-1&&R>-1?_=Math.min(A,R):_=Math.max(A,R),_>0){const P=C.substring(0,_).trim(),V=C.substring(_+1).trim();return{name:P,description:V,charge:T}}return{name:"",description:C,charge:T}},y=(()=>{var A,R;const x=[],T=(t||"").includes(" ");let C=null,k=0;for(;k<e.length;){const _=e[k],P=e[k+1];if(_.type.startsWith("heading_")){const ce=ne(_);ce.includes(" ")?C="ability":ce.includes("")?C="item":C=null}const V=ne(_);if(_.type==="heading_2"&&V.includes(" ")){const ce=[],de=[],ue=[],re=_;for(k++;k<e.length;){const ae=e[k],Ee=ne(ae);if(ae.type==="heading_3"&&Ee.includes(" ")||ae.type.startsWith("heading_1"))break;ce.push(ae),k++}if(k<e.length&&ne(e[k]).includes(" "))for(k++;k<e.length;){const ae=e[k],Ee=ne(ae);if(ae.type==="heading_3"&&Ee.includes("")||ae.type.startsWith("heading_1")||ae.type==="heading_2")break;de.push(ae),k++}if(k<e.length&&ne(e[k]).includes(""))for(k++;k<e.length;){const ae=e[k];if(ae.type.startsWith("heading_1")||ae.type==="heading_2")break;ue.push(ae),k++}x.push(h(re,k)),x.push(a.jsx(DC,{introElements:ce,narrativeElements:de,explanationElements:ue,renderElement:h},`combat-switcher-${k}`));continue}const G=Jc(_);if(G){const ce=[];let de=G,ue=[_];for(k++;k<e.length;){const re=e[k];if(re.type.startsWith("heading")||re.type==="title"||re.type==="table")break;const ae=Jc(re);if(ae){ce.push({speaker:de,elements:ue}),de=ae,ue=[re],k++;continue}if(re.type==="list_item"){ue.push(re),k++;continue}break}ce.push({speaker:de,elements:ue}),x.push(a.jsx(PC,{messages:ce,renderContent:p},`chat-${k}`));continue}const b=zc(_,P),U=Oi(_),L=qs(_),O=io(_),M=C!==null&&_.type==="table"&&_.rows&&_.rows.length>0&&!ar(_)&&!yr(_)&&!Dn(_)&&!Ln(_)&&!Fn(_)&&!lo(_)&&!qi(_)&&!Qo(_)&&!zi(_)&&!Ji(_)&&!Wi(_)&&!Oi(_),$=L||O||M,B=yr(_),Z=Dn(_),se=Ln(_),Se=b&&P&&ar(P)||U&&ar(_)||b||U,De=!T&&$;if(zi(_)&&_.rows){x.push(a.jsx(NC,{rows:_.rows,id:_.id},`char-struct-${k}`)),k++;continue}if(Ji(_)&&_.rows){x.push(a.jsx(bC,{rows:_.rows,id:_.id},`add-info-${k}`)),k++;continue}if(Wi(_)&&_.rows){x.push(a.jsx(AC,{rows:_.rows,id:_.id},`success-rate-${k}`)),k++;continue}if(B&&_.rows){x.push(a.jsx(_C,{id:_.id,rows:_.rows},`skill-tags-${k}`)),k++;continue}if((Z||se)&&_.rows){x.push(a.jsx(EC,{rows:_.rows,id:_.id,type:Z?"status":"obstacle"},`formatted-grid-${k}`)),k++;continue}if(Fn(_)&&_.rows){x.push(a.jsx(TC,{rows:_.rows,id:_.id},`action-type-${k}`)),k++;continue}if(Se){if(U)try{const de=_.rows||[],ue=ne((A=de[0])==null?void 0:A[0]),re=ue.indexOf("."),ae=re>-1?ue.substring(0,re).trim():ue.trim(),Ee=re>-1?ue.substring(re+1).trim():"",Ye=(de[1]||[]).map(H=>{const K=ne(H).trim();let ee=K,oe="-";const F=K.indexOf(".");if(F>0)ee=K.substring(0,F+1).trim(),oe=K.substring(F+1).trim();else{const q=K.lastIndexOf(" ");q>0&&(ee=K.substring(0,q).trim(),oe=K.substring(q+1).trim())}return oe===""&&(oe="-"),{label:ee,value:oe}}).filter(H=>H.label),$e=[];for(let H=2;H<de.length;H++){const K=de[H];if(!K||K.length<2)continue;const ee=ne(K[0]).trim().replace(/\.$/,"");if(!ee)continue;const F=ne(K[1]).trim().split(`
`).map(S).filter(q=>q!==null&&(!!q.name||!!q.description));F.length>0&&$e.push({category:ee,abilities:F})}const D={name:ae,description:Ee,stats:Ye,actions:$e,sourceRowCount:de.length};x.push(a.jsx(Oc,{npc:D,id:_.id},`npc-table-${k}`)),k++;continue}catch(ce){console.error("Failed to parse live NPC card, rendering as default.",ce,_)}else if(b){const ce=k,de=[e[k],e[k+1]];for(k+=2;k<e.length;){const ue=e[k];if(zc(ue,e[k+1]))break;if(ue.type==="paragraph"&&ue.isBold)for(de.push(ue),k++;k<e.length&&e[k].type==="list_item";)de.push(e[k]),k++;else break}try{const ue=de[0],re=de[1],ae=de.slice(2),Ee=ue.text||"",Ye=Ee.indexOf("."),$e=Ye>0?Ee.substring(0,Ye).trim():Ee.trim(),D=Ye>0?Ee.substring(Ye+1).trim():"",H=[];re&&re.type==="table"&&re.rows&&re.rows[0].forEach(J=>{const Y=ne(J).trim();let X=Y,ie="";if(Y.startsWith(" .")){const W=Y.indexOf(".");X=Y.substring(0,W+1).trim(),ie=Y.substring(W+1).trim(),ie===""&&(ie="-")}else{const W=Y.lastIndexOf(" ");W>-1&&(X=Y.substring(0,W),ie=Y.substring(W+1))}H.push({label:X,value:ie})});const K=[];let ee=null;ae.forEach(J=>{var Y;if(J.type==="paragraph"&&J.isBold)(Y=ee==null?void 0:ee.abilities)!=null&&Y.length&&ee!==null&&K.push(ee),ee={category:ne(J).trim().replace(/\.$/,""),abilities:[]};else if(J.type==="list_item"&&ee){const X=S(ne(J));X&&ee.abilities.push(X)}}),(R=ee==null?void 0:ee.abilities)!=null&&R.length&&ee!==null&&K.push(ee);const oe={name:$e,description:D,stats:H,actions:K,sourceRowCount:0},F=de.map(J=>J.id).filter(Boolean),q=de[0].id,te=F.filter(J=>J!==q);x.push(a.jsxs("div",{className:"relative","data-highlight-container":"true",children:[te.map(J=>a.jsx("div",{id:J,className:"absolute -top-20"},J)),a.jsx(Oc,{npc:oe,id:q})]},`npc-${ce}`))}catch(ue){console.error("Failed to parse NPC block, rendering as default.",ue,de),de.forEach((re,ae)=>{const Ee=h(re,ce+ae);Ee&&x.push(Ee)})}continue}}if(De){const ce=[],de=k;let ue="ability";for((C==="item"||io(_))&&(ue="item");k<e.length;){const re=e[k],ae=qs(re),Ee=io(re),Ye=C!==null&&re.type==="table"&&re.rows&&re.rows.length>0&&!ar(re)&&!yr(re)&&!Dn(re)&&!Ln(re)&&!Fn(re)&&!lo(re)&&!qi(re)&&!Qo(re)&&!zi(re)&&!Ji(re)&&!Wi(re)&&!Oi(re);if(!ae&&!Ee&&!Ye)break;if(!re.rows){k++;continue}let $e=ue;Ee?$e="item":ae&&($e="ability");const D=g(re.rows||[],$e);D&&ce.push({...D,id:re.id}),k++}ce.length>0&&x.push(a.jsx(VC,{items:ce,type:ue},`example-section-${de}`));continue}if(lo(_)){k++;continue}else if(qi(_)){_.rows&&x.push(a.jsx(Wc,{id:_.id,rows:_.rows},`faq-${k}`)),k++;continue}else if(Qo(_)){const ce=[],de=[],ue=k,re=e[k].id;for(;k<e.length&&Qo(e[k]);){const ae=e[k];ae.rows&&ae.rows.length>0&&(ce.push(ae.rows[0]),de.push(ae.id||"")),k++}if(ce.length>0){const ae=[["","",""],...ce];x.push(a.jsx(Wc,{id:re,rows:ae,itemIds:de},`faq-group-${ue}`))}continue}else if(_.type==="list_item"){const ce=[];for(;k<e.length&&e[k].type==="list_item";)ce.push(e[k]),k++;x.push(a.jsx("ul",{className:"list-disc pl-6 space-y-1 mb-4 text-slate-700 dark:text-slate-300 marker:text-cyan-600 dark:marker:text-cyan-500",children:ce.map((de,ue)=>{const re=i(de),ae=u(de);return a.jsx("li",{id:de.id,className:`pl-1 ${re} scroll-mt-24`,style:ae,children:p(de)},ue)})},`ul-${k-1}`));continue}const je=h(_,k);je&&x.push(je),k++}return x})(),v=Array.from(s).sort((x,E)=>parseInt(x)-parseInt(E));return a.jsxs(a.Fragment,{children:[y,v.length>0&&n&&a.jsxs("div",{className:"mt-12 pt-6 border-t border-slate-300 dark:border-slate-600",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 mb-4 uppercase tracking-wider",children:""}),a.jsx("ol",{className:"space-y-3",children:v.map(x=>a.jsxs("li",{id:`footnote-body-${x}`,className:"text-sm text-slate-600 dark:text-slate-400 flex gap-2 rounded p-1 -ml-1 scroll-mt-24",children:[a.jsxs("button",{onClick:E=>c(E,`footnote-ref-${x}`),className:"font-bold text-cyan-600 dark:text-cyan-500 select-none hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors","aria-label":` ${x} `,children:["[",x,"]"]}),a.jsx("div",{className:"flex-1 whitespace-pre-wrap",children:n[x]})]},x))})]})]})},Kc={elements:[{type:"heading_1",text:" "},{type:"paragraph",text:"      TRPG   ,        ."},{type:"heading_2",text:" "},{type:"paragraph",text:"       ."},{type:"paragraph",text:"        ."},{type:"quote",text:"    ,     "},{type:"paragraph",text:"           ,         ."},{type:"paragraph",text:" ,                    .            ."},{type:"paragraph",text:"   . !"},{type:"paragraph",text:` KingCrab
 ,LAG
Q&A ,`},{type:"heading_1",text:"  "},{type:"paragraph",text:"     ,         .         TRPG      ."},{type:"heading_2",text:" "},{type:"paragraph",text:"   , ,         .        ,      ,      .    ."},{type:"table",rows:[["","",""],[" ","",""],[" "," ",""],[""," ",""],[""," ",""],[""," ",""]]},{type:"table",rows:[[""],["  "],[""],[""]]},{type:"heading_3",text:""},{type:"paragraph",text:"       .     ,       .           ."},{type:"heading_3",text:""},{type:"paragraph",text:"   5 . ,  ,  ,  , ."},{type:"heading_4",text:""},{type:"paragraph",text:"   , ,    .  2      ,      .     ."},{type:"heading_4",text:" "},{type:"paragraph",text:"            .   , , , ,                     . (   .       .              )"},{type:"paragraph",text:"          [#],       1   ,      0 [#]."},{type:"heading_4",text:"  "},{type:"paragraph",text:"      .        ."},{type:"table",rows:[["[skill] ","","",""," "],["  ","","","",""],["","","","",""],["","",""," "," "],[" "," "," ","",""],[""," ","","",""],["",""," "," ",""]]},{type:"heading_4",text:" "},{type:"paragraph",text:"            , ,   ."},{type:"list_item",text:"   ,        ."},{type:"list_item",text:"        ."},{type:"list_item",text:"          ."},{type:"paragraph",text:"                        ,        .        ."},{type:"heading_4",text:" "},{type:"paragraph",text:"         (  )  ,        .  ,   4 '' ,             ,    ,         ."},{type:"paragraph",text:"      ,      ,               ."},{type:"heading_4",text:" "},{type:"paragraph",text:"       .[#]         ."},{type:"heading_3",text:""},{type:"paragraph",text:"     .   , ,   ."},{type:"list_item",text:"       "},{type:"list_item",text:"          ,                ."},{type:"list_item",text:"        ."},{type:"paragraph",text:"              . ,         ."},{type:"heading_3",text:""},{type:"paragraph",text:"   [#] [#]          .       ."},{type:"heading_2",text:" "},{type:"paragraph",text:"  ,  ,       ."},{type:"paragraph",text:"   2 6            [#],             .           ."},{type:"table",rows:[[" "," "," "," "," ","  "],["4 ","8 ","12 ","18 ","32 ","64 "]]},{type:"paragraph",text:"      ,  2     .            ."},{type:"list_item",text:`       
        .         `},{type:"list_item",text:`    
      .`},{type:"list_item",text:`     
            .        ,  2   .`},{type:"paragraph",text:"              .  +/- ."},{type:"heading_3",text:" "},{type:"paragraph",text:"                 .          ,         ."},{type:"heading_3",text:" "},{type:"paragraph",text:"             ,                 ."},{type:"paragraph",text:"       [#]              ,              ,        ."},{type:"heading_3",text:" "},{type:"paragraph",text:"    (:   ,  ,   )        ,        .          (  )    ."},{type:"paragraph",text:"             .           ,     .                    ,           ."},{type:"heading_2",text:" ,  "},{type:"paragraph",text:"       .    ,    1 ,        ."},{type:"paragraph",text:"                .    ,  1               .        ."},{type:"paragraph",text:"   NPC    [#],  NPC  ,     .     .            [#],        ."},{type:"heading_2",text:"    "},{type:"paragraph",text:"           ,     .       ."},{type:"list_item",text:"         ,         ."},{type:"list_item",text:"    ,  ,         ."},{type:"paragraph",text:"      10     ,             ,          "},{type:"heading_3",text:" ,  "},{type:"paragraph",text:"       .    ?"},{type:"quote",text:"      .       .         ."},{type:"paragraph",text:"            . (: A  30, B 45, C 15 , C, A, B   .)            .              ,           ."},{type:"list_item",runs:[{text:" :",isBold:!0,isItalic:!1,isUnderline:!1},{text:"    ,              .         ,     .",isBold:!1,isItalic:!1,isUnderline:!1}]},{type:"list_item",runs:[{text:" :",isBold:!0,isItalic:!1,isUnderline:!1},{text:"               .       ,         .",isBold:!1,isItalic:!1,isUnderline:!1}]},{type:"paragraph",text:"         [#]        .           ."},{type:"heading_3",text:"  "},{type:"paragraph",text:"      ,       ,         .  ,  2    ,          ."},{type:"heading_3",text:" ,   "},{type:"paragraph",text:"           .        ,           [#]."},{type:"table",rows:[["","",""],[" ,    / ,    .","  ,        ","  ,             ."],[" ,   ( ),   ( )"," ,   ,  "," ,  "]]},{type:"paragraph",text:"                 ."},{type:"heading_3",text:"  "},{type:"paragraph",text:"    .          ,          .       ,     . ,            . ,                ."},{type:"paragraph",text:"         .       ."}]},Yc="https://script.google.com/macros/s/AKfycbzOtoczmXQAMBFESt2Tp33JWfR45D2_-VGA11BROUWVdUX0Z4Au7M3qZ-eDJ5lKdgnB/exec",Qc="https://script.google.com/macros/s/AKfycby_XDKGTcB-NLSgxQpdCmHi8WrrL4IEyFRXf9SHSFAsHXJAijhFRLO4gd0QCc0RNuOWIw/exec",Xc="https://script.google.com/macros/s/AKfycbwyg-Iut_KAr-w7BrcywoDCsZOLUG3gNG_XPFsGBlLEi1UxCpHlzn_2eSlwwYRj7_U4bw/exec",Zc="https://docs.google.com/spreadsheets/d/e/2PACX-1vQJJvnRQkDH7T4pffBgBdPDPstjI3NceX93zvvqljQKnaKUUCSxasyyjvKZWu3NKxjRxlKvWgufbswy/pub?output=csv",nt=e=>e?typeof e=="string"?e:e.runs?e.runs.map(t=>t.text||"").join(""):e.text||"":"",tn=e=>{var g,w,S,N;if(!e||e.length===0)return{pages:[],footnotes:{}};const t={},n=[];let r=null;for(const y of e)if(y.type==="footnote_marker"){const v=(g=y.text)==null?void 0:g.match(/\d+/);v&&(r=v[0])}else y.type==="footnote_content"&&r?(t[r]=((N=((S=(w=y.runs)==null?void 0:w[0])==null?void 0:S.text)||y.text)==null?void 0:N.trim())||"",r=null):n.push(y);let o=1;const s=y=>{if(y.type==="table"&&y.rows){const x=y.rows.map(E=>E.map(T=>{if(typeof T=="object"&&T!==null)return s(T);if(typeof T=="string"&&T.includes("[#]")){let C=T;for(;C.includes("[#]");)C=C.replace("[#]",`[${o++}]`);return C}return T}));return{...y,rows:x}}if(y.runs&&y.runs.some(x=>x.text&&x.text.includes("[#]"))){const x=[];return y.runs.forEach(E=>{E.text&&E.text.includes("[#]")?E.text.split(/(\[#\])/g).forEach(C=>{C==="[#]"?x.push({...E,text:`[${o++}]`}):C&&x.push({...E,text:C})}):x.push(E)}),{...y,runs:x,text:void 0}}const v=y.text||(y.runs?y.runs.map(x=>x.text||"").join(""):"");if(v&&v.includes("[#]")){let x=v;for(;x.includes("[#]");)x=x.replace("[#]",`[${o++}]`);return{...y,text:x,runs:void 0}}return y},i=n.map(s),u=[];let c=[];const f=y=>y.type==="heading_1"||y.type==="title";for(const y of i)f(y)&&c.length>0&&(u.push(c),c=[]),c.push(y);c.length>0&&u.push(c);const p=y=>y.replace(/^[\uFFFD]/u,"").replace(/\uFFFD/g,"").trim(),m=y=>y.runs&&y.runs.length>0?y.runs.map(v=>v.text).join(""):y.text||"";return{pages:u.map((y,v)=>{const x=y.find(f)||{text:"",type:"heading_1"},E=p(m(x)),T=`page-${v}-${E.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"")}`;y.forEach((R,_)=>{if(!R.id){const P=m(R).slice(0,20).replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"");R.id=`${T}-el-${_}-${P}`}if(R.type==="title"||R.type.startsWith("heading_")){const V=p(m(R)).toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"");R.id=`${T}-section-${_}-${V}`}});const C=[];let k=!1;const A=y.some(R=>{const _=m(R);return R.type==="heading_2"&&_.includes(" ")});for(const R of y){const _=m(R);if(!_)continue;if(x.type==="title"?R.type.startsWith("heading_"):R.type.startsWith("heading_")&&R.type!=="heading_1"){if(A){if(R.type==="heading_2"&&(k=!1),_.includes(" "))continue;if(_.includes("")){k=!0;continue}}if(!k){const V=R.type.split("_"),G=V.length>1?parseInt(V[1],10):1;C.push({id:R.id,title:p(_),level:G})}}}return{id:T,title:E,content:y,subsections:C}}).filter(y=>{const v=y.title.includes(""),x=y.content.length<=1;return!(v&&x)}),footnotes:t}},Xo=e=>{const t=[],n=[];e.forEach(s=>{const i=s.title.includes("");s.content.forEach(u=>{var c,f,p,m;if(u.type==="table"&&u.rows){const h=u.rows.flat().map(S=>nt(S)).join(" "),g=h.includes("")&&h.includes(""),w=h.includes("")&&h.includes("")&&!h.includes("");if(g)try{let S="",N="",y="-",v="-";const E=nt(((c=u.rows[0])==null?void 0:c[0])||"").split(/\n+/);S=E[0].trim(),E.length>1?N=E.slice(1).join(" ").trim():u.rows.length>1&&!u.rows[1].some(T=>nt(T).includes(""))&&(N=nt(((f=u.rows[1])==null?void 0:f[0])||"").trim()),u.rows.forEach((T,C)=>{T.forEach((k,A)=>{var _,P,V,G,b,U,L,O;const R=nt(k);if(R.includes("")&&u.rows){const M=((P=(_=u.rows)==null?void 0:_[C])==null?void 0:P[A+1])||((G=(V=u.rows)==null?void 0:V[C+1])==null?void 0:G[A]);M&&(y=nt(M).trim())}if(R.includes("")&&u.rows){const M=((U=(b=u.rows)==null?void 0:b[C])==null?void 0:U[A+1])||((O=(L=u.rows)==null?void 0:L[C+1])==null?void 0:O[A]);M&&(v=nt(M).trim())}})}),S&&!S.includes("[")&&!S.includes(" ")&&t.push({name:S,description:N,condition:y,charge:v,isCreation:i})}catch{}else if(w)try{let S="",N="",y="-",v=0;if(u.rows){const E=nt(((p=u.rows[0])==null?void 0:p[0])||"").split(/\n+/);S=E[0].trim(),E.length>1?N=E.slice(1).join(" ").trim():u.rows.length>1&&!u.rows[1].some(T=>nt(T).includes(""))&&(N=nt(((m=u.rows[1])==null?void 0:m[0])||"").trim()),u.rows.forEach((T,C)=>{T.forEach((k,A)=>{var _,P,V,G,b,U,L,O;const R=nt(k);if(R.includes("")){const M=((P=(_=u.rows)==null?void 0:_[C])==null?void 0:P[A+1])||((G=(V=u.rows)==null?void 0:V[C+1])==null?void 0:G[A]);M&&(y=nt(M).trim())}if(R.includes("")){const M=((U=(b=u.rows)==null?void 0:b[C])==null?void 0:U[A+1])||((O=(L=u.rows)==null?void 0:L[C+1])==null?void 0:O[A]);if(M){const $=nt(M).trim(),B=parseInt($,10);isNaN(B)||(v=B)}}})}),S&&!S.includes("[")&&!S.includes("")&&n.push({name:S,description:N,durability:y,volume:v,isCreation:i})}}catch{}}})});const r=Array.from(new Map(t.map(s=>[s.name,s])).values()),o=Array.from(new Map(n.map(s=>[s.name,s])).values());return{abilities:r,items:o}},$C=(e,t)=>{const n=`w-5 h-5 flex-shrink-0 transition-colors ${t?"text-cyan-600 dark:text-white":"text-slate-400 group-hover:text-cyan-600 dark:group-hover:text-cyan-300"}`;return e.includes("")?a.jsx(_o,{className:n}):e.includes(" ")||e.includes("")?a.jsx(Nr,{className:n}):e.includes("")||e.includes("")?a.jsx(zn,{className:n}):e.includes("")?a.jsx(mi,{className:n}):e.includes("")?a.jsx(Xt,{className:n}):e.includes("")||e.includes("")?a.jsx(Ve,{className:n}):e.includes("")||e.includes("")?a.jsx(Jn,{className:n}):e.includes("")||e.includes("")?a.jsx(J0,{className:n}):e.includes("")?a.jsx(Hs,{className:n}):e.toLowerCase().includes("faq")||e.includes("")||e.includes("")||e.includes("q&a")?a.jsx(hC,{className:n}):e.includes("")||e.includes("")?a.jsx(Ve,{className:n}):a.jsx(Nr,{className:n})},GC=({onUpdate:e,refreshTrigger:t,setDeployVersion:n,setAddonDeployVersion:r,setSecondDeployVersion:o,forceOffline:s,onDataLoaded:i,onPagesLoaded:u,navigateToCreator:c})=>{const[f,p]=I.useState([]),[m,h]=I.useState({}),[g,w]=I.useState(!0),[S,N]=I.useState(null),[y,v]=I.useState(!0),[x,E]=I.useState(!1),[T,C]=I.useState([]),[k,A]=I.useState(""),[R,_]=I.useState(!1),[P,V]=I.useState(0),[G,b]=I.useState(new Set([0])),[U,L]=I.useState(""),[O,M]=I.useState(0),$=I.useRef(0),B=I.useRef(null),Z=I.useRef(!1),se=1500,[ge,Se]=I.useState(null),[De,je]=I.useState(null),ce=I.useCallback((F,q)=>{je({content:F,rect:q})},[]),de=I.useCallback(()=>{je(null)},[]);I.useEffect(()=>{try{const F=Yc.split("/"),q=F[F.length-2];if(n(q),r){const te=Qc.split("/"),J=te[te.length-2];r(J)}if(o){const te=Xc.split("/"),J=te[te.length-2];o(J)}}catch(F){console.error("Could not parse deployment version",F),n("N/A")}},[n,r,o]),I.useEffect(()=>{f.length>0&&P>=f.length&&V(0)},[f.length,P]),I.useEffect(()=>{if(!g)return;const F=[":    .",":     ?  .",":    .",":     .",":      ."],q=Y=>{const W=new DOMParser().parseFromString(Y,"text/html").querySelectorAll("table"),le=[];return W.forEach(pe=>{const ye=pe.querySelectorAll("tr");for(let Le=1;Le<ye.length;Le++)ye[Le].querySelectorAll("td").forEach(Zt=>{var Tn;const Ft=(Tn=Zt.textContent)==null?void 0:Tn.trim();Ft&&Ft.length>0&&le.push(Ft)})}),le},te=Y=>{const X=Y.split(/\r?\n/),ie=[];for(let W=1;W<X.length;W++){const le=X[W];if(!le.trim())continue;let pe="",ye=!1;for(let Le=0;Le<le.length;Le++){const ht=le[Le];ht==='"'?ye&&le[Le+1]==='"'?(pe+='"',Le++):ye=!ye:ht===","&&!ye?(pe.trim()&&ie.push(pe.trim()),pe=""):pe+=ht}pe.trim()&&ie.push(pe.trim())}return ie};(async()=>{try{const Y=await fetch(Zc);if(!Y.ok)throw new Error("Fetch failed");const X=await Y.text();let ie=[];if(Zc.includes("pubhtml")?ie=q(X):ie=te(X),ie.length>0){const W=Array.from(new Set(ie));C(W),A(W[Math.floor(Math.random()*W.length)])}else C(F),A(F[0])}catch(Y){console.warn("Loading messages fetch failed, using default.",Y),C(F),A(F[0])}})()},[g]),I.useEffect(()=>{if(!g||T.length<=1)return;const F=setInterval(()=>{_(!0),setTimeout(()=>{A(q=>{let te=T[Math.floor(Math.random()*T.length)];if(T.length>1&&te===q){const J=Math.floor(Math.random()*T.length);te=T[J]}return te}),_(!1)},500)},4e3);return()=>clearInterval(F)},[g,T]),I.useEffect(()=>{const F=document.querySelector("main");F&&(ge||window.scrollTo({top:F.offsetTop-80,behavior:"auto"}),Z.current=!1),$.current=0,M(0)},[P]),I.useEffect(()=>{b(F=>{const q=new Set(F);return q.has(P)||q.add(P),q})},[P]);const ue=I.useCallback(F=>{const q=document.getElementById(F),te=80;if(q){let J=q;const Y=q.closest('[data-highlight-container="true"]');if(Y instanceof HTMLElement)J=Y;else if(q.offsetHeight===0){const ye=q.nextElementSibling;ye instanceof HTMLElement&&(J=ye)}const X=J.getBoundingClientRect(),ie=X.top+window.scrollY,W=window.innerHeight;let le=ie-W/2+X.height/2;const pe=ie-te-20;(X.height>W-te||le>pe)&&(le=pe),window.scrollTo({top:le,behavior:"smooth"}),J.classList.contains("cursor-pointer")?J.click():(J.classList.remove("highlight-animate"),J.offsetWidth,J.classList.add("highlight-animate"),setTimeout(()=>J.classList.remove("highlight-animate"),3e3))}},[]);I.useEffect(()=>{const F=q=>{const te=q.detail.title.toLowerCase().trim();let J=-1,Y="";for(let X=0;X<f.length;X++){const ie=f[X];if(ie.title.toLowerCase().includes(te)){J=X,Y="";break}for(const W of ie.subsections)if(W.title.toLowerCase().includes(te)){J=X,Y=W.id;break}if(J!==-1)break;if(J===-1)for(const W of ie.content){const le=W.text||(W.runs?W.runs.map(pe=>pe.text).join(""):"");if(W.type.startsWith("heading")&&le.toLowerCase().includes(te)){J=X,Y=W.id||"";break}if(W.type==="table"&&W.rows&&W.rows.length>0&&nt(W.rows[0][0]).toLowerCase().includes(te)){J=X,Y=W.id||"";break}}if(J!==-1)break}J!==-1?P===J?Y?ue(Y):window.scrollTo({top:0,behavior:"smooth"}):(V(J),Se(Y)):console.warn(`Cannot find section: ${te}`)};return window.addEventListener("rulebook-navigate",F),()=>window.removeEventListener("rulebook-navigate",F)},[f,P,ue]),I.useEffect(()=>{if(ge){const F=setTimeout(()=>{ue(ge),Se(null)},600);return()=>clearTimeout(F)}},[P,ge,ue]);const re=(F,q,te)=>{F.preventDefault(),P!==q?(Se(te),V(q)):ue(te)},ae=(F,q)=>{F.stopPropagation(),b(te=>{const J=new Set(te);return J.has(q)?J.delete(q):J.add(q),J})},Ee=I.useCallback(async()=>{let F=!1;if(N(null),s){console.log("   .   .");const{pages:X,footnotes:ie}=tn(Kc.elements);if(p(X),h(ie),i){const{abilities:W,items:le}=Xo(X);i(W,le)}u&&u(X),e("fallback"),w(!1);return}const q=localStorage.getItem("cachedRulebookData"),te=localStorage.getItem("cachedAddonData"),J=localStorage.getItem("cachedSecondData"),Y=X=>X&&X!=="undefined"&&X!=="null";if(Y(q)&&Y(te)&&Y(J))try{const X=JSON.parse(q),ie=JSON.parse(te),W=JSON.parse(J),{pages:le,footnotes:pe}=tn(X),{pages:ye,footnotes:Le}=tn(ie),{pages:ht,footnotes:Zt}=tn(W);ht.forEach(En=>{En.title.includes("")||(En.title=`[] ${En.title}`)});const Ft=[...le,...ye,...ht],Tn={...pe,...Le,...Zt};if(p(Ft),h(Tn),i){const{abilities:En,items:Dr}=Xo(Ft);i(En,Dr)}u&&u(Ft),F=!0}catch(X){console.error("   ",X),localStorage.removeItem("cachedRulebookData"),localStorage.removeItem("cachedAddonData"),localStorage.removeItem("cachedSecondData")}try{const[X,ie,W]=await Promise.all([fetch(Yc),fetch(Qc),fetch(Xc)]);if(!X.ok)throw new Error(`  : ${X.statusText}`);if(!ie.ok)throw new Error(`  : ${ie.statusText}`);if(!W.ok)throw new Error(`  : ${W.statusText}`);const le=await X.json(),pe=await ie.json(),ye=await W.json();if(le.error)throw new Error(`  : ${le.error}`);if(pe.error)throw new Error(`  : ${pe.error}`);if(ye.error)throw new Error(`  : ${ye.error}`);const{pages:Le,footnotes:ht}=tn(le.elements),{pages:Zt,footnotes:Ft}=tn(pe.elements),{pages:Tn,footnotes:En}=tn(ye.elements);if(Le.length<2)throw new Error(" . (  )");Tn.forEach(Lr=>{Lr.title.includes("")||(Lr.title=`[] ${Lr.title}`)});const Dr=[...Le,...Zt,...Tn],rh={...ht,...Ft,...En};if(p(Dr),h(rh),i){const{abilities:Lr,items:oh}=Xo(Dr);i(Lr,oh)}u&&u(Dr),le!=null&&le.elements&&localStorage.setItem("cachedRulebookData",JSON.stringify(le.elements)),pe!=null&&pe.elements&&localStorage.setItem("cachedAddonData",JSON.stringify(pe.elements)),ye!=null&&ye.elements&&localStorage.setItem("cachedSecondData",JSON.stringify(ye.elements)),e("success")}catch(X){if(console.warn("   .     .",X),N(X instanceof Error?X.message:String(X)),!F){const{pages:ie,footnotes:W}=tn(Kc.elements);if(p(ie),h(W),i){const{abilities:le,items:pe}=Xo(ie);i(le,pe)}u&&u(ie)}e("fallback",X)}finally{w(!1)}},[e,s,i,u]);I.useEffect(()=>{w(!0),Ee()},[t,Ee]);const Ye=I.useCallback(()=>{V(F=>Math.max(0,F-1))},[]),$e=I.useCallback(()=>{V(F=>Math.min(f.length-1,F+1))},[f.length]);I.useEffect(()=>{let F=0;const q=()=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{M(0),$.current=0},5e3)},te=W=>{q();const le=window.innerHeight+window.scrollY,pe=document.documentElement.offsetHeight,ye=Math.abs(pe-le)<20,Le=P<f.length-1;ye&&Le&&W.deltaY>0?($.current=Math.min($.current+W.deltaY,se),M($.current/se*100),$.current>=se&&(Z.current=!0,$e(),$.current=0,M(0),B.current&&clearTimeout(B.current))):$.current>0&&($.current=0,M(0))},J=()=>{if($.current>0){const W=window.innerHeight+window.scrollY,le=document.documentElement.offsetHeight;Math.abs(le-W)<20||($.current=0,M(0))}},Y=W=>{F=W.touches[0].clientY,q()},X=W=>{q();const le=window.innerHeight+window.scrollY,pe=document.documentElement.offsetHeight,ye=Math.abs(pe-le)<20,Le=P<f.length-1,ht=W.touches[0].clientY,Zt=F-ht;ye&&Le&&Zt>0?($.current=Math.min($.current+Zt*2,se),M($.current/se*100),$.current>=se&&(Z.current=!0,$e(),$.current=0,M(0),B.current&&clearTimeout(B.current)),F=ht):$.current>0&&($.current=0,M(0))},ie=()=>{if($.current<se&&$.current>0){const W=setInterval(()=>{$.current<=0?(clearInterval(W),M(0)):($.current-=50,M(Math.max(0,$.current/se*100)))},16)}};return window.addEventListener("wheel",te),window.addEventListener("scroll",J),window.addEventListener("touchstart",Y),window.addEventListener("touchmove",X),window.addEventListener("touchend",ie),()=>{window.removeEventListener("wheel",te),window.removeEventListener("scroll",J),window.removeEventListener("touchstart",Y),window.removeEventListener("touchmove",X),window.removeEventListener("touchend",ie),B.current&&clearTimeout(B.current)}},[f.length,P,$e]);const D=F=>F.runs?F.runs.map(q=>q.text).join(""):F.text||"",H=I.useMemo(()=>{if(!U.trim())return[];const F=U.toLowerCase(),q=[];return f.forEach((te,J)=>{te.content.forEach(Y=>{if(Y.type==="table"&&Y.rows)Y.rows.forEach((X,ie)=>{X.forEach(W=>{let le="";typeof W=="string"?le=W:W&&typeof W=="object"&&(le=D(W)),le.toLowerCase().includes(F)&&q.push({pageIndex:J,elementId:Y.id,text:le,type:" "})})});else{const X=D(Y);X.toLowerCase().includes(F)&&q.push({pageIndex:J,elementId:Y.id,text:X,type:Y.type.includes("heading")?"":""})}})}),q},[U,f]),K=(F,q)=>{P===F?q&&ue(q):(V(F),q&&Se(q))},ee=(F,q)=>{const te=G.has(q),J=F.subsections.length>0;return a.jsxs("li",{children:[a.jsxs("div",{className:`group flex items-center w-full rounded-md transition-all duration-200 mb-1 ${q===P?"bg-cyan-600 text-white shadow-md dark:shadow-none":"hover:bg-slate-100 text-slate-600 hover:text-slate-900 dark:hover:bg-slate-700 dark:text-slate-300 dark:hover:text-white"}`,children:[a.jsxs("button",{onClick:Y=>{P===q?ae(Y,q):V(q)},className:"flex-grow text-left font-semibold p-2 pl-3 focus:outline-none flex items-center gap-3",children:[$C(F.title,q===P),a.jsx("span",{className:"truncate",children:F.title})]}),J&&a.jsx("button",{onClick:Y=>ae(Y,q),className:"p-2 px-3 focus:outline-none","aria-label":te?" ":" ",children:a.jsx(jt,{className:`w-4 h-4 transition-transform duration-200 ${te?"rotate-90":""}`})})]}),J&&a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${te?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"pl-3 border-l-2 border-slate-300 dark:border-slate-600 space-y-1 ml-1 mb-2",children:F.subsections.map(Y=>{let X="text-slate-500 font-medium dark:text-slate-400",ie="text-sm";return Y.level===3?X="pl-6 text-slate-400 font-normal dark:text-slate-500":Y.level>=4&&(X="pl-10 text-slate-400 font-normal dark:text-slate-500",ie="text-xs"),a.jsx("li",{children:a.jsx("a",{href:`#${Y.id}`,onClick:W=>re(W,q,Y.id),className:`block ${ie} py-1 px-2 rounded transition-colors truncate ${X} hover:text-cyan-600 dark:hover:text-cyan-300 hover:bg-slate-100 dark:hover:bg-slate-700/50`,title:Y.title,children:Y.title})},Y.id)})})})})]},F.id)};if(g)return a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg animate-pulse mb-1",children:"  ..."}),k&&a.jsx("p",{className:`text-slate-500 dark:text-slate-500 text-sm max-w-md text-center px-4 transition-opacity duration-500 ${R?"opacity-0":"opacity-100"}`,children:k})]})});const oe=f[P];return a.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative",children:[a.jsxs("aside",{className:"md:w-1/4 lg:w-1/5 md:sticky md:top-24 self-start max-h-[calc(100vh-8rem)] overflow-y-auto p-2 custom-scrollbar flex flex-col gap-4",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ot,{className:"h-4 w-4 text-slate-400 dark:text-slate-500"})}),a.jsx("input",{type:"text",className:"bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 text-slate-800 dark:text-slate-300 text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 block w-full pl-9 p-2.5 placeholder-slate-400 dark:placeholder-slate-500 transition-colors",placeholder:" ...",value:U,onChange:F=>L(F.target.value)}),U&&a.jsx("button",{onClick:()=>L(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"h-4 w-4"})})]}),U?a.jsx("nav",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-1 overflow-y-auto transition-colors",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"font-bold text-sm mb-3 text-cyan-600 dark:text-cyan-400 border-b border-slate-200 dark:border-slate-600 pb-2",children:["  (",H.length,")"]}),H.length>0?a.jsx("ul",{className:"space-y-3",children:H.map((F,q)=>{var te;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>K(F.pageIndex,F.elementId),className:"text-left w-full group",children:[a.jsxs("div",{className:"text-xs text-cyan-600 dark:text-cyan-500 font-semibold mb-0.5",children:[F.type,"  ",(te=f[F.pageIndex])==null?void 0:te.title]}),a.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 group-hover:text-black dark:group-hover:text-white line-clamp-2 leading-snug",children:F.text})]})},q)})}):a.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"  ."})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-shrink-0 overflow-hidden transition-colors",children:[a.jsxs("button",{onClick:()=>v(!y),className:"w-full flex items-center justify-between p-4 focus:outline-none hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:""}),a.jsx(jt,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${y?"rotate-90":""}`})]}),a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${y?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"space-y-2 p-4 pt-0 border-t border-slate-200 dark:border-slate-700/50 mt-2",children:f.map((F,q)=>F.title.includes("")?null:ee(F,q))})})})]}),a.jsxs("nav",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-shrink-0 overflow-hidden transition-colors",children:[a.jsxs("button",{onClick:()=>E(!x),className:"w-full flex items-center justify-between p-4 focus:outline-none hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:""})," "]}),a.jsx(jt,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${x?"rotate-90":""}`})]}),a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${x?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"space-y-2 p-4 pt-0 border-t border-slate-200 dark:border-slate-700/50 mt-2",children:f.map((F,q)=>F.title.includes("")?ee(F,q):null)})})})]})]})]}),a.jsxs("article",{className:"md:w-3/4 lg:w-4/5 bg-white dark:bg-slate-800 p-6 sm:p-10 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 min-h-[500px] relative transition-colors",children:[oe?a.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none animate-slide-in-bottom",children:a.jsx(jC,{elements:oe.content,pageTitle:oe.title,footnotes:m,onShowFootnote:ce,onHideFootnote:de})},oe.id):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center p-8 animate-fade-in-fast",children:[a.jsx("div",{className:"w-32 h-32 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-6 shadow-[0_0_20px_rgba(239,68,68,0.2)]",children:a.jsx(qe,{className:"w-16 h-16 text-red-500 dark:text-red-400"})}),a.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-3",children:" "}),a.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mb-10",children:"   ."}),a.jsxs("div",{className:"w-full max-w-lg bg-slate-100 dark:bg-slate-900/80 rounded-xl p-5 border border-slate-200 dark:border-slate-700 text-left shadow-inner",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),a.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),a.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs font-mono text-slate-400 ml-auto",children:"ERROR_LOG"})]}),a.jsxs("div",{className:"font-mono text-xs sm:text-sm space-y-1",children:[a.jsxs("div",{className:"text-slate-500",children:["CODE: ",a.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-bold",children:S?"LOAD_FAILURE":"NO_CONTENT"})]}),a.jsxs("div",{className:"text-red-600 dark:text-red-400 break-all leading-relaxed",children:["Message: ",S||"      ."]})]})]})]}),O>0&&P<f.length-1&&a.jsxs("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center gap-2 pointer-events-none",children:[a.jsx("div",{className:"bg-slate-800/95 dark:bg-slate-800/95 backdrop-blur-sm border border-slate-600 px-4 py-2 rounded-full shadow-xl",children:a.jsxs("span",{className:"text-cyan-400 text-sm font-bold flex items-center gap-2",children:[a.jsx(jt,{className:"w-4 h-4 rotate-90"}),"   "]})}),a.jsx("div",{className:"w-48 h-1.5 bg-slate-700 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-cyan-400 transition-all duration-75 ease-out shadow-[0_0_10px_rgba(34,211,238,0.5)]",style:{width:`${Math.min(O,100)}%`}})})]}),De&&a.jsxs("div",{className:"fixed z-[100] bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm p-3 rounded-lg shadow-xl border border-slate-300 dark:border-slate-600 max-w-sm pointer-events-none animate-fade-in",style:{left:`${Math.min(window.innerWidth-320,Math.max(10,De.rect.left-150))}px`,top:`${De.rect.top-10}px`,transform:"translateY(-100%)"},children:[a.jsx("div",{className:"font-semibold text-cyan-600 dark:text-cyan-400 mb-1 border-b border-slate-200 dark:border-slate-700 pb-1",children:""}),a.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:De.content}),a.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-slate-900 border-b border-r border-slate-300 dark:border-slate-600 rotate-45",style:{bottom:"-7px",left:`${Math.min(300,Math.max(20,De.rect.left-Math.min(window.innerWidth-320,Math.max(10,De.rect.left-150))))}px`}})]})]}),f.length>0&&a.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex items-center gap-3",children:[a.jsx("button",{onClick:Ye,disabled:P===0,className:`
                            flex items-center justify-center w-12 h-12 rounded-full shadow-lg border transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500
                            ${P===0?"opacity-0 pointer-events-none translate-x-8":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-500 translate-x-0"}
                        `,"aria-label":" ",title:P>0&&f[P-1]?`: ${f[P-1].title}`:" ",children:a.jsx(fi,{className:"w-6 h-6"})}),a.jsx("button",{onClick:$e,disabled:P>=f.length-1,className:`
                            flex items-center justify-center w-12 h-12 rounded-full shadow-lg border transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500
                            ${P>=f.length-1?"opacity-0 pointer-events-none translate-x-8":"bg-cyan-600 border-cyan-500 text-white hover:bg-cyan-500 hover:border-cyan-400 translate-x-0"}
                        `,"aria-label":" ",title:P<f.length-1&&f[P+1]?`: ${f[P+1].title}`:" ",children:a.jsx(jt,{className:"w-6 h-6"})})]})]})},BC="modulepreload",HC=function(e){return"/Akasha-Simpli-TRPG-Helper/"+e},ef={},tf=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=HC(s),s in ef)return;ef[s]=!0;const i=s.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(!!r)for(let p=o.length-1;p>=0;p--){const m=o[p];if(m.href===s&&(!i||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${u}`))return;const f=document.createElement("link");if(f.rel=i?"stylesheet":BC,i||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),i)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})},qC=[{name:" ",description:"1       ,     6  .",condition:"  ",charge:"4"},{name:" ",description:"    1   .",condition:"-",charge:"-"},{name:" ",description:"1              .            .",condition:"-",charge:"3"},{name:" ",description:"              2   .",condition:"-",charge:"1"},{name:"",description:"3    .              .",condition:"-",charge:"2"},{name:"",description:"1 ,  1        .          .     .",condition:"-",charge:"-"},{name:" ",description:"1      ,        .   ,  3  .",condition:"-",charge:"-"},{name:" ",description:"  ,     .",condition:"-",charge:"3"},{name:" ",description:"      20 ,    1 .",condition:"-",charge:"-"},{name:"",description:"1     2   .",condition:"-",charge:"2"},{name:"",description:"3   ,      ,    2  .      1 .",condition:"-",charge:"2"},{name:" ",description:"         .      ,     .",condition:"    4 ",charge:"-"},{name:" ",description:"1      ,       .",condition:"-",charge:"1"},{name:"",description:`1        .      0    .
    .`,condition:"-",charge:"2"},{name:" ",description:"    +1  .",condition:"   5",charge:"3"},{name:" ",description:"   5 .",condition:"-",charge:"-"},{name:" ",description:"   3       ,    6   2   .",condition:"-",charge:"3"},{name:" ",description:"     2 .     .",condition:"-",charge:"2"},{name:" ",description:" ,       .",condition:"-",charge:"3"},{name:" ",description:"2     .",condition:"-",charge:"3"},{name:" ",description:"3      6 ,     2  .",condition:"-",charge:"3"},{name:"",description:"4      12 ,    .   6    2  .",condition:"  ",charge:"1"},{name:" ",description:"4      9 .   7     3  .",condition:"  ",charge:"1"},{name:" ",description:"1      6 .       3  .",condition:"  ",charge:"1"},{name:" ",description:"  ,      4   .",condition:"    ",charge:"1"},{name:" ",description:"3   .         .",condition:"  ",charge:"2"},{name:" ",description:"1    .",condition:"-",charge:"1"},{name:" ",description:"3    . 2m  .  .",condition:"   ",charge:"3"},{name:"",description:"3     2 ,    .",condition:"   ",charge:"3"},{name:" ",description:"1      .  ,     3   .       .",condition:"  ",charge:"1"},{name:"",description:" 1     .     2       .",condition:"   ",charge:"3"},{name:" ",description:" 1       ,         3  .",condition:"   2   ",charge:"4"},{name:"",description:" 4       ,           3 .",condition:"   5   ",charge:"2"},{name:" ",description:"1           2 .     .",condition:"   ",charge:"1"},{name:" ",description:"3               .",condition:"   ",charge:"2"},{name:" ",description:"   5     .       .",condition:"  ",charge:"2"},{name:" ",description:"  ,    .      3(m)   ,      .",condition:"   ",charge:"2"},{name:"",description:"1      .   .    2m    .",condition:"   ",charge:"1"},{name:"",description:"  .",condition:"   ",charge:"2"},{name:" ",description:"  15     .       .",condition:"-",charge:"1"},{name:" ",description:"           .",condition:"-",charge:"2"},{name:" ",description:"1       .    ,           .",condition:"-",charge:"3"},{name:"  ",description:"    //        ,",condition:"   5 ",charge:"1"},{name:" ",description:"         .           .      .",condition:"    ",charge:"4"}],zC=[{name:"",description:"1   2  .",durability:"8",volume:1},{name:"",description:"1   6  .",durability:"18",volume:7},{name:"",description:"      4   3 .",durability:"-",volume:4},{name:"",description:"      6    3 .",durability:"-",volume:8},{name:" ",description:"  .    .",durability:"7",volume:3},{name:"",description:" 1   2  .           +1  .",durability:"1",volume:2},{name:"",description:" 3    2 .",durability:"5",volume:2},{name:" ",description:"    5 .",durability:"1",volume:1},{name:" ",description:"   .  10     1 .",durability:"-",volume:0},{name:" ",description:"     .       , +1  .",durability:"3",volume:1},{name:" ",description:"        .",durability:"6",volume:3},{name:"",description:"       .",durability:"8",volume:6},{name:"",description:"   .         .",durability:"16",volume:10},{name:"",description:"   . ( 1  , 1  )",durability:"10",volume:2},{name:" ",description:"       .  1        .",durability:"10",volume:8},{name:"  ",description:"  .       .       +1  .",durability:"4",volume:1},{name:"  ",description:"  .",durability:"1",volume:4},{name:" ",description:"    -2 .",durability:"-",volume:0},{name:" ",description:"   2 .    .",durability:"1",volume:2},{name:" ",description:" ,    3 .    .",durability:"1",volume:2},{name:" ",description:" ,             .",durability:"1",volume:2},{name:" ",description:" ,    .    .",durability:"1",volume:2},{name:"",description:"     .      .",durability:"1",volume:2},{name:" ",description:"    1 .",durability:"1",volume:1},{name:"",description:"    1  .           .      .",durability:"1",volume:2},{name:"  ",description:"    ,      5 ,       ,    .",durability:"1",volume:3},{name:" ",description:"     .  ,        1  4    (:  ) .",durability:"1",volume:3},{name:"",description:"    .     1 2  .           1   .",durability:"1",volume:2},{name:" ",description:"    .         .        .",durability:"3",volume:6}],nf={profile:{name:"",image:"",info:"",backstory:"",bonds:"",memories:""},abilities:{luck:3,skills:[{name:"",score:1},{name:"",score:1},{name:"",score:1},{name:"",score:1},{name:"",score:1}],enhancements:[],status:"",growthPoints:0},inventory:{items:[],money:0}},Ki=["","","","",""],rf=6,Yi=2,Qi=3,_n=({title:e,children:t})=>a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 transition-colors",children:[a.jsx("h3",{className:"text-lg font-bold text-cyan-700 dark:text-cyan-400 border-b border-slate-200 dark:border-slate-600 pb-2 mb-3",children:e}),t]}),JC=({skill:e})=>a.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-700/50 p-2 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:e.name}),a.jsx("span",{className:"font-bold text-cyan-600 dark:text-cyan-300 text-lg",children:e.score})]}),WC=({ability:e})=>a.jsxs("div",{className:"bg-white dark:bg-slate-700/50 p-3 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1 leading-snug",children:e.description}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 flex justify-between border-t border-slate-100 dark:border-slate-600/50 pt-2",children:[a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.condition]}),a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.charge]})]})]}),OC=({item:e})=>a.jsxs("div",{className:"bg-white dark:bg-slate-700/50 p-3 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1 leading-snug",children:e.description}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 flex justify-between border-t border-slate-100 dark:border-slate-600/50 pt-2",children:[a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.durability]}),a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.volume]})]})]}),KC=({character:e})=>{const t=e.inventory.items.reduce((p,m)=>p+m.volume,0),[n,r]=I.useState(0),[o,s]=I.useState(!1),{quote:i,basicInfo:u}=I.useMemo(()=>{const m=(e.profile.info||"").split(`

`).filter(S=>S.trim()),h=m.findIndex(S=>S.trim().startsWith('"')&&S.trim().endsWith('"'));let g=null,w=m;return h!==-1&&(g=m[h].replace(/^"|"$/g,""),w=m.filter((S,N)=>N!==h)),{quote:g,basicInfo:w}},[e.profile.info]),c=[{id:"fantasy",name:"",container:"relative inline-block my-3 max-w-xl px-6 py-2",text:"text-xl md:text-2xl font-serif italic text-transparent bg-clip-text bg-gradient-to-r from-cyan-700 via-slate-900 to-cyan-700 dark:from-cyan-200 dark:via-white dark:to-cyan-200 tracking-wide leading-relaxed drop-shadow-sm dark:drop-shadow-[0_0_10px_rgba(34,211,238,0.3)]",decoration:a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"absolute -top-3 -left-2 text-5xl text-slate-300 dark:text-slate-600/30 font-serif leading-none select-none",children:""}),a.jsx("span",{className:"absolute -bottom-5 -right-2 text-5xl text-slate-300 dark:text-slate-600/30 font-serif leading-none select-none",children:""})]})},{id:"modern",name:"",container:"relative inline-block my-3 max-w-xl bg-white dark:bg-slate-800/80 border-l-4 border-cyan-600 dark:border-cyan-500 rounded-r-lg px-5 py-3 shadow-md",text:"text-lg md:text-xl font-sans font-bold text-slate-800 dark:text-slate-100 leading-relaxed",decoration:null},{id:"terminal",name:"",container:"relative inline-block my-3 max-w-xl bg-slate-900 border border-green-500/50 rounded-sm px-4 py-3 shadow-[0_0_15px_rgba(34,197,94,0.15)]",text:"text-lg md:text-xl font-mono text-green-400 leading-relaxed",decoration:a.jsx("span",{className:"absolute -bottom-2 right-2 text-[10px] text-green-700/50 font-mono",children:"SYS.MSG.LOG_01"})},{id:"comic",name:"",container:"relative inline-block my-3 max-w-xl bg-white text-slate-900 rounded-2xl rounded-bl-none px-6 py-4 shadow-lg mx-2 border-2 border-slate-900 dark:border-none",text:"text-xl md:text-2xl font-bold font-sans leading-relaxed",decoration:a.jsx("div",{className:"absolute top-full left-[-2px] w-4 h-4 bg-white border-l-2 border-b-2 border-slate-900 dark:border-none clip-path-polygon-[0_0,100%_0,0_100%]"})}],f=c[n];return a.jsxs("div",{className:"bg-white dark:bg-slate-900/50 p-6 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 transition-colors",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8 border-b border-slate-200 dark:border-slate-700 pb-6",children:[a.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 shrink-0 rounded-full overflow-hidden bg-slate-100 dark:bg-slate-800 border-4 border-cyan-500/20 dark:border-cyan-500/30 shadow-xl flex items-center justify-center",children:e.profile.image?a.jsx("img",{src:e.profile.image,alt:e.profile.name,className:"w-full h-full object-cover"}):a.jsx(zn,{className:"w-20 h-20 text-slate-400 dark:text-slate-600"})}),a.jsxs("div",{className:"text-center md:text-left flex-grow",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-wider mb-2 transition-colors",children:e.profile.name||" "}),i?a.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 group relative",children:[a.jsxs("div",{className:`${f.container} transition-all duration-300`,children:[f.decoration,a.jsx("p",{className:f.text,children:i})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>s(!o),className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800/80 text-slate-500 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-cyan-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all opacity-0 group-hover:opacity-100 shadow-md border border-slate-200 dark:border-slate-700",title:" ",children:a.jsx(Ve,{className:"w-5 h-5"})}),o&&a.jsx("div",{className:"absolute top-0 left-full ml-2 z-50 w-32 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg shadow-xl overflow-hidden flex flex-col animate-fade-in-fast",children:c.map((p,m)=>a.jsxs("button",{onClick:()=>{r(m),s(!1)},className:`px-3 py-2 text-left text-xs font-bold hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex justify-between items-center ${n===m?"text-cyan-600 dark:text-cyan-400 bg-slate-50 dark:bg-slate-700/50":"text-slate-600 dark:text-slate-300"}`,children:[p.name,n===m&&a.jsx(jt,{className:"w-3 h-3"})]},p.id))}),o&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})]}):null,a.jsx("div",{className:"text-slate-600 dark:text-slate-400 text-sm md:text-base space-y-1 mt-3 transition-colors",children:u.length>0?u.map((p,m)=>a.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:p},m)):!i&&a.jsx("p",{className:"text-slate-400 dark:text-slate-500 italic",children:"  "})})]}),a.jsxs("div",{className:"flex gap-4 md:gap-6 text-center shrink-0",children:[a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 min-w-[80px] transition-colors",children:[a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:""}),a.jsx("div",{className:"text-3xl font-black text-cyan-600 dark:text-cyan-400",children:e.abilities.luck})]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 min-w-[80px] transition-colors",children:[a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:" "}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:t})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(_n,{title:" ",children:a.jsx("div",{className:"space-y-2",children:e.abilities.skills.map(p=>a.jsx(JC,{skill:p},p.name))})}),a.jsx(_n,{title:" ",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.abilities.status||"  "})})]}),a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(_n,{title:" ",children:a.jsx("div",{className:"space-y-3",children:e.abilities.enhancements.length>0?e.abilities.enhancements.map(p=>a.jsx(WC,{ability:p},p.name)):a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"   ."})})}),a.jsx(_n,{title:"",children:a.jsx("div",{className:"space-y-3",children:e.inventory.items.length>0?e.inventory.items.map(p=>a.jsx(OC,{item:p},p.name)):a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:" ."})})})]}),a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(_n,{title:" ",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.backstory||"  ."})}),a.jsx(_n,{title:"",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.bonds||" ."})}),a.jsx(_n,{title:"",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.memories||" ."})})]})]})]})},YC="https://script.google.com/macros/s/AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY/exec",On=(e,t)=>{const n=t==="ability"?"user_created_abilities":"user_created_items";localStorage.setItem(n,JSON.stringify(e))},Q0=async(e,t,n)=>{const r=YC;let o;t==="ability"?o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.condition||"-",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.charge||"-",alignment:"LEFT"}]]}:o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.durability||"-",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:String(e.volume!==void 0?e.volume:0),alignment:"LEFT"}]]};const i={document_content:JSON.stringify(o,null,2),export_type:t,timestamp:new Date().toISOString()};try{const u=await fetch(r,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(i)}),c=await u.json();if(u.ok&&c.status==="SUCCESS")n(`Google   !
 ID: ${c.document_id}`,"info");else{const f=c.message||"  ";n(` : ${f}`,"error")}}catch(u){console.error("Failed to export:",u);const c=u.message||String(u);n(` :   .
(${c})`,"error")}},QC=e=>{const t=[],n=o=>o?typeof o=="string"?o:o.runs?o.runs.map(s=>s.text).join(""):o.text||"":"";e.forEach(o=>{o.content.forEach(s=>{if(s.type==="table"&&s.rows){const i=s.rows.flat().map(c=>n(c)).join(" ");(i.includes("[passive]")||i.includes("[status]"))&&s.rows.forEach(c=>{c.forEach(f=>{let p=n(f).trim();p=p.replace(/\[passive\]|\[status\]/gi,"").trim(),p&&p.split(/\r?\n/).map(h=>h.trim()).filter(Boolean).forEach(h=>{let g=h,w="";const S=h.indexOf(" - ");if(S!==-1)g=h.substring(0,S).trim(),w=h.substring(S+3).trim();else{const N=h.indexOf("-");N>0&&(g=h.substring(0,N).trim(),w=h.substring(N+1).trim())}g.length>0&&g.length<20&&t.push({name:g,description:w})})})})}})});const r=new Map;return t.forEach(o=>r.set(o.name,o)),Array.from(r.values())},XC=({onAddAbility:e,onAddItem:t,onAddStatus:n,onUpdateBackstory:r,onUpdateAppearance:o,forcedType:s,rulebookContext:i,characterContext:u})=>{const[c,f]=I.useState(!1),[p,m]=I.useState(""),[h,g]=I.useState([]),[w,S]=I.useState(!1),N=I.useRef(null),y=()=>{!c&&h.length===0&&g([{role:"model",text:" ?     !"}]),f(!c)},v=()=>{var T;(T=N.current)==null||T.scrollIntoView({behavior:"smooth"})};I.useEffect(()=>{c&&v()},[h,c]);const x=async T=>{if(T.preventDefault(),!p.trim())return;const C=p.trim();g(k=>[...k,{role:"user",text:C}]),m(""),S(!0);try{const k=new _r({apiKey:"AIzaSyCeW0VBVT7nIwbusmjIbe1HTkD-6OEVht4"}),R=`
                You are Archi, a creative assistant for the TRPG 'Akasha Simpli'.
                The user will describe what they want to create or ask for help with descriptions.
                Your goal is to generate a JSON object based on the description, **strictly following the provided rulebook context** for style, balance, and mechanics.
                
                ${u?`
            [Character Context]
            Name: ${u.name||"Unknown"}
            Basic Info (Gender/Age): ${u.genderAge||"Unknown"}
            Current Backstory: ${u.backstory.substring(0,1e3)||"None"}
            `:""}

                [Rulebook Context]
                ${i||"Rulebook content not available. Use standard TRPG logic."}

                [Rules]
                1. Create the content in Korean.
                2. Return ONLY a JSON object. No markdown code blocks.
                3. **Balance**: Ensure numeric values (Damage, Charge, Volume, Durability) align with the examples in the rulebook. 
                   - Damage is typically low single digits (1-6).
                   - Charge is often small numbers (1-5) or specific conditions (1/Round).
                   - Volume is typically 1-10.
                4. **Style**: Use the tone of the rulebook descriptions.
            `,_=`
                [Schema for Item]
                {
                    "type": "item",
                    "reply": "A short, friendly message introducing the item (in Korean).",
                    "data": {
                        "name": "string",
                        "description": "string (Include damage/effect if weapon/consumable)",
                        "durability": "string (e.g. '10', '', '-')",
                        "volume": number (integer)
                    }
                }
            `,P=`
                [Schema for Ability]
                {
                    "type": "ability",
                    "reply": "A short, friendly message introducing the ability (in Korean).",
                    "data": {
                        "name": "string",
                        "description": "string (Describe effect, range, damage)",
                        "condition": "string (e.g. ' ', '-')",
                        "charge": "string (e.g. '3', '1/', '-')"
                    }
                }
            `,V=`
                [Schema for Status]
                {
                    "type": "status",
                    "reply": "A short, friendly message introducing the status effect (in Korean).",
                    "data": {
                        "name": "string (Name of the status/trait)",
                        "description": "string (Effect description)"
                    }
                }
            `,G=`
                [Schema for Backstory]
                {
                    "type": "backstory",
                    "reply": "A short message like 'Here is a backstory based on your keywords'.",
                    "data": {
                        "text": "string (A rich, engaging backstory paragraph approx 200-400 chars. If modifying, respect existing context.)"
                    }
                }
            `,b=`
                [Schema for Appearance]
                {
                    "type": "appearance",
                    "reply": "A short message introducing the appearance description.",
                    "data": {
                        "text": "string (A vivid visual description of the character approx 100-200 chars)"
                    }
                }
            `;let U="";s==="ability"?U=`${R}
                The user wants to create an **Ability**.
                ${P}
                
                User Input: "${C}"`:s==="item"?U=`${R}
                The user wants to create an **Item**.
                ${_}
                
                User Input: "${C}"`:s==="status"?U=`${R}
                The user wants to create a **Status Effect** (trait, condition, buff/debuff).
                ${V}
                
                User Input: "${C}"`:s==="backstory"?U=`${R}
                The user wants to write or modify a **Backstory**.
                ${G}
                Write a compelling backstory based on their keywords. If 'Current Backstory' exists, modify it according to the user input.
                
                User Input: "${C}"`:s==="appearance"?U=`${R}
                The user wants a **Visual Description (Appearance)**.
                ${b}
                Write a descriptive appearance paragraph matching the character's gender and age if known.
                
                User Input: "${C}"`:U=`${R}
                1. Infer whether the user wants an 'item', 'ability', 'status', 'backstory', or 'appearance'.
                2. If it is ambiguous, default to 'item'.
                ${_}
                ${P}
                ${V}
                ${G}
                ${b}

                User Input: "${C}"`;const O=(await k.models.generateContent({model:"gemini-2.5-flash",contents:U,config:{responseMimeType:"application/json"}})).text;if(!O)throw new Error("No response");const M=JSON.parse(O);if(M.type&&M.data&&M.reply)g($=>[...$,{role:"model",text:M.reply,generatedData:{type:M.type,data:{...M.data,isCreation:!0}}}]);else throw new Error("Invalid format")}catch(k){console.error(k),g(A=>[...A,{role:"model",text:",  .    ?"}])}finally{S(!1)}},E=T=>{if(T.generatedData){if(T.generatedData.type==="ability"&&e)e(T.generatedData.data),f(!1);else if(T.generatedData.type==="item"&&t)t(T.generatedData.data),f(!1);else if(T.generatedData.type==="status"&&n)n(T.generatedData.data),f(!1);else if(T.generatedData.type==="backstory"&&r)r(T.generatedData.data.text),f(!1);else if(T.generatedData.type==="appearance"&&o)o(T.generatedData.data.text),f(!1);else{g(C=>[...C,{role:"model",text:"       .     ."}]);return}g([{role:"model",text:"!   ?"}])}};return a.jsxs("div",{className:"fixed bottom-6 right-6 z-[200] flex flex-col items-end pointer-events-none",children:[a.jsxs("div",{className:`
                mb-4 w-80 sm:w-96 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-2xl shadow-2xl overflow-hidden flex flex-col transition-all duration-300 origin-bottom-right
                ${c?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 translate-y-4 pointer-events-none h-0"}
            `,style:{maxHeight:"500px"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-600 to-purple-600 p-3 flex justify-between items-center border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[a.jsx(Ve,{className:"w-5 h-5 text-fuchsia-200"}),a.jsx("span",{children:"  "})]}),a.jsx("button",{onClick:y,className:"text-white/70 hover:text-white",children:a.jsx(qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900/50 custom-scrollbar h-[300px]",children:[h.map((T,C)=>a.jsxs("div",{className:`flex flex-col ${T.role==="user"?"items-end":"items-start"}`,children:[T.text&&a.jsx("div",{className:`
                                    max-w-[85%] px-3 py-2 rounded-xl text-sm whitespace-pre-wrap shadow-sm
                                    ${T.role==="user"?"bg-fuchsia-600 text-white rounded-tr-none":"bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none border border-slate-200 dark:border-slate-600"}
                                `,children:T.text}),T.generatedData&&a.jsxs("div",{className:"mt-2 w-full max-w-[90%] bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-xl overflow-hidden shadow-lg animate-fade-in-fast",children:[a.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase",children:T.generatedData.type==="ability"?" ":T.generatedData.type==="status"?" ":T.generatedData.type==="backstory"?" ":T.generatedData.type==="appearance"?" ":" "}),T.generatedData.type==="ability"?a.jsx(Xt,{className:"w-4 h-4 text-cyan-500"}):T.generatedData.type==="status"?a.jsx(Jn,{className:"w-4 h-4 text-emerald-500"}):T.generatedData.type==="backstory"?a.jsx(_o,{className:"w-4 h-4 text-amber-500"}):T.generatedData.type==="appearance"?a.jsx(zn,{className:"w-4 h-4 text-pink-500"}):a.jsx(Nr,{className:"w-4 h-4 text-indigo-500"})]}),a.jsxs("div",{className:"p-3",children:[T.generatedData.type==="backstory"||T.generatedData.type==="appearance"?a.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3 whitespace-pre-wrap leading-relaxed max-h-32 overflow-y-auto custom-scrollbar",children:T.generatedData.data.text}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"font-bold text-slate-900 dark:text-white mb-1",children:T.generatedData.data.name}),a.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2 line-clamp-3",children:T.generatedData.data.description}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500 mb-3",children:T.generatedData.type==="ability"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[": ",T.generatedData.data.condition]}),a.jsxs("div",{children:[": ",T.generatedData.data.charge]})]}):T.generatedData.type==="status"?a.jsx("div",{className:"col-span-2 text-xs text-slate-500",children:" "}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[": ",T.generatedData.data.durability]}),a.jsxs("div",{children:[": ",T.generatedData.data.volume]})]})})]}),a.jsxs("button",{onClick:()=>E(T),className:"w-full py-1.5 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded transition-colors flex items-center justify-center gap-1",children:[a.jsx(Ze,{className:"w-3 h-3"}),T.generatedData.type==="backstory"||T.generatedData.type==="appearance"?" ":"  "]})]})]})]},C)),w&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl rounded-tl-none px-4 py-3 border border-slate-200 dark:border-slate-600 shadow-sm",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{ref:N})]}),a.jsxs("form",{onSubmit:x,className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[a.jsx("input",{type:"text",value:p,onChange:T=>m(T.target.value),placeholder:":  ,  ...",className:"flex-1 bg-slate-100 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-full px-4 py-2 text-sm text-slate-900 dark:text-white focus:outline-none focus:border-fuchsia-500 focus:ring-1 focus:ring-fuchsia-500",disabled:w}),a.jsx("button",{type:"submit",disabled:!p.trim()||w,className:"p-2 bg-fuchsia-600 text-white rounded-full hover:bg-fuchsia-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:a.jsx(_o,{className:"w-4 h-4"})})]})]}),a.jsxs("button",{onClick:y,className:`
                    w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 relative group pointer-events-auto
                    ${c?"bg-slate-700 text-white rotate-90":"bg-gradient-to-br from-fuchsia-600 to-purple-600 text-white hover:scale-110 shadow-fuchsia-500/30"}
                `,title:" ",children:[c?a.jsx(qe,{className:"w-6 h-6"}):a.jsx(Ve,{className:"w-6 h-6"}),!c&&a.jsx("span",{className:"absolute right-full mr-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-white text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-600 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity shadow-md",children:" "})]})]})},ZC=({isOpen:e,onClose:t,message:n,type:r="info"})=>e?a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-sm overflow-hidden flex flex-col p-6 text-center relative",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex justify-center mb-4",children:r==="error"?a.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-500/20 rounded-full text-red-600 dark:text-red-400",children:a.jsx(W0,{className:"w-8 h-8"})}):a.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-500/20 rounded-full text-cyan-600 dark:text-cyan-400",children:a.jsx(Hs,{className:"w-8 h-8"})})}),a.jsx("p",{className:"text-slate-700 dark:text-white text-lg mb-6 whitespace-pre-wrap leading-relaxed",children:n}),a.jsx("button",{onClick:t,className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white rounded-lg font-bold transition-colors",children:""})]})}):null,eS=({name:e,setName:t,image:n,setImage:r,extendedProfile:o,setExtendedProfile:s})=>{const i=u=>{var f;const c=(f=u.target.files)==null?void 0:f[0];if(c){const p=new FileReader;p.onloadend=()=>{r(p.result)},p.readAsDataURL(c)}};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-6 flex items-center gap-2",children:[a.jsx(zn,{className:"w-6 h-6"}),"1.  "]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:" "}),a.jsxs("div",{className:"relative aspect-square rounded-xl bg-slate-50 dark:bg-slate-900/50 border-2 border-dashed border-slate-300 dark:border-slate-600 hover:border-cyan-500 transition-colors overflow-hidden group",children:[n?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-bold",children:" "})})]}):a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500",children:[a.jsx(Ze,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-xs",children:" "})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"absolute inset-0 opacity-0 cursor-pointer"})]})]}),a.jsxs("div",{className:"md:col-span-2 space-y-4",children:[a.jsx(Xi,{label:" ",value:e,onChange:u=>t(u.target.value),placeholder:":  "}),a.jsx(Xi,{label:" /  / ",value:o.genderAge,onChange:u=>s(c=>({...c,genderAge:u.target.value})),placeholder:":  / 24 / "}),a.jsx(Xi,{label:" ()",value:o.commentary,onChange:u=>s(c=>({...c,commentary:u.target.value})),placeholder:": '   !'"})]}),a.jsx("div",{className:"md:col-span-3",children:a.jsx(X0,{label:" ",value:o.appearance,onChange:u=>s(c=>({...c,appearance:u.target.value})),placeholder:":      ,    ...",rows:4})})]})]})},Xi=({label:e,value:t,onChange:n,className:r,placeholder:o})=>a.jsxs("div",{className:r,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1.5",children:e}),a.jsx("input",{type:"text",value:t,onChange:n,placeholder:o,className:"w-full bg-white dark:bg-slate-900/50 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all placeholder-slate-400"})]}),X0=({label:e,value:t,onChange:n,className:r,placeholder:o,rows:s=4})=>a.jsxs("div",{className:r,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1.5",children:e}),a.jsx("textarea",{value:t,onChange:n,rows:s,placeholder:o,className:"w-full bg-white dark:bg-slate-900/50 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all resize-none placeholder-slate-400"})]}),tS=({skills:e,updateSkills:t,rulebookPages:n})=>{const[r,o]=I.useState(""),[s,i]=I.useState([]),[u,c]=I.useState(!1),f=I.useRef(null),p=I.useMemo(()=>e.reduce((y,v)=>{const x=Ki.includes(v.name)?1:0;return y+(v.score-x)},0),[e]),m=rf-p,h=I.useMemo(()=>{const y=new Set;return["","","",""," ","","","","","","","","","","","",""," "," "," "," "," ","","",""," ","","","","",""," "," ",""].forEach(v=>y.add(v)),n&&n.forEach(v=>{v.content.forEach(x=>{x.type==="table"&&x.rows&&x.rows.flat().some(T=>{const C=typeof T=="string"?T:T.text||"";return C.includes("[skill]")||C.includes("  ")})&&x.rows.flat().forEach(T=>{let C=typeof T=="string"?T:T.text||"";C=C.replace(/\[skill\]/gi,"").trim(),C&&C.length>1&&C.length<20&&!C.includes("")&&!C.includes(" ")&&y.add(C)})})}),Array.from(y).sort()},[n]);I.useEffect(()=>{const y=v=>{f.current&&!f.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const g=y=>{const v=y.target.value;if(o(v),v.trim()){const x=h.filter(E=>E.toLowerCase().includes(v.toLowerCase())&&!e.some(T=>T.name===E));i(x),c(!0)}else i([]),c(!1)},w=(y,v)=>{const x=e.map(E=>{if(E.name===y){const T=Ki.includes(y)?1:0,C=Math.max(T,E.score+v);return{...E,score:C}}return E});t(x)},S=y=>{const v=y||r;v&&!e.find(x=>x.name===v)&&(t([...e,{name:v,score:0}]),o(""),i([]),c(!1))},N=y=>{t(e.filter(v=>v.name!==y))};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Xt,{className:"w-6 h-6"}),"2.   "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:["   : ",a.jsx("span",{className:`font-bold text-2xl ${m<0?"text-red-500 dark:text-red-400":"text-cyan-600 dark:text-cyan-300"}`,children:m})," / ",rf]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map(y=>{const v=Ki.includes(y.name);return a.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold text-lg w-24 truncate text-slate-800 dark:text-slate-100",title:y.name,children:y.name}),!v&&a.jsx("button",{onClick:()=>N(y.name),className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 p-1",children:a.jsx(pi,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>w(y.name,-1),disabled:y.score<=(v?1:0),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 disabled:opacity-30 disabled:hover:bg-slate-200 dark:disabled:hover:bg-slate-700 text-slate-700 dark:text-white transition-colors",children:a.jsx(ps,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xl font-bold w-6 text-center text-slate-800 dark:text-white",children:y.score}),a.jsx("button",{onClick:()=>w(y.name,1),disabled:m<=0,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 disabled:opacity-30 disabled:hover:bg-slate-200 dark:disabled:hover:bg-slate-700 text-slate-700 dark:text-white transition-colors",children:a.jsx(Ze,{className:"w-4 h-4"})})]})]},y.name)})}),a.jsxs("div",{className:"mt-6 flex gap-2 relative",ref:f,children:[a.jsxs("div",{className:"flex-grow relative",children:[a.jsx("input",{type:"text",value:r,onChange:g,onFocus:()=>{r.trim()&&c(!0)},placeholder:"   (   )",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-3 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 pl-10"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ot,{className:"h-5 w-5 text-slate-400"})}),u&&s.length>0&&a.jsx("ul",{className:"absolute z-50 w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg mt-1 max-h-60 overflow-y-auto shadow-xl custom-scrollbar",children:s.map((y,v)=>a.jsxs("li",{onClick:()=>S(y),className:"px-4 py-2 hover:bg-cyan-100 dark:hover:bg-cyan-600/30 hover:text-cyan-700 dark:hover:text-cyan-300 cursor-pointer text-sm text-slate-700 dark:text-slate-300 transition-colors border-b border-slate-100 dark:border-slate-700 last:border-none flex items-center justify-between group",children:[a.jsx("span",{children:y}),a.jsx(Ze,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]},v))})]}),a.jsx("button",{onClick:()=>S(),className:"px-6 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 font-bold transition-colors shadow-lg whitespace-nowrap",children:""})]})]})},nS=e=>{switch(e){case"":case"":case" ":return"bg-red-100 dark:bg-red-500/10 text-red-700 dark:text-red-300 border-red-200 dark:border-red-500/20";case"":case"":return"bg-blue-100 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-500/20";case"":case"":return"bg-emerald-100 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-500/20";case"":case"":return"bg-sky-100 dark:bg-sky-500/10 text-sky-700 dark:text-sky-300 border-sky-200 dark:border-sky-500/20";case"":case"":return"bg-violet-100 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-500/20";case" ":return"bg-teal-100 dark:bg-teal-500/10 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-500/20";case" ":return"bg-orange-100 dark:bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-500/20";case"":return"bg-slate-200 dark:bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-300 dark:border-slate-500/20";case"":case"":return"bg-amber-100 dark:bg-amber-500/10 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-500/20";case"":case" ":return"bg-indigo-100 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-500/20";case"":case"":return"bg-yellow-100 dark:bg-yellow-500/5 text-yellow-800 dark:text-yellow-300/80 border-yellow-200 dark:border-yellow-500/10";case"":return"bg-rose-100 dark:bg-rose-500/10 text-rose-700 dark:text-rose-300 border-rose-200 dark:border-rose-500/20";case"":return"bg-fuchsia-100 dark:bg-fuchsia-500/10 text-fuchsia-700 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-500/20";case"":return"bg-purple-100 dark:bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-500/20";case" ":return"bg-fuchsia-100 dark:bg-fuchsia-500/20 text-fuchsia-700 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-500/40 shadow-sm";case"":return"bg-teal-100 dark:bg-teal-500/20 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-500/40 shadow-sm";case"":return"bg-lime-100 dark:bg-lime-500/10 text-lime-700 dark:text-lime-300 border-lime-200 dark:border-lime-500/20";default:return"bg-slate-100 dark:bg-slate-700/30 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600/30"}},zs=(e,t,n,r)=>{var i,u,c,f;const o=new Set,s=(e+" "+t).toLowerCase();if(r==="ability"){s.includes(" ")?o.add(" "):s.includes(" ")?o.add(" "):(s.includes("")||s.includes(""))&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/ |||/)&&o.add(""),s.includes("")&&o.add(""),s.includes("1")||s.includes("")?o.add(""):(s.includes("")||s.includes("")||s.includes(""))&&o.add("");const p=s.match(/(\d+)\s*/);p&&parseInt(p[1],10)>=3&&o.add("");const m=(i=n.find(g=>g.label.includes("")))==null?void 0:i.value;m&&m!=="-"&&m!==""?o.add(""):(m==="-"||m==="")&&o.add("");const h=(u=n.find(g=>g.label.includes("")))==null?void 0:u.value;h&&h!=="-"&&String(h).length>2&&(o.add(""),["","","","","",""].some(g=>String(h).includes(g))&&o.add(""))}else{s.match(/|||||||||||/)?o.add(" "):s.match(/||||||||||||/)?o.add(" "):s.match(//)&&o.add(""),s.match(/|||/)?o.add(""):s.match(/||||||/)?o.add(""):o.add("");const p=parseInt(String((c=n.find(h=>h.label.includes("")))==null?void 0:c.value).replace(/[^0-9]/g,"")||"0");p>=5?o.add(""):p<=1&&o.add("");const m=(f=n.find(h=>h.label.includes("")))==null?void 0:f.value;m&&m!=="-"&&o.add("")}return o.has("")&&o.has("")&&o.delete(""),Array.from(o)},Z0=({isOpen:e,onClose:t,onSave:n,type:r,initialData:o,referenceData:s,rulebookContext:i})=>{const[u,c]=I.useState({name:"",description:"",condition:"-",charge:"-",durability:"-",volume:0}),[f,p]=I.useState([]),[m,h]=I.useState(null),[g,w]=I.useState(!1),[S,N]=I.useState(""),y=I.useMemo(()=>{const C=new Set;return s.forEach(k=>{(k.description||"").split(/[.,]\s*/).forEach(R=>{R.trim().length>2&&C.add(R.trim())}),r==="ability"&&"condition"in k&&(k.condition||"").split(/[.,]\s*/).forEach(_=>{_.trim().length>2&&_.trim()!=="-"&&C.add(_.trim())})}),Array.from(C)},[s,r]);if(I.useEffect(()=>{e&&o?c({name:o.name,description:o.description,condition:o.condition||"-",charge:o.charge||"-",durability:o.durability||"-",volume:o.volume||0}):e&&c({name:"",description:"",condition:"-",charge:"-",durability:"-",volume:0}),p([]),w(!1),N("")},[e,o]),I.useEffect(()=>{if(!m){p([]);return}const C=String(u[m]);if(!C||C==="-"){p([]);return}const k=C.trim().split(" "),A=k[k.length-1];if(A.length<2){p([]);return}const R=y.filter(_=>_.toLowerCase().includes(A.toLowerCase())&&_.toLowerCase()!==A.toLowerCase()&&_!==C).slice(0,8);p(R)},[u,m,y]),!e)return null;const v=C=>{C.preventDefault(),n(r==="ability"?{name:u.name,description:u.description,condition:u.condition,charge:u.charge,isCreation:!0}:{name:u.name,description:u.description,durability:u.durability,volume:Number(u.volume),isCreation:!0}),t()},x=C=>{m&&c(k=>{const A=String(k[m]);if(!A||A==="-")return{...k,[m]:C};const R=A.trim().split(" "),_=R[R.length-1];return C.includes(_)?{...k,[m]:R.slice(0,-1).join(" ")+(R.length>1?" ":"")+C}:{...k,[m]:A+" "+C}})},E=C=>{c({name:C.name,description:C.description,condition:C.condition||"-",charge:C.charge||"-",durability:C.durability||"-",volume:C.volume||0}),w(!1)},T=s.filter(C=>C.name.toLowerCase().includes(S.toLowerCase()));return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast overflow-y-auto",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50 flex-shrink-0",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5 text-fuchsia-600 dark:text-fuchsia-400"}),r==="ability"?o?"  ":"  ":o?" ":" "]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row flex-grow overflow-hidden",children:[a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 md:border-r border-slate-200 dark:border-slate-700 custom-scrollbar",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("button",{type:"button",onClick:()=>w(!g),className:"w-full py-2 px-3 rounded-lg border border-dashed border-slate-400 dark:border-slate-600 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:border-fuchsia-500 hover:bg-slate-100 dark:hover:bg-slate-700/50 transition-all text-sm flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx(qe,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"w-4 h-4"}),a.jsx("span",{children:"    ()"})]})}),g&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-100 dark:bg-slate-900/80 rounded-lg border border-slate-200 dark:border-slate-600 animate-fade-in-fast",children:[a.jsx("input",{type:"text",placeholder:" ...",value:S,onChange:C=>N(C.target.value),className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded p-2 text-sm text-slate-900 dark:text-white mb-2 focus:outline-none focus:border-fuchsia-500",autoFocus:!0}),a.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar space-y-1",children:T.length>0?T.map((C,k)=>a.jsxs("button",{type:"button",onClick:()=>E(C),className:"w-full text-left px-3 py-2 rounded hover:bg-fuchsia-100 dark:hover:bg-fuchsia-900/30 text-slate-700 dark:text-slate-300 hover:text-fuchsia-700 dark:hover:text-fuchsia-300 text-xs transition-colors flex justify-between",children:[a.jsx("span",{className:"font-bold",children:C.name}),a.jsx("span",{className:"opacity-50 truncate max-w-[150px]",children:C.description})]},k)):a.jsx("p",{className:"text-center text-slate-500 text-xs py-2",children:"  ."})})]})]}),a.jsxs("form",{id:"creationForm",onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{required:!0,type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.name,onChange:C=>c({...u,name:C.target.value}),placeholder:r==="ability"?": , ":":  ,  ",onFocus:()=>h("name")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("textarea",{required:!0,rows:5,className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.description,onChange:C=>c({...u,description:C.target.value}),placeholder:"   . : 4  ...",onFocus:()=>h("description")})]}),r==="ability"?a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.condition,onChange:C=>c({...u,condition:C.target.value}),onFocus:()=>h("condition")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.charge,onChange:C=>c({...u,charge:C.target.value}),onFocus:()=>h("charge")})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.durability,onChange:C=>c({...u,durability:C.target.value}),onFocus:()=>h("durability")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"number",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.volume,onChange:C=>c({...u,volume:parseInt(C.target.value)||0}),onFocus:()=>h("volume")})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsx("button",{type:"submit",className:"w-full py-2 bg-fuchsia-600 hover:bg-fuchsia-500 text-white rounded-lg font-bold shadow-lg shadow-fuchsia-500/20 transition-colors",children:o?"  ":"  "}),a.jsx("p",{className:"text-xs text-center text-slate-500 mt-2",children:"    ."})]})]})]}),a.jsxs("div",{className:"w-full md:w-1/3 bg-slate-50 dark:bg-slate-900/30 p-4 border-t md:border-t-0 md:border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-500 dark:text-slate-400",children:[a.jsx(Ve,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold",children:"  "})]}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:f.length>0?a.jsx("ul",{className:"space-y-2",children:f.map((C,k)=>a.jsxs("li",{className:"group flex items-start gap-2",children:[a.jsx("button",{type:"button",onClick:()=>x(C),className:"mt-0.5 p-1 rounded-md bg-slate-200 dark:bg-slate-700 hover:bg-fuchsia-600 text-slate-500 dark:text-slate-300 hover:text-white transition-colors flex-shrink-0",title:"",children:a.jsx(Ze,{className:"w-3 h-3"})}),a.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 group-hover:text-fuchsia-600 dark:group-hover:text-fuchsia-200 transition-colors break-words text-left cursor-pointer",onClick:()=>x(C),children:C})]},k))}):a.jsxs("div",{className:"text-center text-slate-500 dark:text-slate-600 text-xs py-10 px-4",children:[a.jsxs("p",{className:"mb-2",children:["   ",a.jsx("br",{}),"   ."]}),a.jsx("p",{children:': "4"    "4  "'})]})})]})]})]})})},eh=({isOpen:e,onClose:t,onConfirm:n,message:r})=>e?a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-md overflow-hidden flex flex-col p-6 text-center",children:[a.jsx("p",{className:"text-slate-800 dark:text-white text-lg mb-6 whitespace-pre-wrap",children:r}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:n,className:"px-6 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold transition-colors",children:""}),a.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-800 dark:text-white rounded-lg font-bold transition-colors",children:""})]})]})}):null,th=({title:e,description:t,stats:n,type:r,isSelected:o,onSelect:s,disabled:i,tags:u,onEdit:c,onDelete:f,onExport:p})=>{const h=r==="item"?{base:"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700",selected:"bg-indigo-50 dark:bg-indigo-900/40 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)] ring-1 ring-indigo-500",hover:"hover:border-indigo-400/50 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(129,140,248,0.15)]",titleColor:"text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-300",iconBg:"bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400",footerBorder:"border-indigo-100 dark:border-indigo-500/20 text-indigo-700 dark:text-indigo-200/80",icon:a.jsx(Nr,{className:"w-5 h-5"})}:{base:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",selected:"bg-cyan-50 dark:bg-cyan-900/40 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)] ring-1 ring-cyan-500",hover:"hover:border-cyan-500/50 hover:bg-cyan-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(34,211,238,0.15)]",titleColor:"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-500 dark:group-hover:text-cyan-300",iconBg:"bg-cyan-100 dark:bg-cyan-500/10 text-cyan-500 dark:text-cyan-400",footerBorder:"border-cyan-100 dark:border-cyan-500/20 text-slate-500 dark:text-slate-400",icon:a.jsx(Xt,{className:"w-5 h-5"})},g=`p-5 rounded-xl border transition-all duration-300 group cursor-pointer h-full flex flex-col relative ${i?"opacity-40 cursor-not-allowed grayscale":""} ${o?h.selected:i?h.base:`${h.base} ${h.hover}`}`;return a.jsxs("div",{onClick:()=>!i&&s(),className:g,children:[a.jsxs("div",{className:"flex justify-between items-start gap-3 mb-2",children:[a.jsx("h4",{className:`font-bold text-lg leading-tight ${h.titleColor}`,children:e}),a.jsx("div",{className:`p-1.5 rounded-md ${h.iconBg} ${o?"opacity-100":"opacity-60 group-hover:opacity-100"} transition-opacity flex-shrink-0`,children:h.icon})]}),u&&u.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:u.map(w=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${nS(w)}`,children:w},w))}),a.jsx("div",{className:"flex-grow",children:a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:t})}),a.jsx("div",{className:`mt-4 pt-3 border-t text-xs ${h.footerBorder}`,children:a.jsx("div",{className:"flex justify-between items-center gap-2",children:n.map((w,S)=>a.jsxs("span",{children:[a.jsxs("strong",{children:[w.label,":"]})," ",w.value]},S))})}),(c||p||f)&&a.jsxs("div",{className:"mt-3 flex gap-2 justify-end border-t border-slate-200 dark:border-slate-700/50 pt-2",children:[f&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),f()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-red-100 dark:bg-red-900/40 hover:bg-red-200 dark:hover:bg-red-800/40 border border-red-200 dark:border-red-700/50 rounded text-red-600 dark:text-red-300 transition-colors mr-auto",children:[a.jsx(pi,{className:"w-3 h-3"}),""]}),c&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),c()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded text-slate-700 dark:text-slate-300 transition-colors",children:[a.jsx(iu,{className:"w-3 h-3"}),""]}),p&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),p()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-fuchsia-100 dark:bg-fuchsia-900/40 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-800/40 border border-fuchsia-200 dark:border-fuchsia-700/50 rounded text-fuchsia-600 dark:text-fuchsia-300 transition-colors",children:[a.jsx(O0,{className:"w-3 h-3"}),""]})]})]})},rS=({selected:e,updateEnhancements:t,availableAbilities:n,onCreate:r,onUpdate:o,onDelete:s,userCreatedList:i,showMessage:u,rulebookContext:c})=>{const[f,p]=I.useState(""),[m,h]=I.useState([]),[g,w]=I.useState(!1),[S,N]=I.useState(!1),[y,v]=I.useState(null),[x,E]=I.useState(null),T=I.useCallback(b=>{const U=[{label:"",value:b.condition},{label:"",value:b.charge}],L=zs(b.name,b.description,U,"ability");return i.some(M=>M.name===b.name)?L.push(" "):b.isCreation&&L.push(""),L},[i]),C=I.useMemo(()=>{const b=new Set;return n.forEach(U=>{!g&&U.isCreation&&!e.some(L=>L.name===U.name)||T(U).forEach(L=>b.add(L))}),Array.from(b).sort()},[n,T,g,e]),k=I.useMemo(()=>n.filter(b=>{if(!g&&b.isCreation&&!e.some(M=>M.name===b.name))return!1;const U=T(b),L=(b.name+b.description).toLowerCase().includes(f.toLowerCase()),O=m.length===0||m.every(M=>U.includes(M));return L&&O}),[n,f,m,T,g,e]),A=I.useCallback(b=>{e.some(L=>L.name===b.name)?t(e.filter(L=>L.name!==b.name)):e.length<Yi&&t([...e,b])},[e,t]),R=b=>{h(U=>U.includes(b)?U.filter(L=>L!==b):[...U,b])},_=b=>{v(b),N(!0)},P=b=>{E(b)},V=()=>{x&&(s(x),E(null))},G=b=>{Q0(b,"ability",u)};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-6 h-6"}),"3.   "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:[" : ",a.jsx("span",{className:"font-bold text-2xl text-cyan-600 dark:text-cyan-300",children:e.length})," / ",Yi]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ot,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-900/50 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:" ,  ...",value:f,onChange:b=>p(b.target.value)}),f&&a.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>h([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${m.length===0?"bg-cyan-600 text-white border-cyan-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:""}),C.map(b=>{const U=m.includes(b);return a.jsx("button",{onClick:()=>R(b),className:`px-3 py-1 text-xs rounded-full border transition-all ${U?"bg-cyan-100 dark:bg-cyan-900/60 text-cyan-700 dark:text-cyan-200 border-cyan-500 shadow-[0_0_10px_rgba(34,211,238,0.2)]":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:b},b)})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>w(!g),className:`px-4 py-1.5 rounded-full text-xs font-semibold border transition-all flex-shrink-0 ${g?"bg-fuchsia-100 dark:bg-fuchsia-600/20 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500 shadow-[0_0_10px_rgba(232,121,249,0.3)]":"bg-slate-200 dark:bg-slate-800 text-slate-500 border-slate-300 dark:border-slate-600 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`,children:g?"   ":"   "}),a.jsxs("button",{onClick:()=>{v(null),N(!0)},className:"px-3 py-1.5 rounded-full text-xs font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 transition-colors shadow-lg flex items-center gap-1",children:[a.jsx(Ze,{className:"w-3 h-3"})," "]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:k.length>0?k.map(b=>{const U=[{label:"",value:b.condition},{label:"",value:b.charge}],L=zs(b.name,b.description,U,"ability"),O=i.some(M=>M===b);return O?L.push(" "):b.isCreation&&L.push(""),a.jsx(th,{type:"ability",title:b.name,description:b.description,stats:U,tags:L,isSelected:e.some(M=>M.name===b.name),onSelect:()=>A(b),disabled:e.length>=Yi&&!e.some(M=>M.name===b.name),onEdit:O?()=>_(b):void 0,onDelete:O?()=>P(b):void 0,onExport:O?()=>G(b):void 0},b.name)}):a.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500 flex flex-col items-center gap-2",children:[a.jsx(Ot,{className:"w-8 h-8 opacity-50"}),a.jsx("span",{children:"  ."})]})}),a.jsx(Z0,{isOpen:S,onClose:()=>N(!1),onSave:b=>{y?o(y,b):r(b),w(!0)},type:"ability",initialData:y,referenceData:n,rulebookContext:c}),a.jsx(eh,{isOpen:!!x,onClose:()=>E(null),onConfirm:V,message:`   
 ?`})]})},oS=({selected:e,updateItems:t,availableItems:n,onCreate:r,onUpdate:o,onDelete:s,userCreatedList:i,showMessage:u,rulebookContext:c})=>{const[f,p]=I.useState(""),[m,h]=I.useState([]),[g,w]=I.useState(!1),[S,N]=I.useState(!1),[y,v]=I.useState(null),[x,E]=I.useState(null),T=I.useCallback(b=>{const U=[{label:"",value:b.durability},{label:"",value:b.volume}],L=zs(b.name,b.description,U,"item");return i.some(M=>M.name===b.name)?L.push(" "):b.isCreation&&L.push(""),L},[i]),C=I.useMemo(()=>{const b=new Set;return n.forEach(U=>{!g&&U.isCreation&&!e.some(L=>L.name===U.name)||T(U).forEach(L=>b.add(L))}),Array.from(b).sort()},[n,T,g,e]),k=I.useMemo(()=>n.filter(b=>{if(!g&&b.isCreation&&!e.some(M=>M.name===b.name))return!1;const U=T(b),L=(b.name+b.description).toLowerCase().includes(f.toLowerCase()),O=m.length===0||m.every(M=>U.includes(M));return L&&O}),[n,f,m,T,g,e]),A=I.useCallback(b=>{e.some(L=>L.name===b.name)?t(e.filter(L=>L.name!==b.name)):e.length<Qi&&t([...e,b])},[e,t]),R=b=>{h(U=>U.includes(b)?U.filter(L=>L!==b):[...U,b])},_=b=>{v(b),N(!0)},P=b=>{E(b)},V=()=>{x&&(s(x),E(null))},G=b=>{Q0(b,"item",u)};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Nr,{className:"w-6 h-6"}),"4.  "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:[" : ",a.jsx("span",{className:"font-bold text-2xl text-cyan-600 dark:text-cyan-300",children:e.length})," / ",Qi]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ot,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-900/50 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:" ,  ...",value:f,onChange:b=>p(b.target.value)}),f&&a.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>h([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${m.length===0?"bg-indigo-600 text-white border-indigo-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:""}),C.map(b=>{const U=m.includes(b);return a.jsx("button",{onClick:()=>R(b),className:`px-3 py-1 text-xs rounded-full border transition-all ${U?"bg-indigo-100 dark:bg-indigo-900/60 text-indigo-700 dark:text-indigo-200 border-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.2)]":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:b},b)})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>w(!g),className:`px-4 py-1.5 rounded-full text-xs font-semibold border transition-all flex-shrink-0 ${g?"bg-fuchsia-100 dark:bg-fuchsia-600/20 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500 shadow-[0_0_10px_rgba(232,121,249,0.3)]":"bg-slate-200 dark:bg-slate-800 text-slate-500 border-slate-300 dark:border-slate-600 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`,children:g?"   ":"   "}),a.jsxs("button",{onClick:()=>{v(null),N(!0)},className:"px-3 py-1.5 rounded-full text-xs font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 transition-colors shadow-lg flex items-center gap-1",children:[a.jsx(Ze,{className:"w-3 h-3"})," "]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:k.length>0?k.map(b=>{const U=[{label:"",value:b.durability},{label:"",value:b.volume}],L=zs(b.name,b.description,U,"item"),O=i.some(M=>M.name===b.name);return O?L.push(" "):b.isCreation&&L.push(""),a.jsx(th,{type:"item",title:b.name,description:b.description,stats:U,tags:L,isSelected:e.some(M=>M.name===b.name),onSelect:()=>A(b),disabled:e.length>=Qi&&!e.some(M=>M.name===b.name),onEdit:O?()=>_(b):void 0,onDelete:O?()=>P(b):void 0,onExport:O?()=>G(b):void 0},b.name)}):a.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500 flex flex-col items-center gap-2",children:[a.jsx(Ot,{className:"w-8 h-8 opacity-50"}),a.jsx("span",{children:"  ."})]})}),a.jsx(Z0,{isOpen:S,onClose:()=>N(!1),onSave:b=>{y?o(y,b):r(b),w(!0)},type:"item",initialData:y,referenceData:n,rulebookContext:c}),a.jsx(eh,{isOpen:!!x,onClose:()=>E(null),onConfirm:V,message:`   
 ?`})]})},sS=({data:e,onDelete:t,onEdit:n})=>a.jsxs("div",{className:"bg-white dark:bg-slate-900/60 border border-indigo-200 dark:border-indigo-500/30 rounded-xl p-4 shadow-lg relative group h-full flex flex-col hover:border-indigo-400 dark:hover:border-indigo-500/60 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg leading-tight",children:e.name}),a.jsx("div",{className:"p-1.5 rounded-md bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400",children:a.jsx(Jn,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap flex-grow",children:e.description}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:r=>{r.stopPropagation(),n()},className:"p-1.5 bg-slate-200 dark:bg-slate-700/80 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white transition-colors",title:"",children:a.jsx(iu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:r=>{r.stopPropagation(),t()},className:"p-1.5 bg-red-100 dark:bg-red-900/80 text-red-600 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-800 transition-colors",title:"",children:a.jsx(pi,{className:"w-4 h-4"})})]})]}),iS=({isOpen:e,onClose:t,availableEffects:n,onAdd:r,initialData:o,rulebookContext:s})=>{const[i,u]=I.useState("create"),[c,f]=I.useState(""),[p,m]=I.useState(""),[h,g]=I.useState("");I.useEffect(()=>{e&&(o?(f(o.name),m(o.description),u("create")):(f(""),m(""),u("create")),g(""))},[e,o]);const w=()=>{c&&p&&(r({name:c,description:p}),t())},S=n.filter(N=>(N.name+N.description).toLowerCase().includes(h.toLowerCase()));return e?a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Jn,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"}),o?"  ":"  "]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:[a.jsx("button",{onClick:()=>u("create"),className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="create"?"bg-indigo-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:" "}),a.jsx("button",{onClick:()=>u("select"),className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="select"?"bg-indigo-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:" "})]}),a.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 bg-white dark:bg-slate-800",children:i==="create"?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:" "}),a.jsx("input",{type:"text",value:c,onChange:N=>f(N.target.value),placeholder:":  , , ",className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:" "}),a.jsx("textarea",{value:p,onChange:N=>m(N.target.value),placeholder:":      1 .",rows:4,className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),a.jsx("button",{onClick:w,disabled:!c.trim()||!p.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all mt-4",children:o?"":""})]}):a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"relative mb-4",children:[a.jsx(Ot,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"...",value:h,onChange:N=>g(N.target.value),className:"w-full pl-9 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 overflow-y-auto pr-1 pb-1",children:S.length>0?S.map((N,y)=>a.jsxs("button",{onClick:()=>{r(N),t()},className:"text-left bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-700 p-3 rounded-lg transition-all group",children:[a.jsx("div",{className:"font-bold text-indigo-600 dark:text-indigo-300 group-hover:text-indigo-700 dark:group-hover:text-indigo-200 mb-1",children:N.name}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-300 line-clamp-2",children:N.description})]},y)):a.jsx("div",{className:"col-span-full text-center py-8 text-slate-500",children:"  ."})})]})})]})}):null},lS=({status:e,setStatus:t,availableEffects:n,rulebookContext:r})=>{const[o,s]=I.useState(!1),[i,u]=I.useState(null),c=I.useMemo(()=>e?e.split(`
`).map(g=>{const w=g.trim();if(!w)return null;const S=w.match(/^\[(.*?)\] (.*)$/);return S?{name:S[1],description:S[2]}:{name:"",description:w}}).filter(g=>g!==null):[],[e]),f=g=>{const w=g.map(S=>`[${S.name}] ${S.description}`).join(`
`);t(w)},p=g=>{if(i!==null){const w=[...c];w[i]=g,f(w)}else f([...c,g]);u(null)},m=g=>{const w=[...c];w.splice(g,1),f(w)},h=g=>{u(g),s(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-2 flex items-center gap-2",children:[a.jsx(Jn,{className:"w-6 h-6"}),"5.   ()"]}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm",children:"      ."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map((g,w)=>a.jsx("div",{className:"animate-fade-in-fast h-full",children:a.jsx(sS,{data:g,onDelete:()=>m(w),onEdit:()=>h(w)})},w)),a.jsxs("button",{onClick:()=>{u(null),s(!0)},className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 hover:text-indigo-500 dark:hover:text-indigo-400 hover:border-indigo-400 dark:hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-all group min-h-[160px]",children:[a.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 group-hover:bg-indigo-100 dark:group-hover:bg-indigo-500/20 rounded-full p-3 mb-2 transition-colors",children:a.jsx(Ze,{className:"w-8 h-8 group-hover:scale-110 transition-transform"})}),a.jsx("span",{className:"text-sm font-bold",children:" "})]})]})]}),a.jsx(iS,{isOpen:o,onClose:()=>s(!1),availableEffects:n,onAdd:p,initialData:i!==null?c[i]:null,rulebookContext:r})]})},aS=({backstory:e,setBackstory:t,memoList:n,setMemoList:r})=>{const[o,s]=I.useState({type:"bond",title:"",content:""}),[i,u]=I.useState(!1),[c,f]=I.useState(!1),p=()=>{!o.title.trim()||!o.content.trim()||(r(h=>[...h,{...o,id:Date.now().toString()}]),s({type:"bond",title:"",content:""}),u(!1))},m=h=>{r(g=>g.filter(w=>w.id!==h))};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(_o,{className:"w-6 h-6"}),"6.  "]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`transition-all duration-300 ease-in-out ${c?"h-96":"h-32"}`,children:a.jsx(X0,{label:"  ",value:e,onChange:h=>t(h.target.value),rows:c?15:4,placeholder:"        .",className:"h-full"})}),a.jsx("button",{onClick:()=>f(!c),className:"absolute bottom-[-1.5rem] left-1/2 -translate-x-1/2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-800 dark:hover:text-white rounded-full p-1 border border-slate-300 dark:border-slate-600 shadow-md transition-colors z-10",title:c?"":"",children:a.jsx(fi,{className:`w-5 h-5 transition-transform duration-300 ${c?"rotate-90":"-rotate-90"}`})})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsxs("h3",{className:"text-xl font-bold text-fuchsia-600 dark:text-fuchsia-400 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-6 h-6"}),"  "]}),a.jsx("button",{onClick:()=>u(!i),className:`
                            px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all
                            ${i?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300":"bg-fuchsia-600 text-white hover:bg-fuchsia-500 shadow-lg shadow-fuchsia-500/20"}
                        `,children:i?a.jsxs(a.Fragment,{children:[a.jsx(qe,{className:"w-4 h-4"}),""]}):a.jsxs(a.Fragment,{children:[a.jsx(Ze,{className:"w-4 h-4"}),""]})})]}),i&&a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-fuchsia-500/30 mb-6 animate-slide-in-bottom",children:[a.jsxs("div",{className:"flex gap-4 mb-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"memoType",checked:o.type==="bond",onChange:()=>s(h=>({...h,type:"bond"})),className:"accent-fuchsia-500"}),a.jsx("span",{className:o.type==="bond"?"text-slate-900 dark:text-white font-bold":"text-slate-500 dark:text-slate-400",children:""})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"memoType",checked:o.type==="memory",onChange:()=>s(h=>({...h,type:"memory"})),className:"accent-fuchsia-500"}),a.jsx("span",{className:o.type==="memory"?"text-slate-900 dark:text-white font-bold":"text-slate-500 dark:text-slate-400",children:""})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",value:o.title,onChange:h=>s(g=>({...g,title:h.target.value})),placeholder:" (:  , )",className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500"}),a.jsx("textarea",{value:o.content,onChange:h=>s(g=>({...g,content:h.target.value})),placeholder:" .",rows:3,className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500 resize-none"}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:p,disabled:!o.title.trim()||!o.content.trim(),className:"px-6 py-2 bg-fuchsia-600 text-white rounded-lg font-bold hover:bg-fuchsia-500 disabled:opacity-50 transition-colors",children:""})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.length>0?n.map(h=>a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative group hover:border-fuchsia-500/50 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${h.type==="bond"?"bg-pink-100 dark:bg-pink-500/10 text-pink-600 dark:text-pink-400 border-pink-200 dark:border-pink-500/20":"bg-purple-100 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-200 dark:border-purple-500/20"}`,children:h.type==="bond"?"":""}),a.jsx("button",{onClick:()=>m(h.id),className:"text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(qe,{className:"w-4 h-4"})})]}),a.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-1",children:h.title}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:h.content})]},h.id)):a.jsx("div",{className:"col-span-full py-8 text-center border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl",children:a.jsx("p",{className:"text-slate-500",children:"    ."})})})]})]})},uS=({character:e,handleReset:t,handleModify:n,sheetRef:r})=>a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 flex items-center gap-2 self-start sm:self-center",children:[a.jsx(Ve,{className:"w-6 h-6"}),"7.   "]}),a.jsxs("div",{className:"flex gap-2 self-end sm:self-center",children:[a.jsxs("button",{onClick:n,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white transition-colors text-sm font-bold flex items-center gap-2",children:[a.jsx(iu,{className:"w-4 h-4"}),"  "]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-red-100 dark:bg-red-600/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-600/50 rounded-lg hover:bg-red-200 dark:hover:bg-red-600 hover:text-red-700 dark:hover:text-white transition-colors text-sm font-bold flex items-center gap-2",children:[a.jsx(pi,{className:"w-4 h-4"}),"   "]})]})]}),a.jsx("div",{ref:r,className:"mb-10",children:a.jsx(KC,{character:e})})]}),dS=({customAbilities:e,customItems:t,rulebookPages:n})=>{const[r,o]=I.useState(1),s=7,[i,u]=I.useState(nf),[c,f]=I.useState({genderAge:"",appearance:"",commentary:""}),[p,m]=I.useState([]),[h,g]=I.useState([]),[w,S]=I.useState([]),N=I.useMemo(()=>n?QC(n):[],[n]),[y,v]=I.useState({isOpen:!1,message:"",type:"info"}),x=I.useRef(null),[E,T]=I.useState(!1),[C,k]=I.useState(!1),A=I.useCallback((D,H="info")=>{v({isOpen:!0,message:D,type:H})},[]),R=()=>v(D=>({...D,isOpen:!1}));I.useEffect(()=>{const D=JSON.parse(localStorage.getItem("user_created_abilities")||"[]"),H=JSON.parse(localStorage.getItem("user_created_items")||"[]");g(D),S(H)},[]),I.useEffect(()=>{const D=[];c.genderAge&&D.push(c.genderAge),c.appearance&&D.push(c.appearance),c.commentary&&D.push(`"${c.commentary}"`),u(H=>({...H,profile:{...H.profile,info:D.join(`

`)}}))},[c]),I.useEffect(()=>{const D=p.filter(K=>K.type==="bond").map(K=>`[${K.title}] ${K.content}`).join(`

`),H=p.filter(K=>K.type==="memory").map(K=>`[${K.title}] ${K.content}`).join(`

`);u(K=>({...K,profile:{...K.profile,bonds:D,memories:H}}))},[p]);const _=I.useMemo(()=>!n||n.length===0?"":n.map(D=>D.title).join(", "),[n]),P=I.useCallback(D=>{g(H=>{const K=[...H,D];return On(K,"ability"),K}),A(`${D.name}  !  .`,"info")},[A]),V=(D,H)=>{const K=h.map(oe=>oe===D?H:oe);g(K),On(K,"ability");const ee=i.abilities.enhancements.findIndex(oe=>oe===D);if(ee!==-1){const oe=[...i.abilities.enhancements];oe[ee]=H,u(F=>({...F,abilities:{...F.abilities,enhancements:oe}}))}},G=D=>{const H=h.filter(ee=>ee!==D);if(g(H),On(H,"ability"),i.abilities.enhancements.some(ee=>ee===D)){const ee=i.abilities.enhancements.filter(oe=>oe!==D);u(oe=>({...oe,abilities:{...oe.abilities,enhancements:ee}}))}},b=I.useCallback(D=>{S(H=>{const K=[...H,D];return On(K,"item"),K}),A(`${D.name}  !  .`,"info")},[A]),U=(D,H)=>{const K=w.map(oe=>oe===D?H:oe);S(K),On(K,"item");const ee=i.inventory.items.findIndex(oe=>oe===D);if(ee!==-1){const oe=[...i.inventory.items];oe[ee]=H,u(F=>({...F,inventory:{...F.inventory,items:oe}}))}},L=D=>{const H=w.filter(ee=>ee!==D);if(S(H),On(H,"item"),i.inventory.items.some(ee=>ee===D)){const ee=i.inventory.items.filter(oe=>oe!==D);u(oe=>({...oe,inventory:{...oe.inventory,items:ee}}))}},O=I.useMemo(()=>{const D=e&&e.length>0?e:qC;return[...h,...D]},[e,h]),M=I.useMemo(()=>{const D=t&&t.length>0?t:zC;return[...w,...D]},[t,w]),$=()=>o(D=>Math.min(D+1,s)),B=()=>o(D=>Math.max(D-1,1)),Z=()=>{u(nf),f({genderAge:"",appearance:"",commentary:""}),m([]),o(1)},se=(D,H)=>{u(K=>({...K,profile:{...K.profile,[D]:H}}))},ge=D=>{u(H=>({...H,abilities:{...H.abilities,skills:D}}))},Se=D=>{u(H=>({...H,abilities:{...H.abilities,enhancements:D}}))},De=D=>{u(H=>({...H,inventory:{...H.inventory,items:D}}))},je=I.useCallback(D=>{P(D)},[P]),ce=I.useCallback(D=>{b(D)},[b]),de=I.useCallback(D=>{const H=`[${D.name}] ${D.description}`;u(K=>({...K,abilities:{...K.abilities,status:K.abilities.status?`${K.abilities.status}
${H}`:H}})),A(`${D.name}  !`,"info")},[A]),ue=I.useCallback(D=>{se("backstory",D),A("  !","info")},[]),re=I.useCallback(D=>{f(H=>({...H,appearance:D})),A("  !","info")},[]),ae=async()=>{var D;if(x.current){T(!0),k(!1);try{const H=await tf(()=>import("./html2canvas.esm-e0a7d97b.js"),[]),K=H.default||H,ee=await tf(()=>import("./jspdf.es.min-66656118.js").then(ye=>ye.j),[]),oe=ee.jsPDF||((D=ee.default)==null?void 0:D.jsPDF)||ee.default;if(!K||!oe)throw new Error("   .   .");const q=(await K(x.current,{useCORS:!0,logging:!1,background:document.documentElement.classList.contains("dark")?"#0f172a":"#ffffff"})).toDataURL("image/png"),te=new oe("p","mm","a4"),J=te.internal.pageSize.getWidth(),Y=te.internal.pageSize.getHeight(),X=te.getImageProperties(q),ie=X.height*J/X.width;let W=ie,le=0;for(te.addImage(q,"PNG",0,le,J,ie),W-=Y;W>0;)le-=Y,te.addPage(),te.addImage(q,"PNG",0,le,J,ie),W-=Y;const pe=`${i.profile.name||"Character"}_Sheet.pdf`;te.save(pe)}catch(H){console.error("PDF Export Error:",H),alert(`PDF  . 
(: `+(H instanceof Error?H.message:String(H))+")")}finally{T(!1)}}},Ee=()=>{const D="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,2)),H=document.createElement("a");H.setAttribute("href",D),H.setAttribute("download",`${i.profile.name||"character"}_data.json`),document.body.appendChild(H),H.click(),H.remove(),k(!1)},Ye=()=>{switch(r){case 1:return a.jsx(eS,{name:i.profile.name,setName:D=>se("name",D),image:i.profile.image,setImage:D=>se("image",D),extendedProfile:c,setExtendedProfile:f});case 2:return a.jsx(tS,{skills:i.abilities.skills,updateSkills:ge,rulebookPages:n});case 3:return a.jsx(rS,{selected:i.abilities.enhancements,updateEnhancements:Se,availableAbilities:O,onCreate:P,onUpdate:V,onDelete:G,userCreatedList:h,showMessage:A,rulebookContext:_});case 4:return a.jsx(oS,{selected:i.inventory.items,updateItems:De,availableItems:M,onCreate:b,onUpdate:U,onDelete:L,userCreatedList:w,showMessage:A,rulebookContext:_});case 5:return a.jsx(lS,{status:i.abilities.status,setStatus:D=>u(H=>({...H,abilities:{...H.abilities,status:D}})),availableEffects:N,rulebookContext:_});case 6:return a.jsx(aS,{backstory:i.profile.backstory,setBackstory:D=>se("backstory",D),memoList:p,setMemoList:m});case 7:return a.jsx(uS,{character:i,handleReset:Z,handleModify:()=>o(1),sheetRef:x});default:return null}},$e=[" ","","","","","",""];return a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-8 rounded-lg shadow-xl max-w-7xl mx-auto relative transition-colors",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white text-center mb-2",children:" "}),a.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-6",children:"   ."}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"relative pt-1",children:a.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-slate-200 dark:bg-slate-700",children:a.jsx("div",{style:{width:`${r/s*100}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-cyan-600 dark:bg-cyan-500 transition-all duration-500"})})}),a.jsx("div",{className:"flex justify-between text-xs px-1",children:$e.map((D,H)=>{const K=H+1,ee=r===K,oe=r>K;return a.jsx("button",{onClick:()=>o(K),className:`transition-colors duration-200 font-medium ${ee?"text-cyan-600 dark:text-cyan-400 font-bold":oe?"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-400"}`,children:D},K)})})]}),a.jsx("div",{className:"min-h-[50vh]",children:Ye()}),a.jsxs("div",{className:"flex justify-between mt-8 border-t border-slate-200 dark:border-slate-700 pt-6",children:[a.jsxs("button",{onClick:B,disabled:r===1,className:"flex items-center gap-2 px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-white rounded-md disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-medium",children:[a.jsx(fi,{className:"w-5 h-5"}),"  "]}),r<s?a.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-8 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-500 transition-colors font-bold shadow-lg shadow-cyan-500/20",children:[r===5?" ( )":" "," ",a.jsx(jt,{className:"w-5 h-5"})]}):a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>k(!C),disabled:E,className:"flex items-center gap-2 px-8 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-500 transition-colors font-bold shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[E?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Bc,{className:"w-5 h-5"}),E?" ...":""]}),C&&a.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-xl shadow-xl overflow-hidden animate-fade-in-fast z-50",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("button",{onClick:ae,className:"text-left px-4 py-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-slate-700 dark:text-slate-200 transition-colors flex items-center gap-2 text-sm font-medium border-b border-slate-100 dark:border-slate-700",children:[a.jsx(Bc,{className:"w-4 h-4 text-red-500"}),"PDF "]}),a.jsxs("button",{onClick:Ee,className:"text-left px-4 py-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-slate-700 dark:text-slate-200 transition-colors flex items-center gap-2 text-sm font-medium",children:[a.jsx(O0,{className:"w-4 h-4 text-green-500"}),"JSON "]})]})}),C&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>k(!1)})]})]}),a.jsx(ZC,{isOpen:y.isOpen,onClose:R,message:y.message,type:y.type}),a.jsx(XC,{onAddAbility:je,onAddItem:ce,onAddStatus:de,onUpdateBackstory:ue,onUpdateAppearance:re,forcedType:r===1?"appearance":r===3?"ability":r===4?"item":r===5?"status":r===6?"backstory":void 0,rulebookContext:_,characterContext:{name:i.profile.name,genderAge:c.genderAge,backstory:i.profile.backstory}})]})},cS=({pages:e})=>{const[t,n]=I.useState(!1),[r,o]=I.useState([]),[s,i]=I.useState(""),[u,c]=I.useState(!1),f=I.useRef(null),p=I.useRef(null),[m,h]=I.useState(!1),[g,w]=I.useState(""),S=()=>{n(!t)};I.useEffect(()=>{r.length===0&&o([{id:"init",role:"model",text:'!   "".      ?'}])},[r.length]),I.useEffect(()=>{var k;t&&((k=p.current)==null||k.scrollIntoView({behavior:"smooth"}))},[r,t,u]);const N=k=>k?typeof k=="string"?k:k.runs?k.runs.map(A=>A.text||"").join(""):k.text||"":"",y=k=>{var P,V,G;if(!k.rows||k.rows.length===0)return"";const A=k.rows.flat().map(b=>N(b)).join(" ");if(A.includes("[npc]")){let b=`
[NPC ]
`;try{const U=N((P=k.rows[0])==null?void 0:P[0]).replace(/\[npc\]/gi,"").trim();if(b+=`/: ${U}
`,k.rows.length>1){const L=k.rows[1].map(O=>N(O)).join(" / ");b+=`: ${L}
`}for(let L=2;L<k.rows.length;L++){const O=N((V=k.rows[L])==null?void 0:V[0]).trim(),M=N((G=k.rows[L])==null?void 0:G[1]).trim();O&&M&&(b+=`${O}: ${M}
`)}}catch{b+=A}return b+`
`}const R=k.rows[0].map(b=>N(b).trim());if(R.some(b=>b.includes(""))&&R.some(b=>b.includes(""))){let b=`
[  ]
`;return k.rows[0].forEach((U,L)=>{var B,Z,se,ge;const O=N(U).trim(),M=N(((Z=(B=k.rows)==null?void 0:B[1])==null?void 0:Z[L])||"").trim(),$=N(((ge=(se=k.rows)==null?void 0:se[2])==null?void 0:ge[L])||"").trim();b+=`- ${O}: ${M} (: ${$})
`}),b+`
`}if(R.includes("")&&R.includes("")){let b=`
[FAQ /   ]
`;const U=R[0]==="Q & A"||R[0]===""?1:0;for(let L=U;L<k.rows.length;L++){const O=k.rows[L];if(O.length>=3){const M=N(O[0]).trim(),$=N(O[1]).trim(),B=N(O[2]).trim();M&&B&&(b+=`Q(${$}): ${M}
A: ${B}
---
`)}}return b+`
`}if(A.includes("[passive]")||A.includes("[obstacle]")||A.includes("[skill]")){let b=`
[ ]
`;return k.rows.flat().forEach(U=>{let L=N(U).trim();L=L.replace(/\[passive\]|\[obstacle\]|\[skill\]/gi,"").trim(),L&&(b+=`- ${L}
`)}),b+`
`}let _=`
`;_+="| "+k.rows[0].map(b=>N(b).replace(/\n/g," ")).join(" | ")+` |
`,_+="| "+k.rows[0].map(()=>"---").join(" | ")+` |
`;for(let b=1;b<k.rows.length;b++)_+="| "+k.rows[b].map(U=>N(U).replace(/\n/g,"<br>")).join(" | ")+` |
`;return _+`
`};I.useEffect(()=>{if(e.length===0)return;const A=` ' ' TRPG    ''. 
         [ ]    .
        
        []
        1. ** :**
           - ** /:**  "", " ", ""     ,         .
           - **/ :**   , , , NPC,    , ** [ ] ** .    .

        2. ** :**
           -   . (3~4  )
           - **   (<think>  )   .**
           -     ****    .

        3. **   (   ):**
           -           . **   .**
           - **:** ' :', ' :'       .
           - [[REF:]] ( 2).  '', ' ', 'NPC '    .
           - [[Q:]] ( 3).      .
        
        [ ]
        ${e.map(R=>{let _=`
# : ${R.title}
`;return R.content.forEach(P=>{var G;if(P.type==="table"){_+=y(P);return}let V=P.text||((G=P.runs)==null?void 0:G.map(b=>b.text).join(""))||"";if(V=V.trim(),!!V)switch(P.type){case"heading_1":_+=`
## ${V}
`;break;case"heading_2":_+=`
### ${V}
`;break;case"heading_3":_+=`
#### ${V}
`;break;case"heading_4":case"heading_5":case"heading_6":_+=`
##### ${V}
`;break;case"list_item":_+=`- ${V}
`;break;default:_+=`${V}
`}}),_}).join(`
`).substring(0,35e3)}... ( )`;w(A),h(!0)},[e]);const v=()=>{if(f.current)return f.current;const A=new _r({apiKey:"AIzaSyCeW0VBVT7nIwbusmjIbe1HTkD-6OEVht4"}).chats.create({model:"gemini-2.5-flash",config:{systemInstruction:g}});return f.current=A,A},x=k=>{let A=k.replace(/<think>[\s\S]*?<\/think>/g,"");return A=A.replace(/\[\[REF:(.*?)\]\]/g,""),A=A.replace(/\[\[Q:(.*?)\]\]/g,""),A=A.replace(/(\s*|\s*|Related\s*Sections?|Suggested\s*Questions?)\s*[:]\s*/gi,""),A.trim()},E=(k,A)=>k?k.split(/(\*\*[\s\S]*?\*\*)/g).map((_,P)=>{if(_.startsWith("**")&&_.endsWith("**")&&_.length>=4){const V=_.slice(2,-2);return A==="user"?a.jsx("strong",{className:"font-extrabold text-white bg-white/20 px-0.5 rounded",children:V},P):a.jsx("strong",{className:"font-extrabold text-slate-900 dark:text-white",children:V},P)}return a.jsx("span",{children:_},P)}):null,T=async(k,A)=>{k==null||k.preventDefault();const R=A||s;if(!R.trim()||!m)return;const _={id:Date.now().toString(),role:"user",text:R};o(V=>[...V,_]),i(""),c(!0);const P=(Date.now()+1).toString();o(V=>[...V,{id:P,role:"model",text:"",isStreaming:!0}]);try{const G=await v().sendMessageStream({message:R});let b="";for await(const B of G)if(B.text){b+=B.text;let Z=b;Z=Z.replace(/<think>[\s\S]*?<\/think>/g,""),Z=Z.replace(/<think>[\s\S]*/g,""),Z=Z.replace(/\[\[REF:.*?\]\]/g,""),Z=Z.replace(/\[\[Q:.*?\]\]/g,""),Z=Z.replace(/(\s*|\s*)\s*[:]\s*/g,""),Z=Z.replace(/\[\[[^\]]*$/g,""),Z=Z.trimEnd(),o(se=>se.map(ge=>ge.id===P?{...ge,text:Z}:ge))}const U=/\[\[REF:(.*?)\]\]/g,L=/\[\[Q:(.*?)\]\]/g,O=[...b.matchAll(U)].map(B=>B[1].trim()).slice(0,2),M=[...b.matchAll(L)].map(B=>B[1].trim()).slice(0,3),$=x(b);o(B=>B.map(Z=>Z.id===P?{...Z,text:$,relatedRefs:O,suggestedQuestions:M,isStreaming:!1}:Z))}catch{o(G=>G.map(b=>b.id===P?{...b,text:" .",isStreaming:!1}:b))}finally{c(!1)}},C=k=>{const A=new CustomEvent("rulebook-navigate",{detail:{title:k}});window.dispatchEvent(A)};return a.jsxs("div",{className:"fixed bottom-6 left-6 z-[200] flex flex-col items-start pointer-events-none",children:[a.jsxs("div",{className:`
                mb-4 w-80 sm:w-96 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-2xl shadow-2xl overflow-hidden flex flex-col transition-all duration-300 origin-bottom-left
                ${t?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 translate-y-4 pointer-events-none h-0"}
            `,style:{maxHeight:"600px"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-3 flex justify-between items-center border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[a.jsx(Hs,{className:"w-5 h-5 text-cyan-100"}),a.jsx("span",{children:"  "})]}),a.jsx("button",{onClick:S,className:"text-white/70 hover:text-white transition-colors p-1 rounded-full hover:bg-white/10",children:a.jsx(qe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900/50 custom-scrollbar h-[350px]",children:[r.map((k,A)=>a.jsxs("div",{className:`flex flex-col ${k.role==="user"?"items-end":"items-start"}`,children:[k.text&&a.jsx("div",{className:`
                                    max-w-[90%] px-4 py-3 rounded-2xl text-sm whitespace-pre-wrap shadow-sm leading-relaxed relative animate-fade-in-fast
                                    ${k.role==="user"?"bg-cyan-600 text-white rounded-tr-none":"bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none border border-slate-200 dark:border-slate-600"}
                                `,children:(k.isStreaming,E(k.text,k.role))}),k.role==="model"&&!k.isStreaming&&a.jsxs("div",{className:"mt-2 space-y-2 max-w-[90%] animate-fade-in-fast",children:[k.relatedRefs&&k.relatedRefs.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:k.relatedRefs.map((R,_)=>a.jsxs("button",{onClick:()=>C(R),className:"text-[10px] bg-slate-200 dark:bg-slate-600/50 text-slate-600 dark:text-slate-300 px-2 py-1 rounded hover:bg-cyan-100 dark:hover:bg-cyan-900/30 hover:text-cyan-700 dark:hover:text-cyan-300 transition-colors flex items-center gap-1",children:[" ",R]},_))}),k.suggestedQuestions&&k.suggestedQuestions.length>0&&a.jsx("div",{className:"flex flex-col gap-1.5 mt-1",children:k.suggestedQuestions.map((R,_)=>a.jsxs("button",{onClick:()=>T(void 0,R),className:"text-xs text-left bg-white dark:bg-slate-800 text-cyan-600 dark:text-cyan-400 px-3 py-2 rounded-xl border border-cyan-200 dark:border-cyan-800 hover:bg-cyan-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-between gap-2 shadow-sm group",children:[a.jsx("span",{className:"truncate",children:R}),a.jsx(jt,{className:"w-3 h-3 opacity-50 group-hover:opacity-100"})]},_))})]})]},k.id||A)),u&&(r.length===0||!r[r.length-1].text)&&a.jsx("div",{className:"flex flex-col items-start animate-fade-in-fast",children:a.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-2xl rounded-tl-none px-4 py-3 border border-slate-200 dark:border-slate-600 shadow-sm",children:a.jsxs("div",{className:"flex gap-1 h-5 items-center",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 dark:bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 dark:bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 dark:bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{ref:p})]}),a.jsxs("form",{onSubmit:k=>T(k),className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[a.jsx("input",{value:s,onChange:k=>i(k.target.value),className:"flex-1 bg-slate-100 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-full px-4 py-2 text-sm text-slate-900 dark:text-white focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-colors placeholder-slate-400",placeholder:"  ...",disabled:u}),a.jsx("button",{type:"submit",disabled:u||!s.trim(),className:"p-2 bg-cyan-600 text-white rounded-full hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg transition-colors flex items-center justify-center aspect-square",children:a.jsx(_o,{className:"w-4 h-4"})})]})]}),a.jsxs("button",{onClick:S,className:`
                    w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 relative group pointer-events-auto
                    ${t?"bg-slate-700 text-white rotate-90":"bg-gradient-to-br from-cyan-600 to-blue-600 text-white hover:scale-110 shadow-cyan-500/30"}
                `,title:"  ",children:[t?a.jsx(qe,{className:"w-6 h-6"}):a.jsx(Hs,{className:"w-7 h-7"}),!t&&a.jsx("span",{className:"absolute left-full ml-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-white text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-600 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity shadow-md pointer-events-none",children:" "})]})]})},fS=()=>{const[e,t]=I.useState("rulebook"),[n,r]=I.useState("dark"),[o,s]=I.useState(null),[i,u]=I.useState(!1),[c,f]=I.useState(null),[p,m]=I.useState(""),[h,g]=I.useState(!0),[w,S]=I.useState(0),[N,y]=I.useState(""),[v,x]=I.useState(""),[E,T]=I.useState(""),[C,k]=I.useState(""),[A,R]=I.useState(""),[_,P]=I.useState(""),[V,G]=I.useState(""),[b,U]=I.useState(""),[L,O]=I.useState(!1),[M,$]=I.useState(!1),[B,Z]=I.useState({abilities:[],items:[]}),[se,ge]=I.useState([]);I.useEffect(()=>{const D=localStorage.getItem("theme");D?(r(D),D==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")):(r("dark"),document.documentElement.classList.add("dark"))},[]);const Se=()=>{const D=n==="dark"?"light":"dark";r(D),localStorage.setItem("theme",D),D==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},De=I.useCallback((D,H)=>{Z({abilities:D,items:H})},[]),je=I.useCallback(D=>{ge(D)},[]);I.useEffect(()=>{const D=localStorage.getItem("lastUpdatedTime");D&&s(new Date(D))},[]);const ce=I.useCallback((D,H)=>{if(g(!1),D==="success"){const K=new Date;s(K),localStorage.setItem("lastUpdatedTime",K.toISOString()),u(!1),f(null)}else u(!0),H?f(H.message):c||f("   ")},[c]),de=I.useCallback(D=>{y(D)},[]),ue=I.useCallback(D=>{x(D)},[]),re=I.useCallback(D=>{T(D)},[]);I.useEffect(()=>{const D={"AKfycbylvOe0ltS1u558pgWjj_cHVtFBvKvecmasv1KEH0Sbc-V0fU2u7-xU02AmfyGw364A":69,AKfycbzYZ7Byxr6qOBL2Emi7J3cWQfHzHnvkQiYp1r2x28SAWXMEitOyq0p29gg9flM_UF9L:70,"AKfycbyOS8KsUDB375DtsvUUz1GbhJagxERlVJRRv6Svde8K_fGxdOTPVNF-9oOFNeQgfwMo":72,"AKfycbylCR1uPC9vjA3Xw62932vd1Hndwysqglw9-ktIPSC2iF8zRB6qYOrBOZGFvq6D5hva":80,"AKfycbyPo0la3Zfa_EuNzmO6caEhuQXvqIsRiaecZhgnbxhZxDh_GDQk-fpeoLznvDHnZIth":81,"AKfycbzOtoczmXQAMBFESt2Tp33JWfR45D2_-VGA11BROUWVdUX0Z4Au7M3qZ-eDJ5lKdgnB":83,"AKfycby_XDKGTcB-NLSgxQpdCmHi8WrrL4IEyFRXf9SHSFAsHXJAijhFRLO4gd0QCc0RNuOWIw":3,"AKfycbwyg-Iut_KAr-w7BrcywoDCsZOLUG3gNG_XPFsGBlLEi1UxCpHlzn_2eSlwwYRj7_U4bw":4,AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY:13,"AKfycbxJU07yzY5Jxja2jOy1i1H8HAnO-ETyA_8RYcj3jNAnwhONyCybHKBU0myIEu4VErh7":2},H="AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY",K="AKfycbzbvAajmyWMO4dLe2OeukVbJ9wtOVi_-W2Zadc4qMLlbgyaQ-yTDKTPnPT57Y7DmcVB";let ee={};try{const F=localStorage.getItem("deployVersions");F&&(ee=JSON.parse(F))}catch(F){console.error("Failed to parse deploy versions from localStorage",F),localStorage.removeItem("deployVersions")}const oe=(F,q)=>{if(!F)return;const te=F.slice(-6);let J="";if(D[F])J=`v${D[F]}(${te})`;else{let Y;if(ee[F])Y=ee[F];else{const ie=Object.values(ee).reduce((W,le)=>Math.max(W,le),0)+1;ee[F]=ie,Y=ie;try{localStorage.setItem("deployVersions",JSON.stringify(ee))}catch(W){console.error("Failed to save deploy versions to localStorage",W)}}J=`v${Y}(${te})`}q==="main"?k(J):q==="addon"?R(J):q==="second"?P(J):q==="export"?G(J):q==="aiDatabase"&&U(J)};N&&oe(N,"main"),v&&oe(v,"addon"),E&&oe(E,"second"),oe(H,"export"),oe(K,"aiDatabase")},[N,v,E]),I.useEffect(()=>{if(!o){m("");return}const D=()=>{const ee=Math.floor((new Date().getTime()-o.getTime())/1e3);if(ee<5)m("  ");else if(ee<60)m(`${ee}  `);else{const oe=Math.floor(ee/60);m(`${oe}  `)}};D();const H=setInterval(D,5e3);return()=>clearInterval(H)},[o]);const ae=()=>{g(!0),u(!1),f(null),O(!1),S(D=>D+1)},Ee=()=>{O(!0),g(!0),f(" "),S(D=>D+1)},Ye=D=>`px-6 py-2 rounded-md text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500 ${D?"bg-cyan-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"}`,$e=()=>{let D;return h?D=a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:" ..."}):i?D=a.jsx("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",title:c||"",children:a.jsxs("span",{children:["    : ",a.jsx("span",{className:"font-mono text-xs",children:c})]})}):o&&(D=a.jsx("span",{className:"text-green-600 dark:text-green-400",children:p})),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[D,a.jsx("button",{onClick:ae,className:"p-1 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors","aria-label":" ",children:a.jsx(ta,{className:"w-4 h-4"})})]})};return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 font-sans transition-colors duration-300",children:[a.jsx("header",{className:"bg-white dark:bg-slate-800 shadow-lg sticky top-0 z-50 transition-colors duration-300",children:a.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors duration-300",children:"Akasha Simpli TRPG Helper"}),$e()]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:Se,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-yellow-300 dark:hover:bg-slate-600 transition-colors",title:n==="dark"?" ":" ",children:n==="dark"?a.jsx(mC,{className:"w-5 h-5"}):a.jsx(gC,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>t("rulebook"),className:Ye(e==="rulebook"),children:" "}),a.jsx("button",{onClick:()=>t("creator"),className:Ye(e==="creator"),children:" "})]})]})})}),a.jsxs("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[a.jsx("div",{className:e==="rulebook"?"block":"hidden",children:a.jsx(GC,{onUpdate:ce,refreshTrigger:w,setDeployVersion:de,setAddonDeployVersion:ue,setSecondDeployVersion:re,forceOffline:L,onDataLoaded:De,onPagesLoaded:je,navigateToCreator:()=>t("creator")})}),e==="creator"&&a.jsx(dS,{customAbilities:B.abilities,customItems:B.items,rulebookPages:se})]}),a.jsx(cS,{pages:se}),a.jsxs("footer",{className:"text-center p-4 text-slate-500 text-sm space-y-2",children:[a.jsx("p",{children:"Created for Akasha Simpli TRPG. All rules content provided by KingCrab."}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[C&&a.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600",children:["Deploy Ver: ",C]}),_&&a.jsx("button",{onClick:()=>$(!M),className:"p-0.5 text-slate-400 hover:text-slate-600 dark:text-slate-600 dark:hover:text-slate-400 focus:outline-none transition-colors","aria-label":"Toggle Addon Version",children:a.jsx(jt,{className:`w-3 h-3 transition-transform duration-200 ${M?"rotate-90":""}`})})]}),M&&_&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Addon Deploy Ver: ",_]}),M&&V&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Export Creation Ver: ",V]}),M&&b&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Ai Data Base Ver: ",b]}),a.jsx("button",{onClick:Ee,className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-600 dark:hover:text-slate-400 underline decoration-dotted transition-colors",children:"  "})]})]})]})};class pS extends hs.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){var t,n;return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 p-4 font-sans",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-10 h-10 text-red-600 dark:text-red-400",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),a.jsx("h1",{className:"text-2xl font-bold mb-2 text-slate-900 dark:text-white",children:" "}),a.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm",children:["     .",a.jsx("br",{}),"   ."]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 rounded-lg p-4 mb-6 text-left overflow-auto max-h-40 border border-slate-200 dark:border-slate-700",children:[a.jsx("p",{className:"text-xs font-mono text-slate-500 mb-1 font-bold tracking-wider",children:"ERROR CODE"}),a.jsxs("p",{className:"text-sm font-mono text-red-600 dark:text-red-400 break-all font-medium leading-relaxed",children:[((t=this.state.error)==null?void 0:t.name)||"CRITICAL_FAILURE",": ",((n=this.state.error)==null?void 0:n.message)||"Unknown error occurred during rendering."]})]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-3 px-4 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-bold transition-colors shadow-lg shadow-cyan-500/20 flex items-center justify-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-2.695A8.25 8.25 0 005.166 6.166L2 9.348"})}),""]})]})}):this.props.children}}const nh=document.getElementById("root");if(!nh)throw new Error("Could not find root element to mount to");const hS=Zi.createRoot(nh);hS.render(a.jsx(hs.StrictMode,{children:a.jsx(pS,{children:a.jsx(fS,{})})}));export{tf as _,mS as c,sh as g};
