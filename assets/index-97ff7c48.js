(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function th(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tf={exports:{}},zs={},nf={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),nh=Symbol.for("react.portal"),rh=Symbol.for("react.fragment"),oh=Symbol.for("react.strict_mode"),sh=Symbol.for("react.profiler"),ih=Symbol.for("react.provider"),lh=Symbol.for("react.context"),ah=Symbol.for("react.forward_ref"),uh=Symbol.for("react.suspense"),dh=Symbol.for("react.memo"),ch=Symbol.for("react.lazy"),au=Symbol.iterator;function fh(e){return e===null||typeof e!="object"?null:(e=au&&e[au]||e["@@iterator"],typeof e=="function"?e:null)}var rf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},of=Object.assign,sf={};function Nr(e,t,n){this.props=e,this.context=t,this.refs=sf,this.updater=n||rf}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lf(){}lf.prototype=Nr.prototype;function oa(e,t,n){this.props=e,this.context=t,this.refs=sf,this.updater=n||rf}var sa=oa.prototype=new lf;sa.constructor=oa;of(sa,Nr.prototype);sa.isPureReactComponent=!0;var uu=Array.isArray,af=Object.prototype.hasOwnProperty,ia={current:null},uf={key:!0,ref:!0,__self:!0,__source:!0};function df(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)af.call(t,r)&&!uf.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:_o,type:e,key:s,ref:i,props:o,_owner:ia.current}}function ph(e,t){return{$$typeof:_o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function la(e){return typeof e=="object"&&e!==null&&e.$$typeof===_o}function hh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var du=/\/+/g;function yi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hh(""+e.key):t.toString(36)}function Xo(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case _o:case nh:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+yi(i,0):r,uu(o)?(n="",e!=null&&(n=e.replace(du,"$&/")+"/"),Xo(o,t,n,"",function(f){return f})):o!=null&&(la(o)&&(o=ph(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(du,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",uu(e))for(var u=0;u<e.length;u++){s=e[u];var c=r+yi(s,u);i+=Xo(s,t,n,c,o)}else if(c=fh(e),typeof c=="function")for(e=c.call(e),u=0;!(s=e.next()).done;)s=s.value,c=r+yi(s,u++),i+=Xo(s,t,n,c,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ro(e,t,n){if(e==null)return e;var r=[],o=0;return Xo(e,r,"","",function(s){return t.call(n,s,o++)}),r}function mh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qe={current:null},Zo={transition:null},gh={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Zo,ReactCurrentOwner:ia};function cf(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ro,forEach:function(e,t,n){Ro(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ro(e,function(){t++}),t},toArray:function(e){return Ro(e,function(t){return t})||[]},only:function(e){if(!la(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=Nr;le.Fragment=rh;le.Profiler=sh;le.PureComponent=oa;le.StrictMode=oh;le.Suspense=uh;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gh;le.act=cf;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=of({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=ia.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)af.call(t,c)&&!uf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:_o,type:e.type,key:o,ref:s,props:r,_owner:i}};le.createContext=function(e){return e={$$typeof:lh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ih,_context:e},e.Consumer=e};le.createElement=df;le.createFactory=function(e){var t=df.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:ah,render:e}};le.isValidElement=la;le.lazy=function(e){return{$$typeof:ch,_payload:{_status:-1,_result:e},_init:mh}};le.memo=function(e,t){return{$$typeof:dh,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Zo.transition;Zo.transition={};try{e()}finally{Zo.transition=t}};le.unstable_act=cf;le.useCallback=function(e,t){return Qe.current.useCallback(e,t)};le.useContext=function(e){return Qe.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return Qe.current.useDeferredValue(e)};le.useEffect=function(e,t){return Qe.current.useEffect(e,t)};le.useId=function(){return Qe.current.useId()};le.useImperativeHandle=function(e,t,n){return Qe.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return Qe.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return Qe.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return Qe.current.useMemo(e,t)};le.useReducer=function(e,t,n){return Qe.current.useReducer(e,t,n)};le.useRef=function(e){return Qe.current.useRef(e)};le.useState=function(e){return Qe.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return Qe.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return Qe.current.useTransition()};le.version="18.3.1";nf.exports=le;var b=nf.exports;const ps=th(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=b,yh=Symbol.for("react.element"),vh=Symbol.for("react.fragment"),wh=Object.prototype.hasOwnProperty,kh=xh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ch={key:!0,ref:!0,__self:!0,__source:!0};function ff(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)wh.call(t,r)&&!Ch.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:yh,type:e,key:s,ref:i,props:o,_owner:kh.current}}zs.Fragment=vh;zs.jsx=ff;zs.jsxs=ff;tf.exports=zs;var a=tf.exports,Zi={},pf={exports:{}},ft={},hf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,V){var q=R.length;R.push(V);e:for(;0<q;){var ae=q-1>>>1,se=R[ae];if(0<o(se,V))R[ae]=V,R[q]=se,q=ae;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var V=R[0],q=R.pop();if(q!==V){R[0]=q;e:for(var ae=0,se=R.length,Se=se>>>1;ae<Se;){var we=2*(ae+1)-1,Re=R[we],P=we+1,U=R[P];if(0>o(Re,q))P<se&&0>o(U,Re)?(R[ae]=U,R[P]=q,ae=P):(R[ae]=Re,R[we]=q,ae=we);else if(P<se&&0>o(U,q))R[ae]=U,R[P]=q,ae=P;else break e}}return V}function o(R,V){var q=R.sortIndex-V.sortIndex;return q!==0?q:R.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,u=i.now();e.unstable_now=function(){return i.now()-u}}var c=[],f=[],p=1,m=null,h=3,x=!1,w=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var V=n(f);V!==null;){if(V.callback===null)r(f);else if(V.startTime<=R)r(f),V.sortIndex=V.expirationTime,t(c,V);else break;V=n(f)}}function E(R){if(C=!1,g(R),!w)if(n(c)!==null)w=!0,z(S);else{var V=n(f);V!==null&&ie(E,V.startTime-R)}}function S(R,V){w=!1,C&&(C=!1,v(A),A=-1),x=!0;var q=h;try{for(g(V),m=n(c);m!==null&&(!(m.expirationTime>V)||R&&!L());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,h=m.priorityLevel;var se=ae(m.expirationTime<=V);V=e.unstable_now(),typeof se=="function"?m.callback=se:m===n(c)&&r(c),g(V)}else r(c);m=n(c)}if(m!==null)var Se=!0;else{var we=n(f);we!==null&&ie(E,we.startTime-V),Se=!1}return Se}finally{m=null,h=q,x=!1}}var k=!1,T=null,A=-1,_=5,M=-1;function L(){return!(e.unstable_now()-M<_)}function G(){if(T!==null){var R=e.unstable_now();M=R;var V=!0;try{V=T(!0,R)}finally{V?B():(k=!1,T=null)}}else k=!1}var B;if(typeof y=="function")B=function(){y(G)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Y=I.port2;I.port1.onmessage=G,B=function(){Y.postMessage(null)}}else B=function(){N(G,0)};function z(R){T=R,k||(k=!0,B())}function ie(R,V){A=N(function(){R(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,z(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var q=h;h=V;try{return R()}finally{h=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,V){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var q=h;h=R;try{return V()}finally{h=q}},e.unstable_scheduleCallback=function(R,V,q){var ae=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ae+q:ae):q=ae,R){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,R={id:p++,callback:V,priorityLevel:R,startTime:q,expirationTime:se,sortIndex:-1},q>ae?(R.sortIndex=q,t(f,R),n(c)===null&&R===n(f)&&(C?(v(A),A=-1):C=!0,ie(E,q-ae))):(R.sortIndex=se,t(c,R),w||x||(w=!0,z(S))),R},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(R){var V=h;return function(){var q=h;h=V;try{return R.apply(this,arguments)}finally{h=q}}}})(mf);hf.exports=mf;var Sh=hf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th=b,ct=Sh;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gf=new Set,ao={};function Bn(e,t){yr(e,t),yr(e+"Capture",t)}function yr(e,t){for(ao[e]=t,e=0;e<t.length;e++)gf.add(t[e])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),el=Object.prototype.hasOwnProperty,Eh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cu={},fu={};function _h(e){return el.call(fu,e)?!0:el.call(cu,e)?!1:Eh.test(e)?fu[e]=!0:(cu[e]=!0,!1)}function Nh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bh(e,t,n,r){if(t===null||typeof t>"u"||Nh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var aa=/[\-:]([a-z])/g;function ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aa,ua);$e[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aa,ua);$e[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aa,ua);$e[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function da(e,t,n,r){var o=$e.hasOwnProperty(t)?$e[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bh(t,n,o,r)&&(n=null),r||o===null?_h(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ot=Th.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Po=Symbol.for("react.element"),On=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),ca=Symbol.for("react.strict_mode"),tl=Symbol.for("react.profiler"),xf=Symbol.for("react.provider"),yf=Symbol.for("react.context"),fa=Symbol.for("react.forward_ref"),nl=Symbol.for("react.suspense"),rl=Symbol.for("react.suspense_list"),pa=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),vf=Symbol.for("react.offscreen"),pu=Symbol.iterator;function Fr(e){return e===null||typeof e!="object"?null:(e=pu&&e[pu]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Object.assign,vi;function Jr(e){if(vi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vi=t&&t[1]||""}return`
`+vi+e}var wi=!1;function ki(e,t){if(!e||wi)return"";wi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var o=f.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,u=s.length-1;1<=i&&0<=u&&o[i]!==s[u];)u--;for(;1<=i&&0<=u;i--,u--)if(o[i]!==s[u]){if(i!==1||u!==1)do if(i--,u--,0>u||o[i]!==s[u]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=u);break}}}finally{wi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jr(e):""}function Ih(e){switch(e.tag){case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return e=ki(e.type,!1),e;case 11:return e=ki(e.type.render,!1),e;case 1:return e=ki(e.type,!0),e;default:return""}}function ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kn:return"Fragment";case On:return"Portal";case tl:return"Profiler";case ca:return"StrictMode";case nl:return"Suspense";case rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yf:return(e.displayName||"Context")+".Consumer";case xf:return(e._context.displayName||"Context")+".Provider";case fa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pa:return t=e.displayName||null,t!==null?t:ol(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return ol(e(t))}catch{}}return null}function Ah(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(t);case 8:return t===ca?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mh(e){var t=wf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lo(e){e._valueTracker||(e._valueTracker=Mh(e))}function kf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sl(e,t){var n=t.checked;return Ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cf(e,t){t=t.checked,t!=null&&da(e,"checked",t,!1)}function il(e,t){Cf(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ll(e,t.type,n):t.hasOwnProperty("defaultValue")&&ll(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ll(e,t,n){(t!=="number"||hs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wr=Array.isArray;function ar(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function al(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(Wr(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function Sf(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Do,Ef=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Do.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rh=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(e){Rh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yr[t]=Yr[e]})});function _f(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yr.hasOwnProperty(e)&&Yr[e]?(""+t).trim():t+"px"}function Nf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=_f(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Ph=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(Ph[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function ha(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,ur=null,dr=null;function yu(e){if(e=Io(e)){if(typeof pl!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Ys(t),pl(e.stateNode,e.type,t))}}function bf(e){ur?dr?dr.push(e):dr=[e]:ur=e}function If(){if(ur){var e=ur,t=dr;if(dr=ur=null,yu(e),t)for(e=0;e<t.length;e++)yu(t[e])}}function Af(e,t){return e(t)}function Mf(){}var Ci=!1;function Rf(e,t,n){if(Ci)return e(t,n);Ci=!0;try{return Af(e,t,n)}finally{Ci=!1,(ur!==null||dr!==null)&&(Mf(),If())}}function co(e,t){var n=e.stateNode;if(n===null)return null;var r=Ys(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var hl=!1;if(Ht)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){hl=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{hl=!1}function Lh(e,t,n,r,o,s,i,u,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Qr=!1,ms=null,gs=!1,ml=null,Dh={onError:function(e){Qr=!0,ms=e}};function Fh(e,t,n,r,o,s,i,u,c){Qr=!1,ms=null,Lh.apply(Dh,arguments)}function Uh(e,t,n,r,o,s,i,u,c){if(Fh.apply(this,arguments),Qr){if(Qr){var f=ms;Qr=!1,ms=null}else throw Error(F(198));gs||(gs=!0,ml=f)}}function qn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Pf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vu(e){if(qn(e)!==e)throw Error(F(188))}function Vh(e){var t=e.alternate;if(!t){if(t=qn(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return vu(o),e;if(s===r)return vu(o),t;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,u=o.child;u;){if(u===n){i=!0,n=o,r=s;break}if(u===r){i=!0,r=o,n=s;break}u=u.sibling}if(!i){for(u=s.child;u;){if(u===n){i=!0,n=s,r=o;break}if(u===r){i=!0,r=s,n=o;break}u=u.sibling}if(!i)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Lf(e){return e=Vh(e),e!==null?Df(e):null}function Df(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Df(e);if(t!==null)return t;e=e.sibling}return null}var Ff=ct.unstable_scheduleCallback,wu=ct.unstable_cancelCallback,Gh=ct.unstable_shouldYield,jh=ct.unstable_requestPaint,Ae=ct.unstable_now,$h=ct.unstable_getCurrentPriorityLevel,ma=ct.unstable_ImmediatePriority,Uf=ct.unstable_UserBlockingPriority,xs=ct.unstable_NormalPriority,Hh=ct.unstable_LowPriority,Vf=ct.unstable_IdlePriority,Js=null,Lt=null;function Bh(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Js,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Jh,qh=Math.log,zh=Math.LN2;function Jh(e){return e>>>=0,e===0?32:31-(qh(e)/zh|0)|0}var Fo=64,Uo=4194304;function Or(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ys(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var u=i&~o;u!==0?r=Or(u):(s&=i,s!==0&&(r=Or(s)))}else i=n&~o,i!==0?r=Or(i):s!==0&&(r=Or(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_t(t),o=1<<n,r|=e[n],t&=~o;return r}function Wh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-_t(s),u=1<<i,c=o[i];c===-1?(!(u&n)||u&r)&&(o[i]=Wh(u,t)):c<=t&&(e.expiredLanes|=u),s&=~u}}function gl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gf(){var e=Fo;return Fo<<=1,!(Fo&4194240)&&(Fo=64),e}function Si(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function No(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=n}function Kh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-_t(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function ga(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var pe=0;function jf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $f,xa,Hf,Bf,qf,xl=!1,Vo=[],dn=null,cn=null,fn=null,fo=new Map,po=new Map,rn=[],Yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(t.pointerId)}}function Vr(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Io(t),t!==null&&xa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Qh(e,t,n,r,o){switch(t){case"focusin":return dn=Vr(dn,e,t,n,r,o),!0;case"dragenter":return cn=Vr(cn,e,t,n,r,o),!0;case"mouseover":return fn=Vr(fn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return fo.set(s,Vr(fo.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,po.set(s,Vr(po.get(s)||null,e,t,n,r,o)),!0}return!1}function zf(e){var t=An(e.target);if(t!==null){var n=qn(t);if(n!==null){if(t=n.tag,t===13){if(t=Pf(n),t!==null){e.blockedOn=t,qf(e.priority,function(){Hf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function es(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fl=r,n.target.dispatchEvent(r),fl=null}else return t=Io(n),t!==null&&xa(t),e.blockedOn=n,!1;t.shift()}return!0}function Cu(e,t,n){es(e)&&n.delete(t)}function Xh(){xl=!1,dn!==null&&es(dn)&&(dn=null),cn!==null&&es(cn)&&(cn=null),fn!==null&&es(fn)&&(fn=null),fo.forEach(Cu),po.forEach(Cu)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,xl||(xl=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,Xh)))}function ho(e){function t(o){return Gr(o,e)}if(0<Vo.length){Gr(Vo[0],e);for(var n=1;n<Vo.length;n++){var r=Vo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dn!==null&&Gr(dn,e),cn!==null&&Gr(cn,e),fn!==null&&Gr(fn,e),fo.forEach(t),po.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)zf(n),n.blockedOn===null&&rn.shift()}var cr=Ot.ReactCurrentBatchConfig,vs=!0;function Zh(e,t,n,r){var o=pe,s=cr.transition;cr.transition=null;try{pe=1,ya(e,t,n,r)}finally{pe=o,cr.transition=s}}function em(e,t,n,r){var o=pe,s=cr.transition;cr.transition=null;try{pe=4,ya(e,t,n,r)}finally{pe=o,cr.transition=s}}function ya(e,t,n,r){if(vs){var o=yl(e,t,n,r);if(o===null)Pi(e,t,r,ws,n),ku(e,r);else if(Qh(o,e,t,n,r))r.stopPropagation();else if(ku(e,r),t&4&&-1<Yh.indexOf(e)){for(;o!==null;){var s=Io(o);if(s!==null&&$f(s),s=yl(e,t,n,r),s===null&&Pi(e,t,r,ws,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Pi(e,t,r,null,n)}}var ws=null;function yl(e,t,n,r){if(ws=null,e=ha(r),e=An(e),e!==null)if(t=qn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Pf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ws=e,null}function Jf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($h()){case ma:return 1;case Uf:return 4;case xs:case Hh:return 16;case Vf:return 536870912;default:return 16}default:return 16}}var ln=null,va=null,ts=null;function Wf(){if(ts)return ts;var e,t=va,n=t.length,r,o="value"in ln?ln.value:ln.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return ts=o.slice(e,1<r?1-r:void 0)}function ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Go(){return!0}function Su(){return!1}function pt(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Go:Su,this.isPropagationStopped=Su,this}return Ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),t}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=pt(br),bo=Ne({},br,{view:0,detail:0}),tm=pt(bo),Ti,Ei,jr,Ws=Ne({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Ti=e.screenX-jr.screenX,Ei=e.screenY-jr.screenY):Ei=Ti=0,jr=e),Ti)},movementY:function(e){return"movementY"in e?e.movementY:Ei}}),Tu=pt(Ws),nm=Ne({},Ws,{dataTransfer:0}),rm=pt(nm),om=Ne({},bo,{relatedTarget:0}),_i=pt(om),sm=Ne({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),im=pt(sm),lm=Ne({},br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),am=pt(lm),um=Ne({},br,{data:0}),Eu=pt(um),dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fm[e])?!!t[e]:!1}function ka(){return pm}var hm=Ne({},bo,{key:function(e){if(e.key){var t=dm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ka,charCode:function(e){return e.type==="keypress"?ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mm=pt(hm),gm=Ne({},Ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=pt(gm),xm=Ne({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ka}),ym=pt(xm),vm=Ne({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),wm=pt(vm),km=Ne({},Ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cm=pt(km),Sm=[9,13,27,32],Ca=Ht&&"CompositionEvent"in window,Xr=null;Ht&&"documentMode"in document&&(Xr=document.documentMode);var Tm=Ht&&"TextEvent"in window&&!Xr,Of=Ht&&(!Ca||Xr&&8<Xr&&11>=Xr),Nu=String.fromCharCode(32),bu=!1;function Kf(e,t){switch(e){case"keyup":return Sm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Em(e,t){switch(e){case"compositionend":return Yf(t);case"keypress":return t.which!==32?null:(bu=!0,Nu);case"textInput":return e=t.data,e===Nu&&bu?null:e;default:return null}}function _m(e,t){if(Yn)return e==="compositionend"||!Ca&&Kf(e,t)?(e=Wf(),ts=va=ln=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Of&&t.locale!=="ko"?null:t.data;default:return null}}var Nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nm[e.type]:t==="textarea"}function Qf(e,t,n,r){bf(r),t=ks(t,"onChange"),0<t.length&&(n=new wa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zr=null,mo=null;function bm(e){ap(e,0)}function Os(e){var t=Zn(e);if(kf(t))return e}function Im(e,t){if(e==="change")return t}var Xf=!1;if(Ht){var Ni;if(Ht){var bi="oninput"in document;if(!bi){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),bi=typeof Au.oninput=="function"}Ni=bi}else Ni=!1;Xf=Ni&&(!document.documentMode||9<document.documentMode)}function Mu(){Zr&&(Zr.detachEvent("onpropertychange",Zf),mo=Zr=null)}function Zf(e){if(e.propertyName==="value"&&Os(mo)){var t=[];Qf(t,mo,e,ha(e)),Rf(bm,t)}}function Am(e,t,n){e==="focusin"?(Mu(),Zr=t,mo=n,Zr.attachEvent("onpropertychange",Zf)):e==="focusout"&&Mu()}function Mm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Os(mo)}function Rm(e,t){if(e==="click")return Os(t)}function Pm(e,t){if(e==="input"||e==="change")return Os(t)}function Lm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:Lm;function go(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!el.call(t,o)||!bt(e[o],t[o]))return!1}return!0}function Ru(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pu(e,t){var n=Ru(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ru(n)}}function ep(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ep(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tp(){for(var e=window,t=hs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hs(e.document)}return t}function Sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dm(e){var t=tp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ep(n.ownerDocument.documentElement,n)){if(r!==null&&Sa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Pu(n,s);var i=Pu(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fm=Ht&&"documentMode"in document&&11>=document.documentMode,Qn=null,vl=null,eo=null,wl=!1;function Lu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wl||Qn==null||Qn!==hs(r)||(r=Qn,"selectionStart"in r&&Sa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&go(eo,r)||(eo=r,r=ks(vl,"onSelect"),0<r.length&&(t=new wa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qn)))}function jo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},Ii={},np={};Ht&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function Ks(e){if(Ii[e])return Ii[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in np)return Ii[e]=t[n];return e}var rp=Ks("animationend"),op=Ks("animationiteration"),sp=Ks("animationstart"),ip=Ks("transitionend"),lp=new Map,Du="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){lp.set(e,t),Bn(t,[e])}for(var Ai=0;Ai<Du.length;Ai++){var Mi=Du[Ai],Um=Mi.toLowerCase(),Vm=Mi[0].toUpperCase()+Mi.slice(1);wn(Um,"on"+Vm)}wn(rp,"onAnimationEnd");wn(op,"onAnimationIteration");wn(sp,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(ip,"onTransitionEnd");yr("onMouseEnter",["mouseout","mouseover"]);yr("onMouseLeave",["mouseout","mouseover"]);yr("onPointerEnter",["pointerout","pointerover"]);yr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kr));function Fu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Uh(r,t,void 0,e),e.currentTarget=null}function ap(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var u=r[i],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==s&&o.isPropagationStopped())break e;Fu(o,u,f),s=c}else for(i=0;i<r.length;i++){if(u=r[i],c=u.instance,f=u.currentTarget,u=u.listener,c!==s&&o.isPropagationStopped())break e;Fu(o,u,f),s=c}}}if(gs)throw e=ml,gs=!1,ml=null,e}function xe(e,t){var n=t[El];n===void 0&&(n=t[El]=new Set);var r=e+"__bubble";n.has(r)||(up(t,e,2,!1),n.add(r))}function Ri(e,t,n){var r=0;t&&(r|=4),up(n,e,r,t)}var $o="_reactListening"+Math.random().toString(36).slice(2);function xo(e){if(!e[$o]){e[$o]=!0,gf.forEach(function(n){n!=="selectionchange"&&(Gm.has(n)||Ri(n,!1,e),Ri(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$o]||(t[$o]=!0,Ri("selectionchange",!1,t))}}function up(e,t,n,r){switch(Jf(t)){case 1:var o=Zh;break;case 4:o=em;break;default:o=ya}n=o.bind(null,t,n,e),o=void 0,!hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Pi(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;u!==null;){if(i=An(u),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}u=u.parentNode}}r=r.return}Rf(function(){var f=s,p=ha(n),m=[];e:{var h=lp.get(e);if(h!==void 0){var x=wa,w=e;switch(e){case"keypress":if(ns(n)===0)break e;case"keydown":case"keyup":x=mm;break;case"focusin":w="focus",x=_i;break;case"focusout":w="blur",x=_i;break;case"beforeblur":case"afterblur":x=_i;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=rm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ym;break;case rp:case op:case sp:x=im;break;case ip:x=wm;break;case"scroll":x=tm;break;case"wheel":x=Cm;break;case"copy":case"cut":case"paste":x=am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=_u}var C=(t&4)!==0,N=!C&&e==="scroll",v=C?h!==null?h+"Capture":null:h;C=[];for(var y=f,g;y!==null;){g=y;var E=g.stateNode;if(g.tag===5&&E!==null&&(g=E,v!==null&&(E=co(y,v),E!=null&&C.push(yo(y,E,g)))),N)break;y=y.return}0<C.length&&(h=new x(h,w,null,n,p),m.push({event:h,listeners:C}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==fl&&(w=n.relatedTarget||n.fromElement)&&(An(w)||w[Bt]))break e;if((x||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=f,w=w?An(w):null,w!==null&&(N=qn(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=f),x!==w)){if(C=Tu,E="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(C=_u,E="onPointerLeave",v="onPointerEnter",y="pointer"),N=x==null?h:Zn(x),g=w==null?h:Zn(w),h=new C(E,y+"leave",x,n,p),h.target=N,h.relatedTarget=g,E=null,An(p)===f&&(C=new C(v,y+"enter",w,n,p),C.target=g,C.relatedTarget=N,E=C),N=E,x&&w)t:{for(C=x,v=w,y=0,g=C;g;g=Jn(g))y++;for(g=0,E=v;E;E=Jn(E))g++;for(;0<y-g;)C=Jn(C),y--;for(;0<g-y;)v=Jn(v),g--;for(;y--;){if(C===v||v!==null&&C===v.alternate)break t;C=Jn(C),v=Jn(v)}C=null}else C=null;x!==null&&Uu(m,h,x,C,!1),w!==null&&N!==null&&Uu(m,N,w,C,!0)}}e:{if(h=f?Zn(f):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var S=Im;else if(Iu(h))if(Xf)S=Pm;else{S=Mm;var k=Am}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Rm);if(S&&(S=S(e,f))){Qf(m,S,n,p);break e}k&&k(e,h,f),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&ll(h,"number",h.value)}switch(k=f?Zn(f):window,e){case"focusin":(Iu(k)||k.contentEditable==="true")&&(Qn=k,vl=f,eo=null);break;case"focusout":eo=vl=Qn=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,Lu(m,n,p);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":Lu(m,n,p)}var T;if(Ca)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Yn?Kf(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Of&&n.locale!=="ko"&&(Yn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Yn&&(T=Wf()):(ln=p,va="value"in ln?ln.value:ln.textContent,Yn=!0)),k=ks(f,A),0<k.length&&(A=new Eu(A,e,null,n,p),m.push({event:A,listeners:k}),T?A.data=T:(T=Yf(n),T!==null&&(A.data=T)))),(T=Tm?Em(e,n):_m(e,n))&&(f=ks(f,"onBeforeInput"),0<f.length&&(p=new Eu("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=T))}ap(m,t)})}function yo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ks(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=co(e,n),s!=null&&r.unshift(yo(e,s,o)),s=co(e,t),s!=null&&r.push(yo(e,s,o))),e=e.return}return r}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uu(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&f!==null&&(u=f,o?(c=co(n,s),c!=null&&i.unshift(yo(n,c,u))):o||(c=co(n,s),c!=null&&i.push(yo(n,c,u)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var jm=/\r\n?/g,$m=/\u0000|\uFFFD/g;function Vu(e){return(typeof e=="string"?e:""+e).replace(jm,`
`).replace($m,"")}function Ho(e,t,n){if(t=Vu(t),Vu(e)!==t&&n)throw Error(F(425))}function Cs(){}var kl=null,Cl=null;function Sl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tl=typeof setTimeout=="function"?setTimeout:void 0,Hm=typeof clearTimeout=="function"?clearTimeout:void 0,Gu=typeof Promise=="function"?Promise:void 0,Bm=typeof queueMicrotask=="function"?queueMicrotask:typeof Gu<"u"?function(e){return Gu.resolve(null).then(e).catch(qm)}:Tl;function qm(e){setTimeout(function(){throw e})}function Li(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ho(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ho(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ju(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ir,vo="__reactProps$"+Ir,Bt="__reactContainer$"+Ir,El="__reactEvents$"+Ir,zm="__reactListeners$"+Ir,Jm="__reactHandles$"+Ir;function An(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Bt]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ju(e);e!==null;){if(n=e[Rt])return n;e=ju(e)}return t}e=n,n=e.parentNode}return null}function Io(e){return e=e[Rt]||e[Bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Ys(e){return e[vo]||null}var _l=[],er=-1;function kn(e){return{current:e}}function ve(e){0>er||(e.current=_l[er],_l[er]=null,er--)}function ge(e,t){er++,_l[er]=e.current,e.current=t}var vn={},We=kn(vn),nt=kn(!1),Vn=vn;function vr(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rt(e){return e=e.childContextTypes,e!=null}function Ss(){ve(nt),ve(We)}function $u(e,t,n){if(We.current!==vn)throw Error(F(168));ge(We,t),ge(nt,n)}function dp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(F(108,Ah(e)||"Unknown",o));return Ne({},n,r)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Vn=We.current,ge(We,e),ge(nt,nt.current),!0}function Hu(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=dp(e,t,Vn),r.__reactInternalMemoizedMergedChildContext=e,ve(nt),ve(We),ge(We,e)):ve(nt),ge(nt,n)}var Vt=null,Qs=!1,Di=!1;function cp(e){Vt===null?Vt=[e]:Vt.push(e)}function Wm(e){Qs=!0,cp(e)}function Cn(){if(!Di&&Vt!==null){Di=!0;var e=0,t=pe;try{var n=Vt;for(pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vt=null,Qs=!1}catch(o){throw Vt!==null&&(Vt=Vt.slice(e+1)),Ff(ma,Cn),o}finally{pe=t,Di=!1}}return null}var tr=[],nr=0,Es=null,_s=0,mt=[],gt=0,Gn=null,Gt=1,jt="";function bn(e,t){tr[nr++]=_s,tr[nr++]=Es,Es=e,_s=t}function fp(e,t,n){mt[gt++]=Gt,mt[gt++]=jt,mt[gt++]=Gn,Gn=e;var r=Gt;e=jt;var o=32-_t(r)-1;r&=~(1<<o),n+=1;var s=32-_t(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Gt=1<<32-_t(t)+o|n<<o|r,jt=s+e}else Gt=1<<s|n<<o|r,jt=e}function Ta(e){e.return!==null&&(bn(e,1),fp(e,1,0))}function Ea(e){for(;e===Es;)Es=tr[--nr],tr[nr]=null,_s=tr[--nr],tr[nr]=null;for(;e===Gn;)Gn=mt[--gt],mt[gt]=null,jt=mt[--gt],mt[gt]=null,Gt=mt[--gt],mt[gt]=null}var dt=null,ut=null,Ce=!1,Et=null;function pp(e,t){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ut=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Gn!==null?{id:Gt,overflow:jt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dt=e,ut=null,!0):!1;default:return!1}}function Nl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(Ce){var t=ut;if(t){var n=t;if(!Bu(e,t)){if(Nl(e))throw Error(F(418));t=pn(n.nextSibling);var r=dt;t&&Bu(e,t)?pp(r,n):(e.flags=e.flags&-4097|2,Ce=!1,dt=e)}}else{if(Nl(e))throw Error(F(418));e.flags=e.flags&-4097|2,Ce=!1,dt=e}}}function qu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function Bo(e){if(e!==dt)return!1;if(!Ce)return qu(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sl(e.type,e.memoizedProps)),t&&(t=ut)){if(Nl(e))throw hp(),Error(F(418));for(;t;)pp(e,t),t=pn(t.nextSibling)}if(qu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ut=pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ut=null}}else ut=dt?pn(e.stateNode.nextSibling):null;return!0}function hp(){for(var e=ut;e;)e=pn(e.nextSibling)}function wr(){ut=dt=null,Ce=!1}function _a(e){Et===null?Et=[e]:Et.push(e)}var Om=Ot.ReactCurrentBatchConfig;function $r(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var u=o.refs;i===null?delete u[s]:u[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zu(e){var t=e._init;return t(e._payload)}function mp(e){function t(v,y){if(e){var g=v.deletions;g===null?(v.deletions=[y],v.flags|=16):g.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(v,y){return v=xn(v,y),v.index=0,v.sibling=null,v}function s(v,y,g){return v.index=g,e?(g=v.alternate,g!==null?(g=g.index,g<y?(v.flags|=2,y):g):(v.flags|=2,y)):(v.flags|=1048576,y)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function u(v,y,g,E){return y===null||y.tag!==6?(y=Hi(g,v.mode,E),y.return=v,y):(y=o(y,g),y.return=v,y)}function c(v,y,g,E){var S=g.type;return S===Kn?p(v,y,g.props.children,E,g.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&zu(S)===y.type)?(E=o(y,g.props),E.ref=$r(v,y,g),E.return=v,E):(E=us(g.type,g.key,g.props,null,v.mode,E),E.ref=$r(v,y,g),E.return=v,E)}function f(v,y,g,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=Bi(g,v.mode,E),y.return=v,y):(y=o(y,g.children||[]),y.return=v,y)}function p(v,y,g,E,S){return y===null||y.tag!==7?(y=Ln(g,v.mode,E,S),y.return=v,y):(y=o(y,g),y.return=v,y)}function m(v,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Hi(""+y,v.mode,g),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Po:return g=us(y.type,y.key,y.props,null,v.mode,g),g.ref=$r(v,null,y),g.return=v,g;case On:return y=Bi(y,v.mode,g),y.return=v,y;case tn:var E=y._init;return m(v,E(y._payload),g)}if(Wr(y)||Fr(y))return y=Ln(y,v.mode,g,null),y.return=v,y;qo(v,y)}return null}function h(v,y,g,E){var S=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:u(v,y,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Po:return g.key===S?c(v,y,g,E):null;case On:return g.key===S?f(v,y,g,E):null;case tn:return S=g._init,h(v,y,S(g._payload),E)}if(Wr(g)||Fr(g))return S!==null?null:p(v,y,g,E,null);qo(v,g)}return null}function x(v,y,g,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(g)||null,u(y,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Po:return v=v.get(E.key===null?g:E.key)||null,c(y,v,E,S);case On:return v=v.get(E.key===null?g:E.key)||null,f(y,v,E,S);case tn:var k=E._init;return x(v,y,g,k(E._payload),S)}if(Wr(E)||Fr(E))return v=v.get(g)||null,p(y,v,E,S,null);qo(y,E)}return null}function w(v,y,g,E){for(var S=null,k=null,T=y,A=y=0,_=null;T!==null&&A<g.length;A++){T.index>A?(_=T,T=null):_=T.sibling;var M=h(v,T,g[A],E);if(M===null){T===null&&(T=_);break}e&&T&&M.alternate===null&&t(v,T),y=s(M,y,A),k===null?S=M:k.sibling=M,k=M,T=_}if(A===g.length)return n(v,T),Ce&&bn(v,A),S;if(T===null){for(;A<g.length;A++)T=m(v,g[A],E),T!==null&&(y=s(T,y,A),k===null?S=T:k.sibling=T,k=T);return Ce&&bn(v,A),S}for(T=r(v,T);A<g.length;A++)_=x(T,v,A,g[A],E),_!==null&&(e&&_.alternate!==null&&T.delete(_.key===null?A:_.key),y=s(_,y,A),k===null?S=_:k.sibling=_,k=_);return e&&T.forEach(function(L){return t(v,L)}),Ce&&bn(v,A),S}function C(v,y,g,E){var S=Fr(g);if(typeof S!="function")throw Error(F(150));if(g=S.call(g),g==null)throw Error(F(151));for(var k=S=null,T=y,A=y=0,_=null,M=g.next();T!==null&&!M.done;A++,M=g.next()){T.index>A?(_=T,T=null):_=T.sibling;var L=h(v,T,M.value,E);if(L===null){T===null&&(T=_);break}e&&T&&L.alternate===null&&t(v,T),y=s(L,y,A),k===null?S=L:k.sibling=L,k=L,T=_}if(M.done)return n(v,T),Ce&&bn(v,A),S;if(T===null){for(;!M.done;A++,M=g.next())M=m(v,M.value,E),M!==null&&(y=s(M,y,A),k===null?S=M:k.sibling=M,k=M);return Ce&&bn(v,A),S}for(T=r(v,T);!M.done;A++,M=g.next())M=x(T,v,A,M.value,E),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?A:M.key),y=s(M,y,A),k===null?S=M:k.sibling=M,k=M);return e&&T.forEach(function(G){return t(v,G)}),Ce&&bn(v,A),S}function N(v,y,g,E){if(typeof g=="object"&&g!==null&&g.type===Kn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Po:e:{for(var S=g.key,k=y;k!==null;){if(k.key===S){if(S=g.type,S===Kn){if(k.tag===7){n(v,k.sibling),y=o(k,g.props.children),y.return=v,v=y;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&zu(S)===k.type){n(v,k.sibling),y=o(k,g.props),y.ref=$r(v,k,g),y.return=v,v=y;break e}n(v,k);break}else t(v,k);k=k.sibling}g.type===Kn?(y=Ln(g.props.children,v.mode,E,g.key),y.return=v,v=y):(E=us(g.type,g.key,g.props,null,v.mode,E),E.ref=$r(v,y,g),E.return=v,v=E)}return i(v);case On:e:{for(k=g.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){n(v,y.sibling),y=o(y,g.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=Bi(g,v.mode,E),y.return=v,v=y}return i(v);case tn:return k=g._init,N(v,y,k(g._payload),E)}if(Wr(g))return w(v,y,g,E);if(Fr(g))return C(v,y,g,E);qo(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(n(v,y.sibling),y=o(y,g),y.return=v,v=y):(n(v,y),y=Hi(g,v.mode,E),y.return=v,v=y),i(v)):n(v,y)}return N}var kr=mp(!0),gp=mp(!1),Ns=kn(null),bs=null,rr=null,Na=null;function ba(){Na=rr=bs=null}function Ia(e){var t=Ns.current;ve(Ns),e._currentValue=t}function Il(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fr(e,t){bs=e,Na=rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tt=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},rr===null){if(bs===null)throw Error(F(308));rr=e,bs.dependencies={lanes:0,firstContext:e}}else rr=rr.next=e;return t}var Mn=null;function Aa(e){Mn===null?Mn=[e]:Mn.push(e)}function xp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Aa(t)):(n.next=o.next,o.next=n),t.interleaved=n,qt(e,r)}function qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nn=!1;function Ma(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $t(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,qt(e,n)}return o=r.interleaved,o===null?(t.next=t,Aa(r)):(t.next=o.next,o.next=t),r.interleaved=t,qt(e,n)}function rs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ga(e,n)}}function Ju(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Is(e,t,n,r){var o=e.updateQueue;nn=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var c=u,f=c.next;c.next=null,i===null?s=f:i.next=f,i=c;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==i&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=o.baseState;i=0,p=f=c=null,u=s;do{var h=u.lane,x=u.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,C=u;switch(h=t,x=n,C.tag){case 1:if(w=C.payload,typeof w=="function"){m=w.call(x,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=C.payload,h=typeof w=="function"?w.call(x,m,h):w,h==null)break e;m=Ne({},m,h);break e;case 2:nn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[u]:h.push(u))}else x={eventTime:x,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=x,c=m):p=p.next=x,i|=h;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;h=u,u=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(p===null&&(c=m),o.baseState=c,o.firstBaseUpdate=f,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);$n|=i,e.lanes=i,e.memoizedState=m}}function Wu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(F(191,o));o.call(r)}}}var Ao={},Dt=kn(Ao),wo=kn(Ao),ko=kn(Ao);function Rn(e){if(e===Ao)throw Error(F(174));return e}function Ra(e,t){switch(ge(ko,t),ge(wo,e),ge(Dt,Ao),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ul(t,e)}ve(Dt),ge(Dt,t)}function Cr(){ve(Dt),ve(wo),ve(ko)}function vp(e){Rn(ko.current);var t=Rn(Dt.current),n=ul(t,e.type);t!==n&&(ge(wo,e),ge(Dt,n))}function Pa(e){wo.current===e&&(ve(Dt),ve(wo))}var Ee=kn(0);function As(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fi=[];function La(){for(var e=0;e<Fi.length;e++)Fi[e]._workInProgressVersionPrimary=null;Fi.length=0}var os=Ot.ReactCurrentDispatcher,Ui=Ot.ReactCurrentBatchConfig,jn=0,_e=null,Pe=null,Fe=null,Ms=!1,to=!1,Co=0,Km=0;function Be(){throw Error(F(321))}function Da(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function Fa(e,t,n,r,o,s){if(jn=s,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?Zm:eg,e=n(r,o),to){s=0;do{if(to=!1,Co=0,25<=s)throw Error(F(301));s+=1,Fe=Pe=null,t.updateQueue=null,os.current=tg,e=n(r,o)}while(to)}if(os.current=Rs,t=Pe!==null&&Pe.next!==null,jn=0,Fe=Pe=_e=null,Ms=!1,t)throw Error(F(300));return e}function Ua(){var e=Co!==0;return Co=0,e}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?_e.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function kt(){if(Pe===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Fe===null?_e.memoizedState:Fe.next;if(t!==null)Fe=t,Pe=e;else{if(e===null)throw Error(F(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Fe===null?_e.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function So(e,t){return typeof t=="function"?t(e):t}function Vi(e){var t=kt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=Pe,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var u=i=null,c=null,f=s;do{var p=f.lane;if((jn&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=m,i=r):c=c.next=m,_e.lanes|=p,$n|=p}f=f.next}while(f!==null&&f!==s);c===null?i=r:c.next=u,bt(r,t.memoizedState)||(tt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,_e.lanes|=s,$n|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gi(e){var t=kt(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);bt(s,t.memoizedState)||(tt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function wp(){}function kp(e,t){var n=_e,r=kt(),o=t(),s=!bt(r.memoizedState,o);if(s&&(r.memoizedState=o,tt=!0),r=r.queue,Va(Tp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,To(9,Sp.bind(null,n,r,o,t),void 0,null),Ue===null)throw Error(F(349));jn&30||Cp(n,t,o)}return o}function Cp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sp(e,t,n,r){t.value=n,t.getSnapshot=r,Ep(t)&&_p(e)}function Tp(e,t,n){return n(function(){Ep(t)&&_p(e)})}function Ep(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function _p(e){var t=qt(e,1);t!==null&&Nt(t,e,1,-1)}function Ou(e){var t=Mt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Xm.bind(null,_e,e),[t.memoizedState,e]}function To(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Np(){return kt().memoizedState}function ss(e,t,n,r){var o=Mt();_e.flags|=e,o.memoizedState=To(1|t,n,void 0,r===void 0?null:r)}function Xs(e,t,n,r){var o=kt();r=r===void 0?null:r;var s=void 0;if(Pe!==null){var i=Pe.memoizedState;if(s=i.destroy,r!==null&&Da(r,i.deps)){o.memoizedState=To(t,n,s,r);return}}_e.flags|=e,o.memoizedState=To(1|t,n,s,r)}function Ku(e,t){return ss(8390656,8,e,t)}function Va(e,t){return Xs(2048,8,e,t)}function bp(e,t){return Xs(4,2,e,t)}function Ip(e,t){return Xs(4,4,e,t)}function Ap(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mp(e,t,n){return n=n!=null?n.concat([e]):null,Xs(4,4,Ap.bind(null,t,e),n)}function Ga(){}function Rp(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pp(e,t){var n=kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Da(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Lp(e,t,n){return jn&21?(bt(n,t)||(n=Gf(),_e.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tt=!0),e.memoizedState=n)}function Ym(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var r=Ui.transition;Ui.transition={};try{e(!1),t()}finally{pe=n,Ui.transition=r}}function Dp(){return kt().memoizedState}function Qm(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fp(e))Up(t,n);else if(n=xp(e,t,n,r),n!==null){var o=Ke();Nt(n,e,r,o),Vp(n,t,r)}}function Xm(e,t,n){var r=gn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fp(e))Up(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,u=s(i,n);if(o.hasEagerState=!0,o.eagerState=u,bt(u,i)){var c=t.interleaved;c===null?(o.next=o,Aa(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=xp(e,t,o,r),n!==null&&(o=Ke(),Nt(n,e,r,o),Vp(n,t,r))}}function Fp(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Up(e,t){to=Ms=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ga(e,n)}}var Rs={readContext:wt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Zm={readContext:wt,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Ku,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ss(4194308,4,Ap.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ss(4194308,4,e,t)},useInsertionEffect:function(e,t){return ss(4,2,e,t)},useMemo:function(e,t){var n=Mt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qm.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:Ou,useDebugValue:Ga,useDeferredValue:function(e){return Mt().memoizedState=e},useTransition:function(){var e=Ou(!1),t=e[0];return e=Ym.bind(null,e[1]),Mt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,o=Mt();if(Ce){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),Ue===null)throw Error(F(349));jn&30||Cp(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ku(Tp.bind(null,r,s,e),[e]),r.flags|=2048,To(9,Sp.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Mt(),t=Ue.identifierPrefix;if(Ce){var n=jt,r=Gt;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Co++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Km++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eg={readContext:wt,useCallback:Rp,useContext:wt,useEffect:Va,useImperativeHandle:Mp,useInsertionEffect:bp,useLayoutEffect:Ip,useMemo:Pp,useReducer:Vi,useRef:Np,useState:function(){return Vi(So)},useDebugValue:Ga,useDeferredValue:function(e){var t=kt();return Lp(t,Pe.memoizedState,e)},useTransition:function(){var e=Vi(So)[0],t=kt().memoizedState;return[e,t]},useMutableSource:wp,useSyncExternalStore:kp,useId:Dp,unstable_isNewReconciler:!1},tg={readContext:wt,useCallback:Rp,useContext:wt,useEffect:Va,useImperativeHandle:Mp,useInsertionEffect:bp,useLayoutEffect:Ip,useMemo:Pp,useReducer:Gi,useRef:Np,useState:function(){return Gi(So)},useDebugValue:Ga,useDeferredValue:function(e){var t=kt();return Pe===null?t.memoizedState=e:Lp(t,Pe.memoizedState,e)},useTransition:function(){var e=Gi(So)[0],t=kt().memoizedState;return[e,t]},useMutableSource:wp,useSyncExternalStore:kp,useId:Dp,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=Ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Al(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zs={isMounted:function(e){return(e=e._reactInternals)?qn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ke(),o=gn(e),s=$t(r,o);s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,o),t!==null&&(Nt(t,e,o,r),rs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ke(),o=gn(e),s=$t(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,o),t!==null&&(Nt(t,e,o,r),rs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ke(),r=gn(e),o=$t(n,r);o.tag=2,t!=null&&(o.callback=t),t=hn(e,o,r),t!==null&&(Nt(t,e,r,n),rs(t,e,r))}};function Yu(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!go(n,r)||!go(o,s):!0}function Gp(e,t,n){var r=!1,o=vn,s=t.contextType;return typeof s=="object"&&s!==null?s=wt(s):(o=rt(t)?Vn:We.current,r=t.contextTypes,s=(r=r!=null)?vr(e,o):vn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Qu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zs.enqueueReplaceState(t,t.state,null)}function Ml(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ma(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=wt(s):(s=rt(t)?Vn:We.current,o.context=vr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Al(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Zs.enqueueReplaceState(o,o.state,null),Is(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Sr(e,t){try{var n="",r=t;do n+=Ih(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function ji(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function jp(e,t,n){n=$t(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ls||(Ls=!0,Hl=r),Rl(e,t)},n}function $p(e,t,n){n=$t(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Rl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rl(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Xu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ng;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gg.bind(null,e,t,n),t.then(e,e))}function Zu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ed(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$t(-1,1),t.tag=2,hn(n,t,1))),n.lanes|=1),e)}var rg=Ot.ReactCurrentOwner,tt=!1;function Oe(e,t,n,r){t.child=e===null?gp(t,null,n,r):kr(t,e.child,n,r)}function td(e,t,n,r,o){n=n.render;var s=t.ref;return fr(t,o),r=Fa(e,t,n,r,s,o),n=Ua(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zt(e,t,o)):(Ce&&n&&Ta(t),t.flags|=1,Oe(e,t,r,o),t.child)}function nd(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Wa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Hp(e,t,s,r,o)):(e=us(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(i,r)&&e.ref===t.ref)return zt(e,t,o)}return t.flags|=1,e=xn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Hp(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(go(s,r)&&e.ref===t.ref)if(tt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(tt=!0);else return t.lanes=e.lanes,zt(e,t,o)}return Pl(e,t,n,r,o)}function Bp(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(sr,at),at|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(sr,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ge(sr,at),at|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ge(sr,at),at|=r;return Oe(e,t,o,n),t.child}function qp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,n,r,o){var s=rt(n)?Vn:We.current;return s=vr(t,s),fr(t,o),n=Fa(e,t,n,r,s,o),r=Ua(),e!==null&&!tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,zt(e,t,o)):(Ce&&r&&Ta(t),t.flags|=1,Oe(e,t,n,o),t.child)}function rd(e,t,n,r,o){if(rt(n)){var s=!0;Ts(t)}else s=!1;if(fr(t,o),t.stateNode===null)is(e,t),Gp(t,n,r),Ml(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,u=t.memoizedProps;i.props=u;var c=i.context,f=n.contextType;typeof f=="object"&&f!==null?f=wt(f):(f=rt(n)?Vn:We.current,f=vr(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==r||c!==f)&&Qu(t,i,r,f),nn=!1;var h=t.memoizedState;i.state=h,Is(t,r,i,o),c=t.memoizedState,u!==r||h!==c||nt.current||nn?(typeof p=="function"&&(Al(t,n,p,r),c=t.memoizedState),(u=nn||Yu(t,n,u,r,h,c,f))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=f,r=u):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yp(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:St(t.type,u),i.props=f,m=t.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=wt(c):(c=rt(n)?Vn:We.current,c=vr(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(u!==m||h!==c)&&Qu(t,i,r,c),nn=!1,h=t.memoizedState,i.state=h,Is(t,r,i,o);var w=t.memoizedState;u!==m||h!==w||nt.current||nn?(typeof x=="function"&&(Al(t,n,x,r),w=t.memoizedState),(f=nn||Yu(t,n,f,r,h,w,c)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=f):(typeof i.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ll(e,t,n,r,s,o)}function Ll(e,t,n,r,o,s){qp(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Hu(t,n,!1),zt(e,t,s);r=t.stateNode,rg.current=t;var u=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=kr(t,e.child,null,s),t.child=kr(t,null,u,s)):Oe(e,t,u,s),t.memoizedState=r.state,o&&Hu(t,n,!0),t.child}function zp(e){var t=e.stateNode;t.pendingContext?$u(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$u(e,t.context,!1),Ra(e,t.containerInfo)}function od(e,t,n,r,o){return wr(),_a(o),t.flags|=256,Oe(e,t,n,r),t.child}var Dl={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jp(e,t,n){var r=t.pendingProps,o=Ee.current,s=!1,i=(t.flags&128)!==0,u;if((u=i)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ge(Ee,o&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ni(i,r,0,null),e=Ln(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fl(n),t.memoizedState=Dl,e):ja(t,i));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return og(e,t,i,r,u,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,u=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=xn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?s=xn(u,s):(s=Ln(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Fl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Dl,r}return s=e.child,e=s.sibling,r=xn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ja(e,t){return t=ni({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zo(e,t,n,r){return r!==null&&_a(r),kr(t,e.child,null,n),e=ja(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function og(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=ji(Error(F(422))),zo(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ni({mode:"visible",children:r.children},o,0,null),s=Ln(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&kr(t,e.child,null,i),t.child.memoizedState=Fl(i),t.memoizedState=Dl,s);if(!(t.mode&1))return zo(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(F(419)),r=ji(s,r,void 0),zo(e,t,i,r)}if(u=(i&e.childLanes)!==0,tt||u){if(r=Ue,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,qt(e,o),Nt(r,e,o,-1))}return Ja(),r=ji(Error(F(421))),zo(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=xg.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,ut=pn(o.nextSibling),dt=t,Ce=!0,Et=null,e!==null&&(mt[gt++]=Gt,mt[gt++]=jt,mt[gt++]=Gn,Gt=e.id,jt=e.overflow,Gn=t),t=ja(t,r.children),t.flags|=4096,t)}function sd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Il(e.return,t,n)}function $i(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Wp(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(Oe(e,t,r.children,n),r=Ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,n,t);else if(e.tag===19)sd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ge(Ee,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&As(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),$i(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&As(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}$i(t,!0,n,null,s);break;case"together":$i(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function is(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=xn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sg(e,t,n){switch(t.tag){case 3:zp(t),wr();break;case 5:vp(t);break;case 1:rt(t.type)&&Ts(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ge(Ns,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ee,Ee.current&1),t.flags|=128,null):n&t.child.childLanes?Jp(e,t,n):(ge(Ee,Ee.current&1),e=zt(e,t,n),e!==null?e.sibling:null);ge(Ee,Ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Wp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ge(Ee,Ee.current),r)break;return null;case 22:case 23:return t.lanes=0,Bp(e,t,n)}return zt(e,t,n)}var Op,Ul,Kp,Yp;Op=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ul=function(){};Kp=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Rn(Dt.current);var s=null;switch(n){case"input":o=sl(e,o),r=sl(e,r),s=[];break;case"select":o=Ne({},o,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":o=al(e,o),r=al(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cs)}dl(n,r);var i;n=null;for(f in o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&o[f]!=null)if(f==="style"){var u=o[f];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ao.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(u=o!=null?o[f]:void 0,r.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ao.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&xe("scroll",e),s||u===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};Yp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ig(e,t,n){var r=t.pendingProps;switch(Ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return rt(t.type)&&Ss(),qe(t),null;case 3:return r=t.stateNode,Cr(),ve(nt),ve(We),La(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(zl(Et),Et=null))),Ul(e,t),qe(t),null;case 5:Pa(t);var o=Rn(ko.current);if(n=t.type,e!==null&&t.stateNode!=null)Kp(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return qe(t),null}if(e=Rn(Dt.current),Bo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rt]=t,r[vo]=s,e=(t.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(o=0;o<Kr.length;o++)xe(Kr[o],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":hu(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":gu(r,s),xe("invalid",r)}dl(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Ho(r.textContent,u,e),o=["children",""+u]):ao.hasOwnProperty(i)&&u!=null&&i==="onScroll"&&xe("scroll",r)}switch(n){case"input":Lo(r),mu(r,s,!0);break;case"textarea":Lo(r),xu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cs)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Rt]=t,e[vo]=r,Op(e,t,!1,!1),t.stateNode=e;e:{switch(i=cl(n,r),n){case"dialog":xe("cancel",e),xe("close",e),o=r;break;case"iframe":case"object":case"embed":xe("load",e),o=r;break;case"video":case"audio":for(o=0;o<Kr.length;o++)xe(Kr[o],e);o=r;break;case"source":xe("error",e),o=r;break;case"img":case"image":case"link":xe("error",e),xe("load",e),o=r;break;case"details":xe("toggle",e),o=r;break;case"input":hu(e,r),o=sl(e,r),xe("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ne({},r,{value:void 0}),xe("invalid",e);break;case"textarea":gu(e,r),o=al(e,r),xe("invalid",e);break;default:o=r}dl(n,o),u=o;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?Nf(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ef(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uo(e,c):typeof c=="number"&&uo(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ao.hasOwnProperty(s)?c!=null&&s==="onScroll"&&xe("scroll",e):c!=null&&da(e,s,c,i))}switch(n){case"input":Lo(e),mu(e,r,!1);break;case"textarea":Lo(e),xu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ar(e,!!r.multiple,s,!1):r.defaultValue!=null&&ar(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Cs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qe(t),null;case 6:if(e&&t.stateNode!=null)Yp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=Rn(ko.current),Rn(Dt.current),Bo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rt]=t,(s=r.nodeValue!==n)&&(e=dt,e!==null))switch(e.tag){case 3:Ho(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ho(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=t,t.stateNode=r}return qe(t),null;case 13:if(ve(Ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&ut!==null&&t.mode&1&&!(t.flags&128))hp(),wr(),t.flags|=98560,s=!1;else if(s=Bo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(F(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[Rt]=t}else wr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qe(t),s=!1}else Et!==null&&(zl(Et),Et=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Le===0&&(Le=3):Ja())),t.updateQueue!==null&&(t.flags|=4),qe(t),null);case 4:return Cr(),Ul(e,t),e===null&&xo(t.stateNode.containerInfo),qe(t),null;case 10:return Ia(t.type._context),qe(t),null;case 17:return rt(t.type)&&Ss(),qe(t),null;case 19:if(ve(Ee),s=t.memoizedState,s===null)return qe(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)Hr(s,!1);else{if(Le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=As(e),i!==null){for(t.flags|=128,Hr(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(Ee,Ee.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ae()>Tr&&(t.flags|=128,r=!0,Hr(s,!1),t.lanes=4194304)}else{if(!r)if(e=As(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ce)return qe(t),null}else 2*Ae()-s.renderingStartTime>Tr&&n!==1073741824&&(t.flags|=128,r=!0,Hr(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ae(),t.sibling=null,n=Ee.current,ge(Ee,r?n&1|2:n&1),t):(qe(t),null);case 22:case 23:return za(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?at&1073741824&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function lg(e,t){switch(Ea(t),t.tag){case 1:return rt(t.type)&&Ss(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cr(),ve(nt),ve(We),La(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pa(t),null;case 13:if(ve(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(Ee),null;case 4:return Cr(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return za(),null;case 24:return null;default:return null}}var Jo=!1,ze=!1,ag=typeof WeakSet=="function"?WeakSet:Set,O=null;function or(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(e,t,r)}else n.current=null}function Vl(e,t,n){try{n()}catch(r){be(e,t,r)}}var id=!1;function ug(e,t){if(kl=vs,e=tp(),Sa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,u=-1,c=-1,f=0,p=0,m=e,h=null;t:for(;;){for(var x;m!==n||o!==0&&m.nodeType!==3||(u=i+o),m!==s||r!==0&&m.nodeType!==3||(c=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===e)break t;if(h===n&&++f===o&&(u=i),h===s&&++p===r&&(c=i),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cl={focusedElem:e,selectionRange:n},vs=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var C=w.memoizedProps,N=w.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?C:St(t.type,C),N);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(E){be(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return w=id,id=!1,w}function no(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Vl(t,n,s)}o=o.next}while(o!==r)}}function ei(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Gl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Qp(e){var t=e.alternate;t!==null&&(e.alternate=null,Qp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[vo],delete t[El],delete t[zm],delete t[Jm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xp(e){return e.tag===5||e.tag===3||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cs));else if(r!==4&&(e=e.child,e!==null))for(jl(e,t,n),e=e.sibling;e!==null;)jl(e,t,n),e=e.sibling}function $l(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($l(e,t,n),e=e.sibling;e!==null;)$l(e,t,n),e=e.sibling}var Ge=null,Tt=!1;function Zt(e,t,n){for(n=n.child;n!==null;)Zp(e,t,n),n=n.sibling}function Zp(e,t,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Js,n)}catch{}switch(n.tag){case 5:ze||or(n,t);case 6:var r=Ge,o=Tt;Ge=null,Zt(e,t,n),Ge=r,Tt=o,Ge!==null&&(Tt?(e=Ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Tt?(e=Ge,n=n.stateNode,e.nodeType===8?Li(e.parentNode,n):e.nodeType===1&&Li(e,n),ho(e)):Li(Ge,n.stateNode));break;case 4:r=Ge,o=Tt,Ge=n.stateNode.containerInfo,Tt=!0,Zt(e,t,n),Ge=r,Tt=o;break;case 0:case 11:case 14:case 15:if(!ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Vl(n,t,i),o=o.next}while(o!==r)}Zt(e,t,n);break;case 1:if(!ze&&(or(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){be(n,t,u)}Zt(e,t,n);break;case 21:Zt(e,t,n);break;case 22:n.mode&1?(ze=(r=ze)||n.memoizedState!==null,Zt(e,t,n),ze=r):Zt(e,t,n);break;default:Zt(e,t,n)}}function ad(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ag),t.forEach(function(r){var o=yg.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,u=i;e:for(;u!==null;){switch(u.tag){case 5:Ge=u.stateNode,Tt=!1;break e;case 3:Ge=u.stateNode.containerInfo,Tt=!0;break e;case 4:Ge=u.stateNode.containerInfo,Tt=!0;break e}u=u.return}if(Ge===null)throw Error(F(160));Zp(s,i,o),Ge=null,Tt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(f){be(o,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)e0(t,e),t=t.sibling}function e0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),At(e),r&4){try{no(3,e,e.return),ei(3,e)}catch(C){be(e,e.return,C)}try{no(5,e,e.return)}catch(C){be(e,e.return,C)}}break;case 1:Ct(t,e),At(e),r&512&&n!==null&&or(n,n.return);break;case 5:if(Ct(t,e),At(e),r&512&&n!==null&&or(n,n.return),e.flags&32){var o=e.stateNode;try{uo(o,"")}catch(C){be(e,e.return,C)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Cf(o,s),cl(u,i);var f=cl(u,s);for(i=0;i<c.length;i+=2){var p=c[i],m=c[i+1];p==="style"?Nf(o,m):p==="dangerouslySetInnerHTML"?Ef(o,m):p==="children"?uo(o,m):da(o,p,m,f)}switch(u){case"input":il(o,s);break;case"textarea":Sf(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?ar(o,!!s.multiple,x,!1):h!==!!s.multiple&&(s.defaultValue!=null?ar(o,!!s.multiple,s.defaultValue,!0):ar(o,!!s.multiple,s.multiple?[]:"",!1))}o[vo]=s}catch(C){be(e,e.return,C)}}break;case 6:if(Ct(t,e),At(e),r&4){if(e.stateNode===null)throw Error(F(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(C){be(e,e.return,C)}}break;case 3:if(Ct(t,e),At(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ho(t.containerInfo)}catch(C){be(e,e.return,C)}break;case 4:Ct(t,e),At(e);break;case 13:Ct(t,e),At(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Ba=Ae())),r&4&&ad(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ze=(f=ze)||p,Ct(t,e),ze=f):Ct(t,e),At(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(O=e,p=e.child;p!==null;){for(m=O=p;O!==null;){switch(h=O,x=h.child,h.tag){case 0:case 11:case 14:case 15:no(4,h,h.return);break;case 1:or(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(C){be(r,n,C)}}break;case 5:or(h,h.return);break;case 22:if(h.memoizedState!==null){dd(m);continue}}x!==null?(x.return=h,O=x):dd(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{o=m.stateNode,f?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=_f("display",i))}catch(C){be(e,e.return,C)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(C){be(e,e.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ct(t,e),At(e),r&4&&ad(e);break;case 21:break;default:Ct(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Xp(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(uo(o,""),r.flags&=-33);var s=ld(e);$l(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,u=ld(e);jl(e,u,i);break;default:throw Error(F(161))}}catch(c){be(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dg(e,t,n){O=e,t0(e)}function t0(e,t,n){for(var r=(e.mode&1)!==0;O!==null;){var o=O,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Jo;if(!i){var u=o.alternate,c=u!==null&&u.memoizedState!==null||ze;u=Jo;var f=ze;if(Jo=i,(ze=c)&&!f)for(O=o;O!==null;)i=O,c=i.child,i.tag===22&&i.memoizedState!==null?cd(o):c!==null?(c.return=i,O=c):cd(o);for(;s!==null;)O=s,t0(s),s=s.sibling;O=o,Jo=u,ze=f}ud(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,O=s):ud(e)}}function ud(e){for(;O!==null;){var t=O;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ze||ei(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ze)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Wu(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wu(t,i,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ho(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ze||t.flags&512&&Gl(t)}catch(h){be(t,t.return,h)}}if(t===e){O=null;break}if(n=t.sibling,n!==null){n.return=t.return,O=n;break}O=t.return}}function dd(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var n=t.sibling;if(n!==null){n.return=t.return,O=n;break}O=t.return}}function cd(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ei(4,t)}catch(c){be(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){be(t,o,c)}}var s=t.return;try{Gl(t)}catch(c){be(t,s,c)}break;case 5:var i=t.return;try{Gl(t)}catch(c){be(t,i,c)}}}catch(c){be(t,t.return,c)}if(t===e){O=null;break}var u=t.sibling;if(u!==null){u.return=t.return,O=u;break}O=t.return}}var cg=Math.ceil,Ps=Ot.ReactCurrentDispatcher,$a=Ot.ReactCurrentOwner,yt=Ot.ReactCurrentBatchConfig,ue=0,Ue=null,Me=null,je=0,at=0,sr=kn(0),Le=0,Eo=null,$n=0,ti=0,Ha=0,ro=null,et=null,Ba=0,Tr=1/0,Ut=null,Ls=!1,Hl=null,mn=null,Wo=!1,an=null,Ds=0,oo=0,Bl=null,ls=-1,as=0;function Ke(){return ue&6?Ae():ls!==-1?ls:ls=Ae()}function gn(e){return e.mode&1?ue&2&&je!==0?je&-je:Om.transition!==null?(as===0&&(as=Gf()),as):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Jf(e.type)),e):1}function Nt(e,t,n,r){if(50<oo)throw oo=0,Bl=null,Error(F(185));No(e,n,r),(!(ue&2)||e!==Ue)&&(e===Ue&&(!(ue&2)&&(ti|=n),Le===4&&on(e,je)),ot(e,r),n===1&&ue===0&&!(t.mode&1)&&(Tr=Ae()+500,Qs&&Cn()))}function ot(e,t){var n=e.callbackNode;Oh(e,t);var r=ys(e,e===Ue?je:0);if(r===0)n!==null&&wu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&wu(n),t===1)e.tag===0?Wm(fd.bind(null,e)):cp(fd.bind(null,e)),Bm(function(){!(ue&6)&&Cn()}),n=null;else{switch(jf(r)){case 1:n=ma;break;case 4:n=Uf;break;case 16:n=xs;break;case 536870912:n=Vf;break;default:n=xs}n=u0(n,n0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function n0(e,t){if(ls=-1,as=0,ue&6)throw Error(F(327));var n=e.callbackNode;if(pr()&&e.callbackNode!==n)return null;var r=ys(e,e===Ue?je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fs(e,r);else{t=r;var o=ue;ue|=2;var s=o0();(Ue!==e||je!==t)&&(Ut=null,Tr=Ae()+500,Pn(e,t));do try{hg();break}catch(u){r0(e,u)}while(1);ba(),Ps.current=s,ue=o,Me!==null?t=0:(Ue=null,je=0,t=Le)}if(t!==0){if(t===2&&(o=gl(e),o!==0&&(r=o,t=ql(e,o))),t===1)throw n=Eo,Pn(e,0),on(e,r),ot(e,Ae()),n;if(t===6)on(e,r);else{if(o=e.current.alternate,!(r&30)&&!fg(o)&&(t=Fs(e,r),t===2&&(s=gl(e),s!==0&&(r=s,t=ql(e,s))),t===1))throw n=Eo,Pn(e,0),on(e,r),ot(e,Ae()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:In(e,et,Ut);break;case 3:if(on(e,r),(r&130023424)===r&&(t=Ba+500-Ae(),10<t)){if(ys(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ke(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Tl(In.bind(null,e,et,Ut),t);break}In(e,et,Ut);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-_t(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cg(r/1960))-r,10<r){e.timeoutHandle=Tl(In.bind(null,e,et,Ut),r);break}In(e,et,Ut);break;case 5:In(e,et,Ut);break;default:throw Error(F(329))}}}return ot(e,Ae()),e.callbackNode===n?n0.bind(null,e):null}function ql(e,t){var n=ro;return e.current.memoizedState.isDehydrated&&(Pn(e,t).flags|=256),e=Fs(e,t),e!==2&&(t=et,et=n,t!==null&&zl(t)),e}function zl(e){et===null?et=e:et.push.apply(et,e)}function fg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!bt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~Ha,t&=~ti,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function fd(e){if(ue&6)throw Error(F(327));pr();var t=ys(e,0);if(!(t&1))return ot(e,Ae()),null;var n=Fs(e,t);if(e.tag!==0&&n===2){var r=gl(e);r!==0&&(t=r,n=ql(e,r))}if(n===1)throw n=Eo,Pn(e,0),on(e,t),ot(e,Ae()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,In(e,et,Ut),ot(e,Ae()),null}function qa(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(Tr=Ae()+500,Qs&&Cn())}}function Hn(e){an!==null&&an.tag===0&&!(ue&6)&&pr();var t=ue;ue|=1;var n=yt.transition,r=pe;try{if(yt.transition=null,pe=1,e)return e()}finally{pe=r,yt.transition=n,ue=t,!(ue&6)&&Cn()}}function za(){at=sr.current,ve(sr)}function Pn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Hm(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Ea(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ss();break;case 3:Cr(),ve(nt),ve(We),La();break;case 5:Pa(r);break;case 4:Cr();break;case 13:ve(Ee);break;case 19:ve(Ee);break;case 10:Ia(r.type._context);break;case 22:case 23:za()}n=n.return}if(Ue=e,Me=e=xn(e.current,null),je=at=t,Le=0,Eo=null,Ha=ti=$n=0,et=ro=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Mn=null}return e}function r0(e,t){do{var n=Me;try{if(ba(),os.current=Rs,Ms){for(var r=_e.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ms=!1}if(jn=0,Fe=Pe=_e=null,to=!1,Co=0,$a.current=null,n===null||n.return===null){Le=1,Eo=t,Me=null;break}e:{var s=e,i=n.return,u=n,c=t;if(t=je,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Zu(i);if(x!==null){x.flags&=-257,ed(x,i,u,s,t),x.mode&1&&Xu(s,f,t),t=x,c=f;var w=t.updateQueue;if(w===null){var C=new Set;C.add(c),t.updateQueue=C}else w.add(c);break e}else{if(!(t&1)){Xu(s,f,t),Ja();break e}c=Error(F(426))}}else if(Ce&&u.mode&1){var N=Zu(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ed(N,i,u,s,t),_a(Sr(c,u));break e}}s=c=Sr(c,u),Le!==4&&(Le=2),ro===null?ro=[s]:ro.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=jp(s,c,t);Ju(s,v);break e;case 1:u=c;var y=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(mn===null||!mn.has(g)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=$p(s,u,t);Ju(s,E);break e}}s=s.return}while(s!==null)}i0(n)}catch(S){t=S,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function o0(){var e=Ps.current;return Ps.current=Rs,e===null?Rs:e}function Ja(){(Le===0||Le===3||Le===2)&&(Le=4),Ue===null||!($n&268435455)&&!(ti&268435455)||on(Ue,je)}function Fs(e,t){var n=ue;ue|=2;var r=o0();(Ue!==e||je!==t)&&(Ut=null,Pn(e,t));do try{pg();break}catch(o){r0(e,o)}while(1);if(ba(),ue=n,Ps.current=r,Me!==null)throw Error(F(261));return Ue=null,je=0,Le}function pg(){for(;Me!==null;)s0(Me)}function hg(){for(;Me!==null&&!Gh();)s0(Me)}function s0(e){var t=a0(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?i0(e):Me=t,$a.current=null}function i0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lg(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,Me=null;return}}else if(n=ig(n,t,at),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Le===0&&(Le=5)}function In(e,t,n){var r=pe,o=yt.transition;try{yt.transition=null,pe=1,mg(e,t,n,r)}finally{yt.transition=o,pe=r}return null}function mg(e,t,n,r){do pr();while(an!==null);if(ue&6)throw Error(F(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Kh(e,s),e===Ue&&(Me=Ue=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wo||(Wo=!0,u0(xs,function(){return pr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yt.transition,yt.transition=null;var i=pe;pe=1;var u=ue;ue|=4,$a.current=null,ug(e,n),e0(n,e),Dm(Cl),vs=!!kl,Cl=kl=null,e.current=n,dg(n),jh(),ue=u,pe=i,yt.transition=s}else e.current=n;if(Wo&&(Wo=!1,an=e,Ds=o),s=e.pendingLanes,s===0&&(mn=null),Bh(n.stateNode),ot(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ls)throw Ls=!1,e=Hl,Hl=null,e;return Ds&1&&e.tag!==0&&pr(),s=e.pendingLanes,s&1?e===Bl?oo++:(oo=0,Bl=e):oo=0,Cn(),null}function pr(){if(an!==null){var e=jf(Ds),t=yt.transition,n=pe;try{if(yt.transition=null,pe=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,Ds=0,ue&6)throw Error(F(331));var o=ue;for(ue|=4,O=e.current;O!==null;){var s=O,i=s.child;if(O.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(O=f;O!==null;){var p=O;switch(p.tag){case 0:case 11:case 15:no(8,p,s)}var m=p.child;if(m!==null)m.return=p,O=m;else for(;O!==null;){p=O;var h=p.sibling,x=p.return;if(Qp(p),p===f){O=null;break}if(h!==null){h.return=x,O=h;break}O=x}}}var w=s.alternate;if(w!==null){var C=w.child;if(C!==null){w.child=null;do{var N=C.sibling;C.sibling=null,C=N}while(C!==null)}}O=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,O=i;else e:for(;O!==null;){if(s=O,s.flags&2048)switch(s.tag){case 0:case 11:case 15:no(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,O=v;break e}O=s.return}}var y=e.current;for(O=y;O!==null;){i=O;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,O=g;else e:for(i=y;O!==null;){if(u=O,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ei(9,u)}}catch(S){be(u,u.return,S)}if(u===i){O=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,O=E;break e}O=u.return}}if(ue=o,Cn(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Js,e)}catch{}r=!0}return r}finally{pe=n,yt.transition=t}}return!1}function pd(e,t,n){t=Sr(n,t),t=jp(e,t,1),e=hn(e,t,1),t=Ke(),e!==null&&(No(e,1,t),ot(e,t))}function be(e,t,n){if(e.tag===3)pd(e,e,n);else for(;t!==null;){if(t.tag===3){pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=Sr(n,e),e=$p(t,e,1),t=hn(t,e,1),e=Ke(),t!==null&&(No(t,1,e),ot(t,e));break}}t=t.return}}function gg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ke(),e.pingedLanes|=e.suspendedLanes&n,Ue===e&&(je&n)===n&&(Le===4||Le===3&&(je&130023424)===je&&500>Ae()-Ba?Pn(e,0):Ha|=n),ot(e,t)}function l0(e,t){t===0&&(e.mode&1?(t=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):t=1);var n=Ke();e=qt(e,t),e!==null&&(No(e,t,n),ot(e,n))}function xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),l0(e,n)}function yg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),l0(e,n)}var a0;a0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return tt=!1,sg(e,t,n);tt=!!(e.flags&131072)}else tt=!1,Ce&&t.flags&1048576&&fp(t,_s,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;is(e,t),e=t.pendingProps;var o=vr(t,We.current);fr(t,n),o=Fa(null,t,r,e,o,n);var s=Ua();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(r)?(s=!0,Ts(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ma(t),o.updater=Zs,t.stateNode=o,o._reactInternals=t,Ml(t,r,e,n),t=Ll(null,t,r,!0,s,n)):(t.tag=0,Ce&&s&&Ta(t),Oe(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(is(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=wg(r),e=St(r,e),o){case 0:t=Pl(null,t,r,e,n);break e;case 1:t=rd(null,t,r,e,n);break e;case 11:t=td(null,t,r,e,n);break e;case 14:t=nd(null,t,r,St(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),Pl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),rd(e,t,r,o,n);case 3:e:{if(zp(t),e===null)throw Error(F(387));r=t.pendingProps,s=t.memoizedState,o=s.element,yp(e,t),Is(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Sr(Error(F(423)),t),t=od(e,t,r,n,o);break e}else if(r!==o){o=Sr(Error(F(424)),t),t=od(e,t,r,n,o);break e}else for(ut=pn(t.stateNode.containerInfo.firstChild),dt=t,Ce=!0,Et=null,n=gp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wr(),r===o){t=zt(e,t,n);break e}Oe(e,t,r,n)}t=t.child}return t;case 5:return vp(t),e===null&&bl(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Sl(r,o)?i=null:s!==null&&Sl(r,s)&&(t.flags|=32),qp(e,t),Oe(e,t,i,n),t.child;case 6:return e===null&&bl(t),null;case 13:return Jp(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=kr(t,null,r,n):Oe(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),td(e,t,r,o,n);case 7:return Oe(e,t,t.pendingProps,n),t.child;case 8:return Oe(e,t,t.pendingProps.children,n),t.child;case 12:return Oe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,ge(Ns,r._currentValue),r._currentValue=i,s!==null)if(bt(s.value,i)){if(s.children===o.children&&!nt.current){t=zt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var u=s.dependencies;if(u!==null){i=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=$t(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Il(s.return,n,t),u.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(F(341));i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Il(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Oe(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,fr(t,n),o=wt(o),r=r(o),t.flags|=1,Oe(e,t,r,n),t.child;case 14:return r=t.type,o=St(r,t.pendingProps),o=St(r.type,o),nd(e,t,r,o,n);case 15:return Hp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:St(r,o),is(e,t),t.tag=1,rt(r)?(e=!0,Ts(t)):e=!1,fr(t,n),Gp(t,r,o),Ml(t,r,o,n),Ll(null,t,r,!0,e,n);case 19:return Wp(e,t,n);case 22:return Bp(e,t,n)}throw Error(F(156,t.tag))};function u0(e,t){return Ff(e,t)}function vg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,n,r){return new vg(e,t,n,r)}function Wa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wg(e){if(typeof e=="function")return Wa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fa)return 11;if(e===pa)return 14}return 2}function xn(e,t){var n=e.alternate;return n===null?(n=xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function us(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")Wa(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Kn:return Ln(n.children,o,s,t);case ca:i=8,o|=8;break;case tl:return e=xt(12,n,t,o|2),e.elementType=tl,e.lanes=s,e;case nl:return e=xt(13,n,t,o),e.elementType=nl,e.lanes=s,e;case rl:return e=xt(19,n,t,o),e.elementType=rl,e.lanes=s,e;case vf:return ni(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xf:i=10;break e;case yf:i=9;break e;case fa:i=11;break e;case pa:i=14;break e;case tn:i=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=xt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Ln(e,t,n,r){return e=xt(7,e,r,t),e.lanes=n,e}function ni(e,t,n,r){return e=xt(22,e,r,t),e.elementType=vf,e.lanes=n,e.stateNode={isHidden:!1},e}function Hi(e,t,n){return e=xt(6,e,null,t),e.lanes=n,e}function Bi(e,t,n){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Oa(e,t,n,r,o,s,i,u,c){return e=new kg(e,t,n,u,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=xt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(s),e}function Cg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function d0(e){if(!e)return vn;e=e._reactInternals;e:{if(qn(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(rt(n))return dp(e,n,t)}return t}function c0(e,t,n,r,o,s,i,u,c){return e=Oa(n,r,!0,e,o,s,i,u,c),e.context=d0(null),n=e.current,r=Ke(),o=gn(n),s=$t(r,o),s.callback=t??null,hn(n,s,o),e.current.lanes=o,No(e,o,r),ot(e,r),e}function ri(e,t,n,r){var o=t.current,s=Ke(),i=gn(o);return n=d0(n),t.context===null?t.context=n:t.pendingContext=n,t=$t(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hn(o,t,i),e!==null&&(Nt(e,o,i,s),rs(e,o,i)),i}function Us(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ka(e,t){hd(e,t),(e=e.alternate)&&hd(e,t)}function Sg(){return null}var f0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ya(e){this._internalRoot=e}oi.prototype.render=Ya.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));ri(e,t,null,null)};oi.prototype.unmount=Ya.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){ri(null,e,null,null)}),t[Bt]=null}};function oi(e){this._internalRoot=e}oi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&zf(e)}};function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function si(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function md(){}function Tg(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var f=Us(i);s.call(f)}}var i=c0(t,r,e,0,null,!1,!1,"",md);return e._reactRootContainer=i,e[Bt]=i.current,xo(e.nodeType===8?e.parentNode:e),Hn(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var f=Us(c);u.call(f)}}var c=Oa(e,0,!1,null,null,!1,!1,"",md);return e._reactRootContainer=c,e[Bt]=c.current,xo(e.nodeType===8?e.parentNode:e),Hn(function(){ri(t,c,n,r)}),c}function ii(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var u=o;o=function(){var c=Us(i);u.call(c)}}ri(t,i,e,o)}else i=Tg(n,t,e,o,r);return Us(i)}$f=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Or(t.pendingLanes);n!==0&&(ga(t,n|1),ot(t,Ae()),!(ue&6)&&(Tr=Ae()+500,Cn()))}break;case 13:Hn(function(){var r=qt(e,1);if(r!==null){var o=Ke();Nt(r,e,1,o)}}),Ka(e,1)}};xa=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var n=Ke();Nt(t,e,134217728,n)}Ka(e,134217728)}};Hf=function(e){if(e.tag===13){var t=gn(e),n=qt(e,t);if(n!==null){var r=Ke();Nt(n,e,t,r)}Ka(e,t)}};Bf=function(){return pe};qf=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};pl=function(e,t,n){switch(t){case"input":if(il(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Ys(r);if(!o)throw Error(F(90));kf(r),il(r,o)}}}break;case"textarea":Sf(e,n);break;case"select":t=n.value,t!=null&&ar(e,!!n.multiple,t,!1)}};Af=qa;Mf=Hn;var Eg={usingClientEntryPoint:!1,Events:[Io,Zn,Ys,bf,If,qa]},Br={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_g={bundleType:Br.bundleType,version:Br.version,rendererPackageName:Br.rendererPackageName,rendererConfig:Br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lf(e),e===null?null:e.stateNode},findFiberByHostInstance:Br.findFiberByHostInstance||Sg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Js=Oo.inject(_g),Lt=Oo}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eg;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(t))throw Error(F(200));return Cg(e,t,null,n)};ft.createRoot=function(e,t){if(!Qa(e))throw Error(F(299));var n=!1,r="",o=f0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Oa(e,1,!1,null,null,n,!1,r,o),e[Bt]=t.current,xo(e.nodeType===8?e.parentNode:e),new Ya(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Lf(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return Hn(e)};ft.hydrate=function(e,t,n){if(!si(t))throw Error(F(200));return ii(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!Qa(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=f0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=c0(t,null,e,1,n??null,o,!1,s,i),e[Bt]=t.current,xo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new oi(t)};ft.render=function(e,t,n){if(!si(t))throw Error(F(200));return ii(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!si(e))throw Error(F(40));return e._reactRootContainer?(Hn(function(){ii(null,null,e,!1,function(){e._reactRootContainer=null,e[Bt]=null})}),!0):!1};ft.unstable_batchedUpdates=qa;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!si(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return ii(e,t,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function p0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p0)}catch(e){console.error(e)}}p0(),pf.exports=ft;var Ng=pf.exports,gd=Ng;Zi.createRoot=gd.createRoot,Zi.hydrateRoot=gd.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bg,Ig;function Ag(){return{geminiUrl:bg,vertexUrl:Ig}}function Mg(e,t,n,r){var o,s;if(!(e!=null&&e.baseUrl)){const i=Ag();return t?(o=i.vertexUrl)!==null&&o!==void 0?o:n:(s=i.geminiUrl)!==null&&s!==void 0?s:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kt{}function H(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(e,t,n){for(let s=0;s<t.length-1;s++){const i=t[s];if(i.endsWith("[]")){const u=i.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[u])){const c=e[u];if(Array.isArray(n))for(let f=0;f<c.length;f++){const p=c[f];d(p,t.slice(s+1),n[f])}else for(const f of c)d(f,t.slice(s+1),n)}return}else if(i.endsWith("[0]")){const u=i.slice(0,-3);u in e||(e[u]=[{}]);const c=e[u];d(c[0],t.slice(s+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const r=t[t.length-1],o=e[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const o=t[r];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const i=e[s];return Array.isArray(i)?i.map(u=>l(u,t.slice(r+1),n)):n}else return n}else e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function Rg(e,t){for(const[n,r]of Object.entries(t)){const o=n.split("."),s=r.split("."),i=new Set;let u=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){u=c;break}if(u!==-1&&s.length>u)for(let c=u;c<s.length;c++){const f=s[c];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&i.add(f)}Jl(e,o,s,0,i)}}function Jl(e,t,n,r,o){if(r>=t.length||typeof e!="object"||e===null)return;const s=t[r];if(s.endsWith("[]")){const i=s.slice(0,-2),u=e;if(i in u&&Array.isArray(u[i]))for(const c of u[i])Jl(c,t,n,r+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,u=Object.keys(i).filter(f=>!f.startsWith("_")&&!o.has(f)),c={};for(const f of u)c[f]=i[f];for(const[f,p]of Object.entries(c)){const m=[];for(const h of n.slice(r))h==="*"?m.push(f):m.push(h);d(i,m,p)}for(const f of u)delete i[f]}}else{const i=e;s in i&&Jl(i[s],t,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xa(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pg(e){const t={},n=l(e,["operationName"]);n!=null&&d(t,["operationName"],n);const r=l(e,["resourceName"]);return r!=null&&d(t,["_url","resourceName"],r),t}function Lg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],Fg(i)),t}function Dg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Ug(i)),t}function Fg(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Vg(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Ug(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Gg(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Vg(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],zg(n)),t}function Gg(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],Jg(n)),t}function jg(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function $g(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function Hg(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],Bg(i)),t}function Bg(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function h0(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],qg(i)),t}function qg(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function zg(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],Xa(r));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function Jg(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],Xa(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xd;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xd||(xd={}));var yd;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(yd||(yd={}));var vd;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(vd||(vd={}));var un;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(un||(un={}));var wd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(wd||(wd={}));var kd;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kd||(kd={}));var Cd;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Cd||(Cd={}));var Sd;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Sd||(Sd={}));var Td;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Td||(Td={}));var Ed;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(Ed||(Ed={}));var _d;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_d||(_d={}));var Nd;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Nd||(Nd={}));var bd;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(bd||(bd={}));var Id;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Id||(Id={}));var Ad;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ad||(Ad={}));var Md;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Md||(Md={}));var Rd;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Rd||(Rd={}));var Pd;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Pd||(Pd={}));var Ld;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ld||(Ld={}));var Vs;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Vs||(Vs={}));var Dd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Dd||(Dd={}));var Fd;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Fd||(Fd={}));var Ud;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ud||(Ud={}));var Wl;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wl||(Wl={}));var Vd;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Vd||(Vd={}));var Gd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gd||(Gd={}));var jd;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(jd||(jd={}));var $d;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})($d||($d={}));var Hd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Hd||(Hd={}));var Bd;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Bd||(Bd={}));var qd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(qd||(qd={}));var zd;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zd||(zd={}));var Jd;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Jd||(Jd={}));var Wd;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Wd||(Wd={}));var Od;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Od||(Od={}));var Kd;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Kd||(Kd={}));var Yd;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Yd||(Yd={}));var Qd;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Qd||(Qd={}));var Xd;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Xd||(Xd={}));var Zd;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Zd||(Zd={}));var ec;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(ec||(ec={}));var tc;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(tc||(tc={}));var nc;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(nc||(nc={}));var rc;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(rc||(rc={}));var oc;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(oc||(oc={}));var sc;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(sc||(sc={}));var ic;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ic||(ic={}));var lc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(lc||(lc={}));var ac;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ac||(ac={}));var uc;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(uc||(uc={}));var dc;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(dc||(dc={}));var cc;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cc||(cc={}));var fc;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fc||(fc={}));var pc;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(pc||(pc={}));var ir;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(ir||(ir={}));class Ol{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class qr{get text(){var t,n,r,o,s,i,u,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const m=[];for(const h of(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[x,w]of Object.entries(h))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(x);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,f+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,n,r,o,s,i,u,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const m of(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,x]of Object.entries(m))h!=="inlineData"&&(x!==null||x!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(f+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,r,o,s,i,u,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,r,o,s,i,u,c,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,r,o,s,i,u,c,f;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(c=(u=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class hc{}class mc{}class Wg{}class Og{}class Kg{}class Yg{}class gc{}class xc{}class yc{}class Qg{}class Gs{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Gs;let o;const s=t;return n?o=Dg(s):o=Lg(s),Object.assign(r,o),r}}class vc{}class wc{}class kc{}class Cc{}class Xg{}class Zg{}class ex{}class Za{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Za,s=Hg(t);return Object.assign(r,s),r}}class tx{}class nx{}class rx{}class Sc{}class ox{get text(){var t,n,r;let o="",s=!1;const i=[];for(const u of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(u))c!=="text"&&c!=="thought"&&f!==null&&i.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,o+=u.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,r;let o="";const s=[];for(const i of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(i))u!=="inlineData"&&c!==null&&s.push(u);i.inlineData&&typeof i.inlineData.data=="string"&&(o+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class sx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class eu{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new eu,s=h0(t);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ce(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function m0(e,t){const n=ce(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function g0(e){return Array.isArray(e)?e.map(t=>js(t)):[js(e)]}function js(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function x0(e){const t=js(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function y0(e){const t=js(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Tc(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function v0(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Tc(t)):[Tc(e)]}function Kl(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Ec(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function _c(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Je(e){if(e==null)throw new Error("ContentUnion is required");return Kl(e)?e:{role:"user",parts:v0(e)}}function tu(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=Je(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=Je(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Je(n)):[Je(t)]}function vt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Ec(e)||_c(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Je(e)]}const t=[],n=[],r=Kl(e[0]);for(const o of e){const s=Kl(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(Ec(o)||_c(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:v0(n)}),t}function ix(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(un).includes(n[0].toUpperCase())?n[0].toUpperCase():un.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(un).includes(r.toUpperCase())?r.toUpperCase():un.TYPE_UNSPECIFIED})}}function hr(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&ix(e.type,t);for(const[i,u]of Object.entries(e))if(u!=null)if(i=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(un).includes(u.toUpperCase())?u.toUpperCase():un.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=hr(u);else if(r.includes(i)){const c=[];for(const f of u){if(f.type=="null"){t.nullable=!0;continue}c.push(hr(f))}t[i]=c}else if(o.includes(i)){const c={};for(const[f,p]of Object.entries(u))c[f]=hr(p);t[i]=c}else{if(i==="additionalProperties")continue;t[i]=u}return t}function nu(e){return hr(e)}function ru(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ou(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ar(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=hr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=hr(t.response));return e}function Mr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function lx(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Yt(e,t){if(typeof t!="string")throw new Error("name must be a string");return lx(e,t,"cachedContents")}function w0(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Sn(e){return Xa(e)}function ax(e){return e!=null&&typeof e=="object"&&"name"in e}function ux(e){return e!=null&&typeof e=="object"&&"video"in e}function dx(e){return e!=null&&typeof e=="object"&&"uri"in e}function k0(e){var t;let n;if(ax(e)&&(n=e.name),!(dx(e)&&(n=e.uri,n===void 0))&&!(ux(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function C0(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function S0(e){for(const t of["models","tunedModels","publisherModels"])if(cx(e,t))return e[t];return[]}function cx(e,t){return e!==null&&typeof e=="object"&&t in e}function fx(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function px(e,t={}){const n=[],r=new Set;for(const o of e){const s=o.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const i=fx(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function T0(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function hx(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function E0(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const i of o){if(typeof i!="object"||i===null)continue;const c=i.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Rr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function _0(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mx(e){const t={},n=l(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const r=l(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Kx(i))),d(t,["inlinedResponses"],s)}const o=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["inlinedEmbedContentResponses"],s)}return t}function gx(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const r=l(e,["gcsDestination","outputUriPrefix"]);r!=null&&d(t,["gcsUri"],r);const o=l(e,["bigqueryDestination","outputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function xx(e){const t={},n=l(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const r=l(e,["gcsUri"]);r!=null&&d(t,["gcsDestination","outputUriPrefix"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigqueryDestination","outputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function ds(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata","displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["metadata","state"]);o!=null&&d(t,["state"],_0(o));const s=l(e,["metadata","createTime"]);s!=null&&d(t,["createTime"],s);const i=l(e,["metadata","endTime"]);i!=null&&d(t,["endTime"],i);const u=l(e,["metadata","updateTime"]);u!=null&&d(t,["updateTime"],u);const c=l(e,["metadata","model"]);c!=null&&d(t,["model"],c);const f=l(e,["metadata","output"]);return f!=null&&d(t,["dest"],mx(E0(f))),t}function Yl(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["state"]);o!=null&&d(t,["state"],_0(o));const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["createTime"]);i!=null&&d(t,["createTime"],i);const u=l(e,["startTime"]);u!=null&&d(t,["startTime"],u);const c=l(e,["endTime"]);c!=null&&d(t,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(t,["updateTime"],f);const p=l(e,["model"]);p!=null&&d(t,["model"],p);const m=l(e,["inputConfig"]);m!=null&&d(t,["src"],yx(m));const h=l(e,["outputConfig"]);h!=null&&d(t,["dest"],gx(E0(h)));const x=l(e,["completionStats"]);return x!=null&&d(t,["completionStats"],x),t}function yx(e){const t={},n=l(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const r=l(e,["gcsSource","uris"]);r!=null&&d(t,["gcsUri"],r);const o=l(e,["bigquerySource","inputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function vx(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(t,["fileName"]);r!=null&&d(n,["fileName"],r);const o=l(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Ox(e,i))),d(n,["requests","requests"],s)}return n}function wx(e){const t={},n=l(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const r=l(e,["gcsUri"]);r!=null&&d(t,["gcsSource","uris"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigquerySource","inputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function kx(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Cx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Rr(e,r)),n}function Sx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Rr(e,r)),n}function Tx(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],Ex(r));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=l(e,["avgLogprobs"]);i!=null&&d(t,["avgLogprobs"],i);const u=l(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const c=l(e,["index"]);c!=null&&d(t,["index"],c);const f=l(e,["logprobsResult"]);f!=null&&d(t,["logprobsResult"],f);const p=l(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(x=>x)),d(t,["safetyRatings"],h)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function Ex(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function N0(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ny(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function _x(e,t){const n={},r=l(e,["displayName"]);if(t!==void 0&&r!=null&&d(t,["batch","displayName"],r),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Nx(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["dest"]);return t!==void 0&&o!=null&&d(t,["outputConfig"],xx(hx(o))),n}function Nc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],vx(e,T0(e,o)));const s=l(t,["config"]);return s!=null&&_x(s,n),n}function bx(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],ce(e,r));const o=l(t,["src"]);o!=null&&d(n,["inputConfig"],wx(T0(e,o)));const s=l(t,["config"]);return s!=null&&Nx(s,n),n}function Ix(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["batch","displayName"],r),n}function Ax(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],Ux(e,o));const s=l(t,["config"]);return s!=null&&Ix(s,n),n}function Mx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Rr(e,r)),n}function Rx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Rr(e,r)),n}function Px(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function Lx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function Dx(e,t){const n={},r=l(t,["contents"]);if(r!=null){let s=tu(e,r);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["requests[]","request","content"],s)}const o=l(t,["config"]);return o!=null&&(d(n,["_self"],Fx(o,n)),Rg(n,{"requests[].*":"requests[].request.*"})),n}function Fx(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ux(e,t){const n={},r=l(t,["fileName"]);r!=null&&d(n,["file_name"],r);const o=l(t,["inlinedRequests"]);return o!=null&&d(n,["requests"],Dx(e,o)),n}function Vx(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Gx(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function jx(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function $x(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],N0(Je(o)));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const x=l(t,["presencePenalty"]);x!=null&&d(r,["presencePenalty"],x);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const C=l(t,["seed"]);C!=null&&d(r,["seed"],C);const N=l(t,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const v=l(t,["responseSchema"]);v!=null&&d(r,["responseSchema"],nu(v));const y=l(t,["responseJsonSchema"]);if(y!=null&&d(r,["responseJsonSchema"],y),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=l(t,["safetySettings"]);if(n!==void 0&&g!=null){let B=g;Array.isArray(B)&&(B=B.map(I=>ry(I))),d(n,["safetySettings"],B)}const E=l(t,["tools"]);if(n!==void 0&&E!=null){let B=Mr(E);Array.isArray(B)&&(B=B.map(I=>sy(Ar(I)))),d(n,["tools"],B)}const S=l(t,["toolConfig"]);if(n!==void 0&&S!=null&&d(n,["toolConfig"],oy(S)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(t,["cachedContent"]);n!==void 0&&k!=null&&d(n,["cachedContent"],Yt(e,k));const T=l(t,["responseModalities"]);T!=null&&d(r,["responseModalities"],T);const A=l(t,["mediaResolution"]);A!=null&&d(r,["mediaResolution"],A);const _=l(t,["speechConfig"]);if(_!=null&&d(r,["speechConfig"],ru(_)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(t,["thinkingConfig"]);M!=null&&d(r,["thinkingConfig"],M);const L=l(t,["imageConfig"]);L!=null&&d(r,["imageConfig"],Wx(L));const G=l(t,["enableEnhancedCivicAnswers"]);return G!=null&&d(r,["enableEnhancedCivicAnswers"],G),r}function Hx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>Tx(f))),d(t,["candidates"],c)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=l(e,["responseId"]);i!=null&&d(t,["responseId"],i);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function Bx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Rr(e,r)),n}function qx(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Rr(e,r)),n}function zx(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Jx(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Wx(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Ox(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["request","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let u=vt(o);Array.isArray(u)&&(u=u.map(c=>N0(c))),d(n,["request","contents"],u)}const s=l(t,["metadata"]);s!=null&&d(n,["metadata"],s);const i=l(t,["config"]);return i!=null&&d(n,["request","generationConfig"],$x(e,i,l(n,["request"],{}))),n}function Kx(e){const t={},n=l(e,["response"]);n!=null&&d(t,["response"],Hx(n));const r=l(e,["error"]);return r!=null&&d(t,["error"],r),t}function Yx(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);if(t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Qx(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);t!==void 0&&o!=null&&d(t,["_query","pageToken"],o);const s=l(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function Xx(e){const t={},n=l(e,["config"]);return n!=null&&Yx(n,t),t}function Zx(e){const t={},n=l(e,["config"]);return n!=null&&Qx(n,t),t}function ey(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>ds(i))),d(t,["batchJobs"],s)}return t}function ty(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Yl(i))),d(t,["batchJobs"],s)}return t}function ny(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Vx(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],Gx(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],kx(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function ry(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function oy(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],jx(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function sy(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],zx(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],Jx(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Jt||(Jt={}));class zn{constructor(t,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,o)}init(t,n,r){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(o=i.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iy extends Kt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new zn(Jt.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Nc(this.apiClient,t),r=n._url,o=H("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,c=u.requests,f=[];for(const p of c){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const x=m.request;x.systemInstruction=h,m.request=x}f.push(m)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const s=this.getGcsUri(t),i=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${o}`;else if(i)r.dest=`${i}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=bx(this.apiClient,t);return u=H("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Yl(p))}else{const f=Nc(this.apiClient,t);return u=H("{model}:batchGenerateContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>ds(p))}}async createEmbeddingsInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ax(this.apiClient,t);return s=H("{model}:asyncBatchEmbedContent",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>ds(c))}}async get(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=qx(this.apiClient,t);return u=H("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Yl(p))}else{const f=Bx(this.apiClient,t);return u=H("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>ds(p))}}async cancel(t){var n,r,o,s;let i="",u={};if(this.apiClient.isVertexAI()){const c=Sx(this.apiClient,t);i=H("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=Cx(this.apiClient,t);i=H("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Zx(t);return u=H("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=ty(p),h=new Sc;return Object.assign(h,m),h})}else{const f=Xx(t);return u=H("batches",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=ey(p),h=new Sc;return Object.assign(h,m),h})}}async delete(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Rx(this.apiClient,t);return u=H("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>Lx(p))}else{const f=Mx(this.apiClient,t);return u=H("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>Px(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ly(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function bc(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ay(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function ay(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=l(e,["contents"]);if(t!==void 0&&i!=null){let p=vt(i);Array.isArray(p)&&(p=p.map(m=>bc(m))),d(t,["contents"],p)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&d(t,["systemInstruction"],bc(Je(u)));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Ry(m))),d(t,["tools"],p)}const f=l(e,["toolConfig"]);if(t!==void 0&&f!=null&&d(t,["toolConfig"],My(f)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function uy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const i=l(e,["contents"]);if(t!==void 0&&i!=null){let m=vt(i);Array.isArray(m)&&(m=m.map(h=>h)),d(t,["contents"],m)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&d(t,["systemInstruction"],Je(u));const c=l(e,["tools"]);if(t!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>Py(h))),d(t,["tools"],m)}const f=l(e,["toolConfig"]);t!==void 0&&f!=null&&d(t,["toolConfig"],f);const p=l(e,["kmsKeyName"]);return t!==void 0&&p!=null&&d(t,["encryption_spec","kmsKeyName"],p),n}function dy(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],m0(e,r));const o=l(t,["config"]);return o!=null&&ay(o,n),n}function cy(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["model"],m0(e,r));const o=l(t,["config"]);return o!=null&&uy(o,n),n}function fy(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Yt(e,r)),n}function py(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Yt(e,r)),n}function hy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function my(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function gy(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function xy(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function yy(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function vy(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function wy(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Yt(e,r)),n}function ky(e,t){const n={},r=l(t,["name"]);return r!=null&&d(n,["_url","name"],Yt(e,r)),n}function Cy(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Sy(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Ty(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Ey(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function _y(e){const t={},n=l(e,["config"]);return n!=null&&Ty(n,t),t}function Ny(e){const t={},n=l(e,["config"]);return n!=null&&Ey(n,t),t}function by(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function Iy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["cachedContents"],s)}return t}function Ay(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],gy(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],xy(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],ly(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function My(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],yy(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function Ry(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],Cy(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],Sy(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function Py(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>vy(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const c=l(e,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],f);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function Ly(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function Dy(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function Fy(e,t){const n={},r=l(t,["name"]);r!=null&&d(n,["_url","name"],Yt(e,r));const o=l(t,["config"]);return o!=null&&Ly(o,n),n}function Uy(e,t){const n={},r=l(t,["name"]);r!=null&&d(n,["_url","name"],Yt(e,r));const o=l(t,["config"]);return o!=null&&Dy(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vy extends Kt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new zn(Jt.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=cy(this.apiClient,t);return u=H("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const f=dy(this.apiClient,t);return u=H("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async get(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=ky(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const f=wy(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=py(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=my(p),h=new kc;return Object.assign(h,m),h})}else{const f=fy(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=hy(p),h=new kc;return Object.assign(h,m),h})}}async update(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Uy(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const f=Fy(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ny(t);return u=H("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Iy(p),h=new Cc;return Object.assign(h,m),h})}else{const f=_y(t);return u=H("cachedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=by(p),h=new Cc;return Object.assign(h,m),h})}}}function Ic(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ye(e){return this instanceof ye?(this.v=e,this):new ye(e)}function mr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(x){return function(w){return Promise.resolve(w).then(x,m)}}function u(x,w){r[x]&&(o[x]=function(C){return new Promise(function(N,v){s.push([x,C,N,v])>1||c(x,C)})},w&&(o[x]=w(o[x])))}function c(x,w){try{f(r[x](w))}catch(C){h(s[0][3],C)}}function f(x){x.value instanceof ye?Promise.resolve(x.value.v).then(p,m):h(s[0][2],x)}function p(x){c("next",x)}function m(x){c("throw",x)}function h(x,w){x(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function so(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ic=="function"?Ic(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(i){return new Promise(function(u,c){i=e[s](i),o(u,c,i.done,i.value)})}}function o(s,i,u,c){Promise.resolve(c).then(function(f){s({value:f,done:u})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gy(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:b0(n)}function b0(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function jy(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ac(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const o=[];let s=!0;for(;r<n&&e[r].role==="model";)o.push(e[r]),s&&!b0(e[r])&&(s=!1),r++;s?t.push(...o):t.pop()}return t}class $y{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Hy(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Hy{constructor(t,n,r,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),jy(s)}async sendMessage(t){var n;await this.sendPromise;const r=Je(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,u;const c=await o,f=(i=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,p=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(u=p.slice(m))!==null&&u!==void 0?u:[]);const x=f?[f]:[];this.recordHistory(r,x,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const r=Je(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,r)}getHistory(t=!1){const n=t?Ac(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return mr(this,arguments,function*(){var o,s,i,u,c,f;const p=[];try{for(var m=!0,h=so(t),x;x=yield ye(h.next()),o=x.done,!o;m=!0){u=x.value,m=!1;const w=u;if(Gy(w)){const C=(f=(c=w.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content;C!==void 0&&p.push(C)}yield yield ye(w)}}catch(w){s={error:w}}finally{try{!m&&!o&&(i=h.return)&&(yield ye(i.call(h)))}finally{if(s)throw s.error}}this.recordHistory(n,p)})}recordHistory(t,n,r){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Ac(r)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class li extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,li.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function By(e){const t={},n=l(e,["file"]);return n!=null&&d(t,["file"],n),t}function qy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function zy(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],k0(n)),t}function Jy(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Wy(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],k0(n)),t}function Oy(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Ky(e){const t={},n=l(e,["config"]);return n!=null&&Oy(n,t),t}function Yy(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qy extends Kt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new zn(Jt.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ky(t);return s=H("files",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Yy(c),p=new tx;return Object.assign(p,f),p})}}async createInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=By(t);return s=H("upload/v1beta/files",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=qy(c),p=new nx;return Object.assign(p,f),p})}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wy(t);return s=H("files/{file}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zy(t);return s=H("files/{file}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Jy(c),p=new rx;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cs(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Xy(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>hv(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function Zy(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ev(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function tv(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function nv(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const i=l(e,["enableAffectiveDialog"]);i!=null&&d(t,["enableAffectiveDialog"],i);const u=l(e,["frequencyPenalty"]);u!=null&&d(t,["frequencyPenalty"],u);const c=l(e,["logprobs"]);c!=null&&d(t,["logprobs"],c);const f=l(e,["maxOutputTokens"]);f!=null&&d(t,["maxOutputTokens"],f);const p=l(e,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const h=l(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const x=l(e,["responseMimeType"]);x!=null&&d(t,["responseMimeType"],x);const w=l(e,["responseModalities"]);w!=null&&d(t,["responseModalities"],w);const C=l(e,["responseSchema"]);C!=null&&d(t,["responseSchema"],C);const N=l(e,["routingConfig"]);N!=null&&d(t,["routingConfig"],N);const v=l(e,["seed"]);v!=null&&d(t,["seed"],v);const y=l(e,["speechConfig"]);y!=null&&d(t,["speechConfig"],I0(y));const g=l(e,["stopSequences"]);g!=null&&d(t,["stopSequences"],g);const E=l(e,["temperature"]);E!=null&&d(t,["temperature"],E);const S=l(e,["thinkingConfig"]);S!=null&&d(t,["thinkingConfig"],S);const k=l(e,["topK"]);k!=null&&d(t,["topK"],k);const T=l(e,["topP"]);if(T!=null&&d(t,["topP"],T),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function rv(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function ov(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function sv(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const f=l(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],ou(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const x=l(e,["enableAffectiveDialog"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],x);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],Xy(Je(w)));const C=l(e,["tools"]);if(t!==void 0&&C!=null){let k=Mr(C);Array.isArray(k)&&(k=k.map(T=>gv(Ar(T)))),d(t,["setup","tools"],k)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&d(t,["setup","sessionResumption"],mv(N));const v=l(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","inputAudioTranscription"],v);const y=l(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","outputAudioTranscription"],y);const g=l(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&d(t,["setup","realtimeInputConfig"],g);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&d(t,["setup","contextWindowCompression"],E);const S=l(e,["proactivity"]);return t!==void 0&&S!=null&&d(t,["setup","proactivity"],S),n}function iv(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],nv(r));const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const f=l(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],I0(ou(m)));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const x=l(e,["enableAffectiveDialog"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],x);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],Je(w));const C=l(e,["tools"]);if(t!==void 0&&C!=null){let k=Mr(C);Array.isArray(k)&&(k=k.map(T=>xv(Ar(T)))),d(t,["setup","tools"],k)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&d(t,["setup","sessionResumption"],N);const v=l(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","inputAudioTranscription"],v);const y=l(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","outputAudioTranscription"],y);const g=l(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&d(t,["setup","realtimeInputConfig"],g);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&d(t,["setup","contextWindowCompression"],E);const S=l(e,["proactivity"]);return t!==void 0&&S!=null&&d(t,["setup","proactivity"],S),n}function lv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],ce(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],sv(o,n)),n}function av(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],ce(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],iv(o,n)),n}function uv(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function dv(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["weightedPrompts"],r)}return t}function cv(e){const t={},n=l(e,["media"]);if(n!=null){let f=g0(n);Array.isArray(f)&&(f=f.map(p=>cs(p))),d(t,["mediaChunks"],f)}const r=l(e,["audio"]);r!=null&&d(t,["audio"],cs(y0(r)));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],cs(x0(s)));const i=l(e,["text"]);i!=null&&d(t,["text"],i);const u=l(e,["activityStart"]);u!=null&&d(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&d(t,["activityEnd"],c),t}function fv(e){const t={},n=l(e,["media"]);if(n!=null){let f=g0(n);Array.isArray(f)&&(f=f.map(p=>p)),d(t,["mediaChunks"],f)}const r=l(e,["audio"]);r!=null&&d(t,["audio"],y0(r));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],x0(s));const i=l(e,["text"]);i!=null&&d(t,["text"],i);const u=l(e,["activityStart"]);u!=null&&d(t,["activityStart"],u);const c=l(e,["activityEnd"]);return c!=null&&d(t,["activityEnd"],c),t}function pv(e){const t={},n=l(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const r=l(e,["serverContent"]);r!=null&&d(t,["serverContent"],r);const o=l(e,["toolCall"]);o!=null&&d(t,["toolCall"],o);const s=l(e,["toolCallCancellation"]);s!=null&&d(t,["toolCallCancellation"],s);const i=l(e,["usageMetadata"]);i!=null&&d(t,["usageMetadata"],yv(i));const u=l(e,["goAway"]);u!=null&&d(t,["goAway"],u);const c=l(e,["sessionResumptionUpdate"]);return c!=null&&d(t,["sessionResumptionUpdate"],c),t}function hv(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Zy(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],ev(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],cs(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function mv(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function I0(e){const t={},n=l(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],n);const r=l(e,["languageCode"]);if(r!=null&&d(t,["languageCode"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function gv(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],rv(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],ov(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function xv(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>tv(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const c=l(e,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],f);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function yv(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const r=l(e,["cachedContentTokenCount"]);r!=null&&d(t,["cachedContentTokenCount"],r);const o=l(e,["candidatesTokenCount"]);o!=null&&d(t,["responseTokenCount"],o);const s=l(e,["toolUsePromptTokenCount"]);s!=null&&d(t,["toolUsePromptTokenCount"],s);const i=l(e,["thoughtsTokenCount"]);i!=null&&d(t,["thoughtsTokenCount"],i);const u=l(e,["totalTokenCount"]);u!=null&&d(t,["totalTokenCount"],u);const c=l(e,["promptTokensDetails"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(w=>w)),d(t,["promptTokensDetails"],x)}const f=l(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(w=>w)),d(t,["cacheTokensDetails"],x)}const p=l(e,["candidatesTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(w=>w)),d(t,["responseTokensDetails"],x)}const m=l(e,["toolUsePromptTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(w=>w)),d(t,["toolUsePromptTokensDetails"],x)}const h=l(e,["trafficType"]);return h!=null&&d(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vv(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function wv(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],kv(r));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const i=l(e,["avgLogprobs"]);i!=null&&d(t,["avgLogprobs"],i);const u=l(e,["groundingMetadata"]);u!=null&&d(t,["groundingMetadata"],u);const c=l(e,["index"]);c!=null&&d(t,["index"],c);const f=l(e,["logprobsResult"]);f!=null&&d(t,["logprobsResult"],f);const p=l(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(x=>x)),d(t,["safetyRatings"],h)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function kv(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function Cv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let s=vt(o);Array.isArray(s)&&(s=s.map(i=>i)),d(n,["contents"],s)}return n}function Sv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["tokensInfo"],o)}return t}function Tv(e){const t={},n=l(e,["values"]);n!=null&&d(t,["values"],n);const r=l(e,["statistics"]);return r!=null&&d(t,["statistics"],Ev(r)),t}function Ev(e){const t={},n=l(e,["truncated"]);n!=null&&d(t,["truncated"],n);const r=l(e,["token_count"]);return r!=null&&d(t,["tokenCount"],r),t}function ai(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Lw(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function _v(e){const t={},n=l(e,["controlType"]);n!=null&&d(t,["controlType"],n);const r=l(e,["enableControlImageComputation"]);return r!=null&&d(t,["computeControl"],r),t}function Nv(e){const t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function bv(e,t){const n={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],Je(r));const o=l(e,["tools"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(u=>L0(u))),d(t,["tools"],i)}const s=l(e,["generationConfig"]);return t!==void 0&&s!=null&&d(t,["generationConfig"],vw(s)),n}function Iv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>ai(u))),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&Nv(s),n}function Av(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&bv(s,n),n}function Mv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);r!=null&&d(t,["totalTokens"],r);const o=l(e,["cachedContentTokenCount"]);return o!=null&&d(t,["cachedContentTokenCount"],o),t}function Rv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);return r!=null&&d(t,["totalTokens"],r),t}function Pv(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ce(e,r)),n}function Lv(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ce(e,r)),n}function Dv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Fv(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Uv(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const f=l(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const x=l(e,["language"]);t!==void 0&&x!=null&&d(t,["parameters","language"],x);const w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&d(t,["parameters","outputOptions","mimeType"],w);const C=l(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&d(t,["parameters","outputOptions","compressionQuality"],C);const N=l(e,["addWatermark"]);t!==void 0&&N!=null&&d(t,["parameters","addWatermark"],N);const v=l(e,["labels"]);t!==void 0&&v!=null&&d(t,["labels"],v);const y=l(e,["editMode"]);t!==void 0&&y!=null&&d(t,["parameters","editMode"],y);const g=l(e,["baseSteps"]);return t!==void 0&&g!=null&&d(t,["parameters","editConfig","baseSteps"],g),n}function Vv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>jw(c))),d(n,["instances[0]","referenceImages"],u)}const i=l(t,["config"]);return i!=null&&Uv(i,n),n}function Gv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ui(s))),d(t,["generatedImages"],o)}return t}function jv(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function $v(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&d(t,["instances[]","task_type"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["instances[]","title"],o);const s=l(e,["outputDimensionality"]);t!==void 0&&s!=null&&d(t,["parameters","outputDimensionality"],s);const i=l(e,["mimeType"]);t!==void 0&&i!=null&&d(t,["instances[]","mimeType"],i);const u=l(e,["autoTruncate"]);return t!==void 0&&u!=null&&d(t,["parameters","autoTruncate"],u),n}function Hv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let u=tu(e,o);Array.isArray(u)&&(u=u.map(c=>c)),d(n,["requests[]","content"],u)}const s=l(t,["config"]);s!=null&&jv(s,n);const i=l(t,["model"]);return i!==void 0&&d(n,["requests[]","model"],ce(e,i)),n}function Bv(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let i=tu(e,o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["instances[]","content"],i)}const s=l(t,["config"]);return s!=null&&$v(s,n),n}function qv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function zv(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Tv(i))),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function Jv(e){const t={},n=l(e,["endpoint"]);n!=null&&d(t,["name"],n);const r=l(e,["deployedModelId"]);return r!=null&&d(t,["deployedModelId"],r),t}function Wv(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Ov(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Kv(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&d(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Yv(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const r=l(e,["name"]);r!=null&&d(t,["name"],r);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const i=l(e,["response"]);i!=null&&d(t,["response"],i);const u=l(e,["responseJsonSchema"]);return u!=null&&d(t,["responseJsonSchema"],u),t}function Qv(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],ai(Je(o)));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const x=l(t,["presencePenalty"]);x!=null&&d(r,["presencePenalty"],x);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const C=l(t,["seed"]);C!=null&&d(r,["seed"],C);const N=l(t,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const v=l(t,["responseSchema"]);v!=null&&d(r,["responseSchema"],nu(v));const y=l(t,["responseJsonSchema"]);if(y!=null&&d(r,["responseJsonSchema"],y),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const g=l(t,["safetySettings"]);if(n!==void 0&&g!=null){let B=g;Array.isArray(B)&&(B=B.map(I=>$w(I))),d(n,["safetySettings"],B)}const E=l(t,["tools"]);if(n!==void 0&&E!=null){let B=Mr(E);Array.isArray(B)&&(B=B.map(I=>Ow(Ar(I)))),d(n,["tools"],B)}const S=l(t,["toolConfig"]);if(n!==void 0&&S!=null&&d(n,["toolConfig"],Ww(S)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(t,["cachedContent"]);n!==void 0&&k!=null&&d(n,["cachedContent"],Yt(e,k));const T=l(t,["responseModalities"]);T!=null&&d(r,["responseModalities"],T);const A=l(t,["mediaResolution"]);A!=null&&d(r,["mediaResolution"],A);const _=l(t,["speechConfig"]);if(_!=null&&d(r,["speechConfig"],ru(_)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(t,["thinkingConfig"]);M!=null&&d(r,["thinkingConfig"],M);const L=l(t,["imageConfig"]);L!=null&&d(r,["imageConfig"],Tw(L));const G=l(t,["enableEnhancedCivicAnswers"]);return G!=null&&d(r,["enableEnhancedCivicAnswers"],G),r}function Xv(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Je(o));const s=l(t,["temperature"]);s!=null&&d(r,["temperature"],s);const i=l(t,["topP"]);i!=null&&d(r,["topP"],i);const u=l(t,["topK"]);u!=null&&d(r,["topK"],u);const c=l(t,["candidateCount"]);c!=null&&d(r,["candidateCount"],c);const f=l(t,["maxOutputTokens"]);f!=null&&d(r,["maxOutputTokens"],f);const p=l(t,["stopSequences"]);p!=null&&d(r,["stopSequences"],p);const m=l(t,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const h=l(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);const x=l(t,["presencePenalty"]);x!=null&&d(r,["presencePenalty"],x);const w=l(t,["frequencyPenalty"]);w!=null&&d(r,["frequencyPenalty"],w);const C=l(t,["seed"]);C!=null&&d(r,["seed"],C);const N=l(t,["responseMimeType"]);N!=null&&d(r,["responseMimeType"],N);const v=l(t,["responseSchema"]);v!=null&&d(r,["responseSchema"],nu(v));const y=l(t,["responseJsonSchema"]);y!=null&&d(r,["responseJsonSchema"],y);const g=l(t,["routingConfig"]);g!=null&&d(r,["routingConfig"],g);const E=l(t,["modelSelectionConfig"]);E!=null&&d(r,["modelConfig"],E);const S=l(t,["safetySettings"]);if(n!==void 0&&S!=null){let z=S;Array.isArray(z)&&(z=z.map(ie=>ie)),d(n,["safetySettings"],z)}const k=l(t,["tools"]);if(n!==void 0&&k!=null){let z=Mr(k);Array.isArray(z)&&(z=z.map(ie=>L0(Ar(ie)))),d(n,["tools"],z)}const T=l(t,["toolConfig"]);n!==void 0&&T!=null&&d(n,["toolConfig"],T);const A=l(t,["labels"]);n!==void 0&&A!=null&&d(n,["labels"],A);const _=l(t,["cachedContent"]);n!==void 0&&_!=null&&d(n,["cachedContent"],Yt(e,_));const M=l(t,["responseModalities"]);M!=null&&d(r,["responseModalities"],M);const L=l(t,["mediaResolution"]);L!=null&&d(r,["mediaResolution"],L);const G=l(t,["speechConfig"]);G!=null&&d(r,["speechConfig"],P0(ru(G)));const B=l(t,["audioTimestamp"]);B!=null&&d(r,["audioTimestamp"],B);const I=l(t,["thinkingConfig"]);I!=null&&d(r,["thinkingConfig"],I);const Y=l(t,["imageConfig"]);if(Y!=null&&d(r,["imageConfig"],Ew(Y)),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Mc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>ai(u))),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],Qv(e,s,n)),n}function Rc(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["contents"]);if(o!=null){let i=vt(o);Array.isArray(i)&&(i=i.map(u=>u)),d(n,["contents"],i)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],Xv(e,s,n)),n}function Pc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>wv(f))),d(t,["candidates"],c)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const i=l(e,["responseId"]);i!=null&&d(t,["responseId"],i);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function Lc(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["candidates"],f)}const o=l(e,["createTime"]);o!=null&&d(t,["createTime"],o);const s=l(e,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);const i=l(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);const u=l(e,["responseId"]);u!=null&&d(t,["responseId"],u);const c=l(e,["usageMetadata"]);return c!=null&&d(t,["usageMetadata"],c),t}function Zv(e,t){const n={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const s=l(e,["guidanceScale"]);if(t!==void 0&&s!=null&&d(t,["parameters","guidanceScale"],s),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&d(t,["parameters","safetySetting"],i);const u=l(e,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const c=l(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&d(t,["parameters","includeSafetyAttributes"],c);const f=l(e,["includeRaiReason"]);t!==void 0&&f!=null&&d(t,["parameters","includeRaiReason"],f);const p=l(e,["language"]);t!==void 0&&p!=null&&d(t,["parameters","language"],p);const m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const h=l(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&d(t,["parameters","outputOptions","compressionQuality"],h),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=l(e,["imageSize"]);if(t!==void 0&&x!=null&&d(t,["parameters","sampleImageSize"],x),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ew(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&d(t,["parameters","guidanceScale"],u);const c=l(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);const f=l(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&d(t,["parameters","includeRaiReason"],h);const x=l(e,["language"]);t!==void 0&&x!=null&&d(t,["parameters","language"],x);const w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&d(t,["parameters","outputOptions","mimeType"],w);const C=l(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&d(t,["parameters","outputOptions","compressionQuality"],C);const N=l(e,["addWatermark"]);t!==void 0&&N!=null&&d(t,["parameters","addWatermark"],N);const v=l(e,["labels"]);t!==void 0&&v!=null&&d(t,["labels"],v);const y=l(e,["imageSize"]);t!==void 0&&y!=null&&d(t,["parameters","sampleImageSize"],y);const g=l(e,["enhancePrompt"]);return t!==void 0&&g!=null&&d(t,["parameters","enhancePrompt"],g),n}function tw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&Zv(s,n),n}function nw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&ew(s,n),n}function rw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>mw(i))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],M0(o)),t}function ow(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>ui(i))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],R0(o)),t}function sw(e,t){const n={},r=l(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(e,["durationSeconds"]);if(t!==void 0&&o!=null&&d(t,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const i=l(e,["resolution"]);t!==void 0&&i!=null&&d(t,["parameters","resolution"],i);const u=l(e,["personGeneration"]);if(t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(e,["negativePrompt"]);t!==void 0&&c!=null&&d(t,["parameters","negativePrompt"],c);const f=l(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&d(t,["parameters","enhancePrompt"],f),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=l(e,["lastFrame"]);t!==void 0&&p!=null&&d(t,["instances[0]","lastFrame"],di(p));const m=l(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(x=>l1(x))),d(t,["instances[0]","referenceImages"],h)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function iw(e,t){const n={},r=l(e,["numberOfVideos"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const s=l(e,["fps"]);t!==void 0&&s!=null&&d(t,["parameters","fps"],s);const i=l(e,["durationSeconds"]);t!==void 0&&i!=null&&d(t,["parameters","durationSeconds"],i);const u=l(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const c=l(e,["aspectRatio"]);t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c);const f=l(e,["resolution"]);t!==void 0&&f!=null&&d(t,["parameters","resolution"],f);const p=l(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);const m=l(e,["pubsubTopic"]);t!==void 0&&m!=null&&d(t,["parameters","pubsubTopic"],m);const h=l(e,["negativePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","negativePrompt"],h);const x=l(e,["enhancePrompt"]);t!==void 0&&x!=null&&d(t,["parameters","enhancePrompt"],x);const w=l(e,["generateAudio"]);t!==void 0&&w!=null&&d(t,["parameters","generateAudio"],w);const C=l(e,["lastFrame"]);t!==void 0&&C!=null&&d(t,["instances[0]","lastFrame"],It(C));const N=l(e,["referenceImages"]);if(t!==void 0&&N!=null){let g=N;Array.isArray(g)&&(g=g.map(E=>a1(E))),d(t,["instances[0]","referenceImages"],g)}const v=l(e,["mask"]);t!==void 0&&v!=null&&d(t,["instances[0]","mask"],i1(v));const y=l(e,["compressionQuality"]);return t!==void 0&&y!=null&&d(t,["parameters","compressionQuality"],y),n}function lw(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response","generateVideoResponse"]);return i!=null&&d(t,["response"],cw(i)),t}function aw(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],fw(i)),t}function uw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],di(s));const i=l(t,["video"]);i!=null&&d(n,["instances[0]","video"],D0(i));const u=l(t,["source"]);u!=null&&pw(u,n);const c=l(t,["config"]);return c!=null&&sw(c,n),n}function dw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],It(s));const i=l(t,["video"]);i!=null&&d(n,["instances[0]","video"],F0(i));const u=l(t,["source"]);u!=null&&hw(u,n);const c=l(t,["config"]);return c!=null&&iw(c,n),n}function cw(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>xw(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function fw(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>yw(i))),d(t,["generatedVideos"],s)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function pw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],di(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],D0(s)),n}function hw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],It(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],F0(s)),n}function mw(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],_w(n));const r=l(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const o=l(e,["_self"]);return o!=null&&d(t,["safetyAttributes"],M0(o)),t}function ui(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],A0(n));const r=l(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const o=l(e,["_self"]);o!=null&&d(t,["safetyAttributes"],R0(o));const s=l(e,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function gw(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["mask"],A0(n));const r=l(e,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["labels"],o)}return t}function xw(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],o1(n)),t}function yw(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],s1(n)),t}function vw(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const i=l(e,["enableAffectiveDialog"]);i!=null&&d(t,["enableAffectiveDialog"],i);const u=l(e,["frequencyPenalty"]);u!=null&&d(t,["frequencyPenalty"],u);const c=l(e,["logprobs"]);c!=null&&d(t,["logprobs"],c);const f=l(e,["maxOutputTokens"]);f!=null&&d(t,["maxOutputTokens"],f);const p=l(e,["mediaResolution"]);p!=null&&d(t,["mediaResolution"],p);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const h=l(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);const x=l(e,["responseMimeType"]);x!=null&&d(t,["responseMimeType"],x);const w=l(e,["responseModalities"]);w!=null&&d(t,["responseModalities"],w);const C=l(e,["responseSchema"]);C!=null&&d(t,["responseSchema"],C);const N=l(e,["routingConfig"]);N!=null&&d(t,["routingConfig"],N);const v=l(e,["seed"]);v!=null&&d(t,["seed"],v);const y=l(e,["speechConfig"]);y!=null&&d(t,["speechConfig"],P0(y));const g=l(e,["stopSequences"]);g!=null&&d(t,["stopSequences"],g);const E=l(e,["temperature"]);E!=null&&d(t,["temperature"],E);const S=l(e,["thinkingConfig"]);S!=null&&d(t,["thinkingConfig"],S);const k=l(e,["topK"]);k!=null&&d(t,["topK"],k);const T=l(e,["topP"]);if(T!=null&&d(t,["topP"],T),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function ww(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ce(e,r)),n}function kw(e,t){const n={},r=l(t,["model"]);return r!=null&&d(n,["_url","name"],ce(e,r)),n}function Cw(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Sw(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Tw(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Ew(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const r=l(e,["imageSize"]);r!=null&&d(t,["imageSize"],r);const o=l(e,["outputMimeType"]);o!=null&&d(t,["imageOutputOptions","mimeType"],o);const s=l(e,["outputCompressionQuality"]);return s!=null&&d(t,["imageOutputOptions","compressionQuality"],s),t}function _w(e){const t={},n=l(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],Sn(n));const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function A0(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["imageBytes"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function di(e){const t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],Sn(n));const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function It(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["imageBytes"]);r!=null&&d(t,["bytesBase64Encoded"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function Nw(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=l(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],C0(e,u)),r}function bw(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const i=l(t,["filter"]);n!==void 0&&i!=null&&d(n,["_query","filter"],i);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&d(n,["_url","models_url"],C0(e,u)),r}function Iw(e,t){const n={},r=l(t,["config"]);return r!=null&&Nw(e,r,n),n}function Aw(e,t){const n={},r=l(t,["config"]);return r!=null&&bw(e,r,n),n}function Mw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let s=S0(o);Array.isArray(s)&&(s=s.map(i=>Ql(i))),d(t,["models"],s)}return t}function Rw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let s=S0(o);Array.isArray(s)&&(s=s.map(i=>Xl(i))),d(t,["models"],s)}return t}function Pw(e){const t={},n=l(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const r=l(e,["segmentationClasses"]);r!=null&&d(t,["maskClasses"],r);const o=l(e,["maskDilation"]);return o!=null&&d(t,["dilation"],o),t}function Ql(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["version"]);s!=null&&d(t,["version"],s);const i=l(e,["_self"]);i!=null&&d(t,["tunedModelInfo"],Kw(i));const u=l(e,["inputTokenLimit"]);u!=null&&d(t,["inputTokenLimit"],u);const c=l(e,["outputTokenLimit"]);c!=null&&d(t,["outputTokenLimit"],c);const f=l(e,["supportedGenerationMethods"]);f!=null&&d(t,["supportedActions"],f);const p=l(e,["temperature"]);p!=null&&d(t,["temperature"],p);const m=l(e,["maxTemperature"]);m!=null&&d(t,["maxTemperature"],m);const h=l(e,["topP"]);h!=null&&d(t,["topP"],h);const x=l(e,["topK"]);x!=null&&d(t,["topK"],x);const w=l(e,["thinking"]);return w!=null&&d(t,["thinking"],w),t}function Xl(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["displayName"]);r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["versionId"]);s!=null&&d(t,["version"],s);const i=l(e,["deployedModels"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>Jv(h))),d(t,["endpoints"],m)}const u=l(e,["labels"]);u!=null&&d(t,["labels"],u);const c=l(e,["_self"]);c!=null&&d(t,["tunedModelInfo"],Yw(c));const f=l(e,["defaultCheckpointId"]);f!=null&&d(t,["defaultCheckpointId"],f);const p=l(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),d(t,["checkpoints"],m)}return t}function Lw(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Wv(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],Ov(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],vv(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function Dw(e){const t={},n=l(e,["productImage"]);return n!=null&&d(t,["image"],It(n)),t}function Fw(e,t){const n={},r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const o=l(e,["baseSteps"]);t!==void 0&&o!=null&&d(t,["parameters","baseSteps"],o);const s=l(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const i=l(e,["seed"]);t!==void 0&&i!=null&&d(t,["parameters","seed"],i);const u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&d(t,["parameters","safetySetting"],u);const c=l(e,["personGeneration"]);t!==void 0&&c!=null&&d(t,["parameters","personGeneration"],c);const f=l(e,["addWatermark"]);t!==void 0&&f!=null&&d(t,["parameters","addWatermark"],f);const p=l(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);const m=l(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","compressionQuality"],m);const h=l(e,["enhancePrompt"]);t!==void 0&&h!=null&&d(t,["parameters","enhancePrompt"],h);const x=l(e,["labels"]);return t!==void 0&&x!=null&&d(t,["labels"],x),n}function Uw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["source"]);o!=null&&Gw(o,n);const s=l(t,["config"]);return s!=null&&Fw(s,n),n}function Vw(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ui(o))),d(t,["generatedImages"],r)}return t}function Gw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["personImage"]);t!==void 0&&o!=null&&d(t,["instances[0]","personImage","image"],It(o));const s=l(e,["productImages"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>Dw(u))),d(t,["instances[0]","productImages"],i)}return n}function jw(e){const t={},n=l(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],It(n));const r=l(e,["referenceId"]);r!=null&&d(t,["referenceId"],r);const o=l(e,["referenceType"]);o!=null&&d(t,["referenceType"],o);const s=l(e,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],Pw(s));const i=l(e,["controlImageConfig"]);i!=null&&d(t,["controlImageConfig"],_v(i));const u=l(e,["styleImageConfig"]);u!=null&&d(t,["styleImageConfig"],u);const c=l(e,["subjectImageConfig"]);return c!=null&&d(t,["subjectImageConfig"],c),t}function M0(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function R0(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function $w(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function Hw(e){const t={},n=l(e,["image"]);return n!=null&&d(t,["image"],It(n)),t}function Bw(e,t){const n={},r=l(e,["mode"]);t!==void 0&&r!=null&&d(t,["parameters","mode"],r);const o=l(e,["maxPredictions"]);t!==void 0&&o!=null&&d(t,["parameters","maxPredictions"],o);const s=l(e,["confidenceThreshold"]);t!==void 0&&s!=null&&d(t,["parameters","confidenceThreshold"],s);const i=l(e,["maskDilation"]);t!==void 0&&i!=null&&d(t,["parameters","maskDilation"],i);const u=l(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&d(t,["parameters","binaryColorThreshold"],u);const c=l(e,["labels"]);return t!==void 0&&c!=null&&d(t,["labels"],c),n}function qw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["source"]);o!=null&&Jw(o,n);const s=l(t,["config"]);return s!=null&&Bw(s,n),n}function zw(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>gw(o))),d(t,["generatedMasks"],r)}return t}function Jw(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&d(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],It(o));const s=l(e,["scribbleImage"]);return t!==void 0&&s!=null&&d(t,["instances[0]","scribble"],Hw(s)),n}function P0(e){const t={},n=l(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],n);const r=l(e,["languageCode"]);if(r!=null&&d(t,["languageCode"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Ww(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],Kv(n));const r=l(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],r),t}function Ow(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],Cw(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],Sw(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function L0(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Yv(h))),d(t,["functionDeclarations"],m)}const r=l(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(e,["codeExecution"]);i!=null&&d(t,["codeExecution"],i);const u=l(e,["enterpriseWebSearch"]);u!=null&&d(t,["enterpriseWebSearch"],u);const c=l(e,["googleMaps"]);c!=null&&d(t,["googleMaps"],c);const f=l(e,["googleSearch"]);f!=null&&d(t,["googleSearch"],f);const p=l(e,["urlContext"]);return p!=null&&d(t,["urlContext"],p),t}function Kw(e){const t={},n=l(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function Yw(e){const t={},n=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function Qw(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function Xw(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function Zw(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","name"],ce(e,r));const o=l(t,["config"]);return o!=null&&Qw(o,n),n}function e1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["config"]);return o!=null&&Xw(o,n),n}function t1(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const o=l(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&d(t,["parameters","safetySetting"],o);const s=l(e,["personGeneration"]);t!==void 0&&s!=null&&d(t,["parameters","personGeneration"],s);const i=l(e,["includeRaiReason"]);t!==void 0&&i!=null&&d(t,["parameters","includeRaiReason"],i);const u=l(e,["outputMimeType"]);t!==void 0&&u!=null&&d(t,["parameters","outputOptions","mimeType"],u);const c=l(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&d(t,["parameters","outputOptions","compressionQuality"],c);const f=l(e,["enhanceInputImage"]);t!==void 0&&f!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=l(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const h=l(e,["numberOfImages"]);t!==void 0&&h!=null&&d(t,["parameters","sampleCount"],h);const x=l(e,["mode"]);return t!==void 0&&x!=null&&d(t,["parameters","mode"],x),n}function n1(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["_url","model"],ce(e,r));const o=l(t,["image"]);o!=null&&d(n,["instances[0]","image"],It(o));const s=l(t,["upscaleFactor"]);s!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=l(t,["config"]);return i!=null&&t1(i,n),n}function r1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ui(s))),d(t,["generatedImages"],o)}return t}function o1(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],Sn(r));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function s1(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function i1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["_self"],It(n));const r=l(e,["maskMode"]);return r!=null&&d(t,["maskMode"],r),t}function l1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],di(n));const r=l(e,["referenceType"]);return r!=null&&d(t,["referenceType"],r),t}function a1(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],It(n));const r=l(e,["referenceType"]);return r!=null&&d(t,["referenceType"],r),t}function D0(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const r=l(e,["videoBytes"]);r!=null&&d(t,["encodedVideo"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["encoding"],o),t}function F0(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["gcsUri"],n);const r=l(e,["videoBytes"]);r!=null&&d(t,["bytesBase64Encoded"],Sn(r));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["displayName"],r),n}function d1(e){const t={},n=l(e,["config"]);return n!=null&&u1(n,t),t}function c1(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function f1(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&c1(r,t),t}function p1(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function h1(e,t){const n={},r=l(e,["customMetadata"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["customMetadata"],s)}const o=l(e,["chunkingConfig"]);return t!==void 0&&o!=null&&d(t,["chunkingConfig"],o),n}function m1(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const r=l(e,["metadata"]);r!=null&&d(t,["metadata"],r);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const i=l(e,["response"]);return i!=null&&d(t,["response"],x1(i)),t}function g1(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const r=l(e,["fileName"]);r!=null&&d(t,["fileName"],r);const o=l(e,["config"]);return o!=null&&h1(o,t),t}function x1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&d(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function y1(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function v1(e){const t={},n=l(e,["config"]);return n!=null&&y1(n,t),t}function w1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["fileSearchStores"],s)}return t}function U0(e,t){const n={},r=l(e,["mimeType"]);t!==void 0&&r!=null&&d(t,["mimeType"],r);const o=l(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const s=l(e,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>c)),d(t,["customMetadata"],u)}const i=l(e,["chunkingConfig"]);return t!==void 0&&i!=null&&d(t,["chunkingConfig"],i),n}function k1(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const r=l(e,["config"]);return r!=null&&U0(r,t),t}function C1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S1="Content-Type",T1="X-Server-Timeout",E1="User-Agent",Zl="x-goog-api-client",_1="1.32.0",N1=`google-genai-sdk/${_1}`,b1="v1beta1",I1="v1beta";class A1{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:b1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:I1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[i,u]of Object.entries(t.queryParams))o.searchParams.append(i,String(u));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?r[o]=Object.assign(Object.assign({},r[o]),s):s!==void 0&&(r[o]=s);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,o){if(n&&n.timeout||o){const s=new AbortController,i=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=i}return n&&n.extraBody!==null&&M1(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Dc(o),new Ol(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Dc(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return mr(this,arguments,function*(){var r;const o=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let i="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield ye(o.read());if(f){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=s.decode(p,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const C=JSON.parse(JSON.stringify(w.error)),N=C.status,v=C.code,y=`got status: ${N}. ${JSON.stringify(w)}`;if(v>=400&&v<600)throw new li({message:y,status:v})}}catch(w){if(w.name==="ApiError")throw w}i+=m;let h=-1,x=0;for(;;){h=-1,x=0;for(const N of c){const v=i.indexOf(N);v!==-1&&(h===-1||v<h)&&(h=v,x=N.length)}if(h===-1)break;const w=i.substring(0,h);i=i.substring(h+x);const C=w.trim();if(C.startsWith(u)){const N=C.substring(u.length).trim();try{const v=new Response(N,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ye(new Ol(v))}catch(v){throw new Error(`exception parsing stream chunk ${N}. ${v}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=N1+" "+this.clientOptions.userAgentExtra;return t[E1]=n,t[Zl]=n,t[S1]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))r.append(o,s);t.timeout&&t.timeout>0&&r.append(T1,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,i=await s.stat(t);o.sizeBytes=String(i.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const c={file:o},f=this.getFileName(t),p=H("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(p,o.sizeBytes,o.mimeType,f,c,n==null?void 0:n.httpOptions);return s.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,r){var o;const s=this.clientOptions.uploader,i=await s.stat(n),u=String(i.size),c=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:i.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&U0(r,m);const h=await this.fetchUploadUrl(f,u,c,p,m,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,o,s,i){var u;let c={};i?c=i:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const f=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=f==null?void 0:f.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Dc(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new li({message:o,status:n}):new Error(o)}}function M1(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,i){const u=Object.assign({},s);for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const f=i[c],p=u[c];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?u[c]=r(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),u[c]=f)}return u}const o=r(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R1="mcp_used/unknown";let P1=!1;function V0(e){for(const t of e)if(L1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return P1}function G0(e){var t;const n=(t=e[Zl])!==null&&t!==void 0?t:"";e[Zl]=(n+` ${R1}`).trimStart()}function L1(e){return e!==null&&typeof e=="object"&&e instanceof su}function D1(e){return mr(this,arguments,function*(n,r=100){let o,s=0;for(;s<r;){const i=yield ye(n.listTools({cursor:o}));for(const u of i.tools)yield yield ye(u),s++;if(!i.nextCursor)break;o=i.nextCursor}})}class su{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new su(t,n)}async initialize(){var t,n,r,o;if(this.mcpTools.length>0)return;const s={},i=[];for(const p of this.mcpClients)try{for(var u=!0,c=(n=void 0,so(D1(p))),f;f=await c.next(),t=f.done,!t;u=!0){o=f.value,u=!1;const m=o;i.push(m);const h=m.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=p}}catch(m){n={error:m}}finally{try{!u&&!t&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),px(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await o.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function F1(e,t,n){const r=new sx;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),t(r)}class U1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=j1(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const p=new Promise(g=>{f=g}),m=t.callbacks,h=function(){f({})},x=this.apiClient,w={onopen:h,onmessage:g=>{F1(x,m.onmessage,g)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(g){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(g){}},C=this.webSocketFactory.create(c,G1(i),w);C.connect(),await p;const y={setup:{model:ce(this.apiClient,t.model)}};return C.send(JSON.stringify(y)),new V1(C,this.apiClient)}}class V1{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=dv(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=uv(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ir.PLAY)}pause(){this.sendPlaybackControl(ir.PAUSE)}stop(){this.sendPlaybackControl(ir.STOP)}resetContext(){this.sendPlaybackControl(ir.RESET_CONTEXT)}close(){this.conn.close()}}function G1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function j1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function H1(e,t,n){const r=new ox;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const i=pv(s);Object.assign(r,i)}else Object.assign(r,s);t(r)}class B1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new U1(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,o,s,i,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&V0(t.config.tools)&&G0(m);const h=W1(m);if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const _=this.apiClient.getApiKey();let M="BidiGenerateContent",L="key";_!=null&&_.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",L="access_token"),p=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${M}?${L}=${_}`}let x=()=>{};const w=new Promise(_=>{x=_}),C=t.callbacks,N=function(){var _;(_=C==null?void 0:C.onopen)===null||_===void 0||_.call(C),x({})},v=this.apiClient,y={onopen:N,onmessage:_=>{H1(v,C.onmessage,_)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=C==null?void 0:C.onclose)!==null&&r!==void 0?r:function(_){}},g=this.webSocketFactory.create(p,J1(h),y);g.connect(),await w;let E=ce(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const _=this.apiClient.getProject(),M=this.apiClient.getLocation();E=`projects/${_}/locations/${M}/`+E}let S={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Vs.AUDIO]}:t.config.responseModalities=[Vs.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(u=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&u!==void 0?u:[],T=[];for(const _ of k)if(this.isCallableTool(_)){const M=_;T.push(await M.tool())}else T.push(_);T.length>0&&(t.config.tools=T);const A={model:E,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?S=av(this.apiClient,A):S=lv(this.apiClient,A),delete S.config,g.send(JSON.stringify(S)),new z1(g,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const q1={turnComplete:!0};class z1{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=vt(n.turns),t.isVertexAI()||(r=r.map(o=>ai(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error($1)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},q1),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fv(t)}:n={realtimeInput:cv(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function J1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function W1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fc=10;function Uc(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(gr(i)){o=!0;break}if(!o)return!0;const s=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function gr(e){return"callTool"in e&&typeof e.callTool=="function"}function O1(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>gr(o)))!==null&&r!==void 0?r:!1}function Vc(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,o)=>{if(gr(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Gc(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K1 extends Kt{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,o,s,i,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!O1(n)||Uc(n.config))return await this.generateContentInternal(c);const f=Vc(n);if(f.length>0){const C=f.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let p,m;const h=vt(c.contents),x=(s=(o=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Fc;let w=0;for(;w<x&&(p=await this.generateContentInternal(c),!(!p.functionCalls||p.functionCalls.length===0));){const C=p.candidates[0].content,N=[];for(const v of(u=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&u!==void 0?u:[])if(gr(v)){const g=await v.callTool(p.functionCalls);N.push(...g)}w++,m={role:"user",parts:N},c.contents=vt(c.contents),c.contents.push(C),c.contents.push(m),Gc(c.config)&&(h.push(C),h.push(m))}return Gc(c.config)&&(p.automaticFunctionCallingHistory=h),p},this.generateContentStream=async n=>{var r,o,s,i,u;if(this.maybeMoveToResponseJsonSchem(n),Uc(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=Vc(n);if(c.length>0){const m=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(s=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,p=(u=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let s;const i=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:i.push(c);let u;return s?u={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new zn(Jt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,s,i,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(s=n.source)===null||s===void 0?void 0:s.video)===null||i===void 0)&&i.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const i=await Promise.all(s.map(async c=>gr(c)?await c.tool():c)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(u.config.tools=i,t.config&&t.config.tools&&V0(t.config.tools)){const c=(o=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),G0(f),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(t){var n,r,o;const s=new Map;for(const i of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(gr(i)){const u=i,c=await u.tool();for(const f of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,u)}}return s}async processAfcStream(t){var n,r,o;const s=(o=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Fc;let i=!1,u=0;const c=await this.initAfcToolsMap(t);return function(f,p,m){return mr(this,arguments,function*(){for(var h,x,w,C,N,v;u<s;){i&&(u++,i=!1);const S=yield ye(f.processParamsMaybeAddMcpUsage(m)),k=yield ye(f.generateContentStreamInternal(S)),T=[],A=[];try{for(var y=!0,g=(x=void 0,so(k)),E;E=yield ye(g.next()),h=E.done,!h;y=!0){C=E.value,y=!1;const _=C;if(yield yield ye(_),_.candidates&&(!((N=_.candidates[0])===null||N===void 0)&&N.content)){A.push(_.candidates[0].content);for(const M of(v=_.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<s&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(M.functionCall.name)){const L=yield ye(p.get(M.functionCall.name).callTool([M.functionCall]));T.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(_){x={error:_}}finally{try{!y&&!h&&(w=g.return)&&(yield ye(w.call(g)))}finally{if(x)throw x.error}}if(T.length>0){i=!0;const _=new qr;_.candidates=[{content:{role:"user",parts:T}}],yield yield ye(_);const M=[];M.push(...A),M.push({role:"user",parts:T});const L=vt(m.contents).concat(M);m.contents=L}else break}})}(this,c,t)}async generateContentInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Rc(this.apiClient,t);return u=H("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Lc(p),h=new qr;return Object.assign(h,m),h})}else{const f=Mc(this.apiClient,t);return u=H("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Pc(p),h=new qr;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Rc(this.apiClient,t);return u=H("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(m){return mr(this,arguments,function*(){var h,x,w,C;try{for(var N=!0,v=so(m),y;y=yield ye(v.next()),h=y.done,!h;N=!0){C=y.value,N=!1;const g=C,E=Lc(yield ye(g.json()));E.sdkHttpResponse={headers:g.headers};const S=new qr;Object.assign(S,E),yield yield ye(S)}}catch(g){x={error:g}}finally{try{!N&&!h&&(w=v.return)&&(yield ye(w.call(v)))}finally{if(x)throw x.error}}})})}else{const f=Mc(this.apiClient,t);return u=H("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(m){return mr(this,arguments,function*(){var h,x,w,C;try{for(var N=!0,v=so(m),y;y=yield ye(v.next()),h=y.done,!h;N=!0){C=y.value,N=!1;const g=C,E=Pc(yield ye(g.json()));E.sdkHttpResponse={headers:g.headers};const S=new qr;Object.assign(S,E),yield yield ye(S)}}catch(g){x={error:g}}finally{try{!N&&!h&&(w=v.return)&&(yield ye(w.call(v)))}finally{if(x)throw x.error}}})})}}async embedContent(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Bv(this.apiClient,t);return u=H("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=zv(p),h=new hc;return Object.assign(h,m),h})}else{const f=Hv(this.apiClient,t);return u=H("{model}:batchEmbedContents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=qv(p),h=new hc;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=nw(this.apiClient,t);return u=H("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=ow(p),h=new mc;return Object.assign(h,m),h})}else{const f=tw(this.apiClient,t);return u=H("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=rw(p),h=new mc;return Object.assign(h,m),h})}}async editImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Vv(this.apiClient,t);return s=H("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Gv(c),p=new Wg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=n1(this.apiClient,t);return s=H("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=r1(c),p=new Og;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Uw(this.apiClient,t);return s=H("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=Vw(c),p=new Kg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=qw(this.apiClient,t);return s=H("{model}:predict",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=zw(c),p=new Yg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=kw(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Xl(p))}else{const f=ww(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Ql(p))}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Aw(this.apiClient,t);return u=H("{models_url}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Rw(p),h=new gc;return Object.assign(h,m),h})}else{const f=Iw(this.apiClient,t);return u=H("{models_url}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Mw(p),h=new gc;return Object.assign(h,m),h})}}async update(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=e1(this.apiClient,t);return u=H("{model}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Xl(p))}else{const f=Zw(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Ql(p))}}async delete(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Lv(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Fv(p),h=new xc;return Object.assign(h,m),h})}else{const f=Pv(this.apiClient,t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Dv(p),h=new xc;return Object.assign(h,m),h})}}async countTokens(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Av(this.apiClient,t);return u=H("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Rv(p),h=new yc;return Object.assign(h,m),h})}else{const f=Iv(this.apiClient,t);return u=H("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Mv(p),h=new yc;return Object.assign(h,m),h})}}async computeTokens(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Cv(this.apiClient,t);return s=H("{model}:computeTokens",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const f=Sv(c),p=new Qg;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=dw(this.apiClient,t);return u=H("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const m=aw(p),h=new Gs;return Object.assign(h,m),h})}else{const f=uw(this.apiClient,t);return u=H("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>{const m=lw(p),h=new Gs;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y1 extends Kt{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=$g(t);return u=H("{operationName}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i}else{const f=jg(t);return u=H("{operationName}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i}}async fetchPredictVideosOperationInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=Pg(t);return s=H("{resourceName}:fetchPredictOperation",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q1(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function X1(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>lk(s))),d(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&d(t,["role"],r),t}function Z1(e,t,n){const r={},o=l(t,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const s=l(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&d(n,["newSessionExpireTime"],s);const i=l(t,["uses"]);n!==void 0&&i!=null&&d(n,["uses"],i);const u=l(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&d(n,["bidiGenerateContentSetup"],ik(e,u));const c=l(t,["lockAdditionalFields"]);return n!==void 0&&c!=null&&d(n,["fieldMask"],c),r}function ek(e,t){const n={},r=l(t,["config"]);return r!=null&&d(n,["config"],Z1(e,r,n)),n}function tk(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function nk(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const r=l(e,["args"]);r!=null&&d(t,["args"],r);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function rk(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function ok(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function sk(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const i=l(e,["topP"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","topP"],i);const u=l(e,["topK"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","topK"],u);const c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","maxOutputTokens"],c);const f=l(e,["mediaResolution"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","mediaResolution"],f);const p=l(e,["seed"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","seed"],p);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],ou(m));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);const x=l(e,["enableAffectiveDialog"]);t!==void 0&&x!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],x);const w=l(e,["systemInstruction"]);t!==void 0&&w!=null&&d(t,["setup","systemInstruction"],X1(Je(w)));const C=l(e,["tools"]);if(t!==void 0&&C!=null){let k=Mr(C);Array.isArray(k)&&(k=k.map(T=>uk(Ar(T)))),d(t,["setup","tools"],k)}const N=l(e,["sessionResumption"]);t!==void 0&&N!=null&&d(t,["setup","sessionResumption"],ak(N));const v=l(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&d(t,["setup","inputAudioTranscription"],v);const y=l(e,["outputAudioTranscription"]);t!==void 0&&y!=null&&d(t,["setup","outputAudioTranscription"],y);const g=l(e,["realtimeInputConfig"]);t!==void 0&&g!=null&&d(t,["setup","realtimeInputConfig"],g);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&d(t,["setup","contextWindowCompression"],E);const S=l(e,["proactivity"]);return t!==void 0&&S!=null&&d(t,["setup","proactivity"],S),n}function ik(e,t){const n={},r=l(t,["model"]);r!=null&&d(n,["setup","model"],ce(e,r));const o=l(t,["config"]);return o!=null&&d(n,["config"],sk(o,n)),n}function lk(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],tk(s));const i=l(e,["functionCall"]);i!=null&&d(t,["functionCall"],nk(i));const u=l(e,["functionResponse"]);u!=null&&d(t,["functionResponse"],u);const c=l(e,["inlineData"]);c!=null&&d(t,["inlineData"],Q1(c));const f=l(e,["text"]);f!=null&&d(t,["text"],f);const p=l(e,["thought"]);p!=null&&d(t,["thought"],p);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const h=l(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function ak(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function uk(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>m)),d(t,["functionDeclarations"],p)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&d(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const i=l(e,["codeExecution"]);if(i!=null&&d(t,["codeExecution"],i),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],rk(u));const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],ok(c));const f=l(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dk(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function ck(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=dk(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(f=>i.includes(f)?`generationConfig.${f}`:f));const c=[];s&&c.push(s),u.length>0&&c.push(...u),c.length>0?e.fieldMask=c.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class fk extends Kt{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=ek(this.apiClient,t);s=H("auth_tokens",u._url),i=u._query,delete u.config,delete u._url,delete u._query;const c=ck(u,t.config);return o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pk(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function hk(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&pk(r,t),t}function mk(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function gk(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function xk(e){const t={},n=l(e,["parent"]);n!=null&&d(t,["_url","parent"],n);const r=l(e,["config"]);return r!=null&&gk(r,t),t}function yk(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const o=l(e,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),d(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vk extends Kt{constructor(t){super(),this.apiClient=t,this.list=async n=>new zn(Jt.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mk(t);return s=H("{name}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=hk(t);o=H("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xk(t);return s=H("{parent}/documents",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=yk(c),p=new Xg;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wk extends Kt{constructor(t,n=new vk(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new zn(Jt.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=d1(t);return s=H("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=p1(t);return s=H("{name}",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=f1(t);o=H("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=v1(t);return s=H("fileSearchStores",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=w1(c),p=new Zg;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=k1(t);return s=H("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=C1(c),p=new ex;return Object.assign(p,f),p})}}async importFile(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=g1(t);return s=H("{file_search_store_name}:importFile",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const f=m1(c),p=new Za;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kk(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Ck(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Sk(e,t){const n={},r=l(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function Tk(e,t){const n={},r=l(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function Ek(e,t,n){const r={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&d(t,["displayName"],o),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(e,["epochCount"]);t!==void 0&&s!=null&&d(t,["tuningTask","hyperparameters","epochCount"],s);const i=l(e,["learningRateMultiplier"]);if(i!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(e,["batchSize"]);t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","batchSize"],u);const c=l(e,["learningRate"]);if(t!==void 0&&c!=null&&d(t,["tuningTask","hyperparameters","learningRate"],c),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function _k(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const x=l(e,["validationDataset"]);t!==void 0&&x!=null&&d(t,["supervisedTuningSpec"],jc(x))}else if(o==="PREFERENCE_TUNING"){const x=l(e,["validationDataset"]);t!==void 0&&x!=null&&d(t,["preferenceOptimizationSpec"],jc(x))}const s=l(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&d(t,["tunedModelDisplayName"],s);const i=l(e,["description"]);t!==void 0&&i!=null&&d(t,["description"],i);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const x=l(e,["epochCount"]);t!==void 0&&x!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(u==="PREFERENCE_TUNING"){const x=l(e,["epochCount"]);t!==void 0&&x!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const x=l(e,["learningRateMultiplier"]);t!==void 0&&x!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(c==="PREFERENCE_TUNING"){const x=l(e,["learningRateMultiplier"]);t!==void 0&&x!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const x=l(e,["exportLastCheckpointOnly"]);t!==void 0&&x!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(f==="PREFERENCE_TUNING"){const x=l(e,["exportLastCheckpointOnly"]);t!==void 0&&x!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let p=l(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const x=l(e,["adapterSize"]);t!==void 0&&x!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(p==="PREFERENCE_TUNING"){const x=l(e,["adapterSize"]);t!==void 0&&x!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const h=l(e,["beta"]);return t!==void 0&&h!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function Nk(e,t){const n={},r=l(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&Vk(s);const i=l(e,["config"]);return i!=null&&Ek(i,n),n}function bk(e,t){const n={},r=l(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&Gk(s,n,t);const i=l(e,["config"]);return i!=null&&_k(i,n,t),n}function Ik(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Ak(e,t){const n={},r=l(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function Mk(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const i=l(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),r}function Rk(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const i=l(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),r}function Pk(e,t){const n={},r=l(e,["config"]);return r!=null&&Mk(r,n),n}function Lk(e,t){const n={},r=l(e,["config"]);return r!=null&&Rk(r,n),n}function Dk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tunedModels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>j0(u))),d(n,["tuningJobs"],i)}return n}function Fk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tuningJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(u=>ea(u))),d(n,["tuningJobs"],i)}return n}function Uk(e,t){const n={},r=l(e,["name"]);r!=null&&d(n,["model"],r);const o=l(e,["name"]);return o!=null&&d(n,["endpoint"],o),n}function Vk(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(e,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["examples","examples"],o)}return n}function Gk(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=l(e,["gcsUri"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=l(e,["gcsUri"]);t!==void 0&&i!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let s=l(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=l(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=l(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function j0(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],w0(s));const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const u=l(e,["tuningTask","startTime"]);u!=null&&d(n,["startTime"],u);const c=l(e,["tuningTask","completeTime"]);c!=null&&d(n,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(n,["updateTime"],f);const p=l(e,["description"]);p!=null&&d(n,["description"],p);const m=l(e,["baseModel"]);m!=null&&d(n,["baseModel"],m);const h=l(e,["_self"]);return h!=null&&d(n,["tunedModel"],Uk(h)),n}function ea(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],w0(s));const i=l(e,["createTime"]);i!=null&&d(n,["createTime"],i);const u=l(e,["startTime"]);u!=null&&d(n,["startTime"],u);const c=l(e,["endTime"]);c!=null&&d(n,["endTime"],c);const f=l(e,["updateTime"]);f!=null&&d(n,["updateTime"],f);const p=l(e,["error"]);p!=null&&d(n,["error"],p);const m=l(e,["description"]);m!=null&&d(n,["description"],m);const h=l(e,["baseModel"]);h!=null&&d(n,["baseModel"],h);const x=l(e,["tunedModel"]);x!=null&&d(n,["tunedModel"],x);const w=l(e,["preTunedModel"]);w!=null&&d(n,["preTunedModel"],w);const C=l(e,["supervisedTuningSpec"]);C!=null&&d(n,["supervisedTuningSpec"],C);const N=l(e,["preferenceOptimizationSpec"]);N!=null&&d(n,["preferenceOptimizationSpec"],N);const v=l(e,["tuningDataStats"]);v!=null&&d(n,["tuningDataStats"],v);const y=l(e,["encryptionSpec"]);y!=null&&d(n,["encryptionSpec"],y);const g=l(e,["partnerModelTuningSpec"]);g!=null&&d(n,["partnerModelTuningSpec"],g);const E=l(e,["customBaseModel"]);E!=null&&d(n,["customBaseModel"],E);const S=l(e,["experiment"]);S!=null&&d(n,["experiment"],S);const k=l(e,["labels"]);k!=null&&d(n,["labels"],k);const T=l(e,["outputUri"]);T!=null&&d(n,["outputUri"],T);const A=l(e,["pipelineJob"]);A!=null&&d(n,["pipelineJob"],A);const _=l(e,["serviceAccount"]);_!=null&&d(n,["serviceAccount"],_);const M=l(e,["tunedModelDisplayName"]);M!=null&&d(n,["tunedModelDisplayName"],M);const L=l(e,["veoTuningSpec"]);return L!=null&&d(n,["veoTuningSpec"],L),n}function jk(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["metadata"]);s!=null&&d(n,["metadata"],s);const i=l(e,["done"]);i!=null&&d(n,["done"],i);const u=l(e,["error"]);return u!=null&&d(n,["error"],u),n}function jc(e,t){const n={},r=l(e,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const o=l(e,["vertexDatasetResource"]);return o!=null&&d(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $k extends Kt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new zn(Jt.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:Wl.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ak(t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>ea(p))}else{const f=Ik(t);return u=H("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>j0(p))}}async listInternal(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Lk(t);return u=H("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Fk(p),h=new vc;return Object.assign(h,m),h})}else{const f=Pk(t);return u=H("tunedModels",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Dk(p),h=new vc;return Object.assign(h,m),h})}}async cancel(t){var n,r,o,s;let i,u="",c={};if(this.apiClient.isVertexAI()){const f=Ck(t);return u=H("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Tk(p),h=new wc;return Object.assign(h,m),h})}else{const f=kk(t);return u=H("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),i.then(p=>{const m=Sk(p),h=new wc;return Object.assign(h,m),h})}}async tuneInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const u=bk(t,t);return s=H("tuningJobs",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>ea(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Nk(t);return s=H("tunedModels",u._url),i=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>jk(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hk{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Bk=1024*1024*8,qk=3,zk=1e3,Jk=2,$s="x-goog-upload-status";async function Wk(e,t,n){var r;const o=await $0(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[$s])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Ok(e,t,n){var r;const o=await $0(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[$s])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=h0(s),u=new eu;return Object.assign(u,i),u}async function $0(e,t,n){var r,o;let s=0,i=0,u=new Ol(new Response),c="upload";for(s=e.size;i<s;){const f=Math.min(Bk,s-i),p=e.slice(i,i+f);i+f>=s&&(c+=", finalize");let m=0,h=zk;for(;m<qk&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(i),"Content-Length":String(f)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[$s]));)m++,await Yk(h),h=h*Jk;if(i+=f,((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[$s])!=="active")break;if(s<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Kk(e){return{size:e.size,type:e.type}}function Yk(e){return new Promise(t=>setTimeout(t,e))}class Qk{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Wk(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Ok(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Kk(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xk{create(t,n,r){return new Zk(t,n,r)}}class Zk{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $c="x-goog-api-key";class eC{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get($c)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append($c,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tC="gl-node/";class Er{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=Mg(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new eC(this.apiKey);this.apiClient=new A1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:tC+"web",uploader:new Qk,downloader:new Hk}),this.models=new K1(this.apiClient),this.live=new B1(this.apiClient,o,new Xk),this.batches=new iy(this.apiClient),this.chats=new $y(this.models,this.apiClient),this.caches=new Vy(this.apiClient),this.files=new Qy(this.apiClient),this.operations=new Y1(this.apiClient),this.authTokens=new fk(this.apiClient),this.tunings=new $k(this.apiClient),this.fileSearchStores=new wk(this.apiClient)}}const Ye=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),fs=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"})}),ci=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),sn=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),fi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.036-2.134H8.716c-1.126 0-2.036.954-2.036 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),ta=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-2.695A8.25 8.25 0 005.166 6.166L2 9.348"})}),pi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),Wt=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),He=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Qt=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),nC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.832A1.5 1.5 0 015.25 3.5h13.5a1.5 1.5 0 011.5 1.5v1.168a1.5 1.5 0 01-1.5 1.5h-1.5v1.5a1.5 1.5 0 01-3 0v-1.5H9v1.5a1.5 1.5 0 01-3 0v-1.5H4.5a1.5 1.5 0 01-1.5-1.5V4.832zM21 14.5a.75.75 0 000-1.5h-18a.75.75 0 000 1.5h18z"})}),rC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 4c4.418 0 8 3.358 8 7.5c0 1.901 -.755 3.637 -2 4.96l0 2.54a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1v-2.54c-1.245 -1.322 -2 -3.058 -2 -4.96c0 -4.142 3.582 -7.5 8 -7.5z"}),a.jsx("path",{d:"M10 17v3"}),a.jsx("path",{d:"M14 17v3"}),a.jsx("path",{d:"M9 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),a.jsx("path",{d:"M15 11m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),oC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.047 8.287 8.287 0 009 9.601a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.468 5.99 5.99 0 00-1.925 3.547 5.975 5.975 0 01-2.133-1.001A3.75 3.75 0 0012 18z"})]}),H0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z"})}),Ve=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),hi=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z"}),a.jsx("path",{d:"M5 13l6 6"}),a.jsx("path",{d:"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365"}),a.jsx("path",{d:"M10 5.5l-2 -2.5h-5v5l3 2.5"})]}),sC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M14.7 13.5c-1.1 -2 -1.441 -2.5 -2.7 -2.5c-1.259 0 -1.736 .755 -2.836 2.747c-.942 1.703 -2.846 1.845 -3.321 3.291c-.097 .265 -.145 .677 -.143 .962c0 1.176 .787 2 1.8 2c1.259 0 3 -1 4.5 -1s3.241 1 4.5 1c1.013 0 1.8 -.823 1.8 -2c0 -.285 -.049 -.697 -.146 -.962c-.475 -1.451 -2.512 -1.835 -3.454 -3.538z"}),a.jsx("path",{d:"M20.188 8.082a1.039 1.039 0 0 0 -.406 -.082h-.015c-.735 .012 -1.56 .75 -1.993 1.866c-.519 1.335 -.28 2.7 .538 3.052c.129 .055 .267 .082 .406 .082c.739 0 1.575 -.742 2.011 -1.866c.516 -1.335 .273 -2.7 -.54 -3.052z"}),a.jsx("path",{d:"M9.474 9c.055 0 .109 0 .163 -.011c.944 -.128 1.533 -1.346 1.32 -2.722c-.203 -1.297 -1.047 -2.267 -1.932 -2.267c-.055 0 -.109 0 -.163 .011c-.944 .128 -1.533 1.346 -1.32 2.722c.204 1.293 1.048 2.267 1.933 2.267z"}),a.jsx("path",{d:"M16.456 6.733c.214 -1.376 -.375 -2.594 -1.32 -2.722a1.164 1.164 0 0 0 -.162 -.011c-.885 0 -1.728 .97 -1.93 2.267c-.214 1.376 .375 2.594 1.32 2.722c.054 .007 .108 .011 .162 .011c.885 0 1.73 -.974 1.93 -2.267z"}),a.jsx("path",{d:"M5.69 12.918c.816 -.352 1.054 -1.719 .536 -3.052c-.436 -1.124 -1.271 -1.866 -2.009 -1.866c-.14 0 -.277 .027 -.407 .082c-.816 .352 -1.054 1.719 -.536 3.052c.436 1.124 1.271 1.866 2.009 1.866c.14 0 .277 -.027 .407 -.082z"})]}),iC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13h4l1-3h8l1-3H8L7 10H3v3zm10 0v5h4v-5h-4z"}),a.jsx("rect",{x:"14",y:"14",width:"2",height:"3",rx:"1",fill:"currentColor",fillOpacity:"0.2"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7h2v2h-2z"})]}),lC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M17 3h4v4"}),a.jsx("path",{d:"M21 3l-15 15"}),a.jsx("path",{d:"M3 18h3v3"}),a.jsx("path",{d:"M16.5 20c1.576 -1.576 2.5 -4.095 2.5 -6.5c0 -4.81 -3.69 -8.5 -8.5 -8.5c-2.415 0 -4.922 .913 -6.5 2.5l12.5 12.5z"})]}),aC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3"}),a.jsx("path",{d:"M4 14l8 -3l8 3"})]}),B0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})}),Pr=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.25,stroke:"currentColor",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 10.663c0 -4.224 -4.041 -7.663 -9 -7.663s-9 3.439 -9 7.663c0 3.783 3.201 6.958 7.527 7.56c1.053 .239 .932 .644 .696 2.133c-.039 .238 -.184 .932 .777 .512c.96 -.42 5.18 -3.201 7.073 -5.48c1.304 -1.504 1.927 -3.029 1.927 -4.715v-.01z"})]}),uC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M21 10.663c0 -4.224 -4.041 -7.663 -9 -7.663s-9 3.439 -9 7.663c0 3.783 3.201 6.958 7.527 7.56c1.053 .239 .932 .644 .696 2.133c-.039 .238 -.184 .932 .777 .512c.96 -.42 5.18 -3.201 7.073 -5.48c1.304 -1.504 1.927 -3.029 1.927 -4.715v-.01z"})]}),Hs=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})}),mi=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),q0=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Tn=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),_r=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),dC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M12 17.25h.008v.008H12v-.008z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),cC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}),fC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),iu=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),pC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),hC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M16 9v6a5 5 0 0 1 -10 0v-4l3 3"}),a.jsx("path",{d:"M16 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),a.jsx("path",{d:"M16 5v-2"})]}),mC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M4 20l10 -10m0 -5v5h5m-9 -1v5h5m-9 -1v5h5m-5 -5l4 -4l4 -4"}),a.jsx("path",{d:"M19 10c.638 -.636 1 -1.515 1 -2.486a3.515 3.515 0 0 0 -3.517 -3.514c-.97 0 -1.847 .367 -2.483 1m-3 13l4 -4l4 -4"})]}),gC=({className:e="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[a.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.jsx("path",{d:"M10 16v5"}),a.jsx("path",{d:"M14 16v5"}),a.jsx("path",{d:"M9 9h6l-1 7h-4z"}),a.jsx("path",{d:"M5 11c1.333 -1.333 2.667 -2 4 -2"}),a.jsx("path",{d:"M19 11c-1.333 -1.333 -2.667 -2 -4 -2"}),a.jsx("path",{d:"M12 4m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"})]}),xC=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})}),gi="https://script.google.com/macros/s/AKfycbzbvAajmyWMO4dLe2OeukVbJ9wtOVi_-W2Zadc4qMLlbgyaQ-yTDKTPnPT57Y7DmcVB/exec";let Ko=null;const Pt={},xi=()=>Ko||(console.log("Fetching AI Database (Icons & Skills)..."),Ko=fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"GET_DATA"})}).then(e=>e.json()).then(e=>{if(e.data&&Array.isArray(e.data)){let t=0,n=0,r=0,o=0;e.data.forEach(s=>{const i=Object.values(s).map(h=>String(h).trim()),u=i.find(h=>h.startsWith("Skill_")),c=i.find(h=>h.startsWith("NPC_ICON_")),f=i.find(h=>h.startsWith("Ability Memo _")),p=i.find(h=>h.startsWith("Item Memo _")),m=h=>{let x=s.aiCode||s.AI_||s.B||s.B||s.b||s.description||s.;if(!x||String(x).trim()===h){const w=i.filter(C=>C!==h&&C.length>2);w.length>0&&(x=w.sort((C,N)=>N.length-C.length)[0])}return x?String(x).trim():null};if(u){const h=u.replace(/^Skill_/,"").trim(),x=m(u);x&&(Pt[h]=x,n++)}if(f){const h=m(f);h&&(Pt[f]=h,r++)}if(p){const h=m(p);h&&(Pt[p]=h,o++)}if(c){let h=s.aiCode||s.AI_||s.B||s.B||s.b;if(!h||String(h).trim()===c){const x=["undead","robot","elemental","insect","beast","scientist","gunner","archer","mage","tank","warrior","citizen","person","fishhook","bigman","feather"];h=i.find(w=>x.includes(w.toLowerCase()))}h&&(localStorage.setItem(c,String(h).trim()),t++)}if(!u&&!c&&!f&&!p){let h=s.author||s.||s.C||s.C||s.c||s.name||s.,x=s.aiCode||s.AI_||s.B||s.B||s.b||s.description||s.;if(h&&x){const w=String(h).trim();!w.startsWith("NPC_ICON_")&&!w.startsWith("Skill_")&&!w.startsWith("Ability Memo")&&!w.startsWith("Item Memo")&&(Pt[w]=String(x).trim(),n++)}}}),console.log(`AI DB Loaded: Icons(${t}), Skills(${n}), Abilities(${r}), Items(${o})`)}}).catch(e=>{console.warn("Failed to load AI Database",e)}),Ko),na=[];let zr=!1;const ra=async()=>{if(zr||na.length===0)return;zr=!0;const e=na.shift();if(!e){zr=!1;return}try{const{npc:t,resolve:n}=e,r=`NPC_ICON_${t.name}`,o=localStorage.getItem(r);if(o){console.log(`[Queue] Icon found in storage for ${t.name}, skipping AI.`),n(o),zr=!1,setTimeout(ra,0);return}console.log(`[Queue] Generating AI Icon for ${t.name}...`);const s=new Er({apiKey:{}.API_KEY}),i=["undead","robot","elemental","insect","beast","scientist","gunner","archer","mage","tank","warrior","citizen","person","fishhook","bigman","feather"],u=`
            Analyze the following RPG Character (NPC) and select the most appropriate icon key from the list.
            
            [Icon Keys]
            ${i.join(", ")}

            [NPC Data]
            Name: ${t.name}
            Description: ${t.description}
            Stats: ${t.stats.map(m=>`${m.label}:${m.value}`).join(", ")}
            Actions: ${t.actions.map(m=>m.category).join(", ")}

            Rule: Return ONLY the selected key as a plain string. If unsure, return 'person'.
        `,f=(await s.models.generateContent({model:"gemini-2.5-flash",contents:u})).text||"person",p=i.find(m=>f.includes(m))||"person";localStorage.setItem(r,p),fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:p,author:r}})}).catch(m=>console.warn("Failed to save icon to DB",m)),n(p)}catch(t){console.error("NPC Icon Analysis Failed:",t),e.resolve("person")}finally{setTimeout(()=>{zr=!1,ra()},500)}},yC=(e,t)=>{na.push({npc:e,resolve:t}),ra()},Hc={:"            .",:"     .     .",:"          .",:" ,            ."," ":"  .     .","  ":"  .       .",:"        .",:"   .     .",:"     . , ,   .",:"        .",:"     .   .",:"        .",:",         .",:"        .",:"        .",:"  . , ,   .",:"       .",:"       ."," ":"      ."," ":"       ."," ":"        ."," ":"  ,   / ."," ":"       .",:" , ,     .",:"  ,      .",:" , ,       ."," ":"       .",:",        .",:"       .",:"         .",:", ,     .",:"      ."," ":"       ."," ":"     .",:"       ."},z0={" ":" .     ."," ":", , ,      .",:"     ,   .",:" , ,  .    0    .      ."," ":"   . (: , ,  )     ."," ":"      .   ."," ":"   , /     ."," ":"   .    .",:",    .   .",:",       .",:"  .    () .",:"  .","  ":"  NPC ,    .",:"     .",:"        ."},Bc=e=>{if(typeof e!="object"||e===null||!e.alignment)return"text-left";switch(e.alignment.toUpperCase()){case"CENTER":return"text-center";case"END":return"text-right";case"JUSTIFY":return"text-justify";case"START":default:return"text-left"}return"text-left"},lu=e=>e?typeof e=="string"?e:e.runs?e.runs.map(t=>t.text||"").join(""):e.text||"":"",ne=e=>lu(e).replace(/\[npc\]|\[skill\]/gi,"").trim(),lr=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(lu).join(" ");return/\[npc\]/i.test(t)},xr=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(lu).join(" ");return/\[skill\]/i.test(t)},Dn=e=>e.type!=="table"||!e.rows?!1:e.rows.flat().map(ne).join(" ").includes("[passive]"),Fn=e=>{if(e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return/\[obstacle\]|\[object\]/i.test(t)||e.rows.length>0&&ne(e.rows[0][0]).includes("")&&(ne(e.rows[0][1]).includes("")||ne(e.rows[0][1]).includes(""))},Un=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim());return t.some(n=>n.includes(""))&&t.some(n=>n.includes(""))&&t.some(n=>n.includes(""))},Bs=e=>{if(lr(e)||xr(e)||Dn(e)||Fn(e)||Un(e)||e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return t.includes("")&&t.includes("")},io=e=>{if(lr(e)||xr(e)||Dn(e)||Fn(e)||Un(e)||e.type!=="table"||!e.rows)return!1;const t=e.rows.flat().map(ne).join(" ");return t.includes("")?!1:t.includes("")&&t.includes("")},lo=e=>{var r;if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=ne((r=e.rows[0])==null?void 0:r[0]).trim(),n=e.rows[1].map(o=>ne(o).trim());return t==="Q & A"&&n[0]===""&&n[1]===""&&n[2]===""},qi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<1||lo(e))return!1;const t=e.rows[0].map(n=>ne(n).trim());return t[0]===""&&t[1]===""&&t[2]===""},Yo=e=>e.type!=="table"||!e.rows||Bs(e)||io(e)||lo(e)||xr(e)||Dn(e)||Fn(e)||Un(e)?!1:e.rows.length===1&&e.rows[0].length===3,zi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim()).join(" ");return t.includes("")&&t.includes("")&&t.includes("")},Ji=e=>{var r;if(e.type!=="table"||!e.rows||e.rows.length<2||ne(((r=e.rows[0])==null?void 0:r[0])||"").trim()!=="")return!1;const n=e.rows.flat().map(o=>ne(o)).join(" ");return n.includes("")||n.includes("")||n.includes("")||n.includes("")},Wi=e=>{if(e.type!=="table"||!e.rows||e.rows.length<2)return!1;const t=e.rows[0].map(n=>ne(n).trim()).join(" ");return t.includes(" ")&&t.includes(" ")},qc=(e,t)=>{if(e.type!=="paragraph"||!e.isBold||!e.text||!e.text.includes(".")||!t||t.type!=="table"||!t.rows||t.rows.length===0)return!1;const n=t.rows.flat().map(ne).join(" ");return(n.includes("")||n.includes(" ")||n.includes(" "))&&e.text.length<150},Oi=e=>{var u,c,f;if(e.type!=="table"||!e.rows||e.rows.length<3)return!1;const t=ne((u=e.rows[0])==null?void 0:u[0]),n=((c=e.rows[1])==null?void 0:c.map(ne).join(" "))||"",r=ne((f=e.rows[2])==null?void 0:f[0]).trim(),o=t.includes("."),s=n.includes("")||n.includes(" ")||n.includes(" "),i=[" "," ",""," "," ."].some(p=>r.startsWith(p));return Bs(e)||io(e)||Dn(e)||Fn(e)||Un(e)?!1:o&&s&&i},zc=e=>{let t=e.text||"";return!t&&e.runs&&(t=e.runs.map(n=>n.text).join("")),t=t.trim(),t.startsWith("M:")||t.startsWith("M :")?"M":t.startsWith("L:")||t.startsWith("L :")?"L":null},J0=e=>{switch(e){case"":case"":case" ":return"bg-red-500/10 text-red-600 dark:text-red-300 border-red-500/20";case"":case"":return"bg-blue-500/10 text-blue-600 dark:text-blue-300 border-blue-500/20";case"":case"":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-300 border-emerald-500/20";case"":case"":return"bg-sky-500/10 text-sky-600 dark:text-sky-300 border-sky-500/20";case"":case"":return"bg-violet-500/10 text-violet-600 dark:text-violet-300 border-violet-500/20";case" ":return"bg-teal-500/10 text-teal-600 dark:text-teal-300 border-teal-500/20";case" ":return"bg-orange-500/10 text-orange-600 dark:text-orange-300 border-orange-500/20";case"":return"bg-slate-500/10 text-slate-600 dark:text-slate-300 border-slate-500/20";case"":case"":return"bg-amber-500/10 text-amber-600 dark:text-amber-300 border-amber-500/20";case"":case" ":return"bg-indigo-500/10 text-indigo-600 dark:text-indigo-300 border-indigo-500/20";case"":case"":return"bg-yellow-500/10 text-yellow-600 dark:text-yellow-300 border-yellow-500/20";case"":return"bg-rose-500/10 text-rose-600 dark:text-rose-300 border-rose-500/20";case"":return"bg-fuchsia-500/10 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500/20";case"":return"bg-purple-500/10 text-purple-600 dark:text-purple-300 border-purple-500/20";case"":return"bg-lime-500/10 text-lime-600 dark:text-lime-300 border-lime-500/20";default:return"bg-slate-200 dark:bg-slate-700/30 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600/30"}},vC=(e,t,n,r)=>{var i,u,c,f;const o=new Set,s=(e+" "+t).toLowerCase();if(r==="ability"){s.includes(" ")?o.add(" "):s.includes(" ")?o.add(" "):(s.includes("")||s.includes(""))&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/ |||/)&&o.add(""),s.includes("")&&o.add(""),s.includes("1")||s.includes("")?o.add(""):(s.includes("")||s.includes("")||s.includes(""))&&o.add("");const p=s.match(/(\d+)\s*/);p&&parseInt(p[1],10)>=3&&o.add("");const m=(i=n.find(x=>x.label.includes("")))==null?void 0:i.value;m&&m!=="-"&&m!==""?o.add(""):(m==="-"||m==="")&&o.add("");const h=(u=n.find(x=>x.label.includes("")))==null?void 0:u.value;if(h&&h!=="-"&&String(h).length>2){o.add("");const x=String(h);["","","","","",""].some(C=>x.includes(C))&&o.add("")}}else{s.match(/|||||||||||/)?o.add(" "):s.match(/||||||||||||/)?o.add(" "):s.match(//)&&o.add(""),s.match(/|||/)?o.add(""):s.match(/||||||/)?o.add(""):o.add("");const p=String(((c=n.find(x=>x.label.includes("")))==null?void 0:c.value)||"0"),m=parseInt(p.replace(/[^0-9]/g,"")||"0");m>=5?o.add(""):m<=1&&o.add("");const h=(f=n.find(x=>x.label.includes("")))==null?void 0:f.value;h&&h!=="-"&&o.add("")}return o.has("")&&o.has("")&&o.delete(""),Array.from(o)},Mo=({tableId:e,rowCount:t})=>!e||t<=0?null:a.jsx("div",{className:"absolute top-0 left-0 w-full h-0 overflow-visible pointer-events-none",children:Array.from({length:t}).map((n,r)=>a.jsx("div",{id:`${e}-row-${r}`,className:"absolute top-0"},r))}),wC=({rows:e,id:t})=>{const[n,r]=b.useState(null);if(!e||e.length<2)return null;const o=e[0].map((f,p)=>{var w,C;const m=ne(f).trim(),h=ne(((w=e[1])==null?void 0:w[p])||"").trim(),x=ne(((C=e[2])==null?void 0:C[p])||"").trim();return{title:m,description:h,examples:x}}),s=f=>f.includes("")?{wrapper:"border-orange-500/30 bg-orange-50 dark:bg-orange-900/10 hover:bg-orange-100 dark:hover:bg-orange-900/20 hover:border-orange-500/50",iconBg:"bg-orange-100 dark:bg-orange-500/20",iconColor:"text-orange-600 dark:text-orange-400",titleColor:"text-orange-600 dark:text-orange-400",icon:a.jsx(hi,{className:"w-6 h-6"}),analysisBg:"bg-orange-100 dark:bg-orange-900/40"}:f.includes("")?{wrapper:"border-teal-500/30 bg-teal-50 dark:bg-teal-900/10 hover:bg-teal-100 dark:hover:bg-teal-900/20 hover:border-teal-500/50",iconBg:"bg-teal-100 dark:bg-teal-500/20",iconColor:"text-teal-600 dark:text-teal-400",titleColor:"text-teal-600 dark:text-teal-400",icon:a.jsx(Ve,{className:"w-6 h-6"}),analysisBg:"bg-teal-100 dark:bg-teal-900/40"}:{wrapper:"border-indigo-500/30 bg-indigo-50 dark:bg-indigo-900/10 hover:bg-indigo-100 dark:hover:bg-indigo-900/20 hover:border-indigo-500/50",iconBg:"bg-indigo-100 dark:bg-indigo-500/20",iconColor:"text-indigo-600 dark:text-indigo-400",titleColor:"text-indigo-600 dark:text-indigo-400",icon:a.jsx(Tn,{className:"w-6 h-6"}),analysisBg:"bg-indigo-100 dark:bg-indigo-900/40"},i=f=>f.includes("")?"  (' ', '', ' ' )    ,  ,         .             ** ** .":f.includes("")?"  ('', '' )     ,       .         ** ** .":"  ('', '' )   ''  ,         .      ( )  ** ** .",u=(f,p)=>{r(h=>h===p?null:p);const m=f.currentTarget;m.classList.remove("highlight-animate"),m.offsetWidth,m.classList.add("highlight-animate"),setTimeout(()=>m.classList.remove("highlight-animate"),3e3)},c=f=>f.split(/(\*\*.*?\*\*)/g).map((m,h)=>m.startsWith("**")&&m.endsWith("**")?a.jsx("strong",{className:"text-slate-900 dark:text-white font-bold",children:m.slice(2,-2)},h):a.jsx("span",{children:m},h));return a.jsxs("div",{id:t,"data-highlight-container":"true",className:"not-prose my-8 scroll-mt-24",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((f,p)=>{const m=s(f.title),h=n===p,x=i(f.title);return a.jsxs("div",{onClick:w=>u(w,p),className:`flex flex-col p-6 rounded-2xl border transition-all duration-300 cursor-pointer shadow-lg overflow-hidden min-h-[280px] relative group ${m.wrapper}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-20",children:[a.jsx("h4",{className:`text-xl font-bold ${m.titleColor}`,children:f.title}),a.jsx("div",{className:`p-2 rounded-lg ${m.iconBg} ${m.iconColor} transition-transform duration-300 ${h?"scale-110 rotate-12":""}`,children:m.icon})]}),a.jsxs("div",{className:"relative flex-grow",children:[a.jsxs("div",{className:`
                                        transition-all duration-500 ease-in-out absolute top-0 left-0 w-full h-full flex flex-col
                                        ${h?"opacity-0 -translate-x-full pointer-events-none":"opacity-100 translate-x-0 relative"}
                                    `,children:[a.jsx("div",{className:"flex-grow mb-6",children:a.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap",children:f.description})}),f.examples&&a.jsxs("div",{className:"pt-4 border-t border-slate-300 dark:border-slate-700/50 mt-auto",children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.examples.split(",").map((w,C)=>{const N=w.trim();return N?a.jsx("span",{className:"text-xs px-2 py-1 bg-white dark:bg-slate-800 rounded border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:N},C):null})})]}),a.jsx("div",{className:"mt-4 text-center text-xs text-slate-500 dark:text-slate-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:"   "})]}),a.jsxs("div",{className:`
                                        transition-all duration-500 ease-in-out absolute top-0 left-0 w-full h-full flex flex-col
                                        ${h?"opacity-100 translate-x-0 relative":"opacity-0 translate-x-full pointer-events-none"}
                                    `,children:[a.jsxs("div",{className:`p-4 rounded-xl border border-slate-300 dark:border-white/10 ${m.analysisBg} flex-grow flex flex-col`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-300 dark:border-white/10 pb-2",children:[a.jsx(Qt,{className:`w-4 h-4 ${m.iconColor}`}),a.jsx("span",{className:`text-sm font-bold ${m.titleColor}`,children:"  "})]}),a.jsx("p",{className:"text-slate-700 dark:text-slate-200 text-sm leading-relaxed",children:c(x)})]}),a.jsx("div",{className:"mt-4 text-center text-xs text-slate-500 font-medium",children:"   "})]})]})]},p)})})]})},Jc=({rows:e,id:t,itemIds:n})=>{const[r,o]=b.useState(null),s=b.useMemo(()=>!e||e.length<=1?[]:e.slice(1).map(u=>{const f=ne(u[0]).trim().split(/\n+/),p=f.length>1?f.slice(0,-1).join(`
`).trim():f[0].trim(),m=f.length>1?f[f.length-1].trim():"";return{question:p,asker:m,category:ne(u[1]).trim(),answer:ne(u[2]).trim()}}),[e]),i=u=>{o(r===u?null:u)};return a.jsx("div",{id:t,"data-highlight-container":"true",className:"space-y-4 not-prose my-8 p-4 bg-slate-100 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 scroll-mt-24 relative",children:s.map((u,c)=>a.jsxs("div",{id:n?n[c]:t?`${t}-row-${c+1}`:void 0,className:`bg-white dark:bg-slate-800 rounded-lg shadow-md transition-all duration-300 ease-in-out border scroll-mt-24 ${r===c?"border-cyan-500 ring-2 ring-cyan-500/50":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[a.jsx("button",{onClick:()=>i(c),className:"w-full text-left p-4 focus:outline-none","aria-expanded":r===c,children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(pi,{className:"w-7 h-7 text-cyan-600 dark:text-cyan-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight",children:u.question})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 mt-3 pl-10",children:[u.category&&a.jsx("span",{className:"font-semibold bg-slate-200 dark:bg-slate-700 text-cyan-700 dark:text-cyan-400 px-2 py-0.5 rounded",children:u.category}),a.jsx("span",{children:""}),a.jsxs("span",{children:[": ",u.asker]})]})]}),a.jsx("div",{className:"transition-transform duration-300 ease-in-out flex-shrink-0",style:{transform:r===c?"rotate(45deg)":"rotate(0deg)"},children:a.jsx(Ye,{className:"w-6 h-6 text-slate-400"})})]})}),a.jsx("div",{className:`faq-answer-wrapper ${r===c?"open":""}`,children:a.jsx("div",{className:"faq-answer-content",children:a.jsx("div",{className:"px-4 pb-5 pt-3 border-t border-slate-200 dark:border-slate-700/70",children:a.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:u.answer})})})})]},c))})},kC=({rows:e,id:t,type:n})=>{const r=b.useMemo(()=>{const i=[];return e.forEach(u=>{u.forEach(c=>{let f=ne(c).trim();if(f=f.replace(/\[passive\]|\[obstacle\]|\[object\]/gi,"").trim(),!f)return;f.split(/\r?\n/).map(m=>m.trim()).filter(Boolean).forEach(m=>{let h=m,x="";const w=m.indexOf(" - ");if(w!==-1)h=m.substring(0,w).trim(),x=m.substring(w+3).trim();else{const C=m.indexOf("-");C!==-1&&C>0&&(h=m.substring(0,C).trim(),x=m.substring(C+1).trim())}h&&i.push({title:h,description:x})})})}),i},[e]),o=n==="obstacle"?{border:"border-orange-500/50",bg:"bg-orange-500/5",hoverBorder:"hover:border-orange-400",iconColor:"text-orange-600 dark:text-orange-500",titleColor:"text-orange-700 dark:text-orange-400",icon:a.jsx(q0,{className:"w-8 h-8"})}:{border:"border-indigo-500/50",bg:"bg-indigo-500/5",hoverBorder:"hover:border-indigo-400",iconColor:"text-indigo-600 dark:text-indigo-500",titleColor:"text-indigo-700 dark:text-indigo-400",icon:a.jsx(Tn,{className:"w-8 h-8"})},s=i=>{const u=window.getSelection();if(u&&u.toString().length>0)return;const c=i.currentTarget;c.classList.remove("highlight-animate"),c.offsetWidth,c.classList.add("highlight-animate"),setTimeout(()=>c.classList.remove("highlight-animate"),3e3)};return r.length===0?null:a.jsx("div",{className:"not-prose my-8 relative",children:a.jsxs("div",{id:t,"data-highlight-container":"true",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 scroll-mt-24",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),r.map((i,u)=>a.jsxs("div",{onClick:s,className:`
                            relative overflow-hidden p-5 rounded-xl border transition-all duration-300 group cursor-pointer
                            bg-white dark:bg-slate-900/50 shadow-lg hover:shadow-xl hover:-translate-y-1
                            ${o.border} ${o.hoverBorder}
                        `,children:[a.jsx("div",{className:`absolute inset-0 ${o.bg} opacity-50 group-hover:opacity-100 transition-opacity`}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h4",{className:`text-lg font-bold ${o.titleColor} leading-tight`,children:i.title}),a.jsx("div",{className:`${o.iconColor} opacity-70 group-hover:opacity-100 transition-opacity`,children:o.icon})]}),i.description&&a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:i.description})]})]},u))]})})},CC=({rows:e,id:t})=>{const[n,r]=b.useState(null),[o,s]=b.useState({}),[i,u]=b.useState(!1),[c,f]=b.useState(null);b.useEffect(()=>{(async()=>{await xi(),s({...Pt})})()},[]);const p=b.useMemo(()=>{if(!e)return[];const x=[];return e.forEach(w=>{w.forEach(C=>{const N=ne(C);N&&N.split(/\r?\n/).forEach(y=>{const g=y.trim();g&&x.push(g)})})}),x.sort((w,C)=>w.localeCompare(C))},[e]);b.useEffect(()=>{if(!n)return;if(Hc[n]){f(null);return}if(o[n]){f(null);return}const x=JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}");if(x[n]){f(null),s(N=>({...N,[n]:x[n]})),Pt[n]=x[n];return}let w=!0;return(async()=>{u(!0),f(null);try{const v=await new Er({apiKey:{}.API_KEY}).models.generateContent({model:"gemini-2.5-flash",contents:`TRPG ' '  '${n}' 1~2( 2)    . 
                    /   ,   (~) .
                    **          .`});if(w){const y=v.text;if(y){const g=y.trim();s(S=>({...S,[n]:g})),Pt[n]=g;const E=JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}");E[n]=g,localStorage.setItem("ai_skill_descriptions",JSON.stringify(E)),fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:g,author:`Skill_${n}`}})}).catch(S=>console.error("Failed to save skill to remote DB:",S))}else f("   .")}}catch(N){console.error("AI Description Generation Error:",N),w&&f("AI  .")}finally{w&&u(!1)}})(),()=>{w=!1}},[n,o]);const m=x=>{const w=window.getSelection();if(w&&w.toString().length>0)return;const C=x.currentTarget;C.classList.remove("highlight-animate"),C.offsetWidth,C.classList.add("highlight-animate"),setTimeout(()=>C.classList.remove("highlight-animate"),3e3)},h=n?Hc[n]||o[n]||JSON.parse(localStorage.getItem("ai_skill_descriptions")||"{}")[n]:null;return a.jsx("div",{className:"not-prose my-8 relative",children:a.jsxs("div",{id:t,"data-highlight-container":"true",onClick:m,className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg relative overflow-hidden scroll-mt-24 cursor-pointer hover:border-cyan-500/30 hover:shadow-cyan-500/10 transition-all duration-200",children:[a.jsx(Mo,{tableId:t,rowCount:e.length}),a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:a.jsx(H0,{className:"w-24 h-24 text-cyan-500"})}),a.jsxs("h4",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400 mb-4 uppercase tracking-wider border-b border-slate-200 dark:border-slate-700 pb-2 flex items-center gap-2",children:[a.jsx("span",{children:"  "}),a.jsx("span",{className:"text-xs text-slate-500 font-normal normal-case ml-auto",children:"   "})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:p.map((x,w)=>a.jsx("button",{onClick:C=>{r(x===n?null:x)},className:`
                                px-3 py-1.5 rounded-md text-sm font-semibold transition-all duration-200 transform border
                                ${n===x?"bg-cyan-600 text-white border-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.5)] scale-105":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-cyan-600 dark:hover:text-cyan-300 hover:border-cyan-500/50 hover:scale-110"}
                            `,children:x},`${x}-${w}`))}),a.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${n?"max-h-64 opacity-100":"max-h-0 opacity-0"}`,children:n&&a.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-lg p-5 border border-cyan-500/30 shadow-inner relative animate-fade-in-fast backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ve,{className:`w-5 h-5 text-cyan-500 dark:text-cyan-400 ${i&&!h?"animate-spin":""}`}),a.jsx("h5",{className:"text-cyan-700 dark:text-cyan-300 font-bold text-lg",children:n})]}),a.jsx("p",{className:"text-slate-700 dark:text-slate-200 leading-relaxed text-sm min-h-[3rem]",children:h||(i?a.jsx("span",{className:"text-slate-500 dark:text-slate-400 animate-pulse",children:"AI      ..."}):c?a.jsx("span",{className:"text-red-500 dark:text-red-400 text-xs",children:c}):"       .")})]})})]})})},SC=({rows:e,id:t})=>{const[n,r]=b.useState(null),o=[{type:"profile",title:"",subtitle:" ",description:" ?",icon:a.jsx(Pr,{className:"w-8 h-8 text-emerald-500 dark:text-emerald-400"}),color:"emerald",bg:"bg-emerald-100 dark:bg-emerald-500/10",border:"border-emerald-200 dark:border-emerald-500/20"},{type:"ability",title:"",subtitle:" ",description:"   ?",icon:a.jsx(Qt,{className:"w-8 h-8 text-amber-500 dark:text-amber-400"}),color:"amber",bg:"bg-amber-100 dark:bg-amber-500/10",border:"border-amber-200 dark:border-amber-500/20"},{type:"inventory",title:"",subtitle:" ",description:" ?",icon:a.jsx(hi,{className:"w-8 h-8 text-cyan-500 dark:text-cyan-400"}),color:"cyan",bg:"bg-cyan-100 dark:bg-cyan-500/10",border:"border-cyan-200 dark:border-cyan-500/20"},{type:"additional",title:"",subtitle:" ",description:"  ",icon:a.jsx(Ye,{className:"w-8 h-8 text-purple-500 dark:text-purple-400"}),color:"purple",bg:"bg-purple-100 dark:bg-purple-500/10",border:"border-purple-200 dark:border-purple-500/20"}],i=e[0].map(c=>ne(c).trim()).map((c,f)=>{let p=o.find(m=>c.includes(m.title));return p||c===""&&f===3&&(p=o[3]),p?{...p,items:[],originalIndex:f}:null}).filter(c=>c!==null);for(let c=1;c<e.length;c++)i.forEach(f=>{const p=e[c][f.originalIndex];if(p){let m=ne(p).trim();if((m==="-"||m===".")&&(m=""),m){const h=m.split(/\r?\n/).filter(x=>{const w=x.trim();return w!==""&&w!=="-"&&w!=="."});f.items.push(...h)}}});const u=i.length>=4?"grid-cols-1 sm:grid-cols-2 xl:grid-cols-4":i.length===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 sm:grid-cols-2";return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-12 scroll-mt-24",children:a.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/40 rounded-3xl border border-slate-200 dark:border-slate-700/50 shadow-2xl backdrop-blur-sm overflow-hidden",children:a.jsx("div",{className:`grid ${u} divide-y sm:divide-y-0 sm:divide-x divide-slate-200 dark:divide-slate-700/50`,children:i.map((c,f)=>a.jsxs("div",{className:"relative group p-6 xl:p-8 hover:bg-white dark:hover:bg-slate-800/40 transition-colors duration-500",children:[a.jsx("div",{className:`absolute top-0 left-0 w-full h-1 bg-${c.color}-500/50 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500`}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl ${c.bg} border ${c.border} flex items-center justify-center mb-5 shadow-[0_0_15px_rgba(0,0,0,0.1)] dark:shadow-[0_0_15px_rgba(0,0,0,0.3)] group-hover:scale-x-110 transition-transform duration-300`,children:c.icon}),a.jsx("h3",{className:`font-black text-2xl text-${c.color}-600 dark:text-${c.color}-400 mb-1`,children:c.title}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:c.subtitle}),a.jsx("div",{className:"bg-slate-200 dark:bg-slate-800/50 px-4 py-1.5 rounded-full border border-slate-300 dark:border-slate-700/50 mb-6",children:a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 font-medium",children:c.description})}),a.jsx("div",{className:"w-full space-y-2.5",children:c.items.map((p,m)=>{const h=n===p;return a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("button",{onClick:x=>{x.stopPropagation(),r(h?null:p)},className:`
                                                    w-full flex items-center justify-between p-3 transition-all cursor-pointer text-left focus:outline-none focus:ring-2 focus:ring-cyan-500/50
                                                    ${h?`bg-slate-100 dark:bg-slate-800 border border-${c.color}-500/50 rounded-t-xl rounded-b-none border-b-0`:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-cyan-500/30"}
                                                `,children:[a.jsx("span",{className:"text-slate-800 dark:text-slate-200 font-bold text-sm",children:p}),a.jsx("div",{className:`w-2 h-2 rounded-full bg-${c.color}-500 shadow-[0_0_6px_currentColor] ${h?"opacity-100":"opacity-60 group-hover:opacity-100"} flex-shrink-0 ml-2`})]}),h&&a.jsx("div",{className:`bg-slate-50/90 dark:bg-slate-800/80 backdrop-blur-md p-3 rounded-b-xl border border-t-0 border-${c.color}-500/50 animate-fade-in-fast`,children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap text-left",children:z0[p]||"     ."})})]},m)})})]})]},f))})})})},TC=({rows:e,id:t})=>{const[n,r]=b.useState(null),o=e.slice(1).flatMap(s=>{const i=ne(s[0]).trim();return i?i.split(/\r?\n/).map(u=>u.trim()).filter(Boolean):[]});return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-8 scroll-mt-24",children:a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/40 rounded-2xl border border-dashed border-slate-300 dark:border-slate-600/50 p-2 flex flex-col sm:flex-row items-stretch gap-2 hover:border-slate-400 dark:hover:border-slate-500 transition-colors group",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-xl px-6 py-4 flex items-center justify-center sm:justify-start gap-4 border border-slate-200 dark:border-slate-700/50 sm:min-w-[180px]",children:[a.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-500/20 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform duration-300",children:a.jsx(Ye,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-none",children:" "}),a.jsx("span",{className:"text-xs text-slate-500 mt-1 font-medium",children:" "})]})]}),a.jsx("div",{className:"flex-1 bg-white/50 dark:bg-slate-800/30 rounded-xl border border-slate-200 dark:border-slate-700/30 p-4 flex flex-wrap items-center gap-3",children:o.map((s,i)=>{const u=n===s;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>r(u?null:s),className:`
                                        px-4 py-2 rounded-lg text-sm font-bold border shadow-sm flex items-center gap-2 transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500/50
                                        ${u?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white border-purple-500 ring-1 ring-purple-500/50":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:text-white hover:border-purple-500/50"}
                                    `,children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500/50"}),s]}),u&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-72 p-4 bg-white dark:bg-slate-800 border border-purple-500/50 rounded-xl shadow-2xl z-50 animate-fade-in-fast",children:[a.jsx("h5",{className:"font-bold text-purple-600 dark:text-purple-400 mb-2 pb-2 border-b border-slate-200 dark:border-slate-700",children:s}),a.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap text-left",children:z0[s]||"     ."}),a.jsx("div",{className:"absolute -top-1.5 left-4 w-3 h-3 bg-white dark:bg-slate-800 border-t border-l border-purple-500/50 transform rotate-45"})]})]},i)})})]})})},EC=({target:e,difficultyLabel:t,onClose:n,className:r})=>{const[o,s]=b.useState(2),[i,u]=b.useState(0),[c,f]=b.useState(e);b.useEffect(()=>{f(e)},[e]);const[p,m]=b.useState(null),[h,x]=b.useState(!1),w=b.useMemo(()=>{const N=c-i,v=o,y=o*6;if(N<=v)return 100;if(N>y)return 0;let g=new Array(y+1).fill(0);for(let k=1;k<=6;k++)g[k]=1;for(let k=2;k<=o;k++){const T=new Array(y+1).fill(0);for(let A=0;A<=y;A++)if(g[A]!==0)for(let _=1;_<=6;_++)A+_<=y&&(T[A+_]+=g[A]);g=T}const E=Math.pow(6,o);let S=0;for(let k=N;k<=y;k++)S+=g[k];return S/E*100},[o,i,c]),C=()=>{x(!0),m(null),setTimeout(()=>{const N=Array.from({length:o},()=>Math.floor(Math.random()*6)+1),v=N.reduce((y,g)=>y+g,0)+i;m({dice:N,total:v}),x(!1)},600)};return a.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl border border-cyan-500/50 shadow-2xl p-5 flex flex-col gap-4 animate-fade-in-fast ${r}`,children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h5",{className:"font-bold text-cyan-600 dark:text-cyan-400",children:" "}),a.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>f(Math.max(1,c-1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(fs,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",inputMode:"numeric",value:c,onChange:N=>{const v=N.target.value;v===""?f(0):/^\d+$/.test(v)&&f(parseInt(v,10))},onBlur:()=>{c<1&&f(1)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0"}),a.jsx("button",{onClick:()=>f(c+1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Ye,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s(Math.max(1,o-1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(fs,{className:"w-4 h-4"})}),a.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:N=>{const v=N.target.value;v===""?s(0):/^\d+$/.test(v)&&s(parseInt(v,10))},onBlur:()=>{let N=o;N<1&&(N=1),N>20&&(N=20),s(N)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0"}),a.jsx("button",{onClick:()=>s(Math.min(20,o+1)),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Ye,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:" (+/-)"}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-900/50 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>u(i-1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(fs,{className:"w-4 h-4"})}),a.jsx("input",{type:"number",value:i,onChange:N=>{const v=N.target.valueAsNumber;isNaN(v)?(N.target.value===""||N.target.value==="-")&&u(0):u(v)},className:"w-10 bg-transparent text-center font-bold text-slate-800 dark:text-white focus:outline-none focus:text-cyan-600 dark:focus:text-cyan-400 p-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),a.jsx("button",{onClick:()=>u(i+1),className:"p-1 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-400",children:a.jsx(Ye,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/80 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-700/50",children:[a.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:["  ( ",c," )"]}),a.jsxs("div",{className:`text-2xl font-black tabular-nums ${w>=80?"text-emerald-500 dark:text-emerald-400":w>=50?"text-cyan-500 dark:text-cyan-400":w>=20?"text-amber-500 dark:text-amber-400":"text-red-500 dark:text-red-400"}`,children:[w.toFixed(1),"%"]})]}),a.jsx("div",{children:a.jsxs("button",{onClick:C,disabled:h,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow-lg shadow-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95 flex justify-center items-center gap-2",children:[h?a.jsx(Ve,{className:"w-5 h-5 animate-spin"}):a.jsx(Qt,{className:"w-5 h-5"}),h?" ...":" "]})}),p&&a.jsxs("div",{className:"mt-2 bg-slate-100 dark:bg-slate-700/30 rounded-lg p-3 text-center border border-slate-200 dark:border-slate-600 animate-slide-in-bottom",children:[a.jsx("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:p.dice.map((N,v)=>a.jsx("div",{className:"w-8 h-8 bg-white dark:bg-slate-200 text-slate-900 rounded font-bold flex items-center justify-center shadow-md border border-slate-200 dark:border-none",children:N},v))}),a.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[" ",a.jsx("strong",{className:"text-slate-900 dark:text-white",children:p.total-i})," ",i!==0&&a.jsxs("span",{className:"text-cyan-600 dark:text-cyan-400",children:["(",i>0?"+":"",i,")"]}),"= ",a.jsx("span",{className:`font-black text-lg ${p.total>=c?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:p.total})]}),a.jsx("div",{className:`text-xs font-bold mt-1 ${p.total>=c?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:p.total>=c?"!":""})]})]})},_C=({rows:e,id:t})=>{const[n,r]=b.useState(null),o=e[0].map((i,u)=>{var p;const c=ne(((p=e[1])==null?void 0:p[u])||"").trim(),f=parseInt(c.replace(/[^0-9]/g,""),10)||0;return{label:ne(i).trim(),displayValue:c,value:f}}),s=i=>{const u=[{border:"border-emerald-500",text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20"},{border:"border-cyan-500",text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-500/10",glow:"shadow-cyan-500/20"},{border:"border-blue-500",text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-500/10",glow:"shadow-blue-500/20"},{border:"border-amber-500",text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-500/10",glow:"shadow-amber-500/20"},{border:"border-red-500",text:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",glow:"shadow-red-500/20"},{border:"border-fuchsia-500",text:"text-fuchsia-600 dark:text-fuchsia-400",bg:"bg-fuchsia-500/10",glow:"shadow-fuchsia-500/20"}];return u[Math.min(i,u.length-1)]};return a.jsx("div",{id:t,"data-highlight-container":"true",className:"not-prose my-12 scroll-mt-24",children:a.jsxs("div",{className:"flex flex-col gap-6 items-center",children:[a.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/40 p-6 rounded-2xl border border-slate-200 dark:border-slate-700/50 shadow-inner flex-grow w-full",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[a.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:a.jsx("span",{children:"  "})}),a.jsx("span",{className:"text-xs text-slate-500 font-medium hidden sm:inline",children:"   "})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4",children:o.map((i,u)=>{const c=s(u),f=(n==null?void 0:n.label)===i.label;return a.jsxs("button",{onClick:()=>r(p=>(p==null?void 0:p.label)===i.label?null:{label:i.label,value:i.value}),className:`relative group flex flex-col items-center justify-center p-4 rounded-xl border transition-all duration-300 ${f?"ring-2 ring-cyan-500 scale-105 z-10 bg-white dark:bg-slate-800":"hover:-translate-y-1 hover:shadow-lg hover:bg-white dark:hover:bg-slate-800"} ${c.border} ${c.bg} ${c.glow}`,children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wide text-center h-8 flex items-center",children:i.label}),a.jsxs("div",{className:`text-2xl font-black ${c.text} tabular-nums`,children:[i.value,"+"]}),a.jsx("div",{className:"text-xs text-slate-500 mt-1 opacity-60",children:""})]},u)})}),a.jsx("div",{className:"text-center text-xs text-slate-500 sm:hidden mt-2",children:"    "})]})}),n&&a.jsx(EC,{className:"w-full max-w-lg",target:n.value,difficultyLabel:n.label,onClose:()=>r(null)})]})})},NC={undead:rC,robot:H0,elemental:oC,insect:nC,beast:sC,scientist:B0,gunner:iC,archer:lC,mage:Ve,tank:aC,warrior:hi,citizen:uC,person:Pr,fishhook:hC,bigman:gC,feather:mC},bC=({npc:e,className:t})=>{const n=`NPC_ICON_${e.name}`,[r,o]=b.useState(()=>localStorage.getItem(n));b.useEffect(()=>{let i=!0;return(async()=>{if(localStorage.getItem(n)){i&&o(localStorage.getItem(n));return}try{await xi()}catch{}const c=localStorage.getItem(n);if(c){i&&o(c);return}yC(e,f=>{i&&o(f)})})(),()=>{i=!1}},[e,n]);const s=r?NC[r]||Pr:pi;return a.jsxs("div",{className:`relative ${t}`,title:r||" ...",children:[!r&&a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-500 border-t-transparent animate-spin z-10"}),a.jsx(s,{className:`w-full h-full transition-opacity duration-500 ${r?"opacity-100":"opacity-30"}`})]})},Wc=({npc:e,id:t})=>{const n=r=>{const o=window.getSelection();if(o&&o.toString().length>0)return;const s=r.currentTarget;s.classList.remove("highlight-animate"),s.offsetWidth,s.classList.add("highlight-animate"),setTimeout(()=>s.classList.remove("highlight-animate"),3e3)};return a.jsx("div",{className:"not-prose my-6 relative rounded-xl",children:a.jsxs("div",{id:t,"data-highlight-container":"true",onClick:n,className:"p-6 bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 shadow-lg relative z-10 scroll-mt-24 cursor-pointer hover:border-cyan-500/30 hover:shadow-cyan-500/10 transition-all duration-200",children:[a.jsx(Mo,{tableId:t,rowCount:e.sourceRowCount}),a.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-600 pb-4 mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("h3",{className:"text-2xl font-bold text-cyan-600 dark:text-cyan-400",children:e.name}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 italic mt-1",children:e.description})]}),a.jsx(bC,{npc:e,className:"w-10 h-10 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]}),a.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 mb-4",children:e.stats.map(r=>a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:[r.label.replace(/\.$/,""),":"]}),a.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-white",children:r.value})]},r.label))}),a.jsx("div",{className:"space-y-4",children:e.actions.map(r=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-lg text-slate-700 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700 pb-1 mb-2",children:r.category}),a.jsx("ul",{className:"space-y-3 list-none p-0",children:r.abilities.map((o,s)=>a.jsx("li",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 rounded-md border border-slate-100 dark:border-none",children:a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("div",{className:"flex-grow",children:o.name?a.jsxs(a.Fragment,{children:[a.jsxs("strong",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[o.name,"."]}),a.jsx("span",{className:"text-slate-600 dark:text-slate-300 ml-1",children:o.description})]}):a.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:o.description})}),o.charge!==void 0&&a.jsxs("div",{title:"",className:"flex-shrink-0 flex items-center gap-1 bg-amber-100 dark:bg-slate-700 text-amber-600 dark:text-amber-400 px-2 py-1 rounded-full text-xs font-bold",children:[a.jsx(Qt,{className:"w-3 h-3"}),a.jsxs("span",{children:[" ",o.charge]})]})]})},s))})]},r.category))})]})})},IC=({messages:e,renderContent:t})=>a.jsx("div",{className:"flex flex-col space-y-6 my-8 not-prose px-2 sm:px-4",children:e.map((n,r)=>{const o=n.speaker==="M";return a.jsx("div",{className:`flex w-full ${o?"justify-start":"justify-end"}`,children:a.jsxs("div",{className:`flex max-w-[90%] sm:max-w-[80%] gap-3 ${o?"flex-row":"flex-row-reverse"}`,children:[a.jsx("div",{className:"flex-shrink-0 flex flex-col justify-end pb-1",children:a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shadow-md ${o?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 ring-1 ring-slate-300 dark:ring-slate-600":"bg-cyan-600 text-white ring-1 ring-cyan-500"}`,children:n.speaker})}),a.jsx("div",{className:`relative px-4 py-3 shadow-md border min-w-[120px] ${o?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-2xl rounded-bl-none text-slate-800 dark:text-slate-200":"bg-cyan-50 dark:bg-cyan-900/40 border-cyan-200 dark:border-cyan-700/50 rounded-2xl rounded-br-none text-slate-800 dark:text-slate-100"}`,children:a.jsx("div",{className:"space-y-2 text-sm leading-relaxed",children:n.elements.map((s,i)=>{let u=s;if(i===0){u=JSON.parse(JSON.stringify(s));const c=/^[ML]\s*:\s*/;if(u.runs){for(const f of u.runs)if(f.text&&c.test(f.text)){f.text=f.text.replace(c,"");break}}else u.text&&(u.text=u.text.replace(c,""))}return u.type==="list_item"?a.jsxs("div",{id:s.id,className:"flex gap-2 ml-1 text-left scroll-mt-24",children:[a.jsx("span",{className:`select-none mt-1.5 w-1.5 h-1.5 rounded-full flex-shrink-0 ${o?"bg-slate-400":"bg-cyan-500"}`}),a.jsx("div",{className:"flex-1",children:t(u)})]},i):a.jsx("div",{id:s.id,className:`${u.isBold?"font-bold":""} ${u.isItalic?"italic":""} ${u.alignment==="CENTER","text-center"} scroll-mt-24`,children:t(u)},i)})})})]})},r)})}),AC=({introElements:e,narrativeElements:t,explanationElements:n,renderElement:r})=>{const[o,s]=b.useState(!1),i=u=>a.jsx("div",{className:"space-y-4",children:u.map((c,f)=>r(c,f))});return a.jsxs("div",{className:"relative group my-8",children:[a.jsx("div",{className:"mb-6",children:i(e)}),a.jsxs("div",{className:"relative overflow-hidden min-h-[300px] border border-slate-200 dark:border-slate-700/50 rounded-xl bg-slate-50 dark:bg-slate-900/30 p-6 shadow-inner",children:[a.jsx("h3",{className:"font-semibold text-cyan-600 dark:text-cyan-400 mb-4 text-xl border-b border-slate-200 dark:border-slate-700 pb-2",children:o?"":" "}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`transition-all duration-500 ease-in-out transform ${o?"opacity-0 translate-x-[20px] pointer-events-none absolute top-0 left-0 w-full":"opacity-100 translate-x-0 relative"}`,children:i(t)}),a.jsx("div",{className:`transition-all duration-500 ease-in-out transform ${o?"opacity-100 translate-x-0 relative":"opacity-0 -translate-x-[20px] pointer-events-none absolute top-0 left-0 w-full"}`,children:i(n)})]}),a.jsx("button",{onClick:()=>s(!o),className:`absolute top-1/2 -translate-y-1/2 z-20 
                        w-10 py-6 rounded-full shadow-[0_0_15px_rgba(34,211,238,0.4)] 
                        transition-all duration-500 ease-out cursor-pointer border border-cyan-500/50
                        opacity-0 group-hover:opacity-100
                        flex items-center justify-center
                        ${o?"bg-white dark:bg-slate-800 text-cyan-600 dark:text-cyan-400 right-2":"bg-cyan-600 text-white right-6"}
                        hover:scale-105 active:scale-95
                    `,title:o?" ":" ",children:a.jsx("div",{className:"text-xs font-bold tracking-widest uppercase flex items-center justify-center h-full",style:{writingMode:"vertical-rl",textOrientation:"upright"},children:o?" ":" "})})]})]})},MC=({title:e,description:t,footer:n,id:r,rowCount:o,variant:s,tags:i,onClick:u,isSelected:c,compact:f})=>{const p=s==="item",m=h=>{if(u){h.stopPropagation(),u();return}const x=window.getSelection();if(x&&x.toString().length>0)return;const w=h.currentTarget;w.classList.remove("highlight-animate"),w.offsetWidth,w.classList.add("highlight-animate"),setTimeout(()=>w.classList.remove("highlight-animate"),3e3)};return a.jsx("div",{className:"h-full relative",children:a.jsxs("div",{id:r,"data-highlight-container":"true",onClick:m,className:`
                    rounded-xl border transition-all duration-300 group cursor-pointer h-full flex flex-col relative z-10 scroll-mt-24
                    ${c?p?"bg-indigo-50 dark:bg-indigo-900/60 border-indigo-500 ring-1 ring-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)]":"bg-cyan-50 dark:bg-cyan-900/60 border-cyan-500 ring-1 ring-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)]":p?"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700 hover:border-indigo-400/50 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(129,140,248,0.15)]":"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 hover:border-cyan-500/50 hover:bg-cyan-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(34,211,238,0.15)]"}
                    ${f?"p-3":"p-5"}
                `,children:[a.jsx(Mo,{tableId:r,rowCount:o||0}),a.jsxs("div",{className:`flex justify-between items-start gap-3 ${f?"mb-1":"mb-2"}`,children:[a.jsx("h4",{className:`font-bold leading-tight ${f?"text-base":"text-lg"} ${p?"text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-300":"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-500 dark:group-hover:text-cyan-300"}`,children:e}),p?a.jsx("div",{className:`rounded-md bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0 ${f?"p-1":"p-1.5"}`,children:a.jsx(_r,{className:f?"w-4 h-4":"w-5 h-5"})}):a.jsx("div",{className:`rounded-md bg-cyan-100 dark:bg-cyan-500/10 text-cyan-500 dark:text-cyan-400 opacity-60 group-hover:opacity-100 transition-opacity flex-shrink-0 ${f?"p-1":"p-1.5"}`,children:a.jsx(Qt,{className:f?"w-4 h-4":"w-5 h-5"})})]}),!f&&i&&i.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:i.map(h=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${J0(h)}`,children:h},h))}),a.jsx("div",{className:"flex-grow",children:a.jsx("div",{className:`text-slate-600 dark:text-slate-300 leading-relaxed ${f?"text-xs line-clamp-2":"text-sm"}`,children:t})}),a.jsx("div",{className:`border-t text-xs ${f?"mt-2 pt-2":"mt-4 pt-3"} ${p?"border-indigo-200 dark:border-indigo-500/20 text-indigo-700 dark:text-indigo-200/80":"border-cyan-200 dark:border-cyan-500/20 text-slate-500 dark:text-slate-400"}`,children:n})]})})},RC=({result:e,type:t})=>{const n=t==="item",r=n?"border-indigo-500":"border-cyan-500",o=n?"text-indigo-300":"text-cyan-300",s=n?"from-indigo-900/40 to-slate-900/40":"from-cyan-900/40 to-slate-900/40";return a.jsxs("div",{className:`relative p-4 rounded-xl border ${r} bg-gradient-to-br ${s} shadow-lg animate-slide-in-bottom`,children:[a.jsx("div",{className:"absolute -top-3 -right-3",children:a.jsx(Ve,{className:`w-8 h-8 ${o} drop-shadow-lg`})}),a.jsx("h4",{className:`font-bold text-lg ${o} mb-2`,children:e.name}),a.jsx("p",{className:"text-slate-200 text-sm mb-3 leading-relaxed",children:e.description}),a.jsxs("div",{className:"bg-black/30 rounded p-2 text-xs border-l-2 border-slate-500",children:[a.jsx("span",{className:"text-slate-400 font-semibold mr-1",children:":"}),a.jsx("span",{className:"text-slate-300",children:e.changes})]})]})},PC=({item:e,type:t,onClose:n})=>{const[r,o]=b.useState([]),[s,i]=b.useState(!1),[u,c]=b.useState(null),[f,p]=b.useState(null),[m,h]=b.useState(!1),[x,w]=b.useState("enhance"),[C,N]=b.useState(""),v=t==="item",y=v?"text-indigo-400":"text-cyan-400",g=(S,k)=>`${S==="ability"?"Ability Memo _":"Item Memo _"}${k.trim()}`;b.useEffect(()=>{let S=!0;const k=g(t,e.rawTitle);return(async()=>{var A;if(await xi(),Pt[k]){S&&p(Pt[k]);return}S&&h(!0);try{const _=new Er({apiKey:{}.API_KEY}),M=`TRPG ' ' ${v?"":" "} '${e.rawTitle}'     ,  ,    3~4 .
                
                [ ]
                : ${e.rawDescription}
                ${e.rawDetails.map(B=>`${B.label}: ${B.value}`).join(", ")}
                
                  (~) .`,G=(A=(await _.models.generateContent({model:"gemini-2.5-flash",contents:M})).text)==null?void 0:A.trim();G&&S&&(p(G),Pt[k]=G,fetch(gi,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"SAVE",data:{aiCode:G,author:k}})}).catch(B=>console.error("Failed to save memo",B)))}catch(_){console.error("Memo Gen Failed",_)}finally{S&&h(!1)}})(),()=>{S=!1}},[e.rawTitle,t,e.rawDescription,e.rawDetails,v]);const E=async()=>{i(!0),c(null),o([]);try{const S=new Er({apiKey:{}.API_KEY});let k="";const T=C.trim()?`
[  ]
${C}
`:"";x==="enhance"?k=`
                     TRPG ' '    / .
                      [ ] ,      ** ** 2 .

                    [ ]
                    - : ${v?"(Item)":" (Ability)"}
                    - : ${e.rawTitle}
                    - : ${e.rawDescription}
                    -  : ${JSON.stringify(e.rawDetails)}
                    ${T}

                    [ ]
                    1. ** 1 (Tier 1)**:    ,   .
                    2. ** 2 (Tier 2)**: ,      .
                    3.     /   .
                    4.      .
                    5.      .

                    [ ]
                      JSON   (    JSON):
                    [
                        {
                            "name": " ",
                            "description": "  ",
                            "changes": "  (:  +2,  )"
                        },
                        {
                            "name": " ",
                            "description": "  ",
                            "changes": " "
                        }
                    ]
                `:k=`
                     TRPG ' '    / .
                      [ ] ,     ** (Variant)** 2 .

                    [ ]
                    - : ${v?"(Item)":" (Ability)"}
                    - : ${e.rawTitle}
                    - : ${e.rawDescription}
                    -  : ${JSON.stringify(e.rawDetails)}
                    ${T}

                    [ ]
                    1. ** A (Variant A)**:   ,  (: ->)    .
                    2. ** B (Twisted/Special Variant)**:   ,       .
                    3.      .
                    4.      .
                    5.       .

                    [ ]
                      JSON   (    JSON):
                    [
                        {
                            "name": "  A",
                            "description": "  ",
                            "changes": "  (:   )"
                        },
                        {
                            "name": "   B",
                            "description": "   ",
                            "changes": " "
                        }
                    ]
                `;const _=(await S.models.generateContent({model:"gemini-2.5-flash",contents:k,config:{responseMimeType:"application/json"}})).text;if(!_)throw new Error("AI  .");const M=JSON.parse(_);o(M)}catch(S){console.error("Enhancement Error:",S),c("    .")}finally{i(!1)}};return a.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl overflow-hidden flex flex-col h-auto",children:[a.jsxs("div",{className:"px-5 py-4 border-b border-slate-700 bg-slate-800/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ve,{className:`w-5 h-5 ${y}`}),a.jsx("h3",{className:"font-bold text-white",children:"AI  "})]}),a.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(He,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-5 flex flex-col gap-6 max-h-[60vh] xl:max-h-[calc(100vh-320px)] overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mb-2",children:" "}),a.jsxs("div",{className:"bg-slate-800 p-3 rounded-xl border border-slate-700",children:[a.jsx("div",{className:"flex justify-between items-start gap-2 mb-2",children:a.jsx("h4",{className:`font-bold ${y}`,children:e.rawTitle})}),a.jsx("p",{className:"text-sm text-slate-300 mb-2",children:e.rawDescription}),a.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-slate-500",children:e.tags.map(S=>a.jsx("span",{className:"border border-slate-600 px-1 rounded",children:S},S))})]})]}),a.jsxs("div",{className:"bg-white/5 dark:bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(pi,{className:`w-4 h-4 text-slate-400 ${m?"animate-pulse":""}`}),a.jsx("span",{className:"text-xs font-bold text-slate-400",children:"AI "})]}),m?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-2 bg-slate-700 rounded w-3/4 animate-pulse"}),a.jsx("div",{className:"h-2 bg-slate-700 rounded w-full animate-pulse"}),a.jsx("div",{className:"h-2 bg-slate-700 rounded w-5/6 animate-pulse"})]}):a.jsx("p",{className:"text-sm text-slate-300 leading-relaxed whitespace-pre-wrap",children:f||"    ."})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[r.length===0&&!s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-0.5 h-8 bg-slate-700 mb-2"}),a.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[a.jsxs("button",{onClick:E,className:`
                                        group relative px-6 py-3 rounded-l-full font-bold text-white shadow-lg transition-all flex-1
                                        ${v?"bg-indigo-600 hover:bg-indigo-500 shadow-indigo-500/30":"bg-cyan-600 hover:bg-cyan-500 shadow-cyan-500/30"}
                                        active:scale-95 flex items-center justify-center gap-2 overflow-hidden
                                    `,children:[a.jsx("span",{className:"absolute inset-0 w-full h-full bg-white/20 -translate-x-full group-hover:translate-x-full transition-transform duration-500 skew-x-12"}),a.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5"}),x==="enhance"?"AI ":"AI   "]})]}),a.jsx("button",{onClick:()=>w(S=>S==="enhance"?"variant":"enhance"),className:`
                                        p-3 rounded-r-full font-bold text-white shadow-lg transition-all border-l border-white/20
                                        ${v?"bg-indigo-700 hover:bg-indigo-600":"bg-cyan-700 hover:bg-cyan-600"}
                                        active:scale-95 flex items-center justify-center
                                    `,title:x==="enhance"?"   ":"  ",children:a.jsx(xC,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"w-full mt-3 px-1",children:a.jsx("input",{type:"text",value:C,onChange:S=>N(S.target.value),placeholder:"   ()",className:"w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all text-center"})}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:x==="enhance"?"Gemini AI      .":"Gemini AI      ."})]}),s&&a.jsxs("div",{className:"flex flex-col items-center py-4",children:[a.jsx("div",{className:`w-10 h-10 border-4 border-t-transparent rounded-full animate-spin ${v?"border-indigo-500":"border-cyan-500"}`}),a.jsx("p",{className:"text-sm text-slate-400 mt-3 animate-pulse",children:x==="enhance"?"   ...":"   ..."})]}),u&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-red-400 text-sm mb-3",children:u}),a.jsxs("button",{onClick:E,className:"text-xs px-3 py-1.5 bg-slate-800 hover:bg-slate-700 rounded border border-slate-600 text-slate-300 flex items-center gap-1 mx-auto",children:[a.jsx(ta,{className:"w-3 h-3"}),"  "]})]})]}),r.length>0&&a.jsxs("div",{className:"space-y-4 animate-fade-in-fast",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"h-px bg-slate-700 flex-1"}),a.jsx("span",{className:"text-xs font-bold text-slate-400",children:""}),a.jsx("div",{className:"h-px bg-slate-700 flex-1"})]}),r.map((S,k)=>a.jsx(RC,{result:S,type:t},k)),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsxs("button",{onClick:()=>o([]),className:"flex-1 py-2 text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center justify-center gap-1 border border-slate-700 rounded hover:bg-slate-800",children:[a.jsx(ci,{className:"w-3 h-3"})," "]}),a.jsxs("button",{onClick:E,className:"flex-1 py-2 text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center justify-center gap-1 border border-slate-700 rounded hover:bg-slate-800",children:[a.jsx(ta,{className:"w-3 h-3"}),"   "]})]})]})]})]})},LC=({items:e,type:t})=>{const[n,r]=b.useState(""),[o,s]=b.useState([]),[i,u]=b.useState(null),c=b.useMemo(()=>{const w=new Set;return e.forEach(C=>C.tags.forEach(N=>w.add(N))),Array.from(w).sort()},[e]),f=b.useMemo(()=>e.filter(w=>{const C=(w.rawTitle+" "+w.rawDescription).toLowerCase().includes(n.toLowerCase()),N=o.length===0||o.every(v=>w.tags.includes(v));return C&&N}),[e,n,o]),p=w=>{s(C=>C.includes(w)?C.filter(N=>N!==w):[...C,w])},m=t==="item",h=b.useMemo(()=>e.find(w=>w.id===i),[e,i]),x=w=>{w&&u(C=>C===w?null:w)};return a.jsxs("div",{className:"my-8 space-y-4",children:[a.jsx("div",{className:"bg-slate-100 dark:bg-slate-900/40 p-4 rounded-xl border border-slate-200 dark:border-slate-700/50 backdrop-blur-sm sticky top-20 z-30 shadow-lg transition-all duration-300",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wt,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:bg-white dark:focus:bg-slate-900 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:m?" ...":" ...",value:n,onChange:w=>r(w.target.value)}),n&&a.jsx("button",{onClick:()=>r(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${o.length===0?m?"bg-indigo-600 text-white border-indigo-500":"bg-cyan-600 text-white border-cyan-500":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:""}),c.map(w=>{const C=o.includes(w),N=J0(w);return a.jsx("button",{onClick:()=>p(w),className:`px-3 py-1 text-xs rounded-full border transition-all relative overflow-hidden ${C?`${N} ring-1 ring-offset-1 ring-offset-slate-100 dark:ring-offset-slate-900 ring-black/20 dark:ring-white/20`:"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:w},w)})]})]})}),a.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 items-start relative",children:[a.jsx("div",{className:`flex-1 transition-all duration-500 ease-in-out w-full ${h?"xl:w-2/3":"xl:w-full"}`,children:a.jsx("div",{className:`grid gap-4 transition-all duration-500 ${h?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:f.length>0?f.map((w,C)=>a.jsx(MC,{id:w.id,title:w.title,description:w.description,footer:w.details,rowCount:w.rowCount,variant:t,tags:w.tags,onClick:()=>x(w.id),isSelected:i===w.id,compact:!!h},C)):a.jsx("div",{className:"col-span-full py-12 text-center text-slate-500",children:a.jsx("p",{children:"  ."})})})}),h&&a.jsx("div",{className:"w-full xl:w-[380px] xl:sticky xl:top-72 animate-fade-in-fast shrink-0",children:a.jsx(PC,{item:h,type:t,onClose:()=>u(null)})})]})]})},DC=({elements:e,pageTitle:t,footnotes:n,onShowFootnote:r,onHideFootnote:o})=>{if(!e||e.length===0)return a.jsx("p",{className:"text-slate-400 italic",children:"  ."});const s=new Set;b.useEffect(()=>{xi()},[]);const i=g=>{var k;let E="";switch((k=g.alignment)==null?void 0:k.toUpperCase()){case"CENTER":E+="text-center ";break;case"END":E+="text-right ";break;case"JUSTIFY":E+="text-justify ";break;case"START":default:E+="text-left ";break}return g.runs||(g.isBold&&(E+="font-bold "),g.isItalic&&(E+="italic "),g.isUnderline&&(E+="underline ")),E+="whitespace-pre-wrap ",E.trim()},u=g=>{const E={};return g.fontSize&&(E.fontSize=`${g.fontSize}pt`,E.lineHeight="1.5"),E},c=(g,E)=>{g.preventDefault();const S=document.getElementById(E),k=100;if(S){const A=S.getBoundingClientRect().top+window.pageYOffset-k;window.scrollTo({top:A,behavior:"smooth"});let _=S;S.classList.contains("absolute")&&S.classList.contains("-top-20")&&S.nextElementSibling instanceof HTMLElement&&(_=S.nextElementSibling),_.classList.remove("highlight-animate"),_.offsetWidth,_.classList.add("highlight-animate"),setTimeout(()=>_.classList.remove("highlight-animate"),2e3)}},f=g=>g==null||g===""?null:String(g).replace(/\/r/g,`
`).replace(/\r/g,`
`).split(/(\[\d+\])/g).map((k,T)=>{if(/^\[\d+\]$/.test(k)){const A=k.replace(/[\[\]]/g,"");n&&n[A]&&s.add(A);const _=`footnote-ref-${A}`,M=`footnote-body-${A}`,L=B=>{if(n&&n[A]&&r){const I=B.currentTarget.getBoundingClientRect();r(`[${A}] ${n[A]}`,I)}},G=()=>{o&&o()};return a.jsx("span",{id:_,className:"inline-block align-middle mx-0.5 relative -top-0.5",children:a.jsx("button",{onClick:B=>c(B,M),onMouseEnter:L,onMouseLeave:G,className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors","aria-label":` ${A}`,children:a.jsx(pi,{className:"w-4 h-4"})})},T)}return k}),p=g=>g.runs&&g.runs.length>0?g.runs.map((E,S)=>{const k=[];E.isBold&&k.push("font-bold"),E.isItalic&&k.push("italic"),E.isUnderline&&k.push("underline");const T=a.jsx("span",{className:k.join(" "),children:f(E.text)});return E.linkUrl?a.jsx("a",{href:E.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 dark:text-cyan-400 hover:underline hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors",children:T},S):ps.cloneElement(T,{key:S})}):g.text?f(g.text):null,m=g=>typeof g=="object"&&g!==null?p(g):f(g),h=(g,E)=>{var A,_,M;const S=g.id||(g.text||`element-${E}`).toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,""),k=i(g),T=u(g);switch(g.type){case"title":return a.jsx("h1",{id:S,className:`font-extrabold text-cyan-600 dark:text-cyan-400 border-b border-slate-300 dark:border-slate-600 pb-4 mb-6 scroll-mt-24 ${k}`,style:{...T,fontSize:T.fontSize||"3.5rem"},children:p(g)},E);case"heading_1":return a.jsx("h1",{id:S,className:`font-bold text-cyan-600 dark:text-cyan-400 border-b border-slate-300 dark:border-slate-600 pb-2 mb-4 mt-8 scroll-mt-24 ${k}`,style:{...T,fontSize:T.fontSize||"2.25rem"},children:p(g)},E);case"heading_2":return a.jsx("h2",{id:S,className:`font-bold text-cyan-600 dark:text-cyan-400 mb-3 mt-6 scroll-mt-24 ${k}`,style:{...T,fontSize:T.fontSize||"1.875rem"},children:p(g)},E);case"heading_3":return a.jsx("h3",{id:S,className:`font-semibold text-cyan-600 dark:text-cyan-400 mb-2 mt-4 scroll-mt-24 ${k}`,style:{...T,fontSize:T.fontSize||"1.5rem"},children:p(g)},E);case"heading_4":case"heading_5":case"heading_6":return a.jsx("h4",{id:S,className:`font-medium text-cyan-600 dark:text-cyan-400 mb-2 mt-3 scroll-mt-24 ${k}`,style:{...T,fontSize:T.fontSize||"1.25rem"},children:p(g)},E);case"quote":return a.jsx("blockquote",{id:S,className:`border-l-4 border-cyan-500 pl-4 py-2 my-4 text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/50 rounded-r-md scroll-mt-24 ${k}`,style:T,children:p(g)},E);case"table":return a.jsx("div",{id:S,"data-highlight-container":"true",className:"my-6 scroll-mt-24 rounded-lg relative",children:a.jsx("div",{className:"overflow-x-auto p-1.5",children:a.jsxs("table",{className:"w-full border-collapse text-sm table-fixed",children:[a.jsx("thead",{children:a.jsx("tr",{className:"bg-slate-100 dark:bg-slate-700/80",children:(_=(A=g.rows)==null?void 0:A[0])==null?void 0:_.map((G,B)=>a.jsx("th",{className:`border border-slate-300 dark:border-slate-600 p-3 font-bold text-cyan-700 dark:text-cyan-300 whitespace-pre-wrap break-words ${Bc(G)}`,children:m(G)},B))})}),a.jsx("tbody",{children:(M=g.rows)==null?void 0:M.slice(1).map((G,B)=>a.jsx("tr",{id:`${S}-row-${B+1}`,className:"border-b border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:G.map((I,Y)=>a.jsx("td",{className:`border border-slate-300 dark:border-slate-600 p-3 text-slate-700 dark:text-slate-300 whitespace-pre-wrap break-words ${Bc(I)}`,children:m(I)},Y))},B))})]})})},E);case"paragraph":default:return g.runs&&g.runs.some(G=>G.text&&String(G.text).trim()!=="")||g.text&&String(g.text).trim()!==""?a.jsx("p",{id:S,className:`mb-3 leading-relaxed text-slate-700 dark:text-slate-300 scroll-mt-24 ${k}`,style:T,children:p(g)},E):null}},x=(g,E)=>{var I,Y,z,ie;if(!g||g.length===0)return null;let S,k=null;const T=[];let A="",_="";const M=[],L=["","","",""];if(g.some(R=>R.length>1&&L.includes(ne(R[1])))){const V=ne(((I=g[0])==null?void 0:I[0])||"").split(/\n\n|\n/).filter(q=>q.trim()!=="");A=V[0]||"",S=f(V[0]),V.length>1&&(_=V.slice(1).join(`
`).trim(),k=a.jsx("p",{children:f(_)}));for(let q=0;q<g.length;q++){const ae=g[q];if(ae.length<2)continue;const se=ne(ae[1]),Se=L.find(we=>se.includes(we));if(Se){const we=(Y=g[q+1])==null?void 0:Y[1];if(we!==void 0){const Re=ne(we);M.push({label:Se,value:Re}),T.push({label:Se,value:m(we)})}}}}else{const V=ne(((z=g[0])==null?void 0:z[0])||"").split(/\n\n|\n/).filter(q=>q.trim()!=="");A=V[0]||"",S=f(A),V.length>1?_=V.slice(1).join(`
`).trim():_=ne(((ie=g[1])==null?void 0:ie[0])||""),_.trim()&&(k=a.jsx("p",{children:f(_)})),g.forEach(q=>{if(q.length<2)return;const ae=ne(q[0]),se=L.find(Se=>ae.includes(Se));if(se){const Se=ne(q[1]);M.push({label:se,value:Se}),T.push({label:se,value:m(q[1])})}})}if(!S||ps.isValidElement(S)&&!S.props.children)return null;const B=vC(A,_,M,E);return{title:S,description:k,details:w(T),tags:B,rawTitle:A,rawDescription:_,rawDetails:M,rowCount:g.length}},w=g=>{const E=["","","",""],S=g.filter(k=>k.label&&k.value).sort((k,T)=>E.indexOf(k.label)-E.indexOf(T.label));return S.length===0?null:a.jsx("div",{className:"flex justify-between items-center gap-4",children:S.map(k=>a.jsxs("span",{children:[a.jsxs("strong",{children:[k.label,":"]})," ",k.value]},k.label))})},C=g=>{const E=g.trim();if(!E)return null;let S,k=E;const T=E.match(/\(\s*(\d+)\)$/);T&&(S=parseInt(T[1],10),k=E.replace(/\(\s*(\d+)\)$/,"").trim());const A=k.indexOf("."),_=k.indexOf(",");let M=-1;if(A>-1&&_>-1?M=Math.min(A,_):M=Math.max(A,_),M>0){const L=k.substring(0,M).trim(),G=k.substring(M+1).trim();return{name:L,description:G,charge:S}}return{name:"",description:k,charge:S}},v=(()=>{var A;const g=[],S=(t||"").includes(" ");let k=null,T=0;for(;T<e.length;){const _=e[T],M=e[T+1];if(_.type.startsWith("heading_")){const P=ne(_);P.includes(" ")?k="ability":P.includes("")?k="item":k=null}const L=ne(_);if(_.type==="heading_2"&&L.includes(" ")){const P=[],U=[],$=[],j=_;for(T++;T<e.length;){const J=e[T],he=ne(J);if(J.type==="heading_3"&&he.includes(" ")||J.type.startsWith("heading_1"))break;P.push(J),T++}if(T<e.length&&ne(e[T]).includes(" "))for(T++;T<e.length;){const J=e[T],he=ne(J);if(J.type==="heading_3"&&he.includes("")||J.type.startsWith("heading_1")||J.type==="heading_2")break;U.push(J),T++}if(T<e.length&&ne(e[T]).includes(""))for(T++;T<e.length;){const J=e[T];if(J.type.startsWith("heading_1")||J.type==="heading_2")break;$.push(J),T++}g.push(h(j,T)),g.push(a.jsx(AC,{introElements:P,narrativeElements:U,explanationElements:$,renderElement:h},`combat-switcher-${T}`));continue}const G=zc(_);if(G){const P=[];let U=G,$=[_];for(T++;T<e.length;){const j=e[T];if(j.type.startsWith("heading")||j.type==="title"||j.type==="table")break;const J=zc(j);if(J){P.push({speaker:U,elements:$}),U=J,$=[j],T++;continue}if(j.type==="list_item"){$.push(j),T++;continue}break}P.push({speaker:U,elements:$}),g.push(a.jsx(IC,{messages:P,renderContent:p},`chat-${T}`));continue}const B=qc(_,M),I=Oi(_),Y=Bs(_),z=io(_),ie=k!==null&&_.type==="table"&&_.rows&&_.rows.length>0&&!lr(_)&&!xr(_)&&!Dn(_)&&!Fn(_)&&!Un(_)&&!lo(_)&&!qi(_)&&!Yo(_)&&!zi(_)&&!Ji(_)&&!Wi(_)&&!Oi(_),R=Y||z||ie,V=xr(_),q=Dn(_),ae=Fn(_),Se=B&&M&&lr(M)||I&&lr(_)||B||I,we=!S&&R;if(zi(_)&&_.rows){g.push(a.jsx(SC,{rows:_.rows,id:_.id},`char-struct-${T}`)),T++;continue}if(Ji(_)&&_.rows){g.push(a.jsx(TC,{rows:_.rows,id:_.id},`add-info-${T}`)),T++;continue}if(Wi(_)&&_.rows){g.push(a.jsx(_C,{rows:_.rows,id:_.id},`success-rate-${T}`)),T++;continue}if(V&&_.rows){g.push(a.jsx(CC,{id:_.id,rows:_.rows},`skill-tags-${T}`)),T++;continue}if((q||ae)&&_.rows){g.push(a.jsx(kC,{rows:_.rows,id:_.id,type:q?"status":"obstacle"},`formatted-grid-${T}`)),T++;continue}if(Un(_)&&_.rows){g.push(a.jsx(wC,{rows:_.rows,id:_.id},`action-type-${T}`)),T++;continue}if(Se){if(I)try{const U=_.rows||[],$=ne((A=U[0])==null?void 0:A[0]),j=$.indexOf("."),J=j>-1?$.substring(0,j).trim():$.trim(),he=j>-1?$.substring(j+1).trim():"",st=(U[1]||[]).map(te=>{const fe=ne(te).trim();let me=fe,Te="-";const Ie=fe.indexOf(".");if(Ie>0)me=fe.substring(0,Ie+1).trim(),Te=fe.substring(Ie+1).trim();else{const D=fe.lastIndexOf(" ");D>0&&(me=fe.substring(0,D).trim(),Te=fe.substring(D+1).trim())}return Te===""&&(Te="-"),{label:me,value:Te}}).filter(te=>te.label),it=[];for(let te=2;te<U.length;te++){const fe=U[te];if(!fe||fe.length<2)continue;const me=ne(fe[0]).trim().replace(/\.$/,"");if(!me)continue;const Ie=ne(fe[1]).trim().split(`
`).map(C).filter(D=>D!==null&&(!!D.name||!!D.description));Ie.length>0&&it.push({category:me,abilities:Ie})}const lt={name:J,description:he,stats:st,actions:it,sourceRowCount:U.length};g.push(a.jsx(Wc,{npc:lt,id:_.id},`npc-table-${T}`)),T++;continue}catch(P){console.error("Failed to parse live NPC card, rendering as default.",P,_)}else if(B){const P=T,U=[e[T],e[T+1]];for(T+=2;T<e.length;){const $=e[T];if(qc($,e[T+1]))break;if($.type==="paragraph"&&$.isBold)for(U.push($),T++;T<e.length&&e[T].type==="list_item";)U.push(e[T]),T++;else break}try{const $=U[0],j=U[1],J=U.slice(2),he=$.text||"",st=he.indexOf("."),it=st>0?he.substring(0,st).trim():he.trim(),lt=st>0?he.substring(st+1).trim():"",te=[];j&&j.type==="table"&&j.rows&&j.rows[0].forEach(Z=>{const K=ne(Z).trim();let ee=K,Q="";if(K.startsWith(" .")){const re=K.indexOf(".");ee=K.substring(0,re+1).trim(),Q=K.substring(re+1).trim(),Q===""&&(Q="-")}else{const re=K.lastIndexOf(" ");re>-1&&(ee=K.substring(0,re),Q=K.substring(re+1))}te.push({label:ee,value:Q})});const fe=[];let me=null;J.forEach(Z=>{if(Z.type==="paragraph"&&Z.isBold)me!=null&&me.abilities.length&&fe.push(me),me={category:ne(Z).trim().replace(/\.$/,""),abilities:[]};else if(Z.type==="list_item"&&me){const K=C(ne(Z));K&&me.abilities.push(K)}}),me!=null&&me.abilities.length&&fe.push(me);const Te={name:it,description:lt,stats:te,actions:fe,sourceRowCount:0},Ie=U.map(Z=>Z.id).filter(Boolean),D=U[0].id,W=Ie.filter(Z=>Z!==D);g.push(a.jsxs("div",{className:"relative","data-highlight-container":"true",children:[W.map(Z=>a.jsx("div",{id:Z,className:"absolute -top-20"},Z)),a.jsx(Wc,{npc:Te,id:D})]},`npc-${P}`))}catch($){console.error("Failed to parse NPC block, rendering as default.",$,U),U.forEach((j,J)=>{const he=h(j,P+J);he&&g.push(he)})}continue}}if(we){const P=[],U=T;let $="ability";for((k==="item"||io(_))&&($="item");T<e.length;){const j=e[T],J=Bs(j),he=io(j),st=k!==null&&j.type==="table"&&j.rows&&j.rows.length>0&&!lr(j)&&!xr(j)&&!Dn(j)&&!Fn(j)&&!Un(j)&&!lo(j)&&!qi(j)&&!Yo(j)&&!zi(j)&&!Ji(j)&&!Wi(j)&&!Oi(j);if(!J&&!he&&!st)break;if(!j.rows){T++;continue}let it=$;he?it="item":J&&(it="ability");const lt=x(j.rows||[],it);lt&&P.push({...lt,id:j.id}),T++}P.length>0&&g.push(a.jsx(LC,{items:P,type:$},`example-section-${U}`));continue}if(lo(_)){T++;continue}else if(qi(_)){_.rows&&g.push(a.jsx(Jc,{id:_.id,rows:_.rows},`faq-${T}`)),T++;continue}else if(Yo(_)){const P=[],U=[],$=T,j=e[T].id;for(;T<e.length&&Yo(e[T]);){const J=e[T];J.rows&&J.rows.length>0&&(P.push(J.rows[0]),U.push(J.id||"")),T++}if(P.length>0){const J=[["","",""],...P];g.push(a.jsx(Jc,{id:j,rows:J,itemIds:U},`faq-group-${$}`))}continue}else if(_.type==="list_item"){const P=[];for(;T<e.length&&e[T].type==="list_item";)P.push(e[T]),T++;g.push(a.jsx("ul",{className:"list-disc pl-6 space-y-1 mb-4 text-slate-700 dark:text-slate-300 marker:text-cyan-600 dark:marker:text-cyan-500",children:P.map((U,$)=>{const j=i(U),J=u(U);return a.jsx("li",{id:U.id,className:`pl-1 ${j} scroll-mt-24`,style:J,children:p(U)},$)})},`ul-${T-1}`));continue}const Re=h(_,T);Re&&g.push(Re),T++}return g})(),y=Array.from(s).sort((g,E)=>parseInt(g)-parseInt(E));return a.jsxs(a.Fragment,{children:[v,y.length>0&&n&&a.jsxs("div",{className:"mt-12 pt-6 border-t border-slate-300 dark:border-slate-600",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 mb-4 uppercase tracking-wider",children:""}),a.jsx("ol",{className:"space-y-3",children:y.map(g=>a.jsxs("li",{id:`footnote-body-${g}`,className:"text-sm text-slate-600 dark:text-slate-400 flex gap-2 rounded p-1 -ml-1 scroll-mt-24",children:[a.jsxs("button",{onClick:E=>c(E,`footnote-ref-${g}`),className:"font-bold text-cyan-600 dark:text-cyan-500 select-none hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors","aria-label":` ${g} `,children:["[",g,"]"]}),a.jsx("div",{className:"flex-1 whitespace-pre-wrap",children:n[g]})]},g))})]})]})},Oc={elements:[{type:"heading_1",text:" "},{type:"paragraph",text:"      TRPG   ,        ."},{type:"heading_2",text:" "},{type:"paragraph",text:"       ."},{type:"paragraph",text:"        ."},{type:"quote",text:"    ,     "},{type:"paragraph",text:"           ,         ."},{type:"paragraph",text:" ,                    .            ."},{type:"paragraph",text:"   . !"},{type:"paragraph",text:` KingCrab
 ,LAG
Q&A ,`},{type:"heading_1",text:"  "},{type:"paragraph",text:"     ,         .         TRPG      ."},{type:"heading_2",text:" "},{type:"paragraph",text:"   , ,         .        ,      ,      .    ."},{type:"table",rows:[["","",""],[" ","",""],[" "," ",""],[""," ",""],[""," ",""],[""," ",""]]},{type:"table",rows:[[""],["  "],[""],[""]]},{type:"heading_3",text:""},{type:"paragraph",text:"       .     ,       .           ."},{type:"heading_3",text:""},{type:"paragraph",text:"   5 . ,  ,  ,  , ."},{type:"heading_4",text:""},{type:"paragraph",text:"   , ,    .  2      ,      .     ."},{type:"heading_4",text:" "},{type:"paragraph",text:"            .   , , , ,                     . (   .       .              )"},{type:"paragraph",text:"          [#],       1   ,      0 [#]."},{type:"heading_4",text:"  "},{type:"paragraph",text:"      .        ."},{type:"table",rows:[["[skill] ","","",""," "],["  ","","","",""],["","","","",""],["","",""," "," "],[" "," "," ","",""],[""," ","","",""],["",""," "," ",""]]},{type:"heading_4",text:" "},{type:"paragraph",text:"            , ,   ."},{type:"list_item",text:"   ,        ."},{type:"list_item",text:"        ."},{type:"list_item",text:"          ."},{type:"paragraph",text:"                        ,        .        ."},{type:"heading_4",text:" "},{type:"paragraph",text:"         (  )  ,        .  ,   4 '' ,             ,    ,         ."},{type:"paragraph",text:"      ,      ,               ."},{type:"heading_4",text:" "},{type:"paragraph",text:"       .[#]         ."},{type:"heading_3",text:""},{type:"paragraph",text:"     .   , ,   ."},{type:"list_item",text:"       "},{type:"list_item",text:"          ,                ."},{type:"list_item",text:"        ."},{type:"paragraph",text:"              . ,         ."},{type:"heading_3",text:""},{type:"paragraph",text:"   [#] [#]          .       ."},{type:"heading_2",text:" "},{type:"paragraph",text:"  ,  ,       ."},{type:"paragraph",text:"   2 6            [#],             .           ."},{type:"table",rows:[[" "," "," "," "," ","  "],["4 ","8 ","12 ","18 ","32 ","64 "]]},{type:"paragraph",text:"      ,  2     .            ."},{type:"list_item",text:`       
        .         `},{type:"list_item",text:`    
      .`},{type:"list_item",text:`     
            .        ,  2   .`},{type:"paragraph",text:"              .  +/- ."},{type:"heading_3",text:" "},{type:"paragraph",text:"                 .          ,         ."},{type:"heading_3",text:" "},{type:"paragraph",text:"             ,                 ."},{type:"paragraph",text:"       [#]              ,              ,        ."},{type:"heading_3",text:" "},{type:"paragraph",text:"    (:   ,  ,   )        ,        .          (  )    ."},{type:"paragraph",text:"             .           ,     .                    ,           ."},{type:"heading_2",text:" ,  "},{type:"paragraph",text:"       .    ,    1 ,        ."},{type:"paragraph",text:"                .    ,  1               .        ."},{type:"paragraph",text:"   NPC    [#],  NPC  ,     .     .            [#],        ."},{type:"heading_2",text:"    "},{type:"paragraph",text:"           ,     .       ."},{type:"list_item",text:"         ,         ."},{type:"list_item",text:"    ,  ,         ."},{type:"paragraph",text:"      10     ,             ,          "},{type:"heading_3",text:" ,  "},{type:"paragraph",text:"       .    ?"},{type:"quote",text:"      .       .         ."},{type:"paragraph",text:"            . (: A  30, B 45, C 15 , C, A, B   .)            .              ,           ."},{type:"list_item",runs:[{text:" :",isBold:!0,isItalic:!1,isUnderline:!1},{text:"    ,              .         ,     .",isBold:!1,isItalic:!1,isUnderline:!1}]},{type:"list_item",runs:[{text:" :",isBold:!0,isItalic:!1,isUnderline:!1},{text:"               .       ,         .",isBold:!1,isItalic:!1,isUnderline:!1}]},{type:"paragraph",text:"         [#]        .           ."},{type:"heading_3",text:"  "},{type:"paragraph",text:"      ,       ,         .  ,  2    ,          ."},{type:"heading_3",text:" ,   "},{type:"paragraph",text:"           .        ,           [#]."},{type:"table",rows:[["","",""],[" ,    / ,    .","  ,        ","  ,             ."],[" ,   ( ),   ( )"," ,   ,  "," ,  "]]},{type:"paragraph",text:"                 ."},{type:"heading_3",text:"  "},{type:"paragraph",text:"    .          ,          .       ,     . ,            . ,                ."},{type:"paragraph",text:"         .       ."}]},Kc="https://script.google.com/macros/s/AKfycbzOtoczmXQAMBFESt2Tp33JWfR45D2_-VGA11BROUWVdUX0Z4Au7M3qZ-eDJ5lKdgnB/exec",Yc="https://script.google.com/macros/s/AKfycby_XDKGTcB-NLSgxQpdCmHi8WrrL4IEyFRXf9SHSFAsHXJAijhFRLO4gd0QCc0RNuOWIw/exec",Qc="https://script.google.com/macros/s/AKfycbwyg-Iut_KAr-w7BrcywoDCsZOLUG3gNG_XPFsGBlLEi1UxCpHlzn_2eSlwwYRj7_U4bw/exec",Xc="https://docs.google.com/spreadsheets/d/e/2PACX-1vQJJvnRQkDH7T4pffBgBdPDPstjI3NceX93zvvqljQKnaKUUCSxasyyjvKZWu3NKxjRxlKvWgufbswy/pub?output=csv",Ze=e=>e?typeof e=="string"?e:e.runs?e.runs.map(t=>t.text||"").join(""):e.text||"":"",en=e=>{var x,w,C,N;if(!e||e.length===0)return{pages:[],footnotes:{}};const t={},n=[];let r=null;for(const v of e)if(v.type==="footnote_marker"){const y=(x=v.text)==null?void 0:x.match(/\d+/);y&&(r=y[0])}else v.type==="footnote_content"&&r?(t[r]=((N=((C=(w=v.runs)==null?void 0:w[0])==null?void 0:C.text)||v.text)==null?void 0:N.trim())||"",r=null):n.push(v);let o=1;const s=v=>{if(v.type==="table"&&v.rows){const g=v.rows.map(E=>E.map(S=>{if(typeof S=="object"&&S!==null)return s(S);if(typeof S=="string"&&S.includes("[#]")){let k=S;for(;k.includes("[#]");)k=k.replace("[#]",`[${o++}]`);return k}return S}));return{...v,rows:g}}if(v.runs&&v.runs.some(g=>g.text&&g.text.includes("[#]"))){const g=[];return v.runs.forEach(E=>{E.text&&E.text.includes("[#]")?E.text.split(/(\[#\])/g).forEach(k=>{k==="[#]"?g.push({...E,text:`[${o++}]`}):k&&g.push({...E,text:k})}):g.push(E)}),{...v,runs:g,text:void 0}}const y=v.text||(v.runs?v.runs.map(g=>g.text||"").join(""):"");if(y&&y.includes("[#]")){let g=y;for(;g.includes("[#]");)g=g.replace("[#]",`[${o++}]`);return{...v,text:g,runs:void 0}}return v},i=n.map(s),u=[];let c=[];const f=v=>v.type==="heading_1"||v.type==="title";for(const v of i)f(v)&&c.length>0&&(u.push(c),c=[]),c.push(v);c.length>0&&u.push(c);const p=v=>v.replace(/^[\uFFFD]/u,"").replace(/\uFFFD/g,"").trim(),m=v=>v.runs&&v.runs.length>0?v.runs.map(y=>y.text).join(""):v.text||"";return{pages:u.map((v,y)=>{const g=v.find(f)||{text:"",type:"heading_1"},E=p(m(g)),S=`page-${y}-${E.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"")}`;v.forEach((_,M)=>{if(!_.id){const L=m(_).slice(0,20).replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"");_.id=`${S}-el-${M}-${L}`}if(_.type==="title"||_.type.startsWith("heading_")){const G=p(m(_)).toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\uAC00-\uD7A3]/g,"");_.id=`${S}-section-${M}-${G}`}});const k=[];let T=!1;const A=v.some(_=>{const M=m(_);return _.type==="heading_2"&&M.includes(" ")});for(const _ of v){const M=m(_);if(!M)continue;if(g.type==="title"?_.type.startsWith("heading_"):_.type.startsWith("heading_")&&_.type!=="heading_1"){if(A){if(_.type==="heading_2"&&(T=!1),M.includes(" "))continue;if(M.includes("")){T=!0;continue}}if(!T){const G=_.type.split("_"),B=G.length>1?parseInt(G[1],10):1;k.push({id:_.id,title:p(M),level:B})}}}return{id:S,title:E,content:v,subsections:k}}).filter(v=>{const y=v.title.includes(""),g=v.content.length<=1;return!(y&&g)}),footnotes:t}},Qo=e=>{const t=[],n=[];e.forEach(s=>{const i=s.title.includes("");s.content.forEach(u=>{var c,f,p,m;if(u.type==="table"&&u.rows){const h=u.rows.flat().map(C=>Ze(C)).join(" "),x=h.includes("")&&h.includes(""),w=h.includes("")&&h.includes("")&&!h.includes("");if(x)try{let C="",N="",v="-",y="-";const E=Ze(((c=u.rows[0])==null?void 0:c[0])||"").split(/\n+/);C=E[0].trim(),E.length>1?N=E.slice(1).join(" ").trim():u.rows.length>1&&!u.rows[1].some(S=>Ze(S).includes(""))&&(N=Ze(((f=u.rows[1])==null?void 0:f[0])||"").trim()),u.rows.forEach((S,k)=>{S.forEach((T,A)=>{var M,L,G,B;const _=Ze(T);if(_.includes("")){const I=((M=u.rows[k])==null?void 0:M[A+1])||((L=u.rows[k+1])==null?void 0:L[A]);I&&(v=Ze(I).trim())}if(_.includes("")){const I=((G=u.rows[k])==null?void 0:G[A+1])||((B=u.rows[k+1])==null?void 0:B[A]);I&&(y=Ze(I).trim())}})}),C&&!C.includes("[")&&!C.includes(" ")&&t.push({name:C,description:N,condition:v,charge:y,isCreation:i})}catch{}else if(w)try{let C="",N="",v="-",y=0;const E=Ze(((p=u.rows[0])==null?void 0:p[0])||"").split(/\n+/);C=E[0].trim(),E.length>1?N=E.slice(1).join(" ").trim():u.rows.length>1&&!u.rows[1].some(S=>Ze(S).includes(""))&&(N=Ze(((m=u.rows[1])==null?void 0:m[0])||"").trim()),u.rows.forEach((S,k)=>{S.forEach((T,A)=>{var M,L,G,B;const _=Ze(T);if(_.includes("")){const I=((M=u.rows[k])==null?void 0:M[A+1])||((L=u.rows[k+1])==null?void 0:L[A]);I&&(v=Ze(I).trim())}if(_.includes("")){const I=((G=u.rows[k])==null?void 0:G[A+1])||((B=u.rows[k+1])==null?void 0:B[A]);if(I){const Y=Ze(I).trim(),z=parseInt(Y,10);isNaN(z)||(y=z)}}})}),C&&!C.includes("[")&&!C.includes("")&&n.push({name:C,description:N,durability:v,volume:y,isCreation:i})}catch{}}})});const r=Array.from(new Map(t.map(s=>[s.name,s])).values()),o=Array.from(new Map(n.map(s=>[s.name,s])).values());return{abilities:r,items:o}},FC=(e,t)=>{const n=`w-5 h-5 flex-shrink-0 transition-colors ${t?"text-cyan-600 dark:text-white":"text-slate-400 group-hover:text-cyan-600 dark:group-hover:text-cyan-300"}`;return e.includes("")?a.jsx(mi,{className:n}):e.includes(" ")||e.includes("")?a.jsx(_r,{className:n}):e.includes("")||e.includes("")?a.jsx(Pr,{className:n}):e.includes("")?a.jsx(hi,{className:n}):e.includes("")?a.jsx(Qt,{className:n}):e.includes("")||e.includes("")?a.jsx(Ve,{className:n}):e.includes("")||e.includes("")?a.jsx(Tn,{className:n}):e.includes("")||e.includes("")?a.jsx(B0,{className:n}):e.includes("")?a.jsx(Hs,{className:n}):e.toLowerCase().includes("faq")||e.includes("")||e.includes("")||e.includes("q&a")?a.jsx(dC,{className:n}):e.includes("")||e.includes("")?a.jsx(Ve,{className:n}):a.jsx(_r,{className:n})},UC=({onUpdate:e,refreshTrigger:t,setDeployVersion:n,setAddonDeployVersion:r,setSecondDeployVersion:o,forceOffline:s,onDataLoaded:i,onPagesLoaded:u,navigateToCreator:c})=>{const[f,p]=b.useState([]),[m,h]=b.useState({}),[x,w]=b.useState(!0),[C,N]=b.useState(null),[v,y]=b.useState(!0),[g,E]=b.useState(!1),[S,k]=b.useState([]),[T,A]=b.useState(""),[_,M]=b.useState(!1),[L,G]=b.useState(0),[B,I]=b.useState(new Set([0])),[Y,z]=b.useState(""),[ie,R]=b.useState(0),V=b.useRef(0),q=b.useRef(null),ae=b.useRef(!1),se=1500,[Se,we]=b.useState(null),[Re,P]=b.useState(null),U=b.useCallback((D,W)=>{P({content:D,rect:W})},[]),$=b.useCallback(()=>{P(null)},[]);b.useEffect(()=>{try{const D=Kc.split("/"),W=D[D.length-2];if(n(W),r){const Z=Yc.split("/"),K=Z[Z.length-2];r(K)}if(o){const Z=Qc.split("/"),K=Z[Z.length-2];o(K)}}catch(D){console.error("Could not parse deployment version",D),n("N/A")}},[n,r,o]),b.useEffect(()=>{f.length>0&&L>=f.length&&G(0)},[f.length,L]),b.useEffect(()=>{if(!x)return;const D=[":    .",":     ?  .",":    .",":     .",":      ."],W=ee=>{const X=new DOMParser().parseFromString(ee,"text/html").querySelectorAll("table"),oe=[];return X.forEach(de=>{const ke=de.querySelectorAll("tr");for(let De=1;De<ke.length;De++)ke[De].querySelectorAll("td").forEach(Xt=>{var En;const Ft=(En=Xt.textContent)==null?void 0:En.trim();Ft&&Ft.length>0&&oe.push(Ft)})}),oe},Z=ee=>{const Q=ee.split(/\r?\n/),re=[];for(let X=1;X<Q.length;X++){const oe=Q[X];if(!oe.trim())continue;let de="",ke=!1;for(let De=0;De<oe.length;De++){const ht=oe[De];ht==='"'?ke&&oe[De+1]==='"'?(de+='"',De++):ke=!ke:ht===","&&!ke?(de.trim()&&re.push(de.trim()),de=""):de+=ht}de.trim()&&re.push(de.trim())}return re};(async()=>{try{const ee=await fetch(Xc);if(!ee.ok)throw new Error("Fetch failed");const Q=await ee.text();let re=[];if(Xc.includes("pubhtml")?re=W(Q):re=Z(Q),re.length>0){const X=Array.from(new Set(re));k(X),A(X[Math.floor(Math.random()*X.length)])}else k(D),A(D[0])}catch(ee){console.warn("Loading messages fetch failed, using default.",ee),k(D),A(D[0])}})()},[x]),b.useEffect(()=>{if(!x||S.length<=1)return;const D=setInterval(()=>{M(!0),setTimeout(()=>{A(W=>{let Z=S[Math.floor(Math.random()*S.length)];if(S.length>1&&Z===W){const K=Math.floor(Math.random()*S.length);Z=S[K]}return Z}),M(!1)},500)},4e3);return()=>clearInterval(D)},[x,S]),b.useEffect(()=>{const D=document.querySelector("main");D&&(Se||window.scrollTo({top:D.offsetTop-80,behavior:"auto"}),ae.current=!1),V.current=0,R(0)},[L]),b.useEffect(()=>{I(D=>{const W=new Set(D);return W.has(L)||W.add(L),W})},[L]);const j=b.useCallback(D=>{const W=document.getElementById(D),Z=80;if(W){let K=W;const ee=W.closest('[data-highlight-container="true"]');if(ee instanceof HTMLElement)K=ee;else if(W.offsetHeight===0){const ke=W.nextElementSibling;ke instanceof HTMLElement&&(K=ke)}const Q=K.getBoundingClientRect(),re=Q.top+window.scrollY,X=window.innerHeight;let oe=re-X/2+Q.height/2;const de=re-Z-20;(Q.height>X-Z||oe>de)&&(oe=de),window.scrollTo({top:oe,behavior:"smooth"}),K.classList.contains("cursor-pointer")?K.click():(K.classList.remove("highlight-animate"),K.offsetWidth,K.classList.add("highlight-animate"),setTimeout(()=>K.classList.remove("highlight-animate"),3e3))}},[]);b.useEffect(()=>{const D=W=>{const Z=W.detail.title.toLowerCase().trim();let K=-1,ee="";for(let Q=0;Q<f.length;Q++){const re=f[Q];if(re.title.toLowerCase().includes(Z)){K=Q,ee="";break}for(const X of re.subsections)if(X.title.toLowerCase().includes(Z)){K=Q,ee=X.id;break}if(K!==-1)break;if(K===-1)for(const X of re.content){const oe=X.text||(X.runs?X.runs.map(de=>de.text).join(""):"");if(X.type.startsWith("heading")&&oe.toLowerCase().includes(Z)){K=Q,ee=X.id||"";break}if(X.type==="table"&&X.rows&&X.rows.length>0&&Ze(X.rows[0][0]).toLowerCase().includes(Z)){K=Q,ee=X.id||"";break}}if(K!==-1)break}K!==-1?L===K?ee?j(ee):window.scrollTo({top:0,behavior:"smooth"}):(G(K),we(ee)):console.warn(`Cannot find section: ${Z}`)};return window.addEventListener("rulebook-navigate",D),()=>window.removeEventListener("rulebook-navigate",D)},[f,L,j]),b.useEffect(()=>{if(Se){const D=setTimeout(()=>{j(Se),we(null)},600);return()=>clearTimeout(D)}},[L,Se,j]);const J=(D,W,Z)=>{D.preventDefault(),L!==W?(we(Z),G(W)):j(Z)},he=(D,W)=>{D.stopPropagation(),I(Z=>{const K=new Set(Z);return K.has(W)?K.delete(W):K.add(W),K})},st=b.useCallback(async()=>{let D=!1;if(N(null),s){console.log("   .   .");const{pages:Q,footnotes:re}=en(Oc.elements);if(p(Q),h(re),i){const{abilities:X,items:oe}=Qo(Q);i(X,oe)}u&&u(Q),e("fallback"),w(!1);return}const W=localStorage.getItem("cachedRulebookData"),Z=localStorage.getItem("cachedAddonData"),K=localStorage.getItem("cachedSecondData"),ee=Q=>Q&&Q!=="undefined"&&Q!=="null";if(ee(W)&&ee(Z)&&ee(K))try{const Q=JSON.parse(W),re=JSON.parse(Z),X=JSON.parse(K),{pages:oe,footnotes:de}=en(Q),{pages:ke,footnotes:De}=en(re),{pages:ht,footnotes:Xt}=en(X);ht.forEach(_n=>{_n.title.includes("")||(_n.title=`[] ${_n.title}`)});const Ft=[...oe,...ke,...ht],En={...de,...De,...Xt};if(p(Ft),h(En),i){const{abilities:_n,items:Lr}=Qo(Ft);i(_n,Lr)}u&&u(Ft),D=!0}catch(Q){console.error("   ",Q),localStorage.removeItem("cachedRulebookData"),localStorage.removeItem("cachedAddonData"),localStorage.removeItem("cachedSecondData")}try{const[Q,re,X]=await Promise.all([fetch(Kc),fetch(Yc),fetch(Qc)]);if(!Q.ok)throw new Error(`  : ${Q.statusText}`);if(!re.ok)throw new Error(`  : ${re.statusText}`);if(!X.ok)throw new Error(`  : ${X.statusText}`);const oe=await Q.json(),de=await re.json(),ke=await X.json();if(oe.error)throw new Error(`  : ${oe.error}`);if(de.error)throw new Error(`  : ${de.error}`);if(ke.error)throw new Error(`  : ${ke.error}`);const{pages:De,footnotes:ht}=en(oe.elements),{pages:Xt,footnotes:Ft}=en(de.elements),{pages:En,footnotes:_n}=en(ke.elements);if(De.length<2)throw new Error(" . (  )");En.forEach(Dr=>{Dr.title.includes("")||(Dr.title=`[] ${Dr.title}`)});const Lr=[...De,...Xt,...En],Z0={...ht,...Ft,..._n};if(p(Lr),h(Z0),i){const{abilities:Dr,items:eh}=Qo(Lr);i(Dr,eh)}u&&u(Lr),oe!=null&&oe.elements&&localStorage.setItem("cachedRulebookData",JSON.stringify(oe.elements)),de!=null&&de.elements&&localStorage.setItem("cachedAddonData",JSON.stringify(de.elements)),ke!=null&&ke.elements&&localStorage.setItem("cachedSecondData",JSON.stringify(ke.elements)),e("success")}catch(Q){if(console.warn("   .     .",Q),N(Q instanceof Error?Q.message:String(Q)),!D){const{pages:re,footnotes:X}=en(Oc.elements);if(p(re),h(X),i){const{abilities:oe,items:de}=Qo(re);i(oe,de)}u&&u(re)}e("fallback",Q)}finally{w(!1)}},[e,s,i,u]);b.useEffect(()=>{w(!0),st()},[t,st]);const it=b.useCallback(()=>{G(D=>Math.max(0,D-1))},[]),lt=b.useCallback(()=>{G(D=>Math.min(f.length-1,D+1))},[f.length]);b.useEffect(()=>{let D=0;const W=()=>{q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{R(0),V.current=0},5e3)},Z=X=>{W();const oe=window.innerHeight+window.scrollY,de=document.documentElement.offsetHeight,ke=Math.abs(de-oe)<20,De=L<f.length-1;ke&&De&&X.deltaY>0?(V.current=Math.min(V.current+X.deltaY,se),R(V.current/se*100),V.current>=se&&(ae.current=!0,lt(),V.current=0,R(0),q.current&&clearTimeout(q.current))):V.current>0&&(V.current=0,R(0))},K=()=>{if(V.current>0){const X=window.innerHeight+window.scrollY,oe=document.documentElement.offsetHeight;Math.abs(oe-X)<20||(V.current=0,R(0))}},ee=X=>{D=X.touches[0].clientY,W()},Q=X=>{W();const oe=window.innerHeight+window.scrollY,de=document.documentElement.offsetHeight,ke=Math.abs(de-oe)<20,De=L<f.length-1,ht=X.touches[0].clientY,Xt=D-ht;ke&&De&&Xt>0?(V.current=Math.min(V.current+Xt*2,se),R(V.current/se*100),V.current>=se&&(ae.current=!0,lt(),V.current=0,R(0),q.current&&clearTimeout(q.current)),D=ht):V.current>0&&(V.current=0,R(0))},re=()=>{if(V.current<se&&V.current>0){const X=setInterval(()=>{V.current<=0?(clearInterval(X),R(0)):(V.current-=50,R(Math.max(0,V.current/se*100)))},16)}};return window.addEventListener("wheel",Z),window.addEventListener("scroll",K),window.addEventListener("touchstart",ee),window.addEventListener("touchmove",Q),window.addEventListener("touchend",re),()=>{window.removeEventListener("wheel",Z),window.removeEventListener("scroll",K),window.removeEventListener("touchstart",ee),window.removeEventListener("touchmove",Q),window.removeEventListener("touchend",re),q.current&&clearTimeout(q.current)}},[f.length,L,lt]);const te=D=>D.runs?D.runs.map(W=>W.text).join(""):D.text||"",fe=b.useMemo(()=>{if(!Y.trim())return[];const D=Y.toLowerCase(),W=[];return f.forEach((Z,K)=>{Z.content.forEach(ee=>{if(ee.type==="table"&&ee.rows)ee.rows.forEach((Q,re)=>{Q.forEach(X=>{let oe="";typeof X=="string"?oe=X:X&&typeof X=="object"&&(oe=te(X)),oe.toLowerCase().includes(D)&&W.push({pageIndex:K,elementId:ee.id,text:oe,type:" "})})});else{const Q=te(ee);Q.toLowerCase().includes(D)&&W.push({pageIndex:K,elementId:ee.id,text:Q,type:ee.type.includes("heading")?"":""})}})}),W},[Y,f]),me=(D,W)=>{L===D?W&&j(W):(G(D),W&&we(W))},Te=(D,W)=>{const Z=B.has(W),K=D.subsections.length>0;return a.jsxs("li",{children:[a.jsxs("div",{className:`group flex items-center w-full rounded-md transition-all duration-200 mb-1 ${W===L?"bg-cyan-600 text-white shadow-md dark:shadow-none":"hover:bg-slate-100 text-slate-600 hover:text-slate-900 dark:hover:bg-slate-700 dark:text-slate-300 dark:hover:text-white"}`,children:[a.jsxs("button",{onClick:ee=>{L===W?he(ee,W):G(W)},className:"flex-grow text-left font-semibold p-2 pl-3 focus:outline-none flex items-center gap-3",children:[FC(D.title,W===L),a.jsx("span",{className:"truncate",children:D.title})]}),K&&a.jsx("button",{onClick:ee=>he(ee,W),className:"p-2 px-3 focus:outline-none","aria-label":Z?" ":" ",children:a.jsx(sn,{className:`w-4 h-4 transition-transform duration-200 ${Z?"rotate-90":""}`})})]}),K&&a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${Z?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"pl-3 border-l-2 border-slate-300 dark:border-slate-600 space-y-1 ml-1 mb-2",children:D.subsections.map(ee=>{let Q="text-slate-500 font-medium dark:text-slate-400",re="text-sm";return ee.level===3?Q="pl-6 text-slate-400 font-normal dark:text-slate-500":ee.level>=4&&(Q="pl-10 text-slate-400 font-normal dark:text-slate-500",re="text-xs"),a.jsx("li",{children:a.jsx("a",{href:`#${ee.id}`,onClick:X=>J(X,W,ee.id),className:`block ${re} py-1 px-2 rounded transition-colors truncate ${Q} hover:text-cyan-600 dark:hover:text-cyan-300 hover:bg-slate-100 dark:hover:bg-slate-700/50`,title:ee.title,children:ee.title})},ee.id)})})})})]},D.id)};if(x)return a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg animate-pulse mb-1",children:"  ..."}),T&&a.jsx("p",{className:`text-slate-500 dark:text-slate-500 text-sm max-w-md text-center px-4 transition-opacity duration-500 ${_?"opacity-0":"opacity-100"}`,children:T})]})});const Ie=f[L];return a.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative",children:[a.jsxs("aside",{className:"md:w-1/4 lg:w-1/5 md:sticky md:top-24 self-start max-h-[calc(100vh-8rem)] overflow-y-auto p-2 custom-scrollbar flex flex-col gap-4",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wt,{className:"h-4 w-4 text-slate-400 dark:text-slate-500"})}),a.jsx("input",{type:"text",className:"bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 text-slate-800 dark:text-slate-300 text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 block w-full pl-9 p-2.5 placeholder-slate-400 dark:placeholder-slate-500 transition-colors",placeholder:" ...",value:Y,onChange:D=>z(D.target.value)}),Y&&a.jsx("button",{onClick:()=>z(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"h-4 w-4"})})]}),Y?a.jsx("nav",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-1 overflow-y-auto transition-colors",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"font-bold text-sm mb-3 text-cyan-600 dark:text-cyan-400 border-b border-slate-200 dark:border-slate-600 pb-2",children:["  (",fe.length,")"]}),fe.length>0?a.jsx("ul",{className:"space-y-3",children:fe.map((D,W)=>{var Z;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>me(D.pageIndex,D.elementId),className:"text-left w-full group",children:[a.jsxs("div",{className:"text-xs text-cyan-600 dark:text-cyan-500 font-semibold mb-0.5",children:[D.type,"  ",(Z=f[D.pageIndex])==null?void 0:Z.title]}),a.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300 group-hover:text-black dark:group-hover:text-white line-clamp-2 leading-snug",children:D.text})]})},W)})}):a.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"  ."})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-shrink-0 overflow-hidden transition-colors",children:[a.jsxs("button",{onClick:()=>y(!v),className:"w-full flex items-center justify-between p-4 focus:outline-none hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:""}),a.jsx(sn,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${v?"rotate-90":""}`})]}),a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${v?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"space-y-2 p-4 pt-0 border-t border-slate-200 dark:border-slate-700/50 mt-2",children:f.map((D,W)=>D.title.includes("")?null:Te(D,W))})})})]}),a.jsxs("nav",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 flex-shrink-0 overflow-hidden transition-colors",children:[a.jsxs("button",{onClick:()=>E(!g),className:"w-full flex items-center justify-between p-4 focus:outline-none hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[a.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:""})," "]}),a.jsx(sn,{className:`w-5 h-5 text-slate-400 transition-transform duration-200 ${g?"rotate-90":""}`})]}),a.jsx("div",{className:`grid transition-[grid-template-rows] duration-300 ease-in-out ${g?"grid-rows-[1fr]":"grid-rows-[0fr]"}`,children:a.jsx("div",{className:"overflow-hidden",children:a.jsx("ul",{className:"space-y-2 p-4 pt-0 border-t border-slate-200 dark:border-slate-700/50 mt-2",children:f.map((D,W)=>D.title.includes("")?Te(D,W):null)})})})]})]})]}),a.jsxs("article",{className:"md:w-3/4 lg:w-4/5 bg-white dark:bg-slate-800 p-6 sm:p-10 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 min-h-[500px] relative transition-colors",children:[Ie?a.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none animate-slide-in-bottom",children:a.jsx(DC,{elements:Ie.content,pageTitle:Ie.title,footnotes:m,onShowFootnote:U,onHideFootnote:$})},Ie.id):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center p-8 animate-fade-in-fast",children:[a.jsx("div",{className:"w-32 h-32 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-6 shadow-[0_0_20px_rgba(239,68,68,0.2)]",children:a.jsx(He,{className:"w-16 h-16 text-red-500 dark:text-red-400"})}),a.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 mb-3",children:" "}),a.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mb-10",children:"   ."}),a.jsxs("div",{className:"w-full max-w-lg bg-slate-100 dark:bg-slate-900/80 rounded-xl p-5 border border-slate-200 dark:border-slate-700 text-left shadow-inner",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),a.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),a.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-xs font-mono text-slate-400 ml-auto",children:"ERROR_LOG"})]}),a.jsxs("div",{className:"font-mono text-xs sm:text-sm space-y-1",children:[a.jsxs("div",{className:"text-slate-500",children:["CODE: ",a.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-bold",children:C?"LOAD_FAILURE":"NO_CONTENT"})]}),a.jsxs("div",{className:"text-red-600 dark:text-red-400 break-all leading-relaxed",children:["Message: ",C||"      ."]})]})]})]}),ie>0&&L<f.length-1&&a.jsxs("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center gap-2 pointer-events-none",children:[a.jsx("div",{className:"bg-slate-800/95 dark:bg-slate-800/95 backdrop-blur-sm border border-slate-600 px-4 py-2 rounded-full shadow-xl",children:a.jsxs("span",{className:"text-cyan-400 text-sm font-bold flex items-center gap-2",children:[a.jsx(sn,{className:"w-4 h-4 rotate-90"}),"   "]})}),a.jsx("div",{className:"w-48 h-1.5 bg-slate-700 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-cyan-400 transition-all duration-75 ease-out shadow-[0_0_10px_rgba(34,211,238,0.5)]",style:{width:`${Math.min(ie,100)}%`}})})]}),Re&&a.jsxs("div",{className:"fixed z-[100] bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm p-3 rounded-lg shadow-xl border border-slate-300 dark:border-slate-600 max-w-sm pointer-events-none animate-fade-in",style:{left:`${Math.min(window.innerWidth-320,Math.max(10,Re.rect.left-150))}px`,top:`${Re.rect.top-10}px`,transform:"translateY(-100%)"},children:[a.jsx("div",{className:"font-semibold text-cyan-600 dark:text-cyan-400 mb-1 border-b border-slate-200 dark:border-slate-700 pb-1",children:""}),a.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:Re.content}),a.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-slate-900 border-b border-r border-slate-300 dark:border-slate-600 rotate-45",style:{bottom:"-7px",left:`${Math.min(300,Math.max(20,Re.rect.left-Math.min(window.innerWidth-320,Math.max(10,Re.rect.left-150))))}px`}})]})]}),f.length>0&&a.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex items-center gap-3",children:[a.jsx("button",{onClick:it,disabled:L===0,className:`
                            flex items-center justify-center w-12 h-12 rounded-full shadow-lg border transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500
                            ${L===0?"opacity-0 pointer-events-none translate-x-8":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-900 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-500 translate-x-0"}
                        `,"aria-label":" ",title:L>0&&f[L-1]?`: ${f[L-1].title}`:" ",children:a.jsx(ci,{className:"w-6 h-6"})}),a.jsx("button",{onClick:lt,disabled:L>=f.length-1,className:`
                            flex items-center justify-center w-12 h-12 rounded-full shadow-lg border transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500
                            ${L>=f.length-1?"opacity-0 pointer-events-none translate-x-8":"bg-cyan-600 border-cyan-500 text-white hover:bg-cyan-500 hover:border-cyan-400 translate-x-0"}
                        `,"aria-label":" ",title:L<f.length-1&&f[L+1]?`: ${f[L+1].title}`:" ",children:a.jsx(sn,{className:"w-6 h-6"})})]})]})},VC=[{name:" ",description:"1       ,     6  .",condition:"  ",charge:"4"},{name:" ",description:"    1   .",condition:"-",charge:"-"},{name:" ",description:"1              .            .",condition:"-",charge:"3"},{name:" ",description:"              2   .",condition:"-",charge:"1"},{name:"",description:"3    .              .",condition:"-",charge:"2"},{name:"",description:"1 ,  1        .          .     .",condition:"-",charge:"-"},{name:" ",description:"1      ,        .   ,  3  .",condition:"-",charge:"-"},{name:" ",description:"  ,     .",condition:"-",charge:"3"},{name:" ",description:"      20 ,    1 .",condition:"-",charge:"-"},{name:"",description:"1     2   .",condition:"-",charge:"2"},{name:"",description:"3   ,      ,    2  .      1 .",condition:"-",charge:"2"},{name:" ",description:"         .      ,     .",condition:"    4 ",charge:"-"},{name:" ",description:"1      ,       .",condition:"-",charge:"1"},{name:"",description:`1        .      0    .
    .`,condition:"-",charge:"2"},{name:" ",description:"    +1  .",condition:"   5",charge:"3"},{name:" ",description:"   5 .",condition:"-",charge:"-"},{name:" ",description:"   3       ,    6   2   .",condition:"-",charge:"3"},{name:" ",description:"     2 .     .",condition:"-",charge:"2"},{name:" ",description:" ,       .",condition:"-",charge:"3"},{name:" ",description:"2     .",condition:"-",charge:"3"},{name:" ",description:"3      6 ,     2  .",condition:"-",charge:"3"},{name:"",description:"4      12 ,    .   6    2  .",condition:"  ",charge:"1"},{name:" ",description:"4      9 .   7     3  .",condition:"  ",charge:"1"},{name:" ",description:"1      6 .       3  .",condition:"  ",charge:"1"},{name:" ",description:"  ,      4   .",condition:"    ",charge:"1"},{name:" ",description:"3   .         .",condition:"  ",charge:"2"},{name:" ",description:"1    .",condition:"-",charge:"1"},{name:" ",description:"3    . 2m  .  .",condition:"   ",charge:"3"},{name:"",description:"3     2 ,    .",condition:"   ",charge:"3"},{name:" ",description:"1      .  ,     3   .       .",condition:"  ",charge:"1"},{name:"",description:" 1     .     2       .",condition:"   ",charge:"3"},{name:" ",description:" 1       ,         3  .",condition:"   2   ",charge:"4"},{name:"",description:" 4       ,           3 .",condition:"   5   ",charge:"2"},{name:" ",description:"1           2 .     .",condition:"   ",charge:"1"},{name:" ",description:"3               .",condition:"   ",charge:"2"},{name:" ",description:"   5     .       .",condition:"  ",charge:"2"},{name:" ",description:"  ,    .      3(m)   ,      .",condition:"   ",charge:"2"},{name:"",description:"1      .   .    2m    .",condition:"   ",charge:"1"},{name:"",description:"  .",condition:"   ",charge:"2"},{name:" ",description:"  15     .       .",condition:"-",charge:"1"},{name:" ",description:"           .",condition:"-",charge:"2"},{name:" ",description:"1       .    ,           .",condition:"-",charge:"3"},{name:"  ",description:"    //        ,",condition:"   5 ",charge:"1"},{name:" ",description:"         .           .      .",condition:"    ",charge:"4"}],GC=[{name:"",description:"1   2  .",durability:"8",volume:1},{name:"",description:"1   6  .",durability:"18",volume:7},{name:"",description:"      4   3 .",durability:"-",volume:4},{name:"",description:"      6    3 .",durability:"-",volume:8},{name:" ",description:"  .    .",durability:"7",volume:3},{name:"",description:" 1   2  .           +1  .",durability:"1",volume:2},{name:"",description:" 3    2 .",durability:"5",volume:2},{name:" ",description:"    5 .",durability:"1",volume:1},{name:" ",description:"   .  10     1 .",durability:"-",volume:0},{name:" ",description:"     .       , +1  .",durability:"3",volume:1},{name:" ",description:"        .",durability:"6",volume:3},{name:"",description:"       .",durability:"8",volume:6},{name:"",description:"   .         .",durability:"16",volume:10},{name:"",description:"   . ( 1  , 1  )",durability:"10",volume:2},{name:" ",description:"       .  1        .",durability:"10",volume:8},{name:"  ",description:"  .       .       +1  .",durability:"4",volume:1},{name:"  ",description:"  .",durability:"1",volume:4},{name:" ",description:"    -2 .",durability:"-",volume:0},{name:" ",description:"   2 .    .",durability:"1",volume:2},{name:" ",description:" ,    3 .    .",durability:"1",volume:2},{name:" ",description:" ,             .",durability:"1",volume:2},{name:" ",description:" ,    .    .",durability:"1",volume:2},{name:"",description:"     .      .",durability:"1",volume:2},{name:" ",description:"    1 .",durability:"1",volume:1},{name:"",description:"    1  .           .      .",durability:"1",volume:2},{name:"  ",description:"    ,      5 ,       ,    .",durability:"1",volume:3},{name:" ",description:"     .  ,        1  4    (:  ) .",durability:"1",volume:3},{name:"",description:"    .     1 2  .           1   .",durability:"1",volume:2},{name:" ",description:"    .         .        .",durability:"3",volume:6}],Zc={profile:{name:"",image:"",info:"",backstory:"",bonds:"",memories:""},abilities:{luck:3,skills:[{name:"",score:1},{name:"",score:1},{name:"",score:1},{name:"",score:1},{name:"",score:1}],enhancements:[],status:"",growthPoints:0},inventory:{items:[],money:0}},Ki=["","","","",""],ef=6,Yi=2,Qi=3,Nn=({title:e,children:t})=>a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 transition-colors",children:[a.jsx("h3",{className:"text-lg font-bold text-cyan-700 dark:text-cyan-400 border-b border-slate-200 dark:border-slate-600 pb-2 mb-3",children:e}),t]}),jC=({skill:e})=>a.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-700/50 p-2 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:e.name}),a.jsx("span",{className:"font-bold text-cyan-600 dark:text-cyan-300 text-lg",children:e.score})]}),$C=({ability:e})=>a.jsxs("div",{className:"bg-white dark:bg-slate-700/50 p-3 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1 leading-snug",children:e.description}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 flex justify-between border-t border-slate-100 dark:border-slate-600/50 pt-2",children:[a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.condition]}),a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.charge]})]})]}),HC=({item:e})=>a.jsxs("div",{className:"bg-white dark:bg-slate-700/50 p-3 rounded-md border border-slate-200 dark:border-none shadow-sm dark:shadow-none transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1 leading-snug",children:e.description}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 flex justify-between border-t border-slate-100 dark:border-slate-600/50 pt-2",children:[a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.durability]}),a.jsxs("span",{children:[a.jsx("strong",{children:":"})," ",e.volume]})]})]}),BC=({character:e})=>{const t=e.inventory.items.reduce((p,m)=>p+m.volume,0),[n,r]=b.useState(0),[o,s]=b.useState(!1),{quote:i,basicInfo:u}=b.useMemo(()=>{const m=(e.profile.info||"").split(`

`).filter(C=>C.trim()),h=m.findIndex(C=>C.trim().startsWith('"')&&C.trim().endsWith('"'));let x=null,w=m;return h!==-1&&(x=m[h].replace(/^"|"$/g,""),w=m.filter((C,N)=>N!==h)),{quote:x,basicInfo:w}},[e.profile.info]),c=[{id:"fantasy",name:"",container:"relative inline-block my-3 max-w-xl px-6 py-2",text:"text-xl md:text-2xl font-serif italic text-transparent bg-clip-text bg-gradient-to-r from-cyan-700 via-slate-900 to-cyan-700 dark:from-cyan-200 dark:via-white dark:to-cyan-200 tracking-wide leading-relaxed drop-shadow-sm dark:drop-shadow-[0_0_10px_rgba(34,211,238,0.3)]",decoration:a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"absolute -top-3 -left-2 text-5xl text-slate-300 dark:text-slate-600/30 font-serif leading-none select-none",children:""}),a.jsx("span",{className:"absolute -bottom-5 -right-2 text-5xl text-slate-300 dark:text-slate-600/30 font-serif leading-none select-none",children:""})]})},{id:"modern",name:"",container:"relative inline-block my-3 max-w-xl bg-white dark:bg-slate-800/80 border-l-4 border-cyan-600 dark:border-cyan-500 rounded-r-lg px-5 py-3 shadow-md",text:"text-lg md:text-xl font-sans font-bold text-slate-800 dark:text-slate-100 leading-relaxed",decoration:null},{id:"terminal",name:"",container:"relative inline-block my-3 max-w-xl bg-slate-900 border border-green-500/50 rounded-sm px-4 py-3 shadow-[0_0_15px_rgba(34,197,94,0.15)]",text:"text-lg md:text-xl font-mono text-green-400 leading-relaxed",decoration:a.jsx("span",{className:"absolute -bottom-2 right-2 text-[10px] text-green-700/50 font-mono",children:"SYS.MSG.LOG_01"})},{id:"comic",name:"",container:"relative inline-block my-3 max-w-xl bg-white text-slate-900 rounded-2xl rounded-bl-none px-6 py-4 shadow-lg mx-2 border-2 border-slate-900 dark:border-none",text:"text-xl md:text-2xl font-bold font-sans leading-relaxed",decoration:a.jsx("div",{className:"absolute top-full left-[-2px] w-4 h-4 bg-white border-l-2 border-b-2 border-slate-900 dark:border-none clip-path-polygon-[0_0,100%_0,0_100%]"})}],f=c[n];return a.jsxs("div",{className:"bg-white dark:bg-slate-900/50 p-6 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 transition-colors",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8 border-b border-slate-200 dark:border-slate-700 pb-6",children:[a.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 shrink-0 rounded-full overflow-hidden bg-slate-100 dark:bg-slate-800 border-4 border-cyan-500/20 dark:border-cyan-500/30 shadow-xl flex items-center justify-center",children:e.profile.image?a.jsx("img",{src:e.profile.image,alt:e.profile.name,className:"w-full h-full object-cover"}):a.jsx(Pr,{className:"w-20 h-20 text-slate-400 dark:text-slate-600"})}),a.jsxs("div",{className:"text-center md:text-left flex-grow",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-wider mb-2 transition-colors",children:e.profile.name||" "}),i?a.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 group relative",children:[a.jsxs("div",{className:`${f.container} transition-all duration-300`,children:[f.decoration,a.jsx("p",{className:f.text,children:i})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>s(!o),className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800/80 text-slate-500 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-cyan-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all opacity-0 group-hover:opacity-100 shadow-md border border-slate-200 dark:border-slate-700",title:" ",children:a.jsx(Ve,{className:"w-5 h-5"})}),o&&a.jsx("div",{className:"absolute top-0 left-full ml-2 z-50 w-32 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg shadow-xl overflow-hidden flex flex-col animate-fade-in-fast",children:c.map((p,m)=>a.jsxs("button",{onClick:()=>{r(m),s(!1)},className:`px-3 py-2 text-left text-xs font-bold hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex justify-between items-center ${n===m?"text-cyan-600 dark:text-cyan-400 bg-slate-50 dark:bg-slate-700/50":"text-slate-600 dark:text-slate-300"}`,children:[p.name,n===m&&a.jsx(sn,{className:"w-3 h-3"})]},p.id))}),o&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})]}):null,a.jsx("div",{className:"text-slate-600 dark:text-slate-400 text-sm md:text-base space-y-1 mt-3 transition-colors",children:u.length>0?u.map((p,m)=>a.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:p},m)):!i&&a.jsx("p",{className:"text-slate-400 dark:text-slate-500 italic",children:"  "})})]}),a.jsxs("div",{className:"flex gap-4 md:gap-6 text-center shrink-0",children:[a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 min-w-[80px] transition-colors",children:[a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:""}),a.jsx("div",{className:"text-3xl font-black text-cyan-600 dark:text-cyan-400",children:e.abilities.luck})]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 min-w-[80px] transition-colors",children:[a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:" "}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-slate-200",children:t})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(Nn,{title:" ",children:a.jsx("div",{className:"space-y-2",children:e.abilities.skills.map(p=>a.jsx(jC,{skill:p},p.name))})}),a.jsx(Nn,{title:" ",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.abilities.status||"  "})})]}),a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(Nn,{title:" ",children:a.jsx("div",{className:"space-y-3",children:e.abilities.enhancements.length>0?e.abilities.enhancements.map(p=>a.jsx($C,{ability:p},p.name)):a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"   ."})})}),a.jsx(Nn,{title:"",children:a.jsx("div",{className:"space-y-3",children:e.inventory.items.length>0?e.inventory.items.map(p=>a.jsx(HC,{item:p},p.name)):a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:" ."})})})]}),a.jsxs("div",{className:"md:col-span-1 space-y-6",children:[a.jsx(Nn,{title:" ",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.backstory||"  ."})}),a.jsx(Nn,{title:"",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.bonds||" ."})}),a.jsx(Nn,{title:"",children:a.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.profile.memories||" ."})})]})]})]})},qC="https://script.google.com/macros/s/AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY/exec",Wn=(e,t)=>{const n=t==="ability"?"user_created_abilities":"user_created_items";localStorage.setItem(n,JSON.stringify(e))},W0=async(e,t,n)=>{const r=qC;let o;t==="ability"?o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.condition||"-",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.charge||"-",alignment:"LEFT"}]]}:o={type:"table",rows:[[{text:`${e.name}

${e.description}`,alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:e.durability||"-",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:"",alignment:"LEFT"}],[{text:"",alignment:"LEFT"},{text:String(e.volume!==void 0?e.volume:0),alignment:"LEFT"}]]};const i={document_content:JSON.stringify(o,null,2),export_type:t,timestamp:new Date().toISOString()};try{const u=await fetch(r,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(i)}),c=await u.json();if(u.ok&&c.status==="SUCCESS")n(`Google   !
 ID: ${c.document_id}`,"info");else{const f=c.message||"  ";n(` : ${f}`,"error")}}catch(u){console.error("Failed to export:",u);const c=u.message||String(u);n(` :   .
(${c})`,"error")}},zC=e=>{const t=[],n=o=>o?typeof o=="string"?o:o.runs?o.runs.map(s=>s.text).join(""):o.text||"":"";e.forEach(o=>{o.content.forEach(s=>{if(s.type==="table"&&s.rows){const i=s.rows.flat().map(c=>n(c)).join(" ");(i.includes("[passive]")||i.includes("[status]"))&&s.rows.forEach(c=>{c.forEach(f=>{let p=n(f).trim();p=p.replace(/\[passive\]|\[status\]/gi,"").trim(),p&&p.split(/\r?\n/).map(h=>h.trim()).filter(Boolean).forEach(h=>{let x=h,w="";const C=h.indexOf(" - ");if(C!==-1)x=h.substring(0,C).trim(),w=h.substring(C+3).trim();else{const N=h.indexOf("-");N>0&&(x=h.substring(0,N).trim(),w=h.substring(N+1).trim())}x.length>0&&x.length<20&&t.push({name:x,description:w})})})})}})});const r=new Map;return t.forEach(o=>r.set(o.name,o)),Array.from(r.values())},JC=({onAddAbility:e,onAddItem:t,onAddStatus:n,forcedType:r,rulebookContext:o})=>{const[s,i]=b.useState(!1),[u,c]=b.useState(""),[f,p]=b.useState([]),[m,h]=b.useState(!1),x=b.useRef(null),w=()=>{!s&&f.length===0&&p([{role:"model",text:" ?     !"}]),i(!s)},C=()=>{var y;(y=x.current)==null||y.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{s&&C()},[f,s]);const N=async y=>{if(y.preventDefault(),!u.trim())return;const g=u.trim();p(E=>[...E,{role:"user",text:g}]),c(""),h(!0);try{const E=new Er({apiKey:{}.API_KEY}),S=`
                You are Archi, a creative assistant for the TRPG 'Akasha Simpli'.
                The user will describe what they want to create.
                Your goal is to generate a JSON object based on the description, **strictly following the provided rulebook context** for style, balance, and mechanics.
                
                [Rulebook Context]
                ${o||"Rulebook content not available. Use standard TRPG logic."}

                [Rules]
                1. Create the content in Korean.
                2. Return ONLY a JSON object. No markdown code blocks.
                3. **Balance**: Ensure numeric values (Damage, Charge, Volume, Durability) align with the examples in the rulebook. 
                   - Damage is typically low single digits (1-6).
                   - Charge is often small numbers (1-5) or specific conditions (1/Round).
                   - Volume is typically 1-10.
                4. **Style**: Use the tone of the rulebook descriptions.
            `,k=`
                [Schema for Item]
                {
                    "type": "item",
                    "reply": "A short, friendly message introducing the item (in Korean).",
                    "data": {
                        "name": "string",
                        "description": "string (Include damage/effect if weapon/consumable)",
                        "durability": "string (e.g. '10', '', '-')",
                        "volume": number (integer)
                    }
                }
            `,T=`
                [Schema for Ability]
                {
                    "type": "ability",
                    "reply": "A short, friendly message introducing the ability (in Korean).",
                    "data": {
                        "name": "string",
                        "description": "string (Describe effect, range, damage)",
                        "condition": "string (e.g. ' ', '-')",
                        "charge": "string (e.g. '3', '1/', '-')"
                    }
                }
            `,A=`
                [Schema for Status]
                {
                    "type": "status",
                    "reply": "A short, friendly message introducing the status effect (in Korean).",
                    "data": {
                        "name": "string (Name of the status/trait)",
                        "description": "string (Effect description)"
                    }
                }
            `;let _="";r==="ability"?_=`${S}
                The user wants to create an **Ability**.
                ${T}
                
                User Input: "${g}"`:r==="item"?_=`${S}
                The user wants to create an **Item**.
                ${k}
                
                User Input: "${g}"`:r==="status"?_=`${S}
                The user wants to create a **Status Effect** (trait, condition, buff/debuff).
                ${A}
                
                User Input: "${g}"`:_=`${S}
                1. Infer whether the user wants an 'item' (physical object, weapon) or 'ability' (skill, spell).
                2. If it is ambiguous, default to 'item'.
                ${k}
                ${T}

                User Input: "${g}"`;const L=(await E.models.generateContent({model:"gemini-2.5-flash",contents:_,config:{responseMimeType:"application/json"}})).text;if(!L)throw new Error("No response");const G=JSON.parse(L);if(G.type&&G.data&&G.reply)p(B=>[...B,{role:"model",text:G.reply,generatedData:{type:G.type,data:{...G.data,isCreation:!0}}}]);else throw new Error("Invalid format")}catch(E){console.error(E),p(S=>[...S,{role:"model",text:",  .    ?"}])}finally{h(!1)}},v=y=>{y.generatedData&&(y.generatedData.type==="ability"&&e?(e(y.generatedData.data),i(!1),p([{role:"model",text:"  ?  !"}])):y.generatedData.type==="item"&&t?(t(y.generatedData.data),i(!1),p([{role:"model",text:"  ?  !"}])):y.generatedData.type==="status"&&n?(n(y.generatedData.data),i(!1),p([{role:"model",text:"  ?  !"}])):p(g=>[...g,{role:"model",text:"      ."}]))};return a.jsxs("div",{className:"fixed bottom-6 right-6 z-[200] flex flex-col items-end",children:[a.jsxs("div",{className:`
                mb-4 w-80 sm:w-96 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-2xl shadow-2xl overflow-hidden flex flex-col transition-all duration-300 origin-bottom-right
                ${s?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 pointer-events-none h-0"}
            `,style:{maxHeight:"500px"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-600 to-purple-600 p-3 flex justify-between items-center border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white font-bold",children:[a.jsx(Ve,{className:"w-5 h-5 text-fuchsia-200"}),a.jsx("span",{children:"  "})]}),a.jsx("button",{onClick:w,className:"text-white/70 hover:text-white",children:a.jsx(He,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-900/50 custom-scrollbar h-[300px]",children:[f.map((y,g)=>a.jsxs("div",{className:`flex flex-col ${y.role==="user"?"items-end":"items-start"}`,children:[y.text&&a.jsx("div",{className:`
                                    max-w-[85%] px-3 py-2 rounded-xl text-sm whitespace-pre-wrap shadow-sm
                                    ${y.role==="user"?"bg-fuchsia-600 text-white rounded-tr-none":"bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none border border-slate-200 dark:border-slate-600"}
                                `,children:y.text}),y.generatedData&&a.jsxs("div",{className:"mt-2 w-full max-w-[90%] bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-xl overflow-hidden shadow-lg animate-fade-in-fast",children:[a.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-fuchsia-600 dark:text-fuchsia-400 uppercase",children:y.generatedData.type==="ability"?" ":y.generatedData.type==="status"?" ":" "}),y.generatedData.type==="ability"?a.jsx(Qt,{className:"w-4 h-4 text-cyan-500"}):y.generatedData.type==="status"?a.jsx(Tn,{className:"w-4 h-4 text-emerald-500"}):a.jsx(_r,{className:"w-4 h-4 text-indigo-500"})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("div",{className:"font-bold text-slate-900 dark:text-white mb-1",children:y.generatedData.data.name}),a.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2 line-clamp-3",children:y.generatedData.data.description}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500 mb-3",children:y.generatedData.type==="ability"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[": ",y.generatedData.data.condition]}),a.jsxs("div",{children:[": ",y.generatedData.data.charge]})]}):y.generatedData.type==="status"?a.jsx("div",{className:"col-span-2 text-xs text-slate-500",children:" "}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[": ",y.generatedData.data.durability]}),a.jsxs("div",{children:[": ",y.generatedData.data.volume]})]})}),a.jsxs("button",{onClick:()=>v(y),className:"w-full py-1.5 bg-fuchsia-600 hover:bg-fuchsia-500 text-white text-xs font-bold rounded transition-colors flex items-center justify-center gap-1",children:[a.jsx(Ye,{className:"w-3 h-3"}),"  "]})]})]})]},g)),m&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl rounded-tl-none px-4 py-3 border border-slate-200 dark:border-slate-600 shadow-sm",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{ref:x})]}),a.jsxs("form",{onSubmit:N,className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[a.jsx("input",{type:"text",value:u,onChange:y=>c(y.target.value),placeholder:":  ,  ...",className:"flex-1 bg-slate-100 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-full px-4 py-2 text-sm text-slate-900 dark:text-white focus:outline-none focus:border-fuchsia-500 focus:ring-1 focus:ring-fuchsia-500",disabled:m}),a.jsx("button",{type:"submit",disabled:!u.trim()||m,className:"p-2 bg-fuchsia-600 text-white rounded-full hover:bg-fuchsia-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:a.jsx(mi,{className:"w-4 h-4"})})]})]}),a.jsxs("button",{onClick:w,className:`
                    w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 relative group
                    ${s?"bg-slate-700 text-white rotate-90":"bg-gradient-to-br from-fuchsia-600 to-purple-600 text-white hover:scale-110 shadow-fuchsia-500/30"}
                `,title:" ",children:[s?a.jsx(He,{className:"w-6 h-6"}):a.jsx(Ve,{className:"w-6 h-6"}),!s&&a.jsx("span",{className:"absolute right-full mr-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-white text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-600 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity shadow-md",children:" "})]})]})},WC=({isOpen:e,onClose:t,message:n,type:r="info"})=>e?a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-sm overflow-hidden flex flex-col p-6 text-center relative",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex justify-center mb-4",children:r==="error"?a.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-500/20 rounded-full text-red-600 dark:text-red-400",children:a.jsx(q0,{className:"w-8 h-8"})}):a.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-500/20 rounded-full text-cyan-600 dark:text-cyan-400",children:a.jsx(Hs,{className:"w-8 h-8"})})}),a.jsx("p",{className:"text-slate-700 dark:text-white text-lg mb-6 whitespace-pre-wrap leading-relaxed",children:n}),a.jsx("button",{onClick:t,className:"w-full py-2.5 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white rounded-lg font-bold transition-colors",children:""})]})}):null,OC=({name:e,setName:t,image:n,setImage:r,extendedProfile:o,setExtendedProfile:s})=>{const i=u=>{var f;const c=(f=u.target.files)==null?void 0:f[0];if(c){const p=new FileReader;p.onloadend=()=>{r(p.result)},p.readAsDataURL(c)}};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-6 flex items-center gap-2",children:[a.jsx(Pr,{className:"w-6 h-6"}),"1.  "]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:" "}),a.jsxs("div",{className:"relative aspect-square rounded-xl bg-slate-50 dark:bg-slate-900/50 border-2 border-dashed border-slate-300 dark:border-slate-600 hover:border-cyan-500 transition-colors overflow-hidden group",children:[n?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-bold",children:" "})})]}):a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500",children:[a.jsx(Ye,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-xs",children:" "})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"absolute inset-0 opacity-0 cursor-pointer"})]})]}),a.jsxs("div",{className:"md:col-span-2 space-y-4",children:[a.jsx(Xi,{label:" ",value:e,onChange:u=>t(u.target.value),placeholder:":  "}),a.jsx(Xi,{label:" / ",value:o.genderAge,onChange:u=>s(c=>({...c,genderAge:u.target.value})),placeholder:":  / 24"}),a.jsx(Xi,{label:" ()",value:o.commentary,onChange:u=>s(c=>({...c,commentary:u.target.value})),placeholder:": '   !'"})]}),a.jsx("div",{className:"md:col-span-3",children:a.jsx(O0,{label:" ",value:o.appearance,onChange:u=>s(c=>({...c,appearance:u.target.value})),placeholder:":      ,    ...",rows:4})})]})]})},Xi=({label:e,value:t,onChange:n,className:r,placeholder:o})=>a.jsxs("div",{className:r,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1.5",children:e}),a.jsx("input",{type:"text",value:t,onChange:n,placeholder:o,className:"w-full bg-white dark:bg-slate-900/50 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all placeholder-slate-400"})]}),O0=({label:e,value:t,onChange:n,className:r,placeholder:o,rows:s=4})=>a.jsxs("div",{className:r,children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1.5",children:e}),a.jsx("textarea",{value:t,onChange:n,rows:s,placeholder:o,className:"w-full bg-white dark:bg-slate-900/50 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all resize-none placeholder-slate-400"})]}),KC=({skills:e,updateSkills:t,rulebookPages:n})=>{const[r,o]=b.useState(""),[s,i]=b.useState([]),[u,c]=b.useState(!1),f=b.useRef(null),p=b.useMemo(()=>e.reduce((v,y)=>{const g=Ki.includes(y.name)?1:0;return v+(y.score-g)},0),[e]),m=ef-p,h=b.useMemo(()=>{const v=new Set;return["","","",""," ","","","","","","","","","","","",""," "," "," "," "," ","","",""," ","","","","",""," "," ",""].forEach(y=>v.add(y)),n&&n.forEach(y=>{y.content.forEach(g=>{g.type==="table"&&g.rows&&g.rows.flat().some(S=>{const k=typeof S=="string"?S:S.text||"";return k.includes("[skill]")||k.includes("  ")})&&g.rows.flat().forEach(S=>{let k=typeof S=="string"?S:S.text||"";k=k.replace(/\[skill\]/gi,"").trim(),k&&k.length>1&&k.length<20&&!k.includes("")&&!k.includes(" ")&&v.add(k)})})}),Array.from(v).sort()},[n]);b.useEffect(()=>{const v=y=>{f.current&&!f.current.contains(y.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const x=v=>{const y=v.target.value;if(o(y),y.trim()){const g=h.filter(E=>E.toLowerCase().includes(y.toLowerCase())&&!e.some(S=>S.name===E));i(g),c(!0)}else i([]),c(!1)},w=(v,y)=>{const g=e.map(E=>{if(E.name===v){const S=Ki.includes(v)?1:0,k=Math.max(S,E.score+y);return{...E,score:k}}return E});t(g)},C=v=>{const y=v||r;y&&!e.find(g=>g.name===y)&&(t([...e,{name:y,score:0}]),o(""),i([]),c(!1))},N=v=>{t(e.filter(y=>y.name!==v))};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Qt,{className:"w-6 h-6"}),"2.   "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:["   : ",a.jsx("span",{className:`font-bold text-2xl ${m<0?"text-red-500 dark:text-red-400":"text-cyan-600 dark:text-cyan-300"}`,children:m})," / ",ef]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map(v=>{const y=Ki.includes(v.name);return a.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold text-lg w-24 truncate text-slate-800 dark:text-slate-100",title:v.name,children:v.name}),!y&&a.jsx("button",{onClick:()=>N(v.name),className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 p-1",children:a.jsx(fi,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>w(v.name,-1),disabled:v.score<=(y?1:0),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 disabled:opacity-30 disabled:hover:bg-slate-200 dark:disabled:hover:bg-slate-700 text-slate-700 dark:text-white transition-colors",children:a.jsx(fs,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xl font-bold w-6 text-center text-slate-800 dark:text-white",children:v.score}),a.jsx("button",{onClick:()=>w(v.name,1),disabled:m<=0,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 disabled:opacity-30 disabled:hover:bg-slate-200 dark:disabled:hover:bg-slate-700 text-slate-700 dark:text-white transition-colors",children:a.jsx(Ye,{className:"w-4 h-4"})})]})]},v.name)})}),a.jsxs("div",{className:"mt-6 flex gap-2 relative",ref:f,children:[a.jsxs("div",{className:"flex-grow relative",children:[a.jsx("input",{type:"text",value:r,onChange:x,onFocus:()=>{r.trim()&&c(!0)},placeholder:"   (   )",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-3 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 pl-10"}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wt,{className:"h-5 w-5 text-slate-400"})}),u&&s.length>0&&a.jsx("ul",{className:"absolute z-50 w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded-lg mt-1 max-h-60 overflow-y-auto shadow-xl custom-scrollbar",children:s.map((v,y)=>a.jsxs("li",{onClick:()=>C(v),className:"px-4 py-2 hover:bg-cyan-100 dark:hover:bg-cyan-600/30 hover:text-cyan-700 dark:hover:text-cyan-300 cursor-pointer text-sm text-slate-700 dark:text-slate-300 transition-colors border-b border-slate-100 dark:border-slate-700 last:border-none flex items-center justify-between group",children:[a.jsx("span",{children:v}),a.jsx(Ye,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]},y))})]}),a.jsx("button",{onClick:()=>C(),className:"px-6 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 font-bold transition-colors shadow-lg whitespace-nowrap",children:""})]})]})},YC=e=>{switch(e){case"":case"":case" ":return"bg-red-100 dark:bg-red-500/10 text-red-700 dark:text-red-300 border-red-200 dark:border-red-500/20";case"":case"":return"bg-blue-100 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-500/20";case"":case"":return"bg-emerald-100 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-500/20";case"":case"":return"bg-sky-100 dark:bg-sky-500/10 text-sky-700 dark:text-sky-300 border-sky-200 dark:border-sky-500/20";case"":case"":return"bg-violet-100 dark:bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-500/20";case" ":return"bg-teal-100 dark:bg-teal-500/10 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-500/20";case" ":return"bg-orange-100 dark:bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-500/20";case"":return"bg-slate-200 dark:bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-300 dark:border-slate-500/20";case"":case"":return"bg-amber-100 dark:bg-amber-500/10 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-500/20";case"":case" ":return"bg-indigo-100 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-500/20";case"":case"":return"bg-yellow-100 dark:bg-yellow-500/5 text-yellow-800 dark:text-yellow-300/80 border-yellow-200 dark:border-yellow-500/10";case"":return"bg-rose-100 dark:bg-rose-500/10 text-rose-700 dark:text-rose-300 border-rose-200 dark:border-rose-500/20";case"":return"bg-fuchsia-100 dark:bg-fuchsia-500/10 text-fuchsia-700 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-500/20";case"":return"bg-purple-100 dark:bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-500/20";case" ":return"bg-fuchsia-100 dark:bg-fuchsia-500/20 text-fuchsia-700 dark:text-fuchsia-300 border-fuchsia-200 dark:border-fuchsia-500/40 shadow-sm";case"":return"bg-teal-100 dark:bg-teal-500/20 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-500/40 shadow-sm";case"":return"bg-lime-100 dark:bg-lime-500/10 text-lime-700 dark:text-lime-300 border-lime-200 dark:border-lime-500/20";default:return"bg-slate-100 dark:bg-slate-700/30 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600/30"}},qs=(e,t,n,r)=>{var i,u,c,f;const o=new Set,s=(e+" "+t).toLowerCase();if(r==="ability"){s.includes(" ")?o.add(" "):s.includes(" ")?o.add(" "):(s.includes("")||s.includes(""))&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/|||/)&&o.add(""),s.match(/||||/)&&o.add(""),s.match(/ |||/)&&o.add(""),s.includes("")&&o.add(""),s.includes("1")||s.includes("")?o.add(""):(s.includes("")||s.includes("")||s.includes(""))&&o.add("");const p=s.match(/(\d+)\s*/);p&&parseInt(p[1],10)>=3&&o.add("");const m=(i=n.find(x=>x.label.includes("")))==null?void 0:i.value;m&&m!=="-"&&m!==""?o.add(""):(m==="-"||m==="")&&o.add("");const h=(u=n.find(x=>x.label.includes("")))==null?void 0:u.value;h&&h!=="-"&&String(h).length>2&&(o.add(""),["","","","","",""].some(x=>String(h).includes(x))&&o.add(""))}else{s.match(/|||||||||||/)?o.add(" "):s.match(/||||||||||||/)?o.add(" "):s.match(//)&&o.add(""),s.match(/|||/)?o.add(""):s.match(/||||||/)?o.add(""):o.add("");const p=parseInt(String((c=n.find(h=>h.label.includes("")))==null?void 0:c.value).replace(/[^0-9]/g,"")||"0");p>=5?o.add(""):p<=1&&o.add("");const m=(f=n.find(h=>h.label.includes("")))==null?void 0:f.value;m&&m!=="-"&&o.add("")}return o.has("")&&o.has("")&&o.delete(""),Array.from(o)},K0=({isOpen:e,onClose:t,onSave:n,type:r,initialData:o,referenceData:s,rulebookContext:i})=>{const[u,c]=b.useState({name:"",description:"",condition:"-",charge:"-",durability:"-",volume:0}),[f,p]=b.useState([]),[m,h]=b.useState(null),[x,w]=b.useState(!1),[C,N]=b.useState(""),v=b.useMemo(()=>{const k=new Set;return s.forEach(T=>{(T.description||"").split(/[.,]\s*/).forEach(_=>{_.trim().length>2&&k.add(_.trim())}),r==="ability"&&"condition"in T&&(T.condition||"").split(/[.,]\s*/).forEach(M=>{M.trim().length>2&&M.trim()!=="-"&&k.add(M.trim())})}),Array.from(k)},[s,r]);if(b.useEffect(()=>{e&&o?c({name:o.name,description:o.description,condition:o.condition||"-",charge:o.charge||"-",durability:o.durability||"-",volume:o.volume||0}):e&&c({name:"",description:"",condition:"-",charge:"-",durability:"-",volume:0}),p([]),w(!1),N("")},[e,o]),b.useEffect(()=>{if(!m){p([]);return}const k=String(u[m]);if(!k||k==="-"){p([]);return}const T=k.trim().split(" "),A=T[T.length-1];if(A.length<2){p([]);return}const _=v.filter(M=>M.toLowerCase().includes(A.toLowerCase())&&M.toLowerCase()!==A.toLowerCase()&&M!==k).slice(0,8);p(_)},[u,m,v]),!e)return null;const y=k=>{k.preventDefault(),n(r==="ability"?{name:u.name,description:u.description,condition:u.condition,charge:u.charge,isCreation:!0}:{name:u.name,description:u.description,durability:u.durability,volume:Number(u.volume),isCreation:!0}),t()},g=k=>{m&&c(T=>{const A=String(T[m]);if(!A||A==="-")return{...T,[m]:k};const _=A.trim().split(" "),M=_[_.length-1];return k.includes(M)?{...T,[m]:_.slice(0,-1).join(" ")+(_.length>1?" ":"")+k}:{...T,[m]:A+" "+k}})},E=k=>{c({name:k.name,description:k.description,condition:k.condition||"-",charge:k.charge||"-",durability:k.durability||"-",volume:k.volume||0}),w(!1)},S=s.filter(k=>k.name.toLowerCase().includes(C.toLowerCase()));return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast overflow-y-auto",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50 flex-shrink-0",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5 text-fuchsia-600 dark:text-fuchsia-400"}),r==="ability"?o?"  ":"  ":o?" ":" "]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row flex-grow overflow-hidden",children:[a.jsxs("div",{className:"p-6 overflow-y-auto flex-1 md:border-r border-slate-200 dark:border-slate-700 custom-scrollbar",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("button",{type:"button",onClick:()=>w(!x),className:"w-full py-2 px-3 rounded-lg border border-dashed border-slate-400 dark:border-slate-600 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:border-fuchsia-500 hover:bg-slate-100 dark:hover:bg-slate-700/50 transition-all text-sm flex items-center justify-center gap-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx(He,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"w-4 h-4"}),a.jsx("span",{children:"    ()"})]})}),x&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-100 dark:bg-slate-900/80 rounded-lg border border-slate-200 dark:border-slate-600 animate-fade-in-fast",children:[a.jsx("input",{type:"text",placeholder:" ...",value:C,onChange:k=>N(k.target.value),className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded p-2 text-sm text-slate-900 dark:text-white mb-2 focus:outline-none focus:border-fuchsia-500",autoFocus:!0}),a.jsx("div",{className:"max-h-40 overflow-y-auto custom-scrollbar space-y-1",children:S.length>0?S.map((k,T)=>a.jsxs("button",{type:"button",onClick:()=>E(k),className:"w-full text-left px-3 py-2 rounded hover:bg-fuchsia-100 dark:hover:bg-fuchsia-900/30 text-slate-700 dark:text-slate-300 hover:text-fuchsia-700 dark:hover:text-fuchsia-300 text-xs transition-colors flex justify-between",children:[a.jsx("span",{className:"font-bold",children:k.name}),a.jsx("span",{className:"opacity-50 truncate max-w-[150px]",children:k.description})]},T)):a.jsx("p",{className:"text-center text-slate-500 text-xs py-2",children:"  ."})})]})]}),a.jsxs("form",{id:"creationForm",onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{required:!0,type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.name,onChange:k=>c({...u,name:k.target.value}),placeholder:r==="ability"?": , ":":  ,  ",onFocus:()=>h("name")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("textarea",{required:!0,rows:5,className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.description,onChange:k=>c({...u,description:k.target.value}),placeholder:"   . : 4  ...",onFocus:()=>h("description")})]}),r==="ability"?a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.condition,onChange:k=>c({...u,condition:k.target.value}),onFocus:()=>h("condition")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.charge,onChange:k=>c({...u,charge:k.target.value}),onFocus:()=>h("charge")})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"text",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.durability,onChange:k=>c({...u,durability:k.target.value}),onFocus:()=>h("durability")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:""}),a.jsx("input",{type:"number",className:"w-full bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded p-2 text-slate-900 dark:text-white focus:ring-2 focus:ring-fuchsia-500 focus:outline-none",value:u.volume,onChange:k=>c({...u,volume:parseInt(k.target.value)||0}),onFocus:()=>h("volume")})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsx("button",{type:"submit",className:"w-full py-2 bg-fuchsia-600 hover:bg-fuchsia-500 text-white rounded-lg font-bold shadow-lg shadow-fuchsia-500/20 transition-colors",children:o?"  ":"  "}),a.jsx("p",{className:"text-xs text-center text-slate-500 mt-2",children:"    ."})]})]})]}),a.jsxs("div",{className:"w-full md:w-1/3 bg-slate-50 dark:bg-slate-900/30 p-4 border-t md:border-t-0 md:border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-500 dark:text-slate-400",children:[a.jsx(Ve,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold",children:"  "})]}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:f.length>0?a.jsx("ul",{className:"space-y-2",children:f.map((k,T)=>a.jsxs("li",{className:"group flex items-start gap-2",children:[a.jsx("button",{type:"button",onClick:()=>g(k),className:"mt-0.5 p-1 rounded-md bg-slate-200 dark:bg-slate-700 hover:bg-fuchsia-600 text-slate-500 dark:text-slate-300 hover:text-white transition-colors flex-shrink-0",title:"",children:a.jsx(Ye,{className:"w-3 h-3"})}),a.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 group-hover:text-fuchsia-600 dark:group-hover:text-fuchsia-200 transition-colors break-words text-left cursor-pointer",onClick:()=>g(k),children:k})]},T))}):a.jsxs("div",{className:"text-center text-slate-500 dark:text-slate-600 text-xs py-10 px-4",children:[a.jsxs("p",{className:"mb-2",children:["   ",a.jsx("br",{}),"   ."]}),a.jsx("p",{children:': "4"    "4  "'})]})})]})]})]})})},Y0=({isOpen:e,onClose:t,onConfirm:n,message:r})=>e?a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-md overflow-hidden flex flex-col p-6 text-center",children:[a.jsx("p",{className:"text-slate-800 dark:text-white text-lg mb-6 whitespace-pre-wrap",children:r}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:n,className:"px-6 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold transition-colors",children:""}),a.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-800 dark:text-white rounded-lg font-bold transition-colors",children:""})]})]})}):null,Q0=({title:e,description:t,stats:n,type:r,isSelected:o,onSelect:s,disabled:i,tags:u,onEdit:c,onDelete:f,onExport:p})=>{const h=r==="item"?{base:"bg-white dark:bg-slate-900/60 border-slate-200 dark:border-slate-700",selected:"bg-indigo-50 dark:bg-indigo-900/40 border-indigo-500 shadow-[0_0_15px_rgba(99,102,241,0.3)] ring-1 ring-indigo-500",hover:"hover:border-indigo-400/50 hover:bg-indigo-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(129,140,248,0.15)]",titleColor:"text-indigo-600 dark:text-indigo-400 group-hover:text-indigo-500 dark:group-hover:text-indigo-300",iconBg:"bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400",footerBorder:"border-indigo-100 dark:border-indigo-500/20 text-indigo-700 dark:text-indigo-200/80",icon:a.jsx(_r,{className:"w-5 h-5"})}:{base:"bg-white dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",selected:"bg-cyan-50 dark:bg-cyan-900/40 border-cyan-500 shadow-[0_0_15px_rgba(34,211,238,0.3)] ring-1 ring-cyan-500",hover:"hover:border-cyan-500/50 hover:bg-cyan-50 dark:hover:bg-slate-800 hover:shadow-[0_4px_20px_rgba(34,211,238,0.15)]",titleColor:"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-500 dark:group-hover:text-cyan-300",iconBg:"bg-cyan-100 dark:bg-cyan-500/10 text-cyan-500 dark:text-cyan-400",footerBorder:"border-cyan-100 dark:border-cyan-500/20 text-slate-500 dark:text-slate-400",icon:a.jsx(Qt,{className:"w-5 h-5"})},x=`p-5 rounded-xl border transition-all duration-300 group cursor-pointer h-full flex flex-col relative ${i?"opacity-40 cursor-not-allowed grayscale":""} ${o?h.selected:i?h.base:`${h.base} ${h.hover}`}`;return a.jsxs("div",{onClick:()=>!i&&s(),className:x,children:[a.jsxs("div",{className:"flex justify-between items-start gap-3 mb-2",children:[a.jsx("h4",{className:`font-bold text-lg leading-tight ${h.titleColor}`,children:e}),a.jsx("div",{className:`p-1.5 rounded-md ${h.iconBg} ${o?"opacity-100":"opacity-60 group-hover:opacity-100"} transition-opacity flex-shrink-0`,children:h.icon})]}),u&&u.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:u.map(w=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${YC(w)}`,children:w},w))}),a.jsx("div",{className:"flex-grow",children:a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:t})}),a.jsx("div",{className:`mt-4 pt-3 border-t text-xs ${h.footerBorder}`,children:a.jsx("div",{className:"flex justify-between items-center gap-2",children:n.map((w,C)=>a.jsxs("span",{children:[a.jsxs("strong",{children:[w.label,":"]})," ",w.value]},C))})}),(c||p||f)&&a.jsxs("div",{className:"mt-3 flex gap-2 justify-end border-t border-slate-200 dark:border-slate-700/50 pt-2",children:[f&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),f()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-red-100 dark:bg-red-900/40 hover:bg-red-200 dark:hover:bg-red-800/40 border border-red-200 dark:border-red-700/50 rounded text-red-600 dark:text-red-300 transition-colors mr-auto",children:[a.jsx(fi,{className:"w-3 h-3"}),""]}),c&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),c()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 rounded text-slate-700 dark:text-slate-300 transition-colors",children:[a.jsx(iu,{className:"w-3 h-3"}),""]}),p&&a.jsxs("button",{onClick:w=>{w.stopPropagation(),p()},className:"flex items-center gap-1 text-xs px-2 py-1.5 bg-fuchsia-100 dark:bg-fuchsia-900/40 hover:bg-fuchsia-200 dark:hover:bg-fuchsia-800/40 border border-fuchsia-200 dark:border-fuchsia-700/50 rounded text-fuchsia-600 dark:text-fuchsia-300 transition-colors",children:[a.jsx(pC,{className:"w-3 h-3"}),""]})]})]})},QC=({selected:e,updateEnhancements:t,availableAbilities:n,onCreate:r,onUpdate:o,onDelete:s,userCreatedList:i,showMessage:u,rulebookContext:c})=>{const[f,p]=b.useState(""),[m,h]=b.useState([]),[x,w]=b.useState(!1),[C,N]=b.useState(!1),[v,y]=b.useState(null),[g,E]=b.useState(null),S=b.useCallback(I=>{const Y=[{label:"",value:I.condition},{label:"",value:I.charge}],z=qs(I.name,I.description,Y,"ability");return i.some(R=>R.name===I.name)?z.push(" "):I.isCreation&&z.push(""),z},[i]),k=b.useMemo(()=>{const I=new Set;return n.forEach(Y=>{!x&&Y.isCreation&&!e.some(z=>z.name===Y.name)||S(Y).forEach(z=>I.add(z))}),Array.from(I).sort()},[n,S,x,e]),T=b.useMemo(()=>n.filter(I=>{if(!x&&I.isCreation&&!e.some(R=>R.name===I.name))return!1;const Y=S(I),z=(I.name+I.description).toLowerCase().includes(f.toLowerCase()),ie=m.length===0||m.every(R=>Y.includes(R));return z&&ie}),[n,f,m,S,x,e]),A=b.useCallback(I=>{e.some(z=>z.name===I.name)?t(e.filter(z=>z.name!==I.name)):e.length<Yi&&t([...e,I])},[e,t]),_=I=>{h(Y=>Y.includes(I)?Y.filter(z=>z!==I):[...Y,I])},M=I=>{y(I),N(!0)},L=I=>{E(I)},G=()=>{g&&(s(g),E(null))},B=I=>{W0(I,"ability",u)};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-6 h-6"}),"3.   "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:[" : ",a.jsx("span",{className:"font-bold text-2xl text-cyan-600 dark:text-cyan-300",children:e.length})," / ",Yi]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wt,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-900/50 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:" ,  ...",value:f,onChange:I=>p(I.target.value)}),f&&a.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>h([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${m.length===0?"bg-cyan-600 text-white border-cyan-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:""}),k.map(I=>{const Y=m.includes(I);return a.jsx("button",{onClick:()=>_(I),className:`px-3 py-1 text-xs rounded-full border transition-all ${Y?"bg-cyan-100 dark:bg-cyan-900/60 text-cyan-700 dark:text-cyan-200 border-cyan-500 shadow-[0_0_10px_rgba(34,211,238,0.2)]":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:I},I)})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>w(!x),className:`px-4 py-1.5 rounded-full text-xs font-semibold border transition-all flex-shrink-0 ${x?"bg-fuchsia-100 dark:bg-fuchsia-600/20 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500 shadow-[0_0_10px_rgba(232,121,249,0.3)]":"bg-slate-200 dark:bg-slate-800 text-slate-500 border-slate-300 dark:border-slate-600 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`,children:x?"   ":"   "}),a.jsxs("button",{onClick:()=>{y(null),N(!0)},className:"px-3 py-1.5 rounded-full text-xs font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 transition-colors shadow-lg flex items-center gap-1",children:[a.jsx(Ye,{className:"w-3 h-3"})," "]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:T.length>0?T.map(I=>{const Y=[{label:"",value:I.condition},{label:"",value:I.charge}],z=qs(I.name,I.description,Y,"ability"),ie=i.some(R=>R===I);return ie?z.push(" "):I.isCreation&&z.push(""),a.jsx(Q0,{type:"ability",title:I.name,description:I.description,stats:Y,tags:z,isSelected:e.some(R=>R.name===I.name),onSelect:()=>A(I),disabled:e.length>=Yi&&!e.some(R=>R.name===I.name),onEdit:ie?()=>M(I):void 0,onDelete:ie?()=>L(I):void 0,onExport:ie?()=>B(I):void 0},I.name)}):a.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500 flex flex-col items-center gap-2",children:[a.jsx(Wt,{className:"w-8 h-8 opacity-50"}),a.jsx("span",{children:"  ."})]})}),a.jsx(K0,{isOpen:C,onClose:()=>N(!1),onSave:I=>{v?o(v,I):r(I),w(!0)},type:"ability",initialData:v,referenceData:n,rulebookContext:c}),a.jsx(Y0,{isOpen:!!g,onClose:()=>E(null),onConfirm:G,message:`   
 ?`})]})},XC=({selected:e,updateItems:t,availableItems:n,onCreate:r,onUpdate:o,onDelete:s,userCreatedList:i,showMessage:u,rulebookContext:c})=>{const[f,p]=b.useState(""),[m,h]=b.useState([]),[x,w]=b.useState(!1),[C,N]=b.useState(!1),[v,y]=b.useState(null),[g,E]=b.useState(null),S=b.useCallback(I=>{const Y=[{label:"",value:I.durability},{label:"",value:I.volume}],z=qs(I.name,I.description,Y,"item");return i.some(R=>R.name===I.name)?z.push(" "):I.isCreation&&z.push(""),z},[i]),k=b.useMemo(()=>{const I=new Set;return n.forEach(Y=>{!x&&Y.isCreation&&!e.some(z=>z.name===Y.name)||S(Y).forEach(z=>I.add(z))}),Array.from(I).sort()},[n,S,x,e]),T=b.useMemo(()=>n.filter(I=>{if(!x&&I.isCreation&&!e.some(R=>R.name===I.name))return!1;const Y=S(I),z=(I.name+I.description).toLowerCase().includes(f.toLowerCase()),ie=m.length===0||m.every(R=>Y.includes(R));return z&&ie}),[n,f,m,S,x,e]),A=b.useCallback(I=>{e.some(z=>z.name===I.name)?t(e.filter(z=>z.name!==I.name)):e.length<Qi&&t([...e,I])},[e,t]),_=I=>{h(Y=>Y.includes(I)?Y.filter(z=>z!==I):[...Y,I])},M=I=>{y(I),N(!0)},L=I=>{E(I)},G=()=>{g&&(s(g),E(null))},B=I=>{W0(I,"item",u)};return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(_r,{className:"w-6 h-6"}),"4.  "]}),a.jsx("div",{className:"bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 p-4 rounded-xl mb-6 text-center shadow-sm",children:a.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-200",children:[" : ",a.jsx("span",{className:"font-bold text-2xl text-cyan-600 dark:text-cyan-300",children:e.length})," / ",Qi]})}),a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wt,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg leading-5 bg-white dark:bg-slate-900/50 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 sm:text-sm transition-colors",placeholder:" ,  ...",value:f,onChange:I=>p(I.target.value)}),f&&a.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>h([]),className:`px-3 py-1 text-xs rounded-full border transition-all ${m.length===0?"bg-indigo-600 text-white border-indigo-500":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:""}),k.map(I=>{const Y=m.includes(I);return a.jsx("button",{onClick:()=>_(I),className:`px-3 py-1 text-xs rounded-full border transition-all ${Y?"bg-indigo-100 dark:bg-indigo-900/60 text-indigo-700 dark:text-indigo-200 border-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.2)]":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-300 dark:border-slate-700 hover:border-slate-400 dark:hover:border-slate-500"}`,children:I},I)})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>w(!x),className:`px-4 py-1.5 rounded-full text-xs font-semibold border transition-all flex-shrink-0 ${x?"bg-fuchsia-100 dark:bg-fuchsia-600/20 text-fuchsia-600 dark:text-fuchsia-300 border-fuchsia-500 shadow-[0_0_10px_rgba(232,121,249,0.3)]":"bg-slate-200 dark:bg-slate-800 text-slate-500 border-slate-300 dark:border-slate-600 hover:text-slate-700 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-slate-500"}`,children:x?"   ":"   "}),a.jsxs("button",{onClick:()=>{y(null),N(!0)},className:"px-3 py-1.5 rounded-full text-xs font-bold bg-fuchsia-600 text-white hover:bg-fuchsia-500 transition-colors shadow-lg flex items-center gap-1",children:[a.jsx(Ye,{className:"w-3 h-3"})," "]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:T.length>0?T.map(I=>{const Y=[{label:"",value:I.durability},{label:"",value:I.volume}],z=qs(I.name,I.description,Y,"item"),ie=i.some(R=>R.name===I.name);return ie?z.push(" "):I.isCreation&&z.push(""),a.jsx(Q0,{type:"item",title:I.name,description:I.description,stats:Y,tags:z,isSelected:e.some(R=>R.name===I.name),onSelect:()=>A(I),disabled:e.length>=Qi&&!e.some(R=>R.name===I.name),onEdit:ie?()=>M(I):void 0,onDelete:ie?()=>L(I):void 0,onExport:ie?()=>B(I):void 0},I.name)}):a.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500 flex flex-col items-center gap-2",children:[a.jsx(Wt,{className:"w-8 h-8 opacity-50"}),a.jsx("span",{children:"  ."})]})}),a.jsx(K0,{isOpen:C,onClose:()=>N(!1),onSave:I=>{v?o(v,I):r(I),w(!0)},type:"item",initialData:v,referenceData:n,rulebookContext:c}),a.jsx(Y0,{isOpen:!!g,onClose:()=>E(null),onConfirm:G,message:`   
 ?`})]})},ZC=({data:e,onDelete:t,onEdit:n})=>a.jsxs("div",{className:"bg-white dark:bg-slate-900/60 border border-indigo-200 dark:border-indigo-500/30 rounded-xl p-4 shadow-lg relative group h-full flex flex-col hover:border-indigo-400 dark:hover:border-indigo-500/60 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg leading-tight",children:e.name}),a.jsx("div",{className:"p-1.5 rounded-md bg-indigo-100 dark:bg-indigo-500/10 text-indigo-500 dark:text-indigo-400",children:a.jsx(Tn,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-wrap flex-grow",children:e.description}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:r=>{r.stopPropagation(),n()},className:"p-1.5 bg-slate-200 dark:bg-slate-700/80 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white transition-colors",title:"",children:a.jsx(iu,{className:"w-4 h-4"})}),a.jsx("button",{onClick:r=>{r.stopPropagation(),t()},className:"p-1.5 bg-red-100 dark:bg-red-900/80 text-red-600 dark:text-red-300 rounded-lg hover:bg-red-200 dark:hover:bg-red-800 transition-colors",title:"",children:a.jsx(fi,{className:"w-4 h-4"})})]})]}),eS=({isOpen:e,onClose:t,availableEffects:n,onAdd:r,initialData:o,rulebookContext:s})=>{const[i,u]=b.useState("create"),[c,f]=b.useState(""),[p,m]=b.useState(""),[h,x]=b.useState("");b.useEffect(()=>{e&&(o?(f(o.name),m(o.description),u("create")):(f(""),m(""),u("create")),x(""))},[e,o]);const w=()=>{c&&p&&(r({name:c,description:p}),t())},C=n.filter(N=>(N.name+N.description).toLowerCase().includes(h.toLowerCase()));return e?a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fade-in-fast",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600 shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(Tn,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"}),o?"  ":"  "]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:a.jsx(He,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:[a.jsx("button",{onClick:()=>u("create"),className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="create"?"bg-indigo-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:" "}),a.jsx("button",{onClick:()=>u("select"),className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="select"?"bg-indigo-600 text-white":"text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:" "})]}),a.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 bg-white dark:bg-slate-800",children:i==="create"?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:" "}),a.jsx("input",{type:"text",value:c,onChange:N=>f(N.target.value),placeholder:":  , , ",className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:" "}),a.jsx("textarea",{value:p,onChange:N=>m(N.target.value),placeholder:":      1 .",rows:4,className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),a.jsx("button",{onClick:w,disabled:!c.trim()||!p.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all mt-4",children:o?"":""})]}):a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"relative mb-4",children:[a.jsx(Wt,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"...",value:h,onChange:N=>x(N.target.value),className:"w-full pl-9 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 overflow-y-auto pr-1 pb-1",children:C.length>0?C.map((N,v)=>a.jsxs("button",{onClick:()=>{r(N),t()},className:"text-left bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-700 p-3 rounded-lg transition-all group",children:[a.jsx("div",{className:"font-bold text-indigo-600 dark:text-indigo-300 group-hover:text-indigo-700 dark:group-hover:text-indigo-200 mb-1",children:N.name}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-300 line-clamp-2",children:N.description})]},v)):a.jsx("div",{className:"col-span-full text-center py-8 text-slate-500",children:"  ."})})]})})]})}):null},tS=({status:e,setStatus:t,availableEffects:n,rulebookContext:r})=>{const[o,s]=b.useState(!1),[i,u]=b.useState(null),c=b.useMemo(()=>e?e.split(`
`).map(x=>{const w=x.trim();if(!w)return null;const C=w.match(/^\[(.*?)\] (.*)$/);return C?{name:C[1],description:C[2]}:{name:"",description:w}}).filter(x=>x!==null):[],[e]),f=x=>{const w=x.map(C=>`[${C.name}] ${C.description}`).join(`
`);t(w)},p=x=>{if(i!==null){const w=[...c];w[i]=x,f(w)}else f([...c,x]);u(null)},m=x=>{const w=[...c];w.splice(x,1),f(w)},h=x=>{u(x),s(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-2 flex items-center gap-2",children:[a.jsx(Tn,{className:"w-6 h-6"}),"5.   ()"]}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm",children:"      ."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map((x,w)=>a.jsx("div",{className:"animate-fade-in-fast h-full",children:a.jsx(ZC,{data:x,onDelete:()=>m(w),onEdit:()=>h(w)})},w)),a.jsxs("button",{onClick:()=>{u(null),s(!0)},className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-6 flex flex-col items-center justify-center text-slate-400 dark:text-slate-500 hover:text-indigo-500 dark:hover:text-indigo-400 hover:border-indigo-400 dark:hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-all group min-h-[160px]",children:[a.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 group-hover:bg-indigo-100 dark:group-hover:bg-indigo-500/20 rounded-full p-3 mb-2 transition-colors",children:a.jsx(Ye,{className:"w-8 h-8 group-hover:scale-110 transition-transform"})}),a.jsx("span",{className:"text-sm font-bold",children:" "})]})]})]}),a.jsx(eS,{isOpen:o,onClose:()=>s(!1),availableEffects:n,onAdd:p,initialData:i!==null?c[i]:null,rulebookContext:r})]})},nS=({backstory:e,setBackstory:t,memoList:n,setMemoList:r})=>{const[o,s]=b.useState({type:"bond",title:"",content:""}),[i,u]=b.useState(!1),[c,f]=b.useState(!1),p=()=>{!o.title.trim()||!o.content.trim()||(r(h=>[...h,{...o,id:Date.now().toString()}]),s({type:"bond",title:"",content:""}),u(!1))},m=h=>{r(x=>x.filter(w=>w.id!==h))};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 mb-4 flex items-center gap-2",children:[a.jsx(mi,{className:"w-6 h-6"}),"6.  "]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`transition-all duration-300 ease-in-out ${c?"h-96":"h-32"}`,children:a.jsx(O0,{label:"  ",value:e,onChange:h=>t(h.target.value),rows:c?15:4,placeholder:"        .",className:"h-full"})}),a.jsx("button",{onClick:()=>f(!c),className:"absolute bottom-[-1.5rem] left-1/2 -translate-x-1/2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-800 dark:hover:text-white rounded-full p-1 border border-slate-300 dark:border-slate-600 shadow-md transition-colors z-10",title:c?"":"",children:a.jsx(ci,{className:`w-5 h-5 transition-transform duration-300 ${c?"rotate-90":"-rotate-90"}`})})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[a.jsxs("h3",{className:"text-xl font-bold text-fuchsia-600 dark:text-fuchsia-400 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-6 h-6"}),"  "]}),a.jsx("button",{onClick:()=>u(!i),className:`
                            px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all
                            ${i?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300":"bg-fuchsia-600 text-white hover:bg-fuchsia-500 shadow-lg shadow-fuchsia-500/20"}
                        `,children:i?a.jsxs(a.Fragment,{children:[a.jsx(He,{className:"w-4 h-4"}),""]}):a.jsxs(a.Fragment,{children:[a.jsx(Ye,{className:"w-4 h-4"}),""]})})]}),i&&a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-fuchsia-500/30 mb-6 animate-slide-in-bottom",children:[a.jsxs("div",{className:"flex gap-4 mb-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"memoType",checked:o.type==="bond",onChange:()=>s(h=>({...h,type:"bond"})),className:"accent-fuchsia-500"}),a.jsx("span",{className:o.type==="bond"?"text-slate-900 dark:text-white font-bold":"text-slate-500 dark:text-slate-400",children:""})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"memoType",checked:o.type==="memory",onChange:()=>s(h=>({...h,type:"memory"})),className:"accent-fuchsia-500"}),a.jsx("span",{className:o.type==="memory"?"text-slate-900 dark:text-white font-bold":"text-slate-500 dark:text-slate-400",children:""})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",value:o.title,onChange:h=>s(x=>({...x,title:h.target.value})),placeholder:" (:  , )",className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500"}),a.jsx("textarea",{value:o.content,onChange:h=>s(x=>({...x,content:h.target.value})),placeholder:" .",rows:3,className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg p-2.5 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500 resize-none"}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:p,disabled:!o.title.trim()||!o.content.trim(),className:"px-6 py-2 bg-fuchsia-600 text-white rounded-lg font-bold hover:bg-fuchsia-500 disabled:opacity-50 transition-colors",children:""})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.length>0?n.map(h=>a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative group hover:border-fuchsia-500/50 transition-colors shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`text-xs px-2 py-0.5 rounded border ${h.type==="bond"?"bg-pink-100 dark:bg-pink-500/10 text-pink-600 dark:text-pink-400 border-pink-200 dark:border-pink-500/20":"bg-purple-100 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-200 dark:border-purple-500/20"}`,children:h.type==="bond"?"":""}),a.jsx("button",{onClick:()=>m(h.id),className:"text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(He,{className:"w-4 h-4"})})]}),a.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-1",children:h.title}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:h.content})]},h.id)):a.jsx("div",{className:"col-span-full py-8 text-center border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl",children:a.jsx("p",{className:"text-slate-500",children:"    ."})})})]})]})},rS=({character:e,handleReset:t,handleModify:n})=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-cyan-600 dark:text-cyan-400 flex items-center gap-2 self-start sm:self-center",children:[a.jsx(Ve,{className:"w-6 h-6"}),"7.   "]}),a.jsxs("div",{className:"flex gap-2 self-end sm:self-center",children:[a.jsxs("button",{onClick:n,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 hover:text-slate-900 dark:hover:text-white transition-colors text-sm font-bold flex items-center gap-2",children:[a.jsx(iu,{className:"w-4 h-4"}),"  "]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-red-100 dark:bg-red-600/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-600/50 rounded-lg hover:bg-red-200 dark:hover:bg-red-600 hover:text-red-700 dark:hover:text-white transition-colors text-sm font-bold flex items-center gap-2",children:[a.jsx(fi,{className:"w-4 h-4"}),"   "]})]})]}),a.jsx(BC,{character:e})]}),oS=({customAbilities:e,customItems:t,rulebookPages:n})=>{const[r,o]=b.useState(1),s=7,[i,u]=b.useState(Zc),[c,f]=b.useState({genderAge:"",appearance:"",commentary:""}),[p,m]=b.useState([]),[h,x]=b.useState([]),[w,C]=b.useState([]),N=b.useMemo(()=>n?zC(n):[],[n]),[v,y]=b.useState({isOpen:!1,message:"",type:"info"}),g=b.useCallback((P,U="info")=>{y({isOpen:!0,message:P,type:U})},[]),E=()=>y(P=>({...P,isOpen:!1}));b.useEffect(()=>{const P=JSON.parse(localStorage.getItem("user_created_abilities")||"[]"),U=JSON.parse(localStorage.getItem("user_created_items")||"[]");x(P),C(U)},[]),b.useEffect(()=>{const P=[];c.genderAge&&P.push(c.genderAge),c.appearance&&P.push(c.appearance),c.commentary&&P.push(`"${c.commentary}"`),u(U=>({...U,profile:{...U.profile,info:P.join(`

`)}}))},[c]),b.useEffect(()=>{const P=p.filter($=>$.type==="bond").map($=>`[${$.title}] ${$.content}`).join(`

`),U=p.filter($=>$.type==="memory").map($=>`[${$.title}] ${$.content}`).join(`

`);u($=>({...$,profile:{...$.profile,bonds:P,memories:U}}))},[p]);const S=b.useMemo(()=>!n||n.length===0?"":n.map(P=>P.title).join(", "),[n]),k=b.useCallback(P=>{x(U=>{const $=[...U,P];return Wn($,"ability"),$}),g(`${P.name}  !  .`,"info")},[g]),T=(P,U)=>{const $=h.map(J=>J===P?U:J);x($),Wn($,"ability");const j=i.abilities.enhancements.findIndex(J=>J===P);if(j!==-1){const J=[...i.abilities.enhancements];J[j]=U,u(he=>({...he,abilities:{...he.abilities,enhancements:J}}))}},A=P=>{const U=h.filter(j=>j!==P);if(x(U),Wn(U,"ability"),i.abilities.enhancements.some(j=>j===P)){const j=i.abilities.enhancements.filter(J=>J!==P);u(J=>({...J,abilities:{...J.abilities,enhancements:j}}))}},_=b.useCallback(P=>{C(U=>{const $=[...U,P];return Wn($,"item"),$}),g(`${P.name}  !  .`,"info")},[g]),M=(P,U)=>{const $=w.map(J=>J===P?U:J);C($),Wn($,"item");const j=i.inventory.items.findIndex(J=>J===P);if(j!==-1){const J=[...i.inventory.items];J[j]=U,u(he=>({...he,inventory:{...he.inventory,items:J}}))}},L=P=>{const U=w.filter(j=>j!==P);if(C(U),Wn(U,"item"),i.inventory.items.some(j=>j===P)){const j=i.inventory.items.filter(J=>J!==P);u(J=>({...J,inventory:{...J.inventory,items:j}}))}},G=b.useMemo(()=>{const P=e&&e.length>0?e:VC;return[...h,...P]},[e,h]),B=b.useMemo(()=>{const P=t&&t.length>0?t:GC;return[...w,...P]},[t,w]),I=()=>o(P=>Math.min(P+1,s)),Y=()=>o(P=>Math.max(P-1,1)),z=()=>{u(Zc),f({genderAge:"",appearance:"",commentary:""}),m([]),o(1)},ie=(P,U)=>{u($=>({...$,profile:{...$.profile,[P]:U}}))},R=P=>{u(U=>({...U,abilities:{...U.abilities,skills:P}}))},V=P=>{u(U=>({...U,abilities:{...U.abilities,enhancements:P}}))},q=P=>{u(U=>({...U,inventory:{...U.inventory,items:P}}))},ae=b.useCallback(P=>{k(P)},[k]),se=b.useCallback(P=>{_(P)},[_]),Se=b.useCallback(P=>{const U=`[${P.name}] ${P.description}`;u($=>({...$,abilities:{...$.abilities,status:$.abilities.status?`${$.abilities.status}
${U}`:U}})),g(`${P.name}  !`,"info")},[g]),we=()=>{switch(r){case 1:return a.jsx(OC,{name:i.profile.name,setName:P=>ie("name",P),image:i.profile.image,setImage:P=>ie("image",P),extendedProfile:c,setExtendedProfile:f});case 2:return a.jsx(KC,{skills:i.abilities.skills,updateSkills:R,rulebookPages:n});case 3:return a.jsx(QC,{selected:i.abilities.enhancements,updateEnhancements:V,availableAbilities:G,onCreate:k,onUpdate:T,onDelete:A,userCreatedList:h,showMessage:g,rulebookContext:S});case 4:return a.jsx(XC,{selected:i.inventory.items,updateItems:q,availableItems:B,onCreate:_,onUpdate:M,onDelete:L,userCreatedList:w,showMessage:g,rulebookContext:S});case 5:return a.jsx(tS,{status:i.abilities.status,setStatus:P=>u(U=>({...U,abilities:{...U.abilities,status:P}})),availableEffects:N,rulebookContext:S});case 6:return a.jsx(nS,{backstory:i.profile.backstory,setBackstory:P=>ie("backstory",P),memoList:p,setMemoList:m});case 7:return a.jsx(rS,{character:i,handleReset:z,handleModify:()=>o(1)});default:return null}},Re=[" ","","","","","",""];return a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 sm:p-8 rounded-lg shadow-xl max-w-7xl mx-auto relative transition-colors",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white text-center mb-2",children:" "}),a.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-6",children:"   ."}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"relative pt-1",children:a.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-slate-200 dark:bg-slate-700",children:a.jsx("div",{style:{width:`${r/s*100}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-cyan-600 dark:bg-cyan-500 transition-all duration-500"})})}),a.jsx("div",{className:"flex justify-between text-xs px-1",children:Re.map((P,U)=>{const $=U+1,j=r===$,J=r>$;return a.jsx("button",{onClick:()=>o($),className:`transition-colors duration-200 font-medium ${j?"text-cyan-600 dark:text-cyan-400 font-bold":J?"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-400"}`,children:P},$)})})]}),a.jsx("div",{className:"min-h-[50vh]",children:we()}),a.jsxs("div",{className:"flex justify-between mt-8 border-t border-slate-200 dark:border-slate-700 pt-6",children:[a.jsxs("button",{onClick:Y,disabled:r===1,className:"flex items-center gap-2 px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-white rounded-md disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-medium",children:[a.jsx(ci,{className:"w-5 h-5"}),"  "]}),r<s&&a.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-8 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-500 transition-colors font-bold shadow-lg shadow-cyan-500/20",children:[r===5?" ( )":" "," ",a.jsx(sn,{className:"w-5 h-5"})]})]}),a.jsx(WC,{isOpen:v.isOpen,onClose:E,message:v.message,type:v.type}),a.jsx(JC,{onAddAbility:ae,onAddItem:se,onAddStatus:Se,forcedType:r===3?"ability":r===4?"item":r===5?"status":void 0,rulebookContext:S})]})},sS=({pages:e})=>{const[t,n]=b.useState(!1),[r,o]=b.useState([]),[s,i]=b.useState(""),[u,c]=b.useState(!1),f=b.useRef(null),p=b.useRef(null),m=b.useRef(null),[h,x]=b.useState(!1);b.useEffect(()=>{r.length===0&&o([{id:"init",role:"model",text:'!      "(Archi)".      ?'}])},[r.length]),b.useEffect(()=>{if(e.length===0)return;const y=S=>{let k="";return S.text&&(k+=S.text+" "),S.runs&&(k+=S.runs.map(T=>T.text).join("")+" "),S.rows&&(k+=S.rows.map(T=>T.map(A=>typeof A=="string"?A:y(A)).join(" | ")).join(`
`)+`
`),k};let g=` ' ' TRPG   :

`;e.forEach(S=>{g+=`--- ${S.title} ---
`,S.content.forEach(k=>{g+=y(k)+`
`}),g+=`
`});const E=new Er({apiKey:{}.API_KEY});f.current=E.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:` ' ' TRPG      '(Archi)'. 
                     [ ]     .
                
                []
                1.     '' . (: "  !")
                2.    ",      ."  .
                3.         .
                4.       .
                5.      **  **   .
                6.     (: , !).
                
                [ ]
                  ,    :
                -     ,   \`[[REF:]]\`  . (  )
                -       ,   \`[[Q:]]\`  . ( 3)

                [ ]
                ${g}`}}),x(!0)},[e]);const w=()=>{var y;(y=p.current)==null||y.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{if(t){if(u){w();return}const y=r[r.length-1];y&&y.role==="model"?setTimeout(()=>{var g;(g=m.current)==null||g.scrollIntoView({behavior:"smooth",block:"start"})},100):w()}},[r,t,u]);const C=async(y,g)=>{y==null||y.preventDefault();const E=g||s;if(!E.trim()||!f.current||!h)return;const S={id:Date.now().toString(),role:"user",text:E};o(k=>[...k,S]),i(""),c(!0);try{const T=(await f.current.sendMessage({message:S.text})).text||"     .",A=[],_=[];let M=T;const L=/\[\[REF:(.*?)\]\]/g;let G;for(;(G=L.exec(T))!==null;)A.push(G[1].trim());M=M.replace(L,"");const B=/\[\[Q:(.*?)\]\]/g;for(;(G=B.exec(T))!==null;)_.push(G[1].trim());M=M.replace(B,"");const I={id:(Date.now()+1).toString(),role:"model",text:M.trim(),relatedRefs:A,suggestedQuestions:_};o(Y=>[...Y,I])}catch(k){console.error("Chat Error:",k),o(T=>[...T,{id:(Date.now()+1).toString(),role:"model",text:",    .    ."}])}finally{c(!1)}},N=y=>{const g=new CustomEvent("rulebook-navigate",{detail:{title:y}});window.dispatchEvent(g)},v=(y,g)=>y.split(/(\*\*(?:.|\n)*?\*\*)/g).map((S,k)=>S.startsWith("**")&&S.endsWith("**")&&S.length>=4?a.jsx("strong",{className:g==="model"?"font-bold text-cyan-300":"font-bold text-white",children:S.slice(2,-2)},k):a.jsx("span",{children:S},k));return a.jsxs("div",{className:"fixed bottom-4 left-4 z-50 font-sans",children:[a.jsxs("div",{className:`
                    absolute bottom-16 left-0 w-[320px] sm:w-[380px] 
                    bg-slate-800/95 backdrop-blur-md border border-slate-700 shadow-2xl rounded-2xl overflow-hidden
                    transition-all duration-300 ease-out origin-bottom-left flex flex-col
                    ${t?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 pointer-events-none"}
                `,style:{maxHeight:"calc(100vh - 120px)"},children:[a.jsxs("div",{className:"bg-slate-900/80 p-3 flex justify-between items-center border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-cyan-600 p-1.5 rounded-full",children:a.jsx(Hs,{className:"w-4 h-4 text-white"})}),a.jsx("h3",{className:"text-white font-bold text-sm",children:" (AI )"})]}),a.jsx("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-white transition-colors",children:a.jsx(He,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5 min-h-[300px] custom-scrollbar bg-slate-900/30",children:[r.map((y,g)=>{var S,k;const E=y.role==="model"&&g===r.length-1;return a.jsxs("div",{ref:E?m:null,className:`flex flex-col ${y.role==="user"?"items-end":"items-start"}`,children:[a.jsx("div",{className:`
                                        max-w-[85%] px-4 py-2.5 rounded-2xl text-sm leading-relaxed whitespace-pre-wrap
                                        ${y.role==="user"?"bg-cyan-600 text-white rounded-br-none shadow-md":"bg-slate-700 text-slate-200 rounded-bl-none shadow-sm border border-slate-600"}
                                    `,children:v(y.text,y.role)}),y.role==="model"&&a.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 max-w-[90%]",children:[(S=y.relatedRefs)==null?void 0:S.map((T,A)=>a.jsxs("button",{onClick:()=>N(T),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-slate-700 border border-slate-600 text-cyan-300 text-xs font-medium hover:bg-slate-600 hover:border-cyan-500 hover:text-white transition-all shadow-sm",children:[a.jsx(Tn,{className:"w-3 h-3"}),T]},`ref-${A}`)),(k=y.suggestedQuestions)==null?void 0:k.map((T,A)=>a.jsxs("button",{onClick:()=>C(void 0,T),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-cyan-900/40 border border-cyan-700/50 text-cyan-200 text-xs font-medium hover:bg-cyan-800/60 hover:border-cyan-500 hover:text-white transition-all shadow-sm",children:[a.jsx(Ve,{className:"w-3 h-3"}),T]},`q-${A}`))]})]},y.id)}),u&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-slate-700 rounded-2xl rounded-bl-none px-4 py-3 border border-slate-600",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{ref:p})]}),a.jsxs("form",{onSubmit:y=>C(y),className:"p-3 bg-slate-800 border-t border-slate-700 flex gap-2",children:[a.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),placeholder:"  ...",disabled:!h||u,className:"flex-1 bg-slate-900 text-white text-sm rounded-full px-4 py-2 border border-slate-600 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 disabled:opacity-50"}),a.jsx("button",{type:"submit",disabled:!s.trim()||!h||u,className:"bg-cyan-600 text-white p-2 rounded-full hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg flex-shrink-0",children:a.jsx(mi,{className:"w-5 h-5"})})]})]}),a.jsx("button",{onClick:()=>n(!t),className:`
                    w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all duration-300
                    ${t?"bg-slate-700 text-white rotate-90":"bg-cyan-600 text-white hover:bg-cyan-500 hover:scale-110"}
                `,"aria-label":"AI   ",children:t?a.jsx(He,{className:"w-6 h-6"}):a.jsx(Hs,{className:"w-7 h-7"})})]})},iS=()=>{const[e,t]=b.useState("rulebook"),[n,r]=b.useState("dark"),[o,s]=b.useState(null),[i,u]=b.useState(!1),[c,f]=b.useState(null),[p,m]=b.useState(""),[h,x]=b.useState(!0),[w,C]=b.useState(0),[N,v]=b.useState(""),[y,g]=b.useState(""),[E,S]=b.useState(""),[k,T]=b.useState(""),[A,_]=b.useState(""),[M,L]=b.useState(""),[G,B]=b.useState(""),[I,Y]=b.useState(""),[z,ie]=b.useState(!1),[R,V]=b.useState(!1),[q,ae]=b.useState({abilities:[],items:[]}),[se,Se]=b.useState([]);b.useEffect(()=>{const te=localStorage.getItem("theme");te?(r(te),te==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")):(r("dark"),document.documentElement.classList.add("dark"))},[]);const we=()=>{const te=n==="dark"?"light":"dark";r(te),localStorage.setItem("theme",te),te==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Re=b.useCallback((te,fe)=>{ae({abilities:te,items:fe})},[]),P=b.useCallback(te=>{Se(te)},[]);b.useEffect(()=>{const te=localStorage.getItem("lastUpdatedTime");te&&s(new Date(te))},[]);const U=b.useCallback((te,fe)=>{if(x(!1),te==="success"){const me=new Date;s(me),localStorage.setItem("lastUpdatedTime",me.toISOString()),u(!1),f(null)}else u(!0),fe?f(fe.message):c||f("   ")},[c]),$=b.useCallback(te=>{v(te)},[]),j=b.useCallback(te=>{g(te)},[]),J=b.useCallback(te=>{S(te)},[]);b.useEffect(()=>{const te={"AKfycbylvOe0ltS1u558pgWjj_cHVtFBvKvecmasv1KEH0Sbc-V0fU2u7-xU02AmfyGw364A":69,AKfycbzYZ7Byxr6qOBL2Emi7J3cWQfHzHnvkQiYp1r2x28SAWXMEitOyq0p29gg9flM_UF9L:70,"AKfycbyOS8KsUDB375DtsvUUz1GbhJagxERlVJRRv6Svde8K_fGxdOTPVNF-9oOFNeQgfwMo":72,"AKfycbylCR1uPC9vjA3Xw62932vd1Hndwysqglw9-ktIPSC2iF8zRB6qYOrBOZGFvq6D5hva":80,"AKfycbyPo0la3Zfa_EuNzmO6caEhuQXvqIsRiaecZhgnbxhZxDh_GDQk-fpeoLznvDHnZIth":81,"AKfycbzOtoczmXQAMBFESt2Tp33JWfR45D2_-VGA11BROUWVdUX0Z4Au7M3qZ-eDJ5lKdgnB":83,"AKfycby_XDKGTcB-NLSgxQpdCmHi8WrrL4IEyFRXf9SHSFAsHXJAijhFRLO4gd0QCc0RNuOWIw":3,"AKfycbwyg-Iut_KAr-w7BrcywoDCsZOLUG3gNG_XPFsGBlLEi1UxCpHlzn_2eSlwwYRj7_U4bw":4,AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY:13,"AKfycbxJU07yzY5Jxja2jOy1i1H8HAnO-ETyA_8RYcj3jNAnwhONyCybHKBU0myIEu4VErh7":2},fe="AKfycbxO7iBITNhac8P_7qfTSFtpRix_LGMuOoBPrZNgCboaRnpQoM0Eu0p1X7u8jk8PoqjY",me="AKfycbzbvAajmyWMO4dLe2OeukVbJ9wtOVi_-W2Zadc4qMLlbgyaQ-yTDKTPnPT57Y7DmcVB";let Te={};try{const D=localStorage.getItem("deployVersions");D&&(Te=JSON.parse(D))}catch(D){console.error("Failed to parse deploy versions from localStorage",D),localStorage.removeItem("deployVersions")}const Ie=(D,W)=>{if(!D)return;const Z=D.slice(-6);let K="";if(te[D])K=`v${te[D]}(${Z})`;else{let ee;if(Te[D])ee=Te[D];else{const re=Object.values(Te).reduce((X,oe)=>Math.max(X,oe),0)+1;Te[D]=re,ee=re;try{localStorage.setItem("deployVersions",JSON.stringify(Te))}catch(X){console.error("Failed to save deploy versions to localStorage",X)}}K=`v${ee}(${Z})`}W==="main"?T(K):W==="addon"?_(K):W==="second"?L(K):W==="export"?B(K):W==="aiDatabase"&&Y(K)};N&&Ie(N,"main"),y&&Ie(y,"addon"),E&&Ie(E,"second"),Ie(fe,"export"),Ie(me,"aiDatabase")},[N,y,E]),b.useEffect(()=>{if(!o){m("");return}const te=()=>{const Te=Math.floor((new Date().getTime()-o.getTime())/1e3);if(Te<5)m("  ");else if(Te<60)m(`${Te}  `);else{const Ie=Math.floor(Te/60);m(`${Ie}  `)}};te();const fe=setInterval(te,5e3);return()=>clearInterval(fe)},[o]);const he=()=>{x(!0),u(!1),f(null),ie(!1),C(te=>te+1)},st=()=>{ie(!0),x(!0),f(" "),C(te=>te+1)},it=te=>`px-6 py-2 rounded-md text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:ring-cyan-500 ${te?"bg-cyan-600 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600"}`,lt=()=>{let te;return h?te=a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:" ..."}):i?te=a.jsx("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",title:c||"",children:a.jsxs("span",{children:["    : ",a.jsx("span",{className:"font-mono text-xs",children:c})]})}):o&&(te=a.jsx("span",{className:"text-green-600 dark:text-green-400",children:p})),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[te,a.jsx("button",{onClick:he,className:"p-1 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors","aria-label":" ",children:a.jsx(ta,{className:"w-4 h-4"})})]})};return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 font-sans transition-colors duration-300",children:[a.jsx("header",{className:"bg-white dark:bg-slate-800 shadow-lg sticky top-0 z-50 transition-colors duration-300",children:a.jsx("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors duration-300",children:"Akasha Simpli TRPG Helper"}),lt()]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:we,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-yellow-300 dark:hover:bg-slate-600 transition-colors",title:n==="dark"?" ":" ",children:n==="dark"?a.jsx(cC,{className:"w-5 h-5"}):a.jsx(fC,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>t("rulebook"),className:it(e==="rulebook"),children:" "}),a.jsx("button",{onClick:()=>t("creator"),className:it(e==="creator"),children:" "})]})]})})}),a.jsxs("main",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[a.jsx("div",{className:e==="rulebook"?"block":"hidden",children:a.jsx(UC,{onUpdate:U,refreshTrigger:w,setDeployVersion:$,setAddonDeployVersion:j,setSecondDeployVersion:J,forceOffline:z,onDataLoaded:Re,onPagesLoaded:P,navigateToCreator:()=>t("creator")})}),e==="creator"&&a.jsx(oS,{customAbilities:q.abilities,customItems:q.items,rulebookPages:se})]}),a.jsx(sS,{pages:se}),a.jsxs("footer",{className:"text-center p-4 text-slate-500 text-sm space-y-2",children:[a.jsx("p",{children:"Created for Akasha Simpli TRPG. All rules content provided by KingCrab."}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[k&&a.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600",children:["Deploy Ver: ",k]}),M&&a.jsx("button",{onClick:()=>V(!R),className:"p-0.5 text-slate-400 hover:text-slate-600 dark:text-slate-600 dark:hover:text-slate-400 focus:outline-none transition-colors","aria-label":"Toggle Addon Version",children:a.jsx(sn,{className:`w-3 h-3 transition-transform duration-200 ${R?"rotate-90":""}`})})]}),R&&M&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Addon Deploy Ver: ",M]}),R&&G&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Export Creation Ver: ",G]}),R&&I&&a.jsxs("p",{className:"font-mono text-xs text-slate-400 dark:text-slate-600 animate-fade-in-fast",children:["Ai Data Base Ver: ",I]}),a.jsx("button",{onClick:st,className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-600 dark:hover:text-slate-400 underline decoration-dotted transition-colors",children:"  "})]})]})]})};class lS extends ps.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){var t,n;return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 p-4 font-sans",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-10 h-10 text-red-600 dark:text-red-400",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),a.jsx("h1",{className:"text-2xl font-bold mb-2 text-slate-900 dark:text-white",children:" "}),a.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm",children:["     .",a.jsx("br",{}),"   ."]}),a.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 rounded-lg p-4 mb-6 text-left overflow-auto max-h-40 border border-slate-200 dark:border-slate-700",children:[a.jsx("p",{className:"text-xs font-mono text-slate-500 mb-1 font-bold tracking-wider",children:"ERROR CODE"}),a.jsxs("p",{className:"text-sm font-mono text-red-600 dark:text-red-400 break-all font-medium leading-relaxed",children:[((t=this.state.error)==null?void 0:t.name)||"CRITICAL_FAILURE",": ",((n=this.state.error)==null?void 0:n.message)||"Unknown error occurred during rendering."]})]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-3 px-4 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-bold transition-colors shadow-lg shadow-cyan-500/20 flex items-center justify-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.695v-2.695A8.25 8.25 0 005.166 6.166L2 9.348"})}),""]})]})}):this.props.children}}const X0=document.getElementById("root");if(!X0)throw new Error("Could not find root element to mount to");const aS=Zi.createRoot(X0);aS.render(a.jsx(ps.StrictMode,{children:a.jsx(lS,{children:a.jsx(iS,{})})}));
